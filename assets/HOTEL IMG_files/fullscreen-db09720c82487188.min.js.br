"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="56dc0da1-578d-533b-b8dc-8a2aabbc3498")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8840],{15344:(e,t,n)=>{n.d(t,{CU:()=>o,Yg:()=>i,lI:()=>a,yu:()=>r});let a="mfa_required--ctaButton--PSKI-",o="mfa_required--learnMoreLink--17Yuc",r="mfa_required--switchAccountLink--BAgB-",i="mfa_required--secondaryText--eCIsl"},759822:(e,t,n)=>{n.d(t,{u4:()=>d,$$:()=>u});var a=n(411855),o=n(629019),r=n.n(o);let i="lazy_input--lazyInput--uH0Ln";class l extends a.PureComponent{constructor(e){super(e),this.procrastinating=!1,this.procrastinationTimer=null,this.onLazyUpdate=()=>{this.procrastinating=!1,this.updateIfNotLazy(this.state.requestedValue)},this.onChange=e=>{this.procrastinate(),this.setState({value:e.target.value}),this.props.onChange(e)},this.state={value:this.props.value}}componentDidMount(){this.props.autoFocus&&this.props.innerRef?.current&&this.props.innerRef.current.focus()}UNSAFE_componentWillReceiveProps(e){this.updateIfNotLazy(e.value)}componentWillUnmount(){this.procrastinationTimer&&(clearTimeout(this.procrastinationTimer),this.procrastinating=!1)}updateIfNotLazy(e){this.procrastinating?this.setState({requestedValue:e}):this.state.value!==e&&this.setState({value:e,requestedValue:void 0})}procrastinate(){this.procrastinating=!0,this.procrastinationTimer&&clearTimeout(this.procrastinationTimer),this.procrastinationTimer=setTimeout(this.onLazyUpdate,this.props.delay)}getProps(){let e={...this.props};return delete e.delay,delete e.innerRef,e.value=this.state.value,e.onChange&&(e.onChange=this.onChange),null==e.value&&(e.value=void 0),e.className?e.className=`${e.className} ${i}`:e.className=i,e}render(){return a.createElement("input",{...this.getProps(),ref:this.props.innerRef,dir:"auto"})}}l.displayName="LazyInput",l.defaultProps={type:"text",delay:1e3};let s=a.forwardRef((e,t)=>a.createElement(l,{...e,innerRef:t}));var c=n(3453);class d extends a.Component{constructor(){super(...arguments),this.onKeyDown=e=>{this.props.onKeyDown&&this.props.onKeyDown(e),27===e.keyCode&&e.target.blur()},this.onClick=e=>{this.props.onClick&&this.props.onClick(e)}}render(){let e={...this.props};e.className=`${this.props.defaultClass} ${this.props.className||""}`;let t=this.props.dataTestId;return delete e.defaultClass,delete e.dataTestId,this.props.onClick&&(e.onClick=this.onClick),a.createElement("button",{onKeyDown:this.onKeyDown,...e,"data-testid":t},this.props.children)}}d.displayName="ButtonBase";class u extends a.Component{render(){let{fullWidth:e,...t}=this.props;return a.createElement(d,{defaultClass:r()(c.xZ,e&&c.Ij),...t})}}u.displayName="ButtonPrimary";class p extends a.Component{render(){let e=this.props;return a.createElement(d,{defaultClass:c.HM,type:"button",...e})}}p.displayName="ButtonSecondary",a.forwardRef(function({className:e,...t},n){return a.createElement(s,{className:r()(c._Z,e),...t,ref:n})});class m extends a.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{9===e.keyCode&&this.setState({showFocus:!0})},this.documentMouseDown=()=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.classNameForInput=()=>{let e=`${c.kv} ${this.props.className||""}`;return this.state.showFocus&&(e+=` ${c.hP}`),e},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}render(){let e=this.props.classOverride||this.classNameForInput(),t={...this.props,className:e};return delete t.classOverride,a.createElement("input",{type:"checkbox",onFocus:this.onFocus,...t})}}m.displayName="Checkbox"},840083:(e,t,n)=>{n.d(t,{G:()=>m,Q:()=>p});var a=n(411855),o=n(629019),r=n.n(o),i=n(966712),l=n(374626),s=n(192437),c=n(259927),d=n(977230),u=n(726732),p=(e=>(e.FILE_BROWSER="file_browser",e))(p||{});function m({entryPoint:e}){return a.createElement(s.tH,{boundaryKey:"figment-debugger",fallback:a.createElement("div",null)},a.createElement(_,{entryPoint:e}))}function _({entryPoint:e}){let[t,n]=(0,l.fp)(d.eE);return(0,a.useEffect)(()=>{n(!!(0,u.wh)())},[]),t&&(0,i.kc)().figment_debugger?a.createElement("div",{className:r()("file_browser"===e?"figment_debugger--fileBrowserContainer--KNMPr figment_debugger--container--4qsMx":"figment_debugger--container--4qsMx",c.s4,c.Dm)},a.createElement(g,null)):null}function g(){let[e,t]=(0,l.fp)(d.a4),[n,o]=(0,a.useState)([]),r=(0,a.useRef)(null),i=r.current&&r.current.value.length>0,s=i?n:e;return a.createElement("div",{className:"figment_debugger--mainWrapper--Tty8t",tabIndex:0,"data-fullscreen-intercept":!0},a.createElement(E,null,a.createElement("input",{ref:r,placeholder:"\u{1F50E} Event name",className:"figment_debugger--searchBar--uECKp",onInput:t=>{let n=t.target.value.toLowerCase();n.length<3&&o([]),o(e.filter(e=>e.requestJson.event.toLowerCase().includes(n)))}})),a.createElement(E,null,a.createElement("button",{onClick:()=>{t("clear")}},"[clear]")),i&&a.createElement(E,null,"Showing "+s.length+" of "+e.length+" most recent events"),s.map(e=>a.createElement(f,{key:e.requestJson.figment_debugger_uuid,req:e})))}function E(e){return a.createElement("div",{className:"figment_debugger--sectionWrapper--Zr0-r","data-fullscreen-intercept":!0},e.children)}function f({req:e}){let[t,n]=(0,a.useState)(!1),[o,r]=(0,a.useState)(!1),i=e.requestJson,l=(0,a.useMemo)(()=>t&&null!=i.properties?Object.entries(i.properties).map(([e,t])=>a.createElement("div",{key:e},e,": ",JSON.stringify(t))):[],[i,t]);return a.createElement(a.Fragment,null,a.createElement("div",{className:"figment_debugger--logrow--dxWpW",tabIndex:0,role:"button",onClick:()=>{n(!t),r(!1)},"data-fullscreen-intercept":!0},a.createElement("span",null,t?"\uFF0D":"\uFF0B"),"\xa0",a.createElement("span",null,e.networkState===d.tM.SUCCESS?"\u{1F49A}":e.networkState===d.tM.FAILURE?"\u{1F494}":"\u{1F9E1}"),"\xa0",a.createElement("span",{className:"figment_debugger--timestamp--BaHtN"},i.sentAt.slice(11,16)),"\xa0",i.event),t&&a.createElement("div",{className:"figment_debugger--propertiesWrapper--hZGnc"},a.createElement("div",{className:"figment_debugger--propertiesButtonsRow--ZL1rH"},a.createElement("button",{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e.requestJson.properties)),r(!0)}},"[",o?"copied":"copy","]")),l))}},931468:(e,t,n)=>{n.r(t),n.d(t,{FullscreenPageView:()=>ru,LibraryAssetsReduxSyncing:()=>rm,onFullscreenViewRender:()=>r_}),n(137592);var a=n(411855),o=n(188507),r=n(603625),i=n(243742),l=n(627776),s=n(966712),c=n(498750),d=n(563706);let u=new Set(["-","="]),p=new Set(["-","=","f","o","p","r","s"]);function m(e){if(!p.has(e.key))return;let t=d.Ay.mac?c.xH.META:c.xH.CONTROL;(0,c.vN)(e,t)?e.preventDefault():u.has(e.key)&&(t|=c.xH.SHIFT,(0,c.vN)(e,t)&&e.preventDefault())}var _=n(794272),g=n(99380),E=n(218881),f=n(286640),y=n(179479),h=n(69961),v=n(414441),b=n(863359),N=n(201547);function I(e){return(0,v.TR)()?a.createElement(T,{...e}):a.createElement(a.Fragment,null,e.children)}function T({name:e,trackingEnabled:t,alsoTrack:n,children:o}){let r=(0,y.F)(n),i=(0,v.U2)({name:e,trackingEnabled:t,alsoTrackRef:r,isNamespace:!0,autoTrackable:!1}),{trackablePath:l,error:s}=i,c=(0,v.MF)(()=>(0,v.ET)(l)),d=(0,h.o3)(h.nt.trackableDebug),u=(0,v.MF)(()=>(0,v.R8)({componentName:"TrackableNamespace",name:e,error:s,alsoTrackedProperties:c()}));return o=(0,N.C)({children:o,isDebugMode:d,name:e,color:s?"red":"purple",depth:l.length,getTooltipText:u}),a.createElement(b.f.Provider,{value:i},o)}var A=n(192437),x=n(256975),w=n(609219),S=n(293017),P=n(986270),C=n(931828),O=n(696097),k=n(672517),D=n(720289),L=n(126049),M=n(776250),R=n(809831),V=n(988022),K=n(661843),F=n(611720),U=n(516398),B=n(288536),W=n(692609),H=n(297666),z=n(517333),G=n(529529),Y=n(325680),q=n(756085),J=n(886119),X=n(697551),$=n(384792);let j=(0,H.s)((e,t)=>{z.eD.updateFullscreenMenuState({pluginMenuData:e,widgetMenuData:t})},250);var Z=n(497306),Q=n(488983),ee=n(669178),et=n(694687),en=n(860178),ea=n(309798),eo=n(940596),er=n(588169),ei=n(939863),el=n(392592),es=n(22774),ec=n(356390),ed=n(852800),eu=n(272042),ep=n(245389);let em="keyboard-layout-preference",e_=(e,t,n)=>{t&&e(es.FU({tab:t})),n||ec.Y5.triggerAction("toggle-keyboard-shortcuts")},eg=(e,t,n,a)=>{e(C.b({keyboard_manual_supported_bell:!0})),e(el.F.enqueue({message:(0,ei.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_available",{newKeyboardName:(0,er.As)(t)}),button:{text:(0,ei.t)("keyboard_settings.update_keyboard_shortcuts"),action:()=>e_(e,"layout",a)},type:em,onDismiss:()=>{e(C.b({keyboard_manual_supported_bell:!0}))},timeoutOverride:2e4})),(0,er.CZ)({layout:n,detectedLayout:t,eventName:"manual_supported_keyboard_detected"})},eE=(e,t,n)=>{e(C.b({keyboard_generic_supported_first_bell:!0})),e(el.F.enqueue({message:(0,ei.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_now_available",{newKeyboardName:(0,er.As)(t)}),button:{text:(0,ei.t)("keyboard_settings.enable_and_show_new_shortcuts"),action:()=>{e_(e,"layout",n),(0,er.rd)({layout:t})}},type:em,onDismiss:()=>{}})),(0,er.CZ)({layout:ed.aTn.UNKNOWN,detectedLayout:t,eventName:"first_generic_detected_supported_keyboard"})};async function ef(e,t){if(!z.eD)return null;let n=await z.eD.getKeyboardLayout();if(!n)return null;if(t===n)return n;let a=(0,ep.pB)(n),o=(0,er.v7)();return a===o||e(a,o,n,null!=t),n}async function ey(e,t){if(!window.isSecureContext||window.top!==window.self)return null;let n=navigator.keyboard;if(!n||!n.getLayoutMap)return null;let a=await n.getLayoutMap();if(function(e,t){for(let[n,a]of e)if(t?.get(n)!==a)return!1;return!0}(a,t))return t;let{layoutJSON:o,detectedLayoutsWeb:r}=(0,eu.$$)(a),i=(0,eu.ZN)({layoutJSON:o,detectedLayouts:r,desktopLayout:null}),l=(0,er.v7)();return i===l||e(i,l,JSON.stringify(o),null!=t),a}var eh=n(974105),ev=n(27703),eb=n(336599),eN=n(388094),eI=n(58032),eT=n(743415),eA=n(705129),ex=n(933342),ew=n(535257),eS=n(691205),eP=n(830524),eC=n(331626),eO=n(239671),ek=n(294662),eD=n(143678),eL=n(280945),eM=n(88823),eR=n.n(eM),eV=n(646240),eK=(e=>(e.NOT_INITIALIZED="not_initialized",e.ACTIVE_FIRST_TIME="active_first_time",e.ACTIVE_AFTER_IDLE="active_after_idle",e.IDLE_DUE_TO_INACTIVITY="idle_due_to_inactivity",e.IDLE_DUE_TO_TAB_SWITCH="idle_due_to_tab_switch",e))(eK||{}),eF=n(38580),eU=n(529928);let eB=(0,eF.eU)(eK.NOT_INITIALIZED),eW=(0,eU.bt)(e=>({state:e,fileKey:e.openFile?.key})),eH=[eK.ACTIVE_AFTER_IDLE,eK.ACTIVE_FIRST_TIME],ez=(0,eF.eU)(null,(e,t,n)=>{let{state:a,fileKey:o}=e(eW),r=e(eB);if((r&&eH.includes(r)?"start":"end")!=(n&&eH.includes(n)?"start":"end")){let e="";switch(n){case eK.ACTIVE_AFTER_IDLE:case eK.ACTIVE_FIRST_TIME:e="active";break;case eK.IDLE_DUE_TO_INACTIVITY:case eK.IDLE_DUE_TO_TAB_SWITCH:e="inactive";break;default:e="non-initialized"}(0,V.ds)("active_time_spent_event",o,a,{currentState:e,activeState:n},{forwardToDatadog:!0,batchRequest:!1})}t(eB,n)}),eG=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];var eY=n(915440),eq=n(279453),eJ=n(374626),eX=n(515823),e$=n(629019),ej=n.n(e$),eZ=n(168198),eQ=n(762638),e0=n(565872),e1=n(759822),e2=n(929018),e3=n(737947),e4=n(761870),e6=n(195847),e5=n(332473),e7=n(322611);function e8(e){let t=(0,o.wA)(),n=(0,o.d4)(e=>e.auth);return(0,a.useEffect)(()=>{t(e4.Ts({origin:"request_permissions_entry",redirectUrl:e3.Ay.location.pathname,formState:e6.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))},[t,e.accountPickerData]),a.createElement(e7.u,{useOriginalSrcFills:!0,onBackClick:()=>{n.formState===e6.qB.ACCOUNT_PICKER?e.closeAuth():t(e4.Ts({origin:"request_permissions_entry",redirectUrl:e3.Ay.location.pathname,formState:e6.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))}},a.createElement("div",{className:"request_permissions_app--authViewContainer--1XJOG"},a.createElement(e5.Ob,{id:"request-permissions-app",modal:!0,auth:n})))}var e9=n(15344);function te(e){let t=(0,o.wA)(),n=(0,o.d4)(e=>e.visualBell),r=(0,R.lg)(),i=e.pageType||r,l=((0,o.d4)(e=>e.authedUsers)??{}).byId??{},s=e.authedUsers??Object.values(l),[c,d]=(0,a.useState)(!1);return a.createElement(eZ.w,{pageType:i},c?a.createElement(e8,{accountPickerData:{authed_users:s,authed_user_access_reason:{},destination_name:(0,ei.t)("mfa_required_modal.account_switcher.destination")},closeAuth:()=>{d(!1)}}):a.createElement(e2.H,{org:e.org,switchAccountsSection:a.createElement(function(){let e=(0,en.iZ)();return e?a.createElement("div",{className:ej()(eQ.cx.mt24.$,e9.Yg)},(0,ei.tx)("mfa_required_modal.account_switcher.text",{userEmail:e.email,link:a.createElement(e1.u4,{defaultClass:e9.yu,onClick:()=>{d(!0)}},(0,ei.tx)("mfa_required_modal.account_switcher.switch_accounts"))})):null},null)}),a.createElement(e0.h,{dispatch:t,progress:{},visualBell:n}))}var tt=n(358145),tn=n(838e3),ta=n(662275),to=n(650769),tr=n(198371),ti=n(408405),tl=n(737499),ts=n(335682),tc=n(227338),td=n(977466),tu=n(799569),tp=n(67833),tm=n(321112);function t_(e){let{onDismiss:t,canUpgrade:n}=e;return a.createElement(k.fu,{name:"Workshop Expired File Banner"},a.createElement("div",{className:`workshop_expiry_footer--banner--ELf7G ${tm.yl}`},a.createElement("div",{className:"workshop_expiry_footer--bannerContent--w2Lw1"},a.createElement(tp.oS,{className:"workshop_expiry_footer--icon--mM-A8",type:tp.y1.WHITEBOARD}),a.createElement("div",{className:"workshop_expiry_footer--textContent--TN7cv"},a.createElement("span",{className:"workshop_expiry_footer--title--cmlOu text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},(0,ei.tx)("whiteboard.open_sessions.expiry_banner_title")),n&&a.createElement("span",{className:"workshop_expiry_footer--subtitle--jmRvc text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},(0,ei.tx)("whiteboard.open_sessions.expiry_banner_prompt")))),a.createElement(tu.Jn,{onClick:t,className:"workshop_expiry_footer--closeButton--L8lrO"})))}var tg=n(974898),tE=n(279080);function tf(e){let{onWorkshopExpired:t}=e;!function(){let e=(0,o.wA)(),t=(0,en.iZ)(),n=!t,r=(0,tr.nF)(),i=r.enabled,l=r.enabled?r.id:null,s=(0,o.d4)(e=>e.progressBarState.mode),c=(0,o.d4)(e=>e.openFile?.isTryFile),d=(0,a.useMemo)(()=>{if(!t||null==l)return!1;if(c)return!0;let e=(0,f.DN)();try{return e.get((0,tE.v6)(l)).includes(t.email)}catch(e){return!1}},[t,l,c]),u=t?.email;(0,a.useEffect)(()=>{u&&l&&c&&(0,tE.kO)(l,u)},[u,l,c]);let p=(0,ts.MY)();(0,a.useEffect)(()=>{if(i&&!(0,ti.T)(s)&&"loaded"===p.status){let t=localStorage.getItem((0,tc.K)(l));n?t?(0,to.QA)(t):e(ta.$O({type:tg.e})):p.data?.canEdit||d||e(ta.$O({type:tg.e}))}},[e,n,i,l,s,d,p]);let m=(0,o.d4)(e=>e.openFile?.key),_=(0,o.d4)(e=>e.openFile?.name);(0,a.useEffect)(()=>{if(i&&!(0,ti.T)(s)&&n&&c&&m&&_===(0,ei.t)("fullscreen.fullscreen_view_selector.untitled")){let t=localStorage.getItem((0,tc.K)(l));t&&e(tn.S({userName:t,file_key:m}))}},[i,s,l,n,c,m,_,e])}();let{showEditFileFooter:n,userCanSeeEditButton:r,dismissEditFileFooter:i}=function(e){let[t,n]=(0,a.useState)(!1),r=(0,o.wA)(),i=(0,en.iZ)(),l=(0,o.d4)(e=>e.openFile?.name),s=!i,c=(0,o.d4)(e=>e.openFile),{userCanEditFile:d,userCanSeeEditButton:u}=(0,a.useMemo)(()=>s?{userCanEditFile:!1,userCanSeeEditButton:!1}:c?{userCanEditFile:c.canEdit,userCanSeeEditButton:c.showEditButton}:{userCanEditFile:!1,userCanSeeEditButton:!1},[s,c]),p=(0,tl.Kx)(),m=(0,tr.nF)(),_=m.enabled,g=(0,tt.ZC)(_),E=m.enabled?m.until.valueOf():null,f=(0,a.useRef)(null),y=(0,a.useCallback)(()=>{if(!s){ed.h3O?.reconnect(!1),d||n(!0);return}r(e4.Ts({origin:"logged_out_footer",formState:e6.qB.SIGN_UP,redirectUrl:e3.Ay.location.pathname})),p?.updateFigJamTryExpiration?m.enabled&&m.until?p.updateFigJamTryExpiration(m.until):p.updateFigJamTryExpiration(new Date):r(ta.to({type:td.x,data:{headerText:(0,ei.t)("whiteboard.open_sessions.expiry_modal_title",{file_name:l||""}),subtitle:(0,ei.t)("whiteboard.open_sessions.expiry_modal_subtext"),disableHiding:!0}})),e()},[r,e,s,d,l,p,m]);return(0,a.useEffect)(()=>{if(_&&E){let e=Math.max(E-Date.now(),0);f.current=setTimeout(()=>{f.current=null,y()},e)}return()=>{f.current&&clearTimeout(f.current)}},[r,_,E,y]),(0,a.useEffect)(()=>{null!=g&&_!==g&&(_?ed.h3O?.reconnect(!1):(f.current&&clearTimeout(f.current),y()))},[r,_,g,y]),{showEditFileFooter:t,dismissEditFileFooter:(0,a.useCallback)(()=>{n(!1)},[]),userCanSeeEditButton:u}}(t);return n?a.createElement(t_,{onDismiss:i,canUpgrade:r}):null}var ty=n(717156),th=n(726864),tv=n(788811),tb=n(29680),tN=n(279145),tI=n(334290),tT=n(979686),tA=n(750252),tx=n(214673),tw=n(503316),tS=n(742482),tP=n(144119),tC=n(632544),tO=n(479296),tk=n(59779),tD=n(590843),tL=n(7860),tM=n(877723),tR=n(410424),tV=n(74021),tK=n(271245),tF=n(632430),tU=n(715879),tB=n(114716),tW=n(860707),tH=n(661060),tz=n(964881),tG=n(617453),tY=n(991820);function tq(){let e=!!(0,tz.hA)(),t=(0,tG.UX)(),n=(0,th.xn)();return a.createElement("div",{className:"positioned_design_toolbelt--root--INYO4",style:{marginBottom:n,marginRight:e?t:0}},a.createElement(tY.M,null))}var tJ=n(893606),tX=n(987850),t$=n(239737),tj=n(503457),tZ=n(554630);let tQ=new tZ.b({name:"sites_external",dependencies:[],exports:["atoms.ts","components.ts","figma_api.ts","fullscreen.tsx","hooks.ts","html_widget.ts","is_sites.ts","open_html_preview.ts","sites_fullscreen_view.ts","utils.ts"],friendFiles:[],routeHints:["sites_external"]}).createLazyComponent(()=>n.e(9293).then(n.bind(n,954539)).then(e=>e.SitesFullscreenViewInner),{loading:tj.H4.NONE,error:tj.H4.NONE,componentName:"LazySitesFullscreenViewInner"}),t0=new tZ.b({name:"slides",dependencies:[],exports:["ai/slides_ai_permissions.ts","atoms.ts","behaviors/slide_deck_add_behavior.ts","behaviors/slide_deck_reorder_row_behavior.ts","file_browser/new_slides_action.tsx","flapps/common/themed_flapp_config_data.ts","flapps/flapp_overlay.tsx","flapps/youtube/youtube_oembed.ts","hooks/experiments.ts","hooks/is_slides_hooks.ts","hooks/use_selected_slide.ts","hooks/use_selected_slide_like_nodes.ts","hooks/use_slide_like_node_ids.ts","is_slides.ts","left_panel/carousel.tsx","left_panel/generate_thumbnail.ts","left_panel/single_slide_view_utils.ts","left_panel/thumbnail_generator.tsx","onboarding/onboarding_keys.ts","onboarding/slides_ai_welcome.tsx","onboarding/slides_ten_release_announcement_overlay.tsx","presenter_view_app/audience_view_header.tsx","presenter_view_app/modal/slides_desktop_presenter_view_update.tsx","presenter_view_app/presenter_view_entry.tsx","properties_panel/color_controls/slides_color_picker.tsx","properties_panel/color_controls/slides_color_picker_context_menu.tsx","properties_panel/rewrite_controls/slides_rewrite_modal.tsx","properties_panel/rewrite_controls/slides_rewrite_text_utils.tsx","properties_panel/rewrite_controls/slides_rewrite_utils.tsx","properties_panel/slides_align_panel.tsx","properties_panel/slides_animation_panel.tsx","properties_panel/slides_border_panel.tsx","properties_panel/slides_corner_panel.tsx","properties_panel/slides_embeddable_prototype_panel.tsx","properties_panel/slides_fill_panel.tsx","properties_panel/slides_instance_panel.tsx","properties_panel/slides_interactive_widget_panel.tsx","properties_panel/slides_link_panel.tsx","properties_panel/slides_opacity_panel.tsx","properties_panel/slides_presentation_presets_entrypoint.tsx","properties_panel/slides_shadow_panel.tsx","properties_panel/slides_theme_panel.tsx","properties_panel/slides_type_panel.tsx","properties_panel/type_panel_controls/slides_text_style_actions.tsx","slide_presentation/audience_view.tsx","slide_presentation/audience_view_entry.tsx","slides_bindings.ts","slides_fullscreen_view.ts","slides_ui.ts","slides_ui.tsx","speaker_notes/speaker_notes_generate.ts","speaker_notes/speaker_notes_overlay.tsx","templates/modal/slides_template_theme_picker_modal.tsx","templates/template_atoms.ts","templates/template_hooks.ts","templates/template_publish.ts","templates/use_slides_template_publish.ts","themes/theme_atoms.ts","themes/theme_id_hooks.ts","themes/theme_utils.ts","toolbars/copy_presentation_link.tsx","toolbars/slide_view_toggle.tsx","toolbars/slides_browse_resource_modal.tsx","toolbars/slides_design_toggle.tsx","toolbars/slides_editor_toolbar.tsx","toolbars/slides_insert_embed_modal.tsx","toolbars/slides_insert_shape_modal.tsx","toolbars/slides_toolbelt.tsx","utils/slides_creation_helpers.ts","utils/slides_local_storage.ts","utils/slides_logging.ts","utils/slides_mode_toggle.ts","utils/slides_panel_helpers.ts","utils/slides_select_view_helpers.ts","utils/slides_selection.ts","utils/slides_tone_dial_menu.ts"],friendFiles:[],routeHints:["slides"]}).createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(8662),n.e(1876),n.e(5343),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(9682),n.e(6829)]).then(n.bind(n,779750)).then(e=>e.SlidesFullscreenViewInner),{componentName:"LazySlidesFullscreenViewInner",error:tj.H4.NONE,loading:tj.H4.NONE});var t1=n(809511),t2=n(830646);function t3(e){let t=e.search(/</),n=e.search(/>/);return e.substring(t,n+1)}var t4=n(170960),t6=n(100197),t5=n(338400),t7=n(399749),t8=n(152811),t9=n(363668),ne=n(512196),nt=n(690003),nn=n(933484),na=n(973801),no=n(319008),nr=n(165195),ni=n(286886),nl=n(359919),ns=n(696963),nc=n(477759),nd=n(304657),nu=n(10706),np=n(82963),nm=n(350521);function n_({children:e}){return a.createElement(nm.G.Provider,{value:{loggerEventName:"design_navigate"}},e)}var ng=n(413653),nE=n(46843),nf=n(425542);let ny=a.memo(({shouldShowDragAndDropBorder:e})=>{let t=(0,tb.p8)("isReadOnly"),n=(0,o.d4)(e=>e.progressBarState),r=(0,tb.p8)("loadingEmbeds"),i=(0,t6.ut)(ed.Ez5?.uiState().showCanvasSearch,!1),l=(0,t5.Lk)(),c=(0,a.useRef)(null),d=(0,o.d4)(e=>e.userFlags),u=!!(0,s.kc)().internal_only_debug_tools||!!d.has_cursor_bot_onboarding_v2,p=(0,o.d4)(e=>e.openFile),m=p?p.key:"",_=(0,o.d4)(e=>e.universalInsertModal),g=(0,o.wA)();return(0,tF.Gb)(m),(0,t4.W)(),!function(){let e=a.useRef(document.activeElement),t=(0,t2.j)("Focus changed"),n=a.useCallback(()=>{let n=document.activeElement;n!==e.current&&(t({previousActiveElement:t3(e.current?.outerHTML||""),newActiveElement:t3(n?.outerHTML||"")}),e.current=n)},[t]);a.useEffect(()=>{if((0,s.kc)().eu_focus_logging)return document.addEventListener("focusin",n),()=>{document.removeEventListener("focusin",n)}},[n])}(),a.createElement(n_,null,a.createElement(B.ED,null),a.createElement(ng.sk,null,n.mode!==t1.Oin.OFF&&a.createElement("div",{className:nf._q}),a.createElement(t8.pO,{initialFilterState:{currentPage:!1}},r.map(e=>a.createElement(nn._,{key:`loading-embed-${e}`,nodeId:e})),a.createElement(nE.qn,null),a.createElement(np.u,null),i&&a.createElement(nl.n,null),(0,s.kc)().ce_al_experiments_on&&a.createElement(nl.n,null),a.createElement(nt.GR,null),a.createElement(nt.bu,null),a.createElement(nc.J,null),a.createElement(nE.XI,{commentsDetailContainerRef:c}),(0,s.kc)().cursor_bot&&u&&a.createElement(nr.S,null),a.createElement(na.X,null),a.createElement(t9.J,null),a.createElement(no.Nz,null),a.createElement("div",{ref:c}),a.createElement(nE.uU,null),!t&&a.createElement(ns.E,null),a.createElement(ne.G,null),e&&a.createElement(no.X5,null)),a.createElement(t7.A,{isFigjamEditor:!1,isDesignEditor:!0,openFile:p}),_.showing&&a.createElement(A.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{g(el.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:A.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(nd.k,null))),l&&a.createElement(ni.K,{className:nf.PA},a.createElement(nu.s,null)))});var nh=n(755887),nv=n(574176),nb=n(308977),nN=n(393812),nI=n(239349),nT=n(92597),nA=n(843495),nx=n(980150),nw=n(564092);let nS="dev_handoff_canvas_pill--dimension--WEwpp",nP="dev_handoff_canvas_pill--size--9ZpSZ";var nC=n(419902);function nO(e){return e===ed.mKm.HUG_CONTENT?"Auto":e===ed.mKm.FILL_CONTAINER?"100%":"Fixed"}function nk(e){let t=(0,nI.mJ)(e);if(!t)return null;let n="INSTANCE"===t.type||"SYMBOL"===t.type||t.isStateGroup||t.isInstanceSublayer||t.isSymbolSublayer,a=!0;return"TEXT"===t.type&&(t.autoRename||t.characters.substring(0,10)===t.name.substring(0,10))&&(a=!1),{guid:t.guid,name:t.name,showName:a,type:t.type,isFigmaPurple:n,boundingBox:t.absoluteBoundingBox,hasEnabledStaticImagePaint:t.hasEnabledStaticImagePaint,isState:t.isState,isStateGroup:t.isStateGroup,isUIElement:(0,nN.$F)(t)&&!t.isStateGroup,stackCounterAlignItems:t.stackCounterAlignItems,stackMode:t.stackMode,isGroup:t.isGroup,canHaveStatus:t.canHaveStatus,hasStatus:t.hasStatus,horizontalSizeMode:nO(ed.Qa7.stackHorizontalSize(t.guid)),verticalSizeMode:nO(ed.Qa7.stackVerticalSize(t.guid)),size:t.size,objectsPanelThumbnailId:t.objectsPanelThumbnailId}}function nD(e){let t=(0,nh.Cc)(0,2,(e-.1)*5);return(0,nh.qE)(t,0,2)}function nL(e){let t=nk(e.guid),n=(0,t6.J2)((0,tG.UK)().showGuids),o=(0,nI.uQ)(),r=a.useRef(null),i=a.useCallback(e=>-nD(e),[]),l=t&&(t.hasStatus||t.canHaveStatus&&t.guid===o)?e=>e-20:void 0;return t&&"SECTION"!==t.type?a.createElement(nx.M,{ref:r,node:t,key:e.guid,offsetX:-2,offsetY:i,largeBorderRadius:!0,maxWidth:l,dataTestId:"devHandoffLayerNamePill"},a.createElement("div",{className:"dev_handoff_canvas_pill--layerName--eX5Zu"},a.createElement(nx.T,{node:t}),t.showName&&a.createElement("span",{className:"dev_handoff_canvas_pill--pillText--7B3-h ellipsis--ellipsis--Tjyfa"},t.name,n&&` (${e.guid})`))):null}let nM=e=>e.toLocaleString("en",{maximumFractionDigits:5,useGrouping:!1});function nR(e,t=0){let n=(0,nb.v4)(),a=(0,nT.qM)(n,t,nM),{variable:o,variableDisplayName:r,isSuggested:i}=(0,nw.xp)(e,t);return o?{value:r,isSuggested:i}:{value:a}}function nV(e){let t=nk(e.guid),{value:n,isSuggested:o}=nR("WIDTH",t?.size.x??0),{value:r,isSuggested:i}=nR("HEIGHT",t?.size.y??0),l=a.useCallback(e=>nD(e),[]);return t&&t.isUIElement?a.createElement(nx.M,{node:t,key:e.guid,dataTestId:"devHandoffSizePill",centered:!0,bottom:!0,offsetY:l,largeBorderRadius:!0},a.createElement("div",{className:"dev_handoff_canvas_pill--sizeInfo--pKiuc text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement("span",{className:nS},(0,ei.tx)("fullscreen.properties_panel.transform_panel.w")),a.createElement("span",null,t.horizontalSizeMode),a.createElement("span",{className:nP,"data-testid":"canvasPillWidth"},n),a.createElement("span",null,o&&a.createElement(nv.B,{svg:nC.A})),a.createElement("span",{className:nS},(0,ei.tx)("fullscreen.properties_panel.transform_panel.h")),a.createElement("span",null,t.verticalSizeMode),a.createElement("span",{className:nP,"data-testid":"canvasPillHeight"},r),a.createElement("span",null,i&&a.createElement(nv.B,{svg:nC.A})))):null}function nK(){let{hoveredNode:e,selection:t}=(0,_.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection)[0],n=e.mirror.appModel.hoveredNode;return{hoveredNode:n===nA.Hr?null:n,selection:t===nA.Hr?null:t}}),[n,o]=a.useState(!1),r=a.useCallback(e=>{e.altKey!==n&&o(e.altKey)},[n]);return(a.useEffect(()=>(document.addEventListener("pointermove",r),document.addEventListener("keyup",r),document.addEventListener("keydown",r),()=>{document.removeEventListener("pointermove",r),document.removeEventListener("keyup",r),document.removeEventListener("keydown",r)})),n)?null:a.createElement(a.Fragment,null,t&&e===t&&a.createElement(nV,{guid:t}),e&&a.createElement(nL,{guid:e}))}var nF=n(593392),nU=n(109388),nB=n(939683),nW=n(572174),nH=n(153234),nz=n(975350),nG=n(949632),nY=n(779709),nq=n(630331),nJ=n(457630),nX=n(601607),n$=n(319882),nj=n(767129),nZ=n(844519),nQ=n(882316),n0=n(663668),n1=n(860601),n2=n(812115),n3=n(522739),n4=n(966981),n6=n(259927),n5=n(798099),n7=n(662531),n8=n(341860),n9=n(498606),ae=n(100303),at=n(233890),an=n(869156),aa=n(788612),ao=n(712685);let ar="annotation--annotationContainer--k4xiM",ai="annotation--wrapperEditing--C2Zlx",al="annotation--createAnnotation--tWKSM annotation--_annotationBase--MPByC",as="annotation--contentContainer--vSuqs",ac="annotation--properties--1p6UF",ad="annotation--noValue--HHQOU",au="annotation--propertyOptionIconSvg--LypST",ap="annotation--icon--w1enR",am="annotation--chit--3je6E",a_="annotation--solidPaint--ClR6h",ag="annotation--solidPaintValue--9PQMf annotation--_ellipsis--8F1VE",aE="annotation--variablePill--VNxoI";function af({valueProps:e,isHovered:t,variableContainerClassName:n}){if("mixed"===e.format){let o=e.value.some(e=>!!e.variable);return a.createElement("div",{className:ej()("annotation--multipleVariableWrapper--OW3M1",o&&"annotation--vertical--zmpVv")},e.value.map((r,i)=>a.createElement("div",{key:i,className:"annotation--multipleVariableValue--5-5xk"},a.createElement(af,{valueProps:r,isHovered:t,variableContainerClassName:n}),i<e.value.length-1&&!o&&a.createElement("span",null,", "))))}let o=`${(0,aa.m3)(e)}`;return e.variable?a.createElement(ao.w,{dataTestId:"styledValueVariable",containerClassName:ej()(aE,n),text:e.variable,disableHover:!0,isHovered:t,isInferred:e.isSuggestedVariable,tooltip:e.isSuggestedVariable?(0,ei.t)("dev_handoff.variables.inferred_value",{value:o}):o}):a.createElement(a.Fragment,null,o)}var ay=n(221537);function ah({svg:e}){return a.createElement(nv.B,{svg:e,className:ej()(ap,au)})}var av=n(258890),ab=n(996620),aN=n(957069);function aI({node:e,variable:t,isPreview:n=!1}){return t?n?a.createElement(a.Fragment,null,t.name):a.createElement(ao.w,{containerClassName:aE,text:t.name,disableHover:!0}):(0,ay.rO)(e.stackPrimaryAlignItems)?(0,ei.tx)("dev_handoff.annotations.auto"):a.createElement(a.Fragment,null,(0,aa.nd)(e.stackSpacing,"px"))}function aT({node:e,isPreview:t=!1}){let n=(0,an.u)(e.boundVariables?.itemSpacing?.id);return a.createElement("div",{className:n?void 0:"annotation--spacingProperty--RCjSM annotation--coloredProperty--OTQ6l"},a.createElement("span",null,a.createElement(aI,{node:e,variable:n,isPreview:t})))}function aA({rawValues:e,variables:t,isPreview:n=!1}){if(e.length!==t.length)throw Error("<ManySidedProperty /> must have the same number of rawValues and variables");let o=t.map((t,n)=>({value:e[n],format:"pixels",variable:t?.name})),r=o[0]?.variable;for(let e of o)if(e.variable!==r){if(n)return(0,ei.tx)("fullscreen.mixed");return a.createElement(af,{variableContainerClassName:aE,valueProps:{format:"mixed",value:o}})}return r?n?a.createElement(a.Fragment,null,r):a.createElement(af,{variableContainerClassName:aE,valueProps:o[0]}):e.some(t=>t!==e[0])?n?(0,ei.tx)("fullscreen.mixed"):a.createElement(af,{variableContainerClassName:aE,valueProps:{format:"pixels",value:e}}):a.createElement(af,{variableContainerClassName:aE,valueProps:{format:"pixels",value:e[0]}})}function ax({node:e,isPreview:t=!1}){let{stackTopPadding:n,stackRightPadding:o,stackBottomPadding:r,stackLeftPadding:i}=e,l=(0,an.u)(e.boundVariables?.paddingTop?.id),s=(0,an.u)(e.boundVariables?.paddingRight?.id),c=(0,an.u)(e.boundVariables?.paddingBottom?.id),d=(0,an.u)(e.boundVariables?.paddingLeft?.id),u=[l,s,c,d].some(e=>!!e);return a.createElement("div",{className:ej()(u?void 0:"annotation--paddingProperty--ckvG6 annotation--coloredProperty--OTQ6l")},a.createElement("span",null,a.createElement(aA,{rawValues:[n,o,r,i],variables:[l,s,c,d],isPreview:t})))}function aw({node:e}){if("WRAP"===e.stackWrap)return a.createElement(ah,{svg:aN.A});switch(e.stackMode){case"HORIZONTAL":return a.createElement(ah,{svg:av.A});case"VERTICAL":return a.createElement(ah,{svg:ab.A});default:return null}}function aS({node:e}){if("WRAP"===e.stackWrap)return(0,ei.tx)("fullscreen.properties_panel.stack_panel.wrap");switch(e.stackMode){case"HORIZONTAL":return(0,ei.tx)("dev_handoff.annotations.autolayout_horizontal");case"VERTICAL":return(0,ei.tx)("dev_handoff.annotations.autolayout_vertical");default:return null}}function aP({node:e}){if("NONE"===e.stackMode)return null;if("HORIZONTAL"===e.stackMode)switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,ei.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,ei.tx)("dev_handoff.annotations.alignment.left");case"MAX":return(0,ei.tx)("dev_handoff.annotations.alignment.bottom_left");case"BASELINE":return(0,ei.tx)("dev_handoff.annotations.alignment.baseline_left")}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,ei.tx)("dev_handoff.annotations.alignment.top_center");case"CENTER":return(0,ei.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,ei.tx)("dev_handoff.annotations.alignment.bottom_center");case"BASELINE":return(0,ei.tx)("dev_handoff.annotations.alignment.baseline_center")}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,ei.tx)("dev_handoff.annotations.alignment.top_right");case"CENTER":return(0,ei.tx)("dev_handoff.annotations.alignment.right");case"MAX":return(0,ei.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return(0,ei.tx)("dev_handoff.annotations.alignment.baseline_right")}}switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,ei.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,ei.tx)("dev_handoff.annotations.alignment.top_center");case"MAX":return(0,ei.tx)("dev_handoff.annotations.alignment.top_right");case"BASELINE":return null}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,ei.tx)("dev_handoff.annotations.alignment.left");case"CENTER":return(0,ei.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,ei.tx)("dev_handoff.annotations.alignment.right");case"BASELINE":return null}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,ei.tx)("dev_handoff.annotations.alignment.bottom_left");case"CENTER":return(0,ei.tx)("dev_handoff.annotations.alignment.bottom_center");case"MAX":return(0,ei.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return null}}}var aC=n(416095),aO=n(750029),ak=n(428877),aD=n(991443),aL=n(238093);function aM(e,t){let n=(0,o.d4)(e=>e.library),a=(0,aL.f$)(e),r=(0,nI.mJ)(a);if(!e||!a||!r)return null;let i=(0,aC.Gp)(e.key,[a],n);if(!i)return null;let l=i.value;return"DANGLING"===i.kind&&(l.style_type=t),l.description=r.description,l.name=r.name,l.isLocal="LOCAL"===i.kind,l}function aR(e,t){if(1===t)return e;let n=(100*t).toLocaleString("en",{maximumFractionDigits:2})+"%";return`${e} \xb7 ${n}`}function aV(e,t,n){let{opacity:a=1}=e;switch(e.type){case"SOLID":{if(!e.color)return null;let{color:o}=e,{a:r=1}=o,i=n({...o,a:r*a},{alphaInPercent:!0});return t?t.name:i}case"GRADIENT_LINEAR":return aR((0,ei.t)("dev_handoff.selection_colors.gradient_linear"),a);case"GRADIENT_ANGULAR":return aR((0,ei.t)("dev_handoff.selection_colors.gradient_angular"),a);case"GRADIENT_DIAMOND":return aR((0,ei.t)("dev_handoff.selection_colors.gradient_diamond"),a);case"GRADIENT_RADIAL":return aR((0,ei.t)("dev_handoff.selection_colors.gradient_radial"),a);case"IMAGE":return aR((0,ei.t)("dev_handoff.annotations.image"),a);case"VIDEO":return aR((0,ei.t)("dev_handoff.annotations.video"),a);default:return null}}function aK({paints:e,styleRef:t,variables:n}){let o=n?.[0],r=(0,ak.Ig)(),i=(0,an.u)(o?.id),l=aM(t,"FILL");return 0===e.length?null:l?a.createElement(a.Fragment,null,l.name):e.length>1?(0,ei.tx)("dev_handoff.annotations.multiple"):a.createElement(a.Fragment,null,aV(e[0],i,r))}function aF({paints:e}){let t=e[0];return a.createElement(aO.J,{className:am,tabIndex:-1,paint:t,allowMouseDownPropagation:!0})}function aU({paint:e,variableAlias:t}){let n=(0,ak.Ig)(),o=(0,an.u)(t?.id),r=aV(e,o,n);return r?a.createElement("div",{className:a_},a.createElement(aO.J,{className:am,paint:e,tabIndex:-1,allowMouseDownPropagation:!0}),a.createElement("span",{className:ag,title:r},o?a.createElement(ao.w,{containerClassName:aE,text:r,disableHover:!0}):r)):null}function aB({styleRef:e,styleType:t,hideIcon:n=!1}){let r=aM(e,t);return(!function(e){let t=(0,o.d4)(e=>e.library),n=(0,aL.f$)(e),a=n?(0,aC.Gp)(e.key,[n],t):void 0;(0,aC.w$)(a)}(e),r)?a.createElement("div",{className:a_},!n&&a.createElement("div",{className:ej()("annotation--styleChit--yCQ3O annotation--chit--3je6E",ap)},a.createElement(aD.zi,{dsStyle:r})),a.createElement("span",{className:ag,title:r.name},r.name)):null}function aW({paints:e,styleRef:t,variables:n}){let{data:o}=e;return t?a.createElement(aB,{styleRef:t,styleType:"FILL"}):0===o.length?null:a.createElement("div",{className:"annotation--mixedValues--Z0qIk"},o.map((e,t)=>a.createElement(aU,{key:t,paint:e,variableAlias:n?.[t]})))}var aH=n(798558),az=n(723081),aG=n(666139);function aY({effects:e}){if(0===e.length)return null;if(e.length>1)return(0,ei.tx)("fullscreen.mixed");switch(e[0].type){case"DROP_SHADOW":return(0,ei.tx)("dev_handoff.annotations.shadow");case"BACKGROUND_BLUR":return(0,ei.tx)("fullscreen.properties_panel.effects.background_blur");case"FOREGROUND_BLUR":return(0,ei.tx)("fullscreen.properties_panel.effects.layer_blur");case"INNER_SHADOW":return(0,ei.tx)("fullscreen.properties_panel.effects.inner_shadow");case void 0:return null}}function aq({effects:e,styleRef:t}){return a.createElement(a.Fragment,null,e.map((e,n)=>a.createElement(aX,{effect:e,styleRef:t,key:n})))}let aJ=new az.SU;function aX({effect:e,styleRef:t}){let n=(0,ak.Ig)(),o=t&&a.createElement(a$,{styleRef:t});switch(e.type){case"DROP_SHADOW":case"INNER_SHADOW":{let{color:t}=e,r=t?n(t,{alphaInPercent:!0}):null,i=[e.offset?.x,e.offset?.y,e.radius,e.spread].filter(e=>void 0!==e).join(", ");return a.createElement("div",null,o,a.createElement("span",null,a.createElement(aY,{effects:[e]})),t&&a.createElement(a.Fragment,null,a.createElement("span",null),a.createElement("div",{className:a_},a.createElement(aO.J,{className:ej()(am,"annotation--chitInline--vG6cM"),color:t,allowMouseDownPropagation:!0}),a.createElement("span",{className:ag,title:r||void 0},r))),a.createElement("span",null),a.createElement("span",null,i),e.blendMode&&"NORMAL"!==e.blendMode&&a.createElement(a.Fragment,null,a.createElement("span",null),a.createElement("span",null,aJ.format(e.blendMode))))}case"BACKGROUND_BLUR":case"FOREGROUND_BLUR":return a.createElement("div",null,o,a.createElement("span",null,a.createElement(aY,{effects:[e]})),void 0!==e.radius&&a.createElement("span",null,` ${(0,aa.nd)(e.radius,"px")}`));case void 0:return null}}function a$({styleRef:e}){let t=(0,aL.f$)(e),n=(0,nI.mJ)(t);return t&&n?a.createElement("div",null,n.name):null}var aj=n(142284);let aZ=e=>{switch(e){case"RIGHT":return(0,ei.t)("inspect_panel.typography.align_right");case"CENTER":return(0,ei.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,ei.t)("inspect_panel.typography.align_justified");case"LEFT":return(0,ei.t)("dev_handoff.annotations.align_left")}};function aQ(){return a.createElement(nv.B,{svg:aj.A,className:ej()(ap,au)})}function a0({textAlignHorizontal:e}){return a.createElement(a.Fragment,null,aZ(e))}function a1({lineHeightOrMixed:e,variableAlias:t,isPreview:n}){let o=(0,an.u)(t?.id);if("mixed"===e)return(0,ei.tx)("fullscreen.mixed");if(o&&n)return a.createElement(a.Fragment,null,o.name);if("PERCENT"===e.units&&100===e.value)return(0,ei.tx)("dev_handoff.annotations.auto");let r="RAW"===e.units?{value:100*e.value,units:"PERCENT"}:e;return a.createElement(aa.lN,{variableContainerClassName:aE,valueProps:{format:"fig_number",value:r,variable:o?.name}})}function a2({fontNameOrMixed:e,variableAlias:t,isPreview:n}){let o=(0,an.u)(t?.id);return"mixed"===e?(0,ei.tx)("fullscreen.mixed"):o&&n?a.createElement(a.Fragment,null,o.name):a.createElement(aa.lN,{variableContainerClassName:aE,valueProps:{value:e.family,variable:o?.name}})}function a3({fontWeightOrMixed:e,variableAlias:t,isPreview:n}){let o=(0,an.u)(t?.id);return"mixed"===e?(0,ei.tx)("fullscreen.mixed"):(o&&o.resolvedType!==ed.rXF.FLOAT&&(o=null),o&&n)?a.createElement(a.Fragment,null,o.name):a.createElement(aa.lN,{variableContainerClassName:aE,valueProps:{value:e,variable:o?.name}})}var a4=n(313888),a6=n(595869),a5=n(560185),a7=n(30562),a8=n(438806),a9=n(904595),oe=n(235107),ot=n(58502),on=n(144919);function oa({node:e}){let{symbolId:t}=e;if(!t)return a.createElement(a.Fragment,null);let n=n8.q.instance.get(t);if(!n)return a.createElement(a.Fragment,null);if(n.isState){let e=n.parentNode?.name;return a.createElement(a.Fragment,null,`${e} (${n.name})`)}return a.createElement(a.Fragment,null,n.name)}let oo=new Map([[ed.L5V.HEIGHT,{label:(0,ei.tx)("fullscreen.properties_panel.transform_panel.height"),category:"dimension",Icon:()=>a.createElement(ah,{svg:a8.A}),PreviewValue:({node:e})=>a.createElement(ou,{value:e.size.y,variableAlias:e.boundVariables.height,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ou,{value:e.size.y,variableAlias:e.boundVariables.height}),index:0}],[ed.L5V.MIN_HEIGHT,{label:(0,ei.tx)("fullscreen.properties_panel.stack_panel.minmax.min_height_tt"),category:"dimension",Icon:()=>a.createElement(ah,{svg:a8.A}),PreviewValue:({node:e})=>a.createElement(ou,{value:e.minHeight,variableAlias:e.boundVariables.minHeight,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ou,{value:e.minHeight,variableAlias:e.boundVariables.minHeight}),index:0}],[ed.L5V.MAX_HEIGHT,{label:(0,ei.tx)("fullscreen.properties_panel.stack_panel.minmax.max_height_tt"),category:"dimension",Icon:()=>a.createElement(ah,{svg:a8.A}),PreviewValue:({node:e})=>a.createElement(ou,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ou,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight}),index:0}],[ed.L5V.WIDTH,{label:(0,ei.tx)("fullscreen.properties_panel.transform_panel.width"),category:"dimension",Icon:()=>a.createElement(ah,{svg:oe.A}),PreviewValue:({node:e})=>a.createElement(ou,{value:e.size.x,variableAlias:e.boundVariables.width,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ou,{value:e.size.x,variableAlias:e.boundVariables.width}),index:0}],[ed.L5V.MIN_WIDTH,{label:(0,ei.tx)("fullscreen.properties_panel.stack_panel.minmax.min_width_tt"),category:"dimension",Icon:()=>a.createElement(ah,{svg:oe.A}),PreviewValue:({node:e})=>a.createElement(ou,{value:e.minWidth,variableAlias:e.boundVariables.minWidth,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ou,{value:e.minWidth,variableAlias:e.boundVariables.minWidth}),index:0}],[ed.L5V.MAX_WIDTH,{label:(0,ei.tx)("fullscreen.properties_panel.stack_panel.minmax.max_width_tt"),category:"dimension",Icon:()=>a.createElement(ah,{svg:oe.A}),PreviewValue:({node:e})=>a.createElement(ou,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ou,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth}),index:0}],[ed.L5V.CORNER_RADIUS,{label:(0,ei.tx)("fullscreen.properties_panel.transform_panel.corner_radius"),category:"dimension",Icon:()=>a.createElement(ah,{svg:a6.A}),PreviewValue:({node:e})=>a.createElement(ol,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ol,{node:e}),index:0}],[ed.L5V.STACK_MODE,{label:(0,ei.tx)("dev_handoff.annotations.autolayout_mode"),category:"stack",Icon:({node:e})=>a.createElement(aw,{node:e}),PreviewValue:({node:e})=>a.createElement(aS,{node:e}),DisplayValue:({node:e})=>a.createElement(aS,{node:e}),index:0}],[ed.L5V.STACK_ALIGNMENT,{label:(0,ei.tx)("dev_handoff.annotations.alignment"),category:"stack",Icon:({node:e})=>a.createElement(ah,{svg:(0,aH.GN)(e)}),PreviewValue:({node:e})=>a.createElement(aP,{node:e}),DisplayValue:({node:e})=>a.createElement(aP,{node:e}),index:0}],[ed.L5V.STACK_SPACING,{label:(0,ei.tx)("inspect_panel.properties.gap"),category:"stack",Icon:({node:e})=>a.createElement(ah,{svg:"HORIZONTAL"===e.stackMode?a5.A:a7.A}),PreviewValue:({node:e})=>a.createElement(aT,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(aT,{node:e}),index:0}],[ed.L5V.STACK_PADDING,{label:(0,ei.tx)("inspect_panel.properties.padding"),category:"stack",Icon:()=>a.createElement(ah,{svg:a9.A}),PreviewValue:({node:e})=>a.createElement(ax,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ax,{node:e}),index:0}],[ed.L5V.TEXT_STYLE,{label:(0,ei.tx)("dev_handoff.annotations.text_style"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(om,{styleRef:e.inheritedTextStyle}),DisplayValue:({node:e})=>a.createElement(aB,{styleRef:e.inheritedTextStyle,styleType:"TEXT",hideIcon:!0}),index:0}],[ed.L5V.FONT_FAMILY,{label:(0,ei.tx)("inspect_panel.typography.font"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(a2,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:e.boundVariables.fontFamily?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(a2,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:e.boundVariables.fontFamily?.[0]}),index:0}],[ed.L5V.FONT_STYLE,{label:(0,ei.tx)("inspect_panel.code.font_style"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(a.Fragment,null,e.fontName.style),DisplayValue:({node:e})=>a.createElement(a.Fragment,null,e.fontName.style),index:0}],[ed.L5V.FONT_SIZE,{label:(0,ei.tx)("dev_handoff.annotations.font_size"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(ou,{value:e.fontSizeOrMixed,variableAlias:e.boundVariables.fontSize?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(ou,{value:e.fontSizeOrMixed,variableAlias:e.boundVariables.fontSize?.[0]}),index:0}],[ed.L5V.LINE_HEIGHT,{label:(0,ei.tx)("fullscreen.type_panel.line_height"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(a1,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:e.boundVariables.lineHeight?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(a1,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:e.boundVariables.lineHeight?.[0]}),index:0}],[ed.L5V.LETTER_SPACING,{label:(0,ei.tx)("fullscreen.type_panel.letter_spacing"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(op,{value:e.letterSpacingOrMixed,variableAlias:e.boundVariables.letterSpacing?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(op,{value:e.letterSpacingOrMixed,variableAlias:e.boundVariables.letterSpacing?.[0]}),index:0}],[ed.L5V.TEXT_ALIGN_HORIZONTAL,{label:(0,ei.tx)("dev_handoff.annotations.text_align"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(a0,{textAlignHorizontal:e.textAlignHorizontal}),DisplayValue:({node:e})=>a.createElement(a0,{textAlignHorizontal:e.textAlignHorizontal}),index:0}],[ed.L5V.FONT_WEIGHT,{label:(0,ei.tx)("inspect_panel.typography.weight"),category:"text",Icon:aQ,PreviewValue:({node:e})=>a.createElement(a3,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:e.boundVariables.fontStyle?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(a3,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:e.boundVariables.fontStyle?.[0]}),index:0}],[ed.L5V.FILL,{label:(0,ei.tx)("fullscreen.properties_panel.fill.fill"),category:"paint",Icon:({node:e})=>a.createElement(aF,{paints:e.fillPaints.data}),PreviewValue:({node:e})=>a.createElement(aK,{paints:e.fillPaints.data,variables:e.boundVariables.fills,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>a.createElement(aW,{paints:e.fillPaints,styleRef:e.inheritedFillStyle,variables:e.boundVariables.fills}),index:0}],[ed.L5V.STROKE,{label:(0,ei.tx)("fullscreen.properties_panel.fill.stroke"),category:"paint",Icon:({node:e})=>a.createElement(aF,{paints:e.strokePaints.data}),PreviewValue:({node:e})=>a.createElement(aK,{paints:e.strokePaints.data,variables:e.boundVariables.strokes,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>a.createElement(aW,{paints:e.strokePaints,styleRef:e.inheritedFillStyleForStroke,variables:e.boundVariables.strokes}),index:0}],[ed.L5V.STROKE_WIDTH,{label:(0,ei.tx)("fullscreen.properties_panel.borders.stroke_width"),category:"paint",Icon:()=>a.createElement(ah,{svg:ot.A}),PreviewValue:({node:e})=>a.createElement(os,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(os,{node:e}),index:0}],[ed.L5V.EFFECT,{label:(0,ei.tx)("inspect_panel.code.effect"),category:"paint",Icon:function(){return a.createElement(ah,{svg:aG.A})},PreviewValue:({node:e})=>a.createElement(aY,{effects:e.effects.filter(e=>e.visible)}),DisplayValue:({node:e})=>a.createElement(aq,{effects:e.effects.filter(e=>e.visible),styleRef:e.inheritedEffectStyle}),index:0}],[ed.L5V.OPACITY,{label:(0,ei.tx)("fullscreen.scrubbable.opacity"),category:"paint",Icon:()=>a.createElement(ah,{svg:on.A}),PreviewValue:({node:e})=>a.createElement(oi,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(oi,{node:e}),index:0}],[ed.L5V.COMPONENT,{label:(0,ei.tx)("dev_handoff.annotations.component"),category:"component",Icon:()=>a.createElement(ah,{svg:a4.A}),PreviewValue:oa,DisplayValue:oa,index:0}]]),or=0;function oi({node:e,isPreview:t=!1}){let n=e.boundVariables.opacity,o=(0,an.u)(n?.id??void 0);return o&&t?a.createElement(a.Fragment,null,o.name):a.createElement(af,{variableContainerClassName:aE,valueProps:{format:"percent",value:e.opacity,variable:o?.name}})}function ol({node:e,isPreview:t=!1}){let{rectangleTopLeftCornerRadius:n,rectangleTopRightCornerRadius:o,rectangleBottomRightCornerRadius:r,rectangleBottomLeftCornerRadius:i}=e,l=(0,an.u)(e.boundVariables?.topLeftRadius?.id),s=(0,an.u)(e.boundVariables?.topRightRadius?.id),c=(0,an.u)(e.boundVariables?.bottomRightRadius?.id),d=(0,an.u)(e.boundVariables?.bottomLeftRadius?.id);return a.createElement(aA,{rawValues:[n,o,r,i],variables:[l,s,c,d],isPreview:t})}function os({node:e,isPreview:t=!1}){return e.borderStrokeWeightsIndependent?a.createElement(od,{node:e,isPreview:t}):a.createElement(oc,{node:e,isPreview:t})}function oc({node:e,isPreview:t}){let n=(0,an.u)(e.boundVariables.strokeWeight?.id);return n&&t?a.createElement(a.Fragment,null,n.name):a.createElement(af,{variableContainerClassName:aE,valueProps:{value:e.strokeWeight,variable:n?.name,format:"pixels"}})}function od({node:e,isPreview:t}){let{borderTopWeight:n,borderRightWeight:o,borderBottomWeight:r,borderLeftWeight:i}=e,l=(0,an.u)(e.boundVariables.strokeTopWeight?.id),s=(0,an.u)(e.boundVariables.strokeRightWeight?.id),c=(0,an.u)(e.boundVariables.strokeBottomWeight?.id),d=(0,an.u)(e.boundVariables.strokeLeftWeight?.id);return a.createElement(aA,{rawValues:[n,o,r,i],variables:[l,s,c,d],isPreview:t})}function ou({value:e,variableAlias:t,isPreview:n}){let o=(0,an.u)(t?.id);return null===e?null:"mixed"===e?(0,ei.tx)("fullscreen.mixed"):o&&n?a.createElement(a.Fragment,null,o.name):a.createElement(af,{variableContainerClassName:aE,valueProps:{value:(0,aa.nd)(e,"px"),variable:o?.name}})}function op({value:e,variableAlias:t,isPreview:n}){let o=(0,an.u)(t?.id);return"mixed"===e?(0,ei.tx)("fullscreen.mixed"):o&&n?a.createElement(a.Fragment,null,o.name):a.createElement(af,{variableContainerClassName:aE,valueProps:{format:"fig_number",value:e,variable:o?.name}})}function om({styleRef:e}){let t=(0,aL.f$)(e),n=(0,nI.mJ)(t);return n?a.createElement(a.Fragment,null,n.name):null}function o_(){let e=(0,nB.IL)(),t=(0,eV.Xr)(n$.J),n=!!(0,tz.hA)();return a.useCallback(a=>{n7.l7.user("clear-annotations",()=>{a.setAnnotation(null);let o=(0,Z.kh)(n8.q.instance,a.guid);e("delete_annotation",{nodeId:a.guid,nodeType:a.type,tlfId:o?.guid,isDevModeFocusView:n}),t(!1),(0,nG.d)().lockMouseMoves.set(!1),ec.Y5.triggerAction("commit")})},[t,e,n])}oo.forEach(e=>{e.index=or++});var og=n(462166),oE=n(560945),of=n(956521),oy=n(592096),oh=n(91408),ov=n(860168);let ob=(0,oh.jz)("220px"),oN=(0,oh.jz)(ov.KwN),oI=(0,oh.jz)(ov.RHC);var oT=(e=>(e[e.ALIGNED=0]="ALIGNED",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW",e))(oT||{});function oA(e,t,n){let{x:a,y:o,w:r,h:i}=e.absoluteBoundingBox,{x:l,w:s}=t.absoluteBoundingBox,{offsetX:c,offsetY:d,zoomScale:u}=n,p=a-l,m=l+s-(a+r),_=p<m,g=Math.min(Math.max(20*u,5),20);return _?{lineWidth:p*u+g,offsetX:(l-c)*u-g,offsetY:(o+i/2-d)*u,isLeftAligned:_}:{lineWidth:m*u+g,offsetX:(l+s-c)*u+g,offsetY:(o+i/2-d)*u,isLeftAligned:_}}function ox(e,t,n){let a=[];for(let t of e){let e=(n||t.height)+8;for(a.push({basis:t.offsetY-e/2,length:1,height:e});a.length>1&&function(e,t){let n=e.basis+e.height-t.basis;return!(n<=0)&&(e.height+=t.height,e.length+=t.length,e.basis-=n*t.height/e.height,!0)}(a[a.length-2],a[a.length-1]);)a.pop()}let o=0;for(let r of a){let{basis:a}=r;for(let i=0;i<r.length;i++){let r=e[o],i=(n||r.height)+8;t[r.node.guid]=a+i/2,a+=i,o++}}}function ow(e,t,n){let a=[],o=[],r={};for(let e of t)e.isLeftAligned?a.push(e):o.push(e);return ox(a,r,n?6:void 0),ox(o,r,n?6:void 0),t.map(t=>{let{y:n,h:a,w:o}=t.node.absoluteBoundingBox,i=r[t.node.guid],l=(n-e.offsetY)*e.zoomScale,s=t.lineWidth,c=0,d=0,u=t.lineWidth;return i<l?(c=1,d=l-i,u+=o/2*e.zoomScale):i>(n+a-e.offsetY)*e.zoomScale&&(c=2,d=i-(n+a-e.offsetY)*e.zoomScale,u+=o/2*e.zoomScale),{...t,offsetY:i,lineAlignment:c,lineHeight:d,lineWidth:u,originalLineWidth:s}})}function oS({node:e,setDimensions:t,offsetX:n,offsetY:r,lineWidth:l,originalLineWidth:s,lineHeight:c,lineAlignment:d,isLeftAligned:u,viewportInfo:p,shouldMinimize:m,canOverlapNode:_=!1,children:g}){let E=(0,nB.IL)(),f=(0,a.useRef)(null),y=(0,oE.w)(m?void 0:f),h=(0,o.d4)(e=>e.mirror.appModel.hoveredNode),[v,b]=(0,a.useState)(!1),N=(0,x._I)(),I=(0,of.T)("quick_handoff"),T=(0,tb.dH)(),A="ui3"===(0,i.DP)().version,w=e.guid===h||v,S=(0,nI.uQ)(),P=(0,eJ.md)(n$.J),C=P&&S===e.guid,O=m&&!C,k=T===t1.NLJ.ANNOTATE&&!w&&null!==S&&S!==e.guid,D=C||p.zoomScale>=.05&&(e.guid===S||e.annotations.length>0),L=(0,oy.LO)(),M=a.useCallback(e=>{(0,nG.d)().lockMouseMoves.set(e)},[]);(0,a.useLayoutEffect)(()=>{y&&t(e.guid,y)},[e.guid,y,t]);let R={top:`${p.y+p.height/2}px`,left:`${p.x+p.width/2}px`,transform:`translate(${n}px, calc(${r}px - 50%))`};return a.createElement("div",{ref:f,className:ej()("annotation--annotationWrapper--pKMw2",{"annotation--wrapperMinimized--UOExu":O&&!w,[ai]:C}),style:R,"data-testid":"annotationWrapper"},D&&a.createElement(a.Fragment,null,a.createElement("div",{className:ej()("annotation--annotationLine--jr4Mc",{"annotation--annotationLineLeftAligned--W-1DZ":u,"annotation--annotationLineAboveNode--WwqWD":d===oT.ABOVE,"annotation--annotationLineBelowNode--JeafT":d===oT.BELOW}),style:{width:l,height:c}},a.createElement("div",{className:ej()("annotation--annotationLineStartDot--x6RNc",{"annotation--annotationLineStartDotHovered--Chqa7":!N&&w})}),a.createElement("div",{className:"annotation--annotationLineEndDot--Lsq0a"})),a.createElement("div",{onClick:N?void 0:I,onMouseOut:()=>{M(!1),b(!1)},onMouseOver:()=>{P||(M(!0),nA.Uc(e.guid),O&&!v&&E("hover_minimized_annotation",{nodeId:e.guid,nodeType:e.type}),b(!0))},className:ej()({"annotation--annotationLeftAligned--FHQRp":u,"annotation--annotationRightAligned--VrH8e":!u,"annotation--annotationHovered--QUHJv":!C&&w}),style:{transform:function(e,t,n,a,o,r,i,l){let s=ed.Ez5.isFullscreenYScrollbarNeeded()&&(!l||!ed.Ez5.isUI3EdgeToEdgeCanvasEnabled());if(n){let n=`calc(${-a}px - ${e.width/2}px + ${i.left}px + 4px)`,l=r?`calc(${o+t*e.zoomScale}px - 100% - 8px)`:`calc(${o}px - 100% - 8px)`;return`translate(min(${l}, max(-100%, ${n})), 0)`}{let n=r?`calc(-${o+t*e.zoomScale}px + 8px)`:`calc(-${o}px + 8px)`,c=`calc(${e.width/2}px - ${a}px - 100% - ${i.right}px - ${s?l?oI:oN:4}px)`;return`translate(max(${n}, min(0px, ${c})), 0)`}}(p,e.absoluteBoundingBox.w,u,n,s,_,L,A)}},a.createElement("div",{className:ej()("annotation--annotationHoverTarget--4y3Xc",{"annotation--annotationHoverTargetLeftAligned--G1twU":u})}),N&&(!O||w)&&g(k))))}var oP=n(501191);function oC({viewportInfo:e,nodeInfo:t,setDimensions:n}){let o=function(){let e=(0,nB.IL)(),{Sprig:t}=(0,n4.A)(),n=!!(0,tz.hA)();return a.useCallback((a,o,r)=>{n7.l7.user(r?"edit-annotation":"create-annotation",()=>{a.setAnnotation(o);let i=(0,Z.kh)(n8.q.instance,a.guid),l={nodeType:a.type,nodeId:a.guid,tlfId:i?.guid??a.guid,hasText:!!o.label,numProperties:o.properties.length,isDevModeFocusView:n};r?e("edit_annotation",l):(e("create_annotation",l),t("track","create_annotation")),ec.Y5.triggerAction("commit")})},[t,e,n])}(),r=o_(),i=(0,eV.Xr)(n$.J),{node:l}=t,s=l.annotations[0],[c,d]=a.useState(s?.label??""),[u,p]=a.useState(s?.properties??[]),m=a.useCallback(()=>{let e=s&&(""!==s.label||s.properties.length>0),t=0===(0,n0.A)(c).length;t&&0===u.length?s&&r(l):o(l,{label:t?"":c,properties:u},e),i(!1),(0,nG.d)().lockMouseMoves.set(!1)},[s,c,u,r,l,o,i]);return a.createElement(a.Fragment,null,a.createElement(oM,{viewportInfo:e,onPointerDown:m}),a.createElement(oS,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:!1,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,setDimensions:n,canOverlapNode:!0},()=>a.createElement(oO,{node:t.node,saveAnnotation:m,inputText:c,setInputText:d,inputProperties:u,setInputProperties:p})))}function oO({node:e,saveAnnotation:t,inputText:n,setInputText:o,inputProperties:r,setInputProperties:i}){let l=(0,nB.IL)(),s=o_(),[c,d]=a.useState(-1),[u,p]=a.useState(!1),[m,_]=a.useState(!1),g=a.useRef(null),E=a.useRef(null),f=a.useRef(null),{availableProperties:y,selectedProperties:h}=a.useMemo(()=>{let t=[],n=[];for(let a of ok)r.some(e=>e.type===a.type)?n.push(a):(0,og.J)(e,a.type,!0)&&t.push(a);return{availableProperties:t,selectedProperties:n}},[e,r]);a.useEffect(()=>{l("show_annotation_dialog",{nodeId:e.guid,nodeType:e.type})},[l,e.guid,e.type]);let v=a.useCallback(()=>{g.current?.focus()},[]),b=a.useCallback(e=>{d(-1),p(!1),i([...r,{type:e}])},[i,r]);function N(e){i(r.filter(t=>t.type!==e)),v()}let I=a.useCallback(()=>{(0,nG.d)().lockMouseMoves.set(!1)},[]),T=a.useCallback((e,t)=>{if(d(e),_(t),t&&E.current){for(let t of E.current.children)if(t.getAttribute("data-property-type")===`property-${y[e]}`){t.focus();break}}},[d,_,y]),A=a.useCallback(()=>{u?(p(!1),d(-1),f.current?.focus()):t()},[u,t]),x=a.useCallback(()=>{u&&(-1===c?T(y.length-1,!0):c>0&&T(c-1,!0))},[y.length,c,T,u]),w=a.useCallback((e,t)=>{if(u){-1===c?T(0,!0):c<y.length-1&&T(c+1,!0);return}e&&!t&&(p(!0),T(0,!0))},[y.length,u,c,T]),S=(0,nH.v_)("createAnnotation","keydown",(0,a.useCallback)(e=>{"Escape"===e.key?A():"ArrowUp"===e.key?(x(),e.stopPropagation()):"ArrowDown"===e.key?(w(e.ctrlKey||e.metaKey,e.shiftKey),e.stopPropagation()):("Enter"===e.key||" "===e.key)&&c>=0&&c<y.length&&(b(y[c].type),e.preventDefault(),f.current?.focus())},[y,w,x,A,c,b]));a.useEffect(()=>(document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}),[S]);let P=nH.qP("annotationLabelInput","submit",o),C=nH.qP("annotationLabelInput","enter",t),O=e=>{p(!u),e?T(0,!0):d(-1)},k=0===n.length&&0===h.length;return a.createElement(at.vL,{name:"create-annotation",focusOnMount:!0,handleKeyDown:e=>{let{event:n}=e;"Escape"===n.key&&(e.accept(),t())}},a.createElement("div",{onPointerDown:n5.dG},a.createElement("div",{className:ej()(al,n6.Dm)},a.createElement("div",{className:ej()(as,{"annotation--contentContainerNoProperties--pc2WE":0===h.length})},a.createElement("div",{dir:"auto"},a.createElement(n2.X,{fallback:null,errorFallback:null,mountBehavior:"focus",placeholder:(0,ei.t)("dev_handoff.annotations.add_annotation"),defaultValue:n,onInputChange:P,onBlur:n1.lQ,hideToolbar:!0,onEnterKeyPressed:C})),h.length>0&&a.createElement("div",{className:ac},h.map(t=>a.createElement(oL,{key:`selected-${t.type}`,onRemoveProp:N,node:e,property:t})))),a.createElement("div",{className:"annotation--authoringRow--cIo3-"},a.createElement(n3.GG,{className:ej()("annotation--addPropertyButton--67vPO",{"annotation--active--Q00x6":u}),forwardedRef:f,onMouseDown:e=>O((0,ae.SK)(e)),onKeyDown:e=>{u||"Enter"!==e.code&&"Space"!==e.code||(O(!0),e.preventDefault(),e.stopPropagation())},tabIndex:0,"data-tooltip-type":n9.Ib.TEXT,"data-tooltip":(0,ei.t)("dev_handoff.annotations.pin_properties_tooltip"),recordingKey:"createAnnotationPinPropertyButton"},a.createElement(nv.B,{className:"annotation--plusIcon--Ove-l",svg:oP.A,width:"16",height:"16"}),(0,ei.tx)("dev_handoff.annotations.pin_properties_label")),a.createElement(nj.K,{actionOnPointerDown:!0,onClick:()=>{s(e),I()},disabled:k,"aria-label":(0,ei.t)("dev_handoff.annotations.delete"),recordingKey:"createAnnotationTrashIcon",htmlAttributes:{"data-tooltip":(0,ei.t)("dev_handoff.annotations.delete"),"data-tooltip-type":n9.Ib.TEXT}},a.createElement(nZ.i,null)))),u&&a.createElement("div",{onMouseLeave:()=>T(-1,!1),ref:E,onBlur:e=>{e.relatedTarget?.getAttribute("data-property-type")||p(!1)},className:ej()(al,"annotation--dropdown--WLrjl")},0===y.length&&a.createElement("div",{className:"annotation--allPropertiesAdded--KzT8m"},(0,ei.tx)("dev_handoff.annotations.all_properties_added")),y.map((t,n)=>a.createElement(a.Fragment,{key:`option-${t.type}`},n>0&&t.config.category!==y[n-1].config.category&&a.createElement("div",{className:"annotation--propertyDivider--Q3tgS"}),a.createElement(oD,{node:e,property:t,isHovered:c===n,autoFocus:c===n&&m,onMouseOver:()=>T(n,!1),onMouseDown:e=>{b(t.type),e.preventDefault()}}))))))}let ok=Array.from(oo.entries()).map(([e,t])=>({type:e,config:t}));function oD({node:e,property:t,isHovered:n,autoFocus:o,onMouseDown:r,onMouseOver:i}){let l=t.config.PreviewValue,s=t.config.Icon;return a.createElement(n3.GG,{className:ej()("annotation--propertyOption--GJWeu text--fontPos12--YsUAh text--_fontBase--QdLsd",{"annotation--hoveredProperty--ZOJgv":n}),onMouseDown:r,onMouseOver:i,role:"menuitem",autoFocus:o,"data-property-type":`property-${t.type}`,tabIndex:-1,recordingKey:`createAnnotationOptionButton-${t.type}`},a.createElement("div",{className:"annotation--propertyOptionIconLabel--vFND-"},a.createElement("div",{className:"annotation--propertyOptionIcon---NJse"},a.createElement(s,{node:e})),t.config.label),a.createElement("div",{className:ej()("annotation--preview--SrnLk","annotation--propertyValue--yhAB- annotation--_ellipsis--8F1VE")},a.createElement(l,{node:e})))}function oL({node:e,onRemoveProp:t,property:n}){let o=n.config.DisplayValue,r=(0,og.J)(e,n.type,!1);return a.createElement(a.Fragment,null,a.createElement("span",{className:"annotation--selectedPropertyDisplayLabel--AtFEJ"},n.config.label),a.createElement("div",{className:"annotation--selectedPropertyValueWrapper--OyM0X"},a.createElement("span",{className:ej()("annotation--selectedPropertyValue--wwu2U",{[ad]:!r})},r?a.createElement(o,{node:e}):(0,ei.tx)("dev_handoff.annotations.no_value")),a.createElement("span",{className:"annotation--selectedPropertyDelete--DMdrA"},a.createElement(n3.GG,{className:"annotation--selectedPropertyDeleteButton--rko2T",recordingKey:`removeAnnotation${n.type}`,"data-tooltip-type":n9.Ib.TEXT,"data-tooltip":(0,ei.t)("dev_handoff.annotations.remove_property"),onClick:n7.nc.user("remove-annotation",()=>{t(n.type)}),onKeyDown:n7.nc.user("remove-annotation",e=>{t(n.type),e.preventDefault()})},a.createElement(nQ.f,null)))))}function oM({viewportInfo:e,onPointerDown:t}){return a.createElement(n3.D8,{className:`${ai} ${n6.Dm} ${n6.Uu}`,recordingKey:"annotationDialogBackground",style:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height},onPointerDown:t})}var oR=n(686759),oV=n(987918),oK=n(278312),oF=n(698993);function oU({viewportInfo:e,nodeInfo:t,setDimensions:n}){return a.createElement(oS,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:t.shouldMinimize,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,setDimensions:n},e=>a.createElement(oB,{node:t.node,isFadedOut:e}))}function oB({node:e,isFadedOut:t}){let n=(0,nB.IL)(),o=(0,nI.uQ)(),r=(0,tb.dH)(),i=o===e.guid,l=(0,eV.Xr)(n$.J),s=o_(),c=(0,a.useMemo)(()=>ed.w3z.isReadOnly(ed.SES.ANNOTATIONS),[]),d=(0,t6.J2)(ed.Ez5.devHandoffState().selectedMeasurementId),u=!!(0,tz.hA)(),p=e=>{e&&(nA.wr(),(0,oF.S)("annotations"),nA.Dh([e]))},m=a.useCallback(t=>{!c&&i&&d===oV.AD&&(document.activeElement?.classList.contains("focus-target")||(0,oK.t)(document.activeElement)||document.activeElement?.classList.contains(ar))&&("Backspace"===t.key||"Delete"===t.key)&&s(e)},[c,i,d,s,e]);a.useEffect(()=>(document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)),[m]);let _=a.useCallback(()=>{let e=window.getSelection()?.toString()||"";e&&(0,oR.Dk)(e,{withLineBreaks:!0})},[]);if(0===e.annotations.length)return null;let g=e.annotations[0],{label:E,properties:f}=g,y=[...f].sort((e,t)=>oo.get(e.type).index-oo.get(t.type).index);return a.createElement(n3.D8,{className:ej()("annotation--viewAnnotation--cA-c1 annotation--_annotationBase--MPByC",as,{"annotation--viewAnnotationSelected--UApdn":i,"annotation--canSelect--zG4JI":!i,"annotation--viewAnnotationFadedOut--7LQPE":t}),role:"button",tabIndex:0,onMouseDown:()=>{i||(p(e.guid),n("click_annotation_content",{nodeId:e.guid,nodeType:e.type,hasText:!!g.label,numProperties:g.properties.length,currentTool:r,isDevModeFocusView:u}))},"data-testid":"annotationDisplay",recordingKey:`viewAnnotationContainer-${e.name}`,onDoubleClick:()=>{c||(i||p(e.guid),l(!0))},onCopy:_},E&&a.createElement(n2.R,{value:E,fallback:null,errorFallback:null,quillClassName:"annotation--label--Tf5gK"}),y&&y.length>0&&a.createElement("div",{className:ac},y.map((t,n)=>a.createElement(oW,{key:n,node:e,property:t}))))}function oW({node:e,property:t}){let n=oo.get(t.type),o=n.DisplayValue,r=e&&e.isAlive(),i=(0,og.J)(e,t.type,!1);return a.createElement(a.Fragment,null,a.createElement("span",{className:"annotation--propertyDisplayLabel--PQ2vF"},n.label),a.createElement("span",{className:ej()("annotation--propertyDisplayValue--bxdp7",{[ad]:!i}),"data-testid":`annotationPropertyValue-${t.type.toString()}`},r&&i?a.createElement(o,{node:e}):(0,ei.tx)("dev_handoff.annotations.no_value")))}var oH=n(688553),oz=n(565727),oG=n(107047),oY=n(236238),oq=n(163771);function oJ(e){let{children:t}=e,n=(0,a.useRef)(null),[o,r]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(n.current){let e=n.current.attachShadow({mode:"open"}),t=document.createElement("style");t.innerHTML=[oH.Nz,oG.Nz,oz.Nz,oq.Nz,"/** @postcss-export-raw */\n\n/**\n * ellipsis.css\n *\n * Add an ellipsis if text is too long.\n *\n * The element that composes this mixin MUST have a defined width or max-width in pixels.\n * - Only works on a single line of text. See below for multi-line ellipses\n */\n\n.ellipsis--ellipsis--Tjyfa {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/**\n * Add an ellipsis after n lines of text.\n * https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-line-clamp\n *\n * The element that composes this mixin MUST:\n * - Have a defined width or max-width in pixels.\n * - Have a defined fallback height or max-height set to `line-height * n`,\n *     in case browsers do not support -webkit-line-clamp or box-orient\n *     at least the container size will be correct (with no ellipses)\n *\n * TODO(golf): start using `line-clamp` instead of -webkit-line-clamp once browsers start supporting it\n */\n\n.ellipsis--_ellipsisAfterNLines--LzI7k {\n  display: -webkit-inline-box;\n  overflow: hidden;\n\n  /* https://github.com/postcss/autoprefixer/issues/776#issuecomment-297734206 */\n  /* autoprefixer: off */\n  -webkit-box-orient: vertical;\n  /* autoprefixer: on */\n}\n\n.ellipsis--ellipsisAfter2Lines--Qo-Xh {\n  -webkit-line-clamp: 2;\n}\n\n.ellipsis--ellipsisAfter3Lines--h405C {\n  -webkit-line-clamp: 3;\n}\n\n.ellipsis--ellipsisAfter6Lines--2UA7M {\n  -webkit-line-clamp: 6;\n}\n\n.ellipsis--ellipsisAfter8Lines--WZFi8 {\n  -webkit-line-clamp: 8;\n}\n","/** @postcss-export-raw */\n/* Keep in line with FGDevHandoffHelpers.h */\n.annotation--annotationContainer--k4xiM {\n  position: relative;\n  /* Make all z indexes in this file relative to the parent.\n     We want all annotations to render underneath comments */\n  z-index: 0;\n}\n.annotation--_ellipsis--8F1VE {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.annotation--annotationWrapper--pKMw2 {\n  position: absolute;\n  pointer-events: none;\n  width: max-content;\n}\n.annotation--annotationWrapper--pKMw2,\n.annotation--wrapperMinimized--UOExu:hover {\n  z-index: 1;\n}\n.annotation--wrapperEditing--C2Zlx {\n  z-index: 2;\n}\n.annotation--wrapperMinimized--UOExu {\n  z-index: 0;\n}\n.annotation--annotationLine--jr4Mc {\n  position: absolute;\n  top: 50%;\n  border-top: 1px dashed var(--color-icon-handoff);\n  /* Push to left of annotation box */\n  transform: translate(-100%, -50%);\n}\n.annotation--annotationLineStartDot--x6RNc {\n  position: absolute;\n  top: -6.5px;\n  left: 100%;\n\n  width: 12px;\n  height: 12px;\n\n  background: color-mix(in srgb, var(--color-icon-handoff) 45%, transparent);\n  border: 1px solid var(--color-icon-success);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDot--x6RNc:before {\n  content: '';\n\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: 2px;\n  height: 2px;\n\n  background: var(--color-text-onbrand);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDotHovered--Chqa7 {\n  background: var(--color-icon-handoff);\n}\n.annotation--annotationLineEndDot--Lsq0a {\n  position: absolute;\n  top: -3.5px;\n  left: -3px;\n\n  width: 6px;\n  height: 6px;\n\n  background: var(--color-icon-handoff);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineLeftAligned--W-1DZ {\n  transform: translate(0, -50%);\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineStartDot--x6RNc {\n  left: auto;\n  right: 100%;\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineEndDot--Lsq0a {\n  left: auto;\n  right: -3px;\n}\n.annotation--annotationLineAboveNode--WwqWD:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--color-icon-handoff);\n  transform: translate(-100%, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT .annotation--annotationLineStartDot--x6RNc {\n  top: auto;\n  bottom: -6.5px;\n}\n.annotation--annotationLineAboveNode--WwqWD .annotation--annotationLineEndDot--Lsq0a {\n  top: auto;\n  bottom: -3.5px;\n}\n.annotation--annotationLineBelowNode--JeafT:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--color-icon-handoff);\n  border-bottom: 1px dashed var(--color-icon-handoff);\n  border-top: 0 none;\n\n  transform: translate(-100%, calc(-100% + 0.5px));\n}\n.annotation--annotationLineLeftAligned--W-1DZ.annotation--annotationLineAboveNode--WwqWD {\n  border-right: 1px dashed var(--color-icon-handoff);\n  transform: translate(0, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT.annotation--annotationLineLeftAligned--W-1DZ {\n  border-right: 1px dashed var(--color-icon-handoff);\n  border-bottom: 1px dashed var(--color-icon-handoff);\n  border-top: 0 none;\n\n  transform: translate(0, calc(-100% + 0.5px));\n}\n.annotation--_annotationBase--MPByC {\n  background: var(--color-bg);\n  color: var(--color-text);\n\n  pointer-events: auto;\n\n  border-radius: 6px;\n  box-shadow: var(--elevation-200-canvas);\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 400;\n}\n.annotation--viewAnnotation--cA-c1 {\n\n  /* This avoids a size shift when adding a border */\n  border: 1px solid transparent;\n\n  -webkit-user-select: text;\n\n          user-select: text;\n}\n/* This is when the node is hovered (not annotation).\n   Clicking an already selected node does nothing so has no hover state. */\n.annotation--annotationHovered--QUHJv .annotation--viewAnnotation--cA-c1:not(.annotation--viewAnnotationSelected--UApdn),\n\n.annotation--viewAnnotation--cA-c1.annotation--canSelect--zG4JI:hover {\n  background: var(--color-bg-hover);\n}\n.annotation--viewAnnotationSelected--UApdn {\n  border: 1px solid var(--color-border-selected-strong);\n}\n.annotation--viewAnnotationFadedOut--7LQPE > * {\n  opacity: 0.5;\n}\n.annotation--createAnnotation--tWKSM .text-editor {\n    border: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor.ql-blank::after {\n    margin-top: -1.85em;\n  }\n.annotation--createAnnotation--tWKSM .text-editor:focus-within {\n    margin: 0;\n  }\n[data-fpl-version='ui3'] .annotation--createAnnotation--tWKSM .ql-container {\n      background: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor {\n    font-size: 13px;\n    line-height: 24px;\n    min-height: 38px;\n  }\n[data-fpl-version='ui3'] .annotation--createAnnotation--tWKSM .ql-editor {\n      min-height: 24px;\n      padding: 2px 6px;\n      margin: 4px 0 6px 0;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor ul,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ul,\n  .annotation--createAnnotation--tWKSM .ql-editor ol,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ol {\n    padding-left: 1.5em;\n  }\n.annotation--annotationHoverTarget--4y3Xc {\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  pointer-events: auto;\n  top: calc(50% - 12px);\n  /* This is relative to the left edge of the line end dot,\n     but we want to center it around the dot */\n  left: -9px;\n}\n.annotation--annotationHoverTargetLeftAligned--G1twU {\n  /* This is relative to the right edge of the line end dot,\n     but we want to center it around the dot.\n     Shift by parent width (100%) to account for when the\n     annotation is not hidden. */\n  left: calc(100% - 15px);\n}\n.annotation--annotationLeftAligned--FHQRp {\n  transform: translate(-100%, 0);\n  left: 8px;\n}\n.annotation--annotationRightAligned--VrH8e {\n  left: -8px;\n}\n.annotation--label--Tf5gK.quill-readonly .ql-editor {\n    font-size: 11px;\n  }\n.annotation--label--Tf5gK.quill-readonly .ql-editor h1,\n    .annotation--label--Tf5gK.quill-readonly .ql-editor h2 {\n      font-size: 14px;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor pre.ql-syntax {\n      white-space: pre-wrap;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor > * {\n      cursor: default;\n    }\n.annotation--label--Tf5gK .ql-container {\n    background-color: transparent;\n  }\n.annotation--contentContainer--vSuqs {\n  display: flex;\n  flex-direction: column;\n  padding: 6px 10px 8px 10px;\n  max-width: 220px;\n  box-sizing: border-box;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  gap: 4px;\n}\n.annotation--contentContainerNoProperties--pc2WE {\n  padding: 6px 10px 0 10px;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  padding: 8px;\n}\n.annotation--createAnnotation--tWKSM .annotation--contentContainer--vSuqs {\n  /* Fixed width when authoring */\n  width: 220px;\n}\n.annotation--properties--1p6UF {\n  display: grid;\n  grid-template-columns: min-content auto;\n}\n.annotation--createAnnotation--tWKSM .annotation--properties--1p6UF {\n  padding: 0 6px;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n\n  padding-right: 12px;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  border-top-left-radius: 2px;\n  border-bottom-left-radius: 2px;\n\n  margin-left: -8px;\n  padding-left: 8px;\n}\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  display: flex;\n\n  width: calc(100% + 4px);\n\n  overflow: hidden;\n}\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValue--wwu2U {\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--propertyDisplayValue--bxdp7,\n.annotation--selectedPropertyDisplayLabel--AtFEJ,\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  margin-top: 4px;\n}\n/* Don't add margin top to first \"row\" of grid */\n.annotation--propertyDisplayLabel--PQ2vF:first-child,\n.annotation--propertyDisplayLabel--PQ2vF:first-child + .annotation--propertyDisplayValue--bxdp7,\n.annotation--selectedPropertyDisplayLabel--AtFEJ:first-child,\n.annotation--selectedPropertyDisplayLabel--AtFEJ:first-child + .annotation--selectedPropertyValueWrapper--OyM0X {\n  margin-top: 0;\n}\n.annotation--propertyDisplayValue--bxdp7 {\n  overflow: hidden;\n}\n.annotation--noValue--HHQOU {\n  color: var(--color-text-secondary);\n}\n.annotation--selectedPropertyValue--wwu2U {\n  overflow: hidden;\n\n  flex: 1 1 100%;\n}\n.annotation--selectedPropertyDelete--DMdrA {\n  display: flex;\n  align-items: center;\n\n  padding: 0 4px 0 12px;\n\n  border-top-right-radius: 2px;\n  border-bottom-right-radius: 2px;\n}\n.annotation--selectedPropertyDeleteButton--rko2T {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex: 0 0 16px;\n\n  width: 16px;\n  height: 16px;\n\n  cursor: pointer;\n\n  font-size: 0;\n\n  background: transparent;\n  border: 0 none;\n  border-radius: 2px;\n  box-sizing: content-box;\n\n  padding: 0;\n}\n.annotation--selectedPropertyDeleteButton--rko2T:hover {\n    background: var(--color-bg-tertiary);\n  }\n.annotation--propertyOption--GJWeu {\n\n  background: transparent;\n  color: var(--color-text);\n  border: none;\n  align-self: stretch;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 32px;\n  padding: 0px 16px;\n  gap: 8px;\n\n  font-family: Inter;\n  font-size: 13px;\n  font-weight: 400;\n}\n.annotation--propertyOption--GJWeu:focus {\n    outline: none;\n  }\n.annotation--propertyDivider--Q3tgS {\n  height: 1px;\n  background: var(--color-border);\n  margin: 8px 0;\n}\n.annotation--propertyOptionIcon---NJse {\n  width: 16px;\n}\n.annotation--propertyOptionIconSvg--LypST {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.annotation--propertyOptionIconLabel--vFND- {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  gap: 8px;\n}\n.annotation--allPropertiesAdded--KzT8m {\n  padding: 0 12px;\n  height: 32px;\n  font-size: 11px;\n  display: flex;\n  align-items: center;\n}\n.annotation--hoveredProperty--ZOJgv {\n  background: var(--color-bg-hover);\n}\n.annotation--preview--SrnLk {\n  color: var(--color-text-secondary);\n}\n.annotation--propertyValue--yhAB- {\n}\n.annotation--icon--w1enR svg {\n  fill: var(--color-icon);\n}\n.annotation--icon--w1enR[aria-disabled='true'] svg {\n  fill: var(--color-icon-disabled);\n}\n.annotation--chit--3je6E {\n  width: 12px;\n  height: 12px;\n  border-radius: 2px;\n  display: flex;\n  overflow: hidden;\n  margin: 1px 2px 1px 0;\n  flex-shrink: 0;\n  border: 1px solid var(--color-border);\n}\n.annotation--chit--3je6E svg {\n    width: 12px;\n    height: 12px;\n  }\n.annotation--styleChit--yCQ3O {\n  border: none;\n}\n.annotation--chitInline--vG6cM {\n  margin: 0;\n}\n.annotation--solidPaint--ClR6h {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.annotation--solidPaintValue--9PQMf {\n}\n.annotation--authoringRow--cIo3- {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  padding: 0 4px 4px 8px;\n}\n[data-fpl-version='ui3'] .annotation--authoringRow--cIo3- {\n    padding: 0 8px 4px 8px;\n  }\n.annotation--addPropertyButton--67vPO {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 8px;\n  background-color: transparent;\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  padding: 0 8px;\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 500;\n  height: 24px;\n}\n.annotation--addPropertyButton--67vPO.annotation--active--Q00x6 {\n    background-color: var(--color-bg-pressed);\n  }\n.annotation--addPropertyButton--67vPO:focus-visible {\n    border-color: var(--color-border-selected);\n  }\n.annotation--plusIcon--Ove-l {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 16px;\n  width: 16px;\n  flex: 0 0 16px;\n  line-height: 16px;\n  fill: var(--color-icon);\n}\n.annotation--dropdown--WLrjl {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  padding: 8px 0;\n  top: calc(100% + 8px);\n  left: 0;\n  width: 220px;\n}\n.annotation--coloredProperty--OTQ6l {\n  display: flex;\n  align-items: center;\n  justify-content: left;\n}\n.annotation--coloredProperty--OTQ6l > span {\n    padding-left: 2px;\n    padding-right: 2px;\n    border-radius: 2px;\n  }\n.annotation--paddingProperty--ckvG6 > span {\n    background: var(--color-bginspectpadding);\n    color: var(--color-textoninspectpadding);\n  }\n.annotation--spacingProperty--RCjSM > span {\n    background: var(--color-bginspectspacing);\n    color: var(--color-textoninspectspacing);\n  }\n.annotation--mixedValues--Z0qIk {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.annotation--variablePill--VNxoI {\n  height: 16px;\n  padding: 0 4px;\n}\n.annotation--multipleVariableWrapper--OW3M1 {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n  flex-direction: row;\n  align-items: center;\n}\n.annotation--multipleVariableWrapper--OW3M1.annotation--vertical--zmpVv {\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n.annotation--multipleVariableValue--5-5xk {\n  overflow: hidden;\n  align-self: stretch;\n}\n",oY.N].join("\n"),e.append(t),r(e)}},[]),a.createElement("div",{ref:n,"data-testid":"annotation-renderer-shadow-dom-container",className:ar},o&&(0,nU.createPortal)(t,o))}function oX(){let e=(0,o.wA)(),t=(0,nI.uQ)(),n=(0,o.d4)(e=>e.isFullscreenDocumentLoaded),r=(0,t6.J2)(ed.Ez5.uiState().showAnnotations),i=(0,tb.dH)(),l=(0,nJ._X)({subscribeToUpdates_expensive:!0}),s=(0,t6.J2)((0,nG.d)().lockMouseMoves);a.useEffect(()=>{s&&l.zoomScale<.05&&(0,nG.d)().lockMouseMoves.set(!1)},[s,l]);let[c,d]=(0,eJ.fp)(n$.J);(0,a.useEffect)(()=>{r||d(!1)},[r,d]),(0,a.useEffect)(()=>{c&&e((0,nz.UU)())},[e,c]);let[u,p]=(0,a.useState)({}),{nodesWithAnnotationInfo:m,annotationsBeingViewed:_,newAnnotationNodeInfo:g}=function(e,t){let n=(0,o.d4)(e=>e.mirror.appModel.currentPage),r=(0,t6.J2)(ed.Ez5.annotationObserver().annotationInfoByTlf),i=(0,tb.dH)(),l=(0,nI.uQ)(),s=(0,eJ.md)(n$.J),c=(0,t6.J2)(ed.Ez5.devHandoffState().focusMode),d=(0,t6.J2)(ed.Ez5.devHandoffState().focusNodeId),u=(0,tz.hA)(),p=(0,nX.Fk)((e,t)=>e.get(t)?(0,Z.qT)(e,t):[],n),{tlfsWithNodes:m,newAnnotationNode:_}=(0,nX.Fk)((e,t,n,a,o,r,i,l,s,c)=>{let d=[];for(let n of i.keys()){let a=e.get(n);a&&a.containingCanvas===t&&(c?(0,Z.hD)(e,n,e=>{e.guid===c&&d.push(n)}):d.push(n))}if(l&&(n===ed.NLJ.ANNOTATE||a)){let t=(0,Z.kh)(e,l)||e.get(l);t?.guid&&!i.has(t.guid)&&d.push(t.guid)}let u=null;if(nY.z4.getIsExtension()&&o&&r){let t=(0,Z.kh)(e,r)||e.get(r);t?.guid&&(d=[t?.guid])}let p=d.map(t=>{let n=e.get(t),{nodes:o,tlfContainsSelectedNode:r,newAnnotationNode:i}=function e(t,n,a=[],o){let r=!1,i=null;if(t){if(t.guid===n&&(r=!0),"SECTION"===t.type)return{nodes:[],tlfContainsSelectedNode:r,newAnnotationNode:i};t.childrenNodes.forEach(t=>{let{nodes:l,tlfContainsSelectedNode:s,newAnnotationNode:c}=e(t,n,a,o);return r=r||s,i=i||c,l}),t.annotations.length>0&&t.visible?a.push(t):o&&t.guid===n&&(i=t)}return{nodes:a,newAnnotationNode:i,tlfContainsSelectedNode:r}}(n,l,[],a);return i&&n&&(u={node:i,tlf:t}),{nodes:o,tlfContainsSelectedNode:r,topLevelFrameNode:n}});return s.forEach(e=>{i.has(e.guid)||p.push({nodes:[],tlfContainsSelectedNode:!1,topLevelFrameNode:e})}),{tlfsWithNodes:p,newAnnotationNode:u}},n,i,s,c,d,r,l,p,u),{annotationsBeingViewed:g,nodesWithAnnotationInfo:E}=(0,a.useMemo)(()=>{let n={x:e.offsetX,y:e.offsetY},a=m.map(({nodes:a,tlfContainsSelectedNode:o,topLevelFrameNode:r})=>{if(!r||!r.isAlive())return null;let i={x:r.absoluteBoundingBox.x,y:r.absoluteBoundingBox.y,width:r.absoluteBoundingBox.w,height:r.absoluteBoundingBox.h};if(0===a.length)return o$(i,(0,nJ.qc)(e))?{topLevelFrameNode:r,nodes:a,nodesWithFinalPositionData:[],shouldMinimize:!1,originalShouldMinimize:!1,tlfContainsSelectedNode:o,distanceFromCenter:oj({x:e.offsetX,y:e.offsetY},i),dimensionsWithAnnotations:i}:null;let l=.4>Math.max((i.width||0)*e.zoomScale/e.width,(i.height||0)*e.zoomScale/e.height)&&!o,s=0,c=0,d=a.map(n=>{let a=t[n.guid]||{width:0,height:0},o=oA(n,r,e);return o.isLeftAligned?s=Math.max(s,24+a.width/e.zoomScale):c=Math.max(c,24+a.width/e.zoomScale),{...o,height:t[n.guid]?.height||0,node:n,tlfGuid:r.guid,shouldMinimize:l}}).sort((e,t)=>e.offsetY-t.offsetY),u=ow(e,d,l),p=1/0,m=-1/0;u.forEach(t=>{let n=t.height/e.zoomScale,a=t.offsetY/e.zoomScale+e.offsetY-n/2;p=Math.min(p,a),m=Math.max(m,a+n)});let _=Math.min(i.y,p),g=Math.max(i.y+i.height,m),E={x:i.x-s,y:_,width:i.width+s+c,height:g-_};return o$(E,(0,nJ.qc)(e))?(o&&(n={x:E.x+E.width/2,y:E.y+E.height/2}),{topLevelFrameNode:r,nodes:a,nodesWithFinalPositionData:u,shouldMinimize:l,originalShouldMinimize:l,tlfContainsSelectedNode:o,distanceFromCenter:oj({x:e.offsetX,y:e.offsetY},E),dimensionsWithAnnotations:E}):null}).filter(nW.Vq).sort((e,t)=>oj(n,e.dimensionsWithAnnotations)-oj(n,t.dimensionsWithAnnotations)),o=a.filter(e=>!e.shouldMinimize);for(let e=0;e<o.length-1;e++){let t=o[e];for(let n=e+1;n<o.length;n++){let e=o[n];o$(t.dimensionsWithAnnotations,e.dimensionsWithAnnotations)&&(t.tlfContainsSelectedNode?e.shouldMinimize=!0:e.tlfContainsSelectedNode?t.shouldMinimize=!0:t.distanceFromCenter<e.distanceFromCenter?e.shouldMinimize=!0:t.shouldMinimize=!0)}}let r=[],i=a.flatMap(({nodes:n,nodesWithFinalPositionData:a,shouldMinimize:o,originalShouldMinimize:i,topLevelFrameNode:l})=>{if(n.length>0&&!o&&r.push({tlf:l.guid,numNodes:n.length}),o===i)return a;let s=n.map(n=>({...oA(n,l,e),height:t[n.guid]?.height||0,node:n,tlfGuid:l.guid,shouldMinimize:o})).sort((e,t)=>e.offsetY-t.offsetY);return ow(e,s,o)});return{annotationsBeingViewed:r,nodesWithAnnotationInfo:i}},[t,m,e]);return{nodesWithAnnotationInfo:E,annotationsBeingViewed:g,newAnnotationNodeInfo:(0,a.useMemo)(()=>{if(!_)return null;let n=function(e,t){let{x:n,y:a,w:o,h:r}=e.absoluteBoundingBox,{offsetX:i,offsetY:l,zoomScale:s,width:c}=t,d=ed.Ez5.isFullscreenYScrollbarNeeded(),u=Math.min(20*s,20),p=n+o,m=(n-i)*s+c/2>ob+8&&!((i-p)*s+c/2>ob+(d?16:4));return m?{lineWidth:u,offsetX:(n-i)*s-u,offsetY:(a+r/2-l)*s,isLeftAligned:m}:{lineWidth:u,offsetX:(p-i)*s+u,offsetY:(a+r/2-l)*s,isLeftAligned:m}}(_.node,e);return{...n,height:t[_.node.guid]?.height||0,newAnnotationNode:_,tlfGuid:_.tlf,shouldMinimize:!1,node:_.node,lineAlignment:oT.ALIGNED,lineHeight:0,originalLineWidth:n.lineWidth}},[t,_,e])}}(l,u),E=(0,nB.IL)(),f=_.length,y=_.reduce((e,t)=>e+t.numNodes,0);(0,a.useEffect)(()=>{f&&i===ed.NLJ.SELECT&&E("showing_annotations_for_tlfs",{topLevelFrameCount:f,nodesWithAnnotationsCount:y})},[f,y,i,E]);let h=(0,nH.v_)("annotationsKeyDown","keydown",(0,a.useCallback)(e=>{i===ed.NLJ.ANNOTATE&&!c&&t&&"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&(d(!0),e.stopPropagation())},[i,c,t,d]));if(a.useEffect(()=>(document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)),[h]),a.useEffect(()=>{nq.NB?.setIsShowingAnnotations(0!==_.length)},[_]),!n||!r&&i!==ed.NLJ.ANNOTATE)return null;function v(e,t){(u[e]?.height!==t.height||u[e]?.width!==t.width)&&p(n=>({...n,[e]:t}))}let b=null,N=m.map(e=>c&&e.node.guid===t?(b=a.createElement(oC,{nodeInfo:e,viewportInfo:l,setDimensions:v}),null):a.createElement(oU,{key:e.node.guid,nodeInfo:e,viewportInfo:l,setDimensions:v})),I=c&&g&&a.createElement(oC,{nodeInfo:g,viewportInfo:l,setDimensions:v});return a.createElement(a.Fragment,null,a.createElement(oJ,null,N),b,I)}function o$(e,t){let n=e.x,a=e.x+e.width,o=e.y,r=e.y+e.height,i=t.x,l=t.x+t.width,s=t.y,c=t.y+t.height;return n<l&&a>i&&o<c&&r>s}function oj(e,t){let n={x:t.x+t.width/2,y:t.y+t.height/2};return Math.hypot(n.x-e.x,n.y-e.y)}function oZ(){return a.createElement(nF.p,null,a.createElement(oX,null))}function oQ({children:e}){return a.createElement(nm.G.Provider,{value:{loggerEventName:"dev_handoff_navigate"}},e)}let o0=a.memo(({shouldShowDragAndDropBorder:e})=>{let t=(0,o.d4)(e=>e.progressBarState),n=(0,tb.p8)("loadingEmbeds"),r=!!(0,x._I)(),i=(0,tz.l7)(),l=(0,t5.Lk)(),s=(0,a.useRef)(null),c=(0,o.d4)(e=>e.openFile),d=c?c.key:"",u=(0,o.d4)(e=>e.universalInsertModal),p=(0,o.wA)();return(0,tF.Gb)(d),(0,t4.W)(),a.createElement(oQ,null,a.createElement(B.ED,null),a.createElement(ng.sk,null,t.mode!==t1.Oin.OFF&&a.createElement("div",{className:nf._q}),a.createElement(t8.pO,{initialFilterState:{currentPage:!0}},n.map(e=>a.createElement(nn._,{key:`loading-embed-${e}`,nodeId:e})),a.createElement(nE.qn,null),a.createElement(np.u,null),r&&a.createElement(nK,null),a.createElement(nt.GR,null),a.createElement(nt.bu,null),a.createElement(nc.J,null),!i&&a.createElement(oZ,null),a.createElement(nE.XI,{commentsDetailContainerRef:s}),a.createElement(no.Nz,null),a.createElement("div",{ref:s}),a.createElement(nE.uU,null),a.createElement(ne.G,null),e&&a.createElement(no.X5,null)),a.createElement(t7.A,{isFigjamEditor:!1,isDesignEditor:!1,openFile:c}),u.showing&&a.createElement(A.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{p(el.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:A.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(nd.k,null))),l&&a.createElement(ni.K,{className:nf.PA},a.createElement(nu.s,null)))});n(30637);var o1=n(448169),o2=n(441088),o3=n(241437),o4=n(840083),o6=n(38329),o5=n(742808),o7=n(727749),o8=n(788744),o9=n(315329);function re(){return(0,o9.o)(),a.createElement(a.Fragment,null)}function rt(e){let t=(0,o.wA)(),n=(0,o.d4)(e=>e.showEditButton),r=(0,o.d4)(e=>e.fileByKey),i=(0,o.d4)(e=>e.userAnalyticsData),l=(0,o.d4)(e=>e.user),c=(0,o.d4)(e=>e.openFile?.canEdit),d=(0,o.d4)(e=>null!=e.openFile),{fileKey:u,orgId:p}=e,m=null!=u&&!!r[u]?.is_favorited,_=(0,eY.Rs)(eq.jJU,{fileKey:u||""},{enabled:!!u});a.useEffect(()=>{if("loaded"===_.status){let e=_.data.file?.developerRelatedLinks,t=e?.reduce((e,t)=>{let n=e.get(t.nodeId)??[];return n.push(t),e.set(t.nodeId,n),e},new Map);if(t)try{ed.glU.setDeveloperRelatedLinks(t)}catch{}}},[_]);let g=a.useRef(!1),E=(0,eV.Xr)(tr.Kc),f=(0,eY.Rs)(eq.JKh,{fileKey:u||""},{enabled:!!u});a.useLayoutEffect(()=>{if("loaded"!==f.status)return;let e=f.data.figFileWorkshopMode;E(e?e.expiresAt:null),e&&e.expiresAt>new Date&&(g.current=!0),t(to.lX(e?{id:e.id,until:e.expiresAt,loaded:!0}:{loaded:!0}))},[f,t,E]);let y=a.useRef(null),h=a.useRef(!1),v=a.useRef(null),b=a.useRef(null),N=(0,eY.Rs)(eq.ehp,{fileKey:u||""},{enabled:!!u});a.useLayoutEffect(()=>{if("loaded"!==N.status)return;let e=N.data.file;if(null===y.current){let t=(0,s.Ay)().editing_file;null!==e&&t&&e.key===t.key&&!!t.can_edit!==e.canEdit&&((0,M.sx)("open_file_inconsistent_permission",{file_key:e.key,lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit,user:o6.D.getState().user?.id},{batchRequest:!0}),(0,o5.Rh)("open_file.inconsistent_permissions",{lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit}))}if((0,nE.X_)({openFile:e,wasInWorkshop:g.current,previousCanEdit:y.current,wasInUnclaimedTryFile:h.current,previousCanView:b.current,previousFileKey:v.current?.key||null},t),null==e)return;b.current=e.canView,y.current=e.canEdit,g.current&&e.isTryFile&&(h.current=!0);let a=o6.D.getState().selectedView;"fullscreen"===a.view&&a.fileKey===e?.key&&v.current!==e&&(t(S.UC({openFile:{...e,showEditButton:n,isFavorited:m}})),v.current=e)},[N,t,n,m,d]);let I=(0,q.Be)();return a.useLayoutEffect(()=>{let e=o6.D.getState().selectedView;if(!I.loaded||"fullscreen"!==e.view)return;let{plugins:n,widgets:a,orgPlugins:o,orgWidgets:r}=I,i={...n,...o},l={...a,...r};t(o7.g3(i)),t(o7.zI(l))},[t,p,I]),(0,o8.rB)(),c&&(0,o9.n)(i,l?.email)?a.createElement(re,null):a.createElement(a.Fragment,null)}var rn=n(354235);function ra(){return(0,W.co)(),null}function ro({children:e,setShouldShowDragAndDropBorder:t,onPointerDown:n=nE.j6,isDragTarget:r=!1}){let i=(0,o.d4)(e=>e.modalShown),l=(0,o2.T)();(0,eJ.md)(o3.Pp);let s=(0,t6.J2)(ed.Ez5?.devHandoffState().focusMode),c=(0,o.d4)(e=>e.openFile),d=c?c.key:"",u=(0,et.dq)(),p=a.useRef(!1);return a.createElement(rn.d,null,a.createElement(o1.Y,{isDragTarget:()=>r,onTargetDragEnter:()=>{t(!0)},onTargetDragLeave:()=>{t(!1)},onTargetDrop:()=>{t(!1)}},a.createElement("div",{"aria-hidden":!!i,className:ej()(nf.nP,l&&s&&nf.$J),onPointerDown:e=>{n(e,p)}},a.createElement(rt,{fileKey:d||null,orgId:u}),e,a.createElement(o4.G,null),a.createElement(ra,null),!1,!1)))}let rr={[eO.nT.Design]:ny,[eO.nT.Whiteboard]:tk.lR,[eO.nT.Sites]:tQ,[eO.nT.Slides]:t0,[eO.nT.DevHandoff]:o0,[eO.nT.Cooper]:function(){return null}},ri=a.memo(()=>{let e=(0,o.d4)(e=>e.openFile),t=e?e.key:"",n=(0,a.useRef)(null),r=(0,a.useRef)(null),i=(0,a.useRef)(null),l=(0,_.R)(ng.Xy),c=(0,o.wA)(),u=(0,eJ.md)(tU.h),p=(0,o.d4)(e=>e.openFile?.canEdit??!1),[m,g]=(0,a.useState)(!1),E=(0,tb.dH)(),f=l.selectedView.editorType,y=(0,tt.ZC)(f),h=(0,tJ.R)(),v=(0,tb.p8)("showUi");if(f!==y&&y&&c(S.PQ([])),(0,tX.j)(t),(0,t$.KQ)(t),(0,tM.OQ)(t),(0,t$.y1)(t),tF.nz(),(0,tB.N)(),(0,nE.Ky)(),(0,a.useEffect)(()=>{let e=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})};window.scrollTo(0,0),d.XN&&document.addEventListener("focusout",e),document.documentElement.classList.add(nf.FC),document.body.classList.add(nf.Wc),c(tV._J());let t=window.FigmaMobile;return t&&(t._get_memory_stats=()=>{let e=ed.P2e?.getImageMemory()||{};return{metadata:JSON.parse(JSON.stringify({coreJsBufferMemory:ed.hMR?.getJsBufferMemory()||0,coreLocalMaxUsedHeapMemory:ed.hMR?.getLocalMaxUsedHeapMemory()||0,coreMaxUsedHeapMemory:ed.hMR?.getMaxUsedHeapMemory()||0,coreTotalUsedHeapMemory:ed.hMR?.getTotalUsedHeapMemory()||0,fullscreenCompressedImages:e.compressedImages||0,fullscreenUncompressedImagesArrayBuffers:e.uncompressedArrayBuffer||0,fullscreenUncompressedImagesImageBitmap:e.uncompressedImageBitmap||0})),reservedWasmMemory:(0,tW.le)()||0,rendererGpuMemory:ed.P2e?.getRendererGpuMemory()||0,rendererBreakdown:ed.P2e?.getRendererMemoryBreakdown()||{}}}),()=>{d.XN&&document.removeEventListener("focusout",e),document.body.classList.remove(nf.Wc),document.documentElement.classList.remove(nf.FC)}},[c]),(0,a.useEffect)(()=>{let e=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})};window.scrollTo(0,0),d.XN&&document.addEventListener("focusout",e),document.documentElement.classList.add(nf.FC),document.body.classList.add(nf.Wc),c(tV._J());let t=window.FigmaMobile;return t&&(t._get_memory_stats=()=>{let e=ed.P2e?.getImageMemory()||{};return{metadata:JSON.parse(JSON.stringify({coreJsBufferMemory:ed.hMR?.getJsBufferMemory()||0,coreLocalMaxUsedHeapMemory:ed.hMR?.getLocalMaxUsedHeapMemory()||0,coreMaxUsedHeapMemory:ed.hMR?.getMaxUsedHeapMemory()||0,coreTotalUsedHeapMemory:ed.hMR?.getTotalUsedHeapMemory()||0,fullscreenCompressedImages:e.compressedImages||0,fullscreenUncompressedImagesArrayBuffers:e.uncompressedArrayBuffer||0,fullscreenUncompressedImagesImageBitmap:e.uncompressedImageBitmap||0})),reservedWasmMemory:(0,tW.le)()||0,rendererGpuMemory:ed.P2e?.getRendererGpuMemory()||0,rendererBreakdown:ed.P2e?.getRendererMemoryBreakdown()||{}}}),()=>{d.XN&&document.removeEventListener("focusout",e),document.body.classList.remove(nf.Wc),document.documentElement.classList.remove(nf.FC)}},[c]),(0,a.useEffect)(()=>{l.openFile&&!n.current&&(c(tF.Yx({})),l.openFile&&!l.isReadOnly?l.openFile?.canEdit&&c(tR.rH({fileKey:l.openFile.key})):(0,s.kc)().ce_new_missing_fonts_logging&&(0,tH.DI)(),n.current=l.openFile)},[c,l.isReadOnly,l.openFile]),(0,a.useEffect)(()=>{(0,nE.RS)(c,l.openFile?.key,l.currentUserOrgId)},[c,l.currentUserOrgId,l.openFile?.key,l.selectedView.editorType]),(0,a.useEffect)(()=>{z.eD&&z.eD.setEditFilePermissions(p)},[p]),(0,a.useEffect)(()=>{l.openFile&&(null===r.current||!r.current)&&c((0,tK.x4)()),l.openFile&&r.current&&l.openFile.key!==r.current&&c((0,tK.x4)()),i.current&&l.selectedView.editorType!==i.current&&c((0,tK.x4)()),i.current=l.selectedView.editorType,r.current=l.openFile?.key},[c,l.openFile,l.openFile?.key,l.selectedView.editorType]),"ok"!==u)return null;let b=rr[f]??a.Fragment;return a.createElement(ro,{setShouldShowDragAndDropBorder:g,isDragTarget:f===eO.nT.Whiteboard,onPointerDown:f===eO.nT.Whiteboard?(e,t)=>{(0,nE.P2)(e,t,E)}:void 0},a.createElement(b,{shouldShowDragAndDropBorder:m}),(f===eO.nT.Design||f===eO.nT.DevHandoff)&&h&&v&&a.createElement(tq,null))});var rl=n(447402);function rs(){let{error:e}=(0,A.Hb)();return e instanceof Error&&e.message.includes("Out of memory")?a.createElement(rl.PG,null):a.createElement(A.S1,null)}let rc=()=>{let e=(0,o.Pj)();return a.useCallback(t=>{let n=e.getState().mirror.sceneGraph;return(0,Z.dA)(n,t)},[e])},rd=()=>{"hidden"===document.visibilityState&&(f.x4?.clear(),eL.L.cleanupSession())};function ru(){let e=(0,o.wA)(),t=(0,o.d4)(e=>e.openFile);(0,x.lF)(t?.key??""),eS.M4.Folder.useValue(t?.folderId);let n=(0,o.d4)(e=>e.selectedView.editorType),c=(0,tT.FF)(),[u,p]=(0,a.useState)(!1),_=(0,i.DP)(),f=(0,tP.sO)(),y=(0,a.useCallback)(()=>{(0,nE.jS)(),p(!0)},[]),h=(0,o.d4)(e=>e.mergingStatus);(0,a.useEffect)(()=>{if((0,s.kc)().ce_suppress_browser_keys)return document.addEventListener("keydown",m,!0),()=>void document.removeEventListener("keydown",m,!0)},[]),(0,U.LD)(),function(){let e=(0,a.useRef)(),t=(0,a.useRef)(),n=(0,o.wA)(),r=(0,o.d4)(e=>e.userFlags),i=(0,o.d4)(e=>!!e.user),l=function(e,t){let n=(0,o.d4)(e=>e.mirror.appModel.showKeyboardShortcuts),r=(0,o.d4)(e=>e.user?.created_at),i=(0,a.useMemo)(()=>{let e=new Date("2022-11-14").getTime();return null!=r&&new Date(r).getTime()>=e},[r]);return(0,a.useCallback)((a,o,r,l)=>{t.keyboard_user_first_detection||l||!i?a!==ed.aTn.US_QWERTY||l||o!==ed.aTn.UNKNOWN?a&&o!==ed.aTn.UNKNOWN?t.keyboard_manual_supported_bell||eg(e,a,o,n):a&&o===ed.aTn.UNKNOWN?t.keyboard_generic_supported_first_bell||eE(e,a,n):(0,er.CZ)({layout:o,detectedLayoutStr:r??void 0,eventName:"keyboard_change_no_bell"}):(0,er.CZ)({layout:a,eventName:"ignore_us_qwerty"}):(e(C.b({keyboard_user_first_detection:!0})),a&&((0,er.rd)({layout:a}),(0,er.CZ)({layout:a,eventName:"auto_set_new_user_layout"})))},[e,t,n,i])}(n,r),s=(0,a.useCallback)(async()=>{if(i){if(z.eD){let t=await ef(l,e.current??null);e.current=t}else{let e=await ey(l,t.current??null);t.current=e}}},[l,i]);(0,a.useEffect)(()=>{ec.Y5.isReady()?s():ec.Y5.onReady().then(()=>setTimeout(s,500))},[])}(),(0,ee.XS)(),function(){let e=(0,o.Pj)(),t=(0,o.d4)(eh.d1),n=(0,o.d4)(eN.m0),r=(0,o.d4)(eN.No),i=(0,o.d4)(e=>e.library.published),l=(0,o.d4)(e=>e.openFile),c=(0,o.d4)(e=>e.fileVersion),d=(0,o.d4)(e=>e.loadingState),u=(0,o.d4)(e=>e.library.local),p=(0,o.d4)(e=>e.library.assetsPanelSearch.shouldSearchDefaultLibraries),m=(0,ev.ud)(),_=(0,o.d4)(e=>e.folders),g=(0,eI.l6)(),E=(0,o.d4)(e=>e.library.assetsPanelSearch.query),f=(0,o.d4)(e=>e.library.assetsPanelSearch.searchOptions),y=(0,eb.D2)(d,(0,eA.yD)(l?.key||"")),h=(0,eT.M)()&&(0,s.kc)().dse_new_asset_panel_fetch,v=(0,s.kc)().dse_new_asset_panel_fetch&&(0,s.kc)().asset_search_min_searches;(0,a.useEffect)(()=>{t&&ex.YG.sourcesDidChange()},[t,n,r,i,u,p,m,_]),(0,a.useEffect)(()=>{(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.queryDidChange(e)},[e,E,h]),(0,a.useEffect)(()=>{(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.searchOptionsDidChange(e)},[e,f,h]),(0,a.useEffect)(()=>{(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.subscriptionsDidChange(e,g)},[e,y,g,h]),(0,a.useEffect)(()=>{!v&&(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.assetSearchMinimizeSearchShadowRead(e,ew.oi.OPEN_FILE)},[e,l,h,v]),(0,a.useEffect)(()=>{!v&&(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.assetSearchMinimizeSearchShadowRead(e,ew.oi.FILE_VERSION)},[e,c,h,v]),(0,a.useEffect)(()=>{!v&&(0,ex.Wg)(e.getState(),{ignoreLoadingState:h})&&ex.YG.assetSearchMinimizeSearchShadowRead(e,ew.oi.LOADING_STATE)},[e,d,h,v])}(),(0,$.gN)(),z.eD&&function(){let e=(0,q.JI)(),t=(0,o.d4)(e=>e.mirror.appModel.isReadOnly),n=(0,X.Yo)(),r=(0,o.d4)(e=>e.openFile),i=(0,o.d4)(e=>e.localPlugins),l=(0,R.E3)(),s=(0,q.op)(),c=(0,o.d4)(e=>e.installedPluginVersions.plugins),d=(0,o.d4)(e=>e.mirror.selectedStyleProperties?.selectedWidgetInfo),u=(0,o.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),p=(0,o.d4)(e=>e.publishedPlugins),m=(0,o.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),_=(0,q.Be)(),g=_.orgPlugins,E=_.orgWidgets,f=(0,J.h)("plugin"),y=(0,J.h)("widget"),h=(0,q.NU)(),v=(0,q.qr)(),b=(0,q.ZT)(),N=null!=(0,$.SH)();a.useEffect(()=>{let a={isReadOnly:t,userCanRunPlugins:e,openFile:r,publishedPlugins:p,localExtensions:i,orgEntity:n,allSavedPlugins:c,recentlyUsedPlugins:s,org:m,editorType:l,widgetSelectionInfo:d,hideRecentsHeader:!0,activeTextReviewPlugin:u,orgSavedPlugins:g,orgSavedWidgets:E,orgPrivatePlugins:f,orgPrivateWidgets:y,savedWidgetVersions:h,recentlyUsedWidgets:v,publishedWidgets:b};j(G.$0(a),Y.wX(a))},[t,e,r,p,c,s,i,n,m,l,d,u,_,g,E,f,y,h,v,b,N])}(),function(){let e=(0,R.E3)(),t=(0,a.useCallback)(()=>{(0,M.sx)("display_redline",{source:"keyboard_shortcut",mode:e})},[e]),n=(0,L.A)(t,1e3,{leading:!0,trailing:!1}),r=(0,o.d4)(e=>e.usedKeyboardShortcuts["measure-to-selection"]||0),i=(0,a.useRef)(r);(0,a.useEffect)(()=>{i.current!==r&&(i.current=r,n())},[r,n])}();let v=(0,g.Sl)();(0,E.I7)("exp_aa_test_fullscreen_view").getConfig(),function(){let e=(0,o.wA)(),t=(0,tT.FF)(),n=(0,tl.BI)(),[r,i]=(0,a.useState)(!1),l=(0,o.d4)(e=>e.mirror.appModel.multiplayerSessionState===ed.kul.JOINED);a.useEffect(()=>{t&&!r&&n?.shouldOptimizeForIpadApp&&l&&!ed.Ez5?.defaultToolIsHandSelect()&&(i(!0),ec.Y5.triggerAction("set-tool-hand",null))},[t,n,r,i,l]);let s=(0,o.d4)(({mirror:{appModel:e}})=>e.showUi);a.useEffect(()=>{n?.updateUIVisible&&n.updateUIVisible(s)},[n,s]);let c=(0,tl.m0)();a.useEffect(()=>{c&&(c._try_to_flush_autosave=async()=>{let e=(0,tv.ZG)();if(e){let t=e.session();t&&await t.tryToFlushAutosave()}})},[c]);let d=(0,tI.Kd)();a.useEffect(()=>{n?.updateSaveStatus&&(d?l?n.updateSaveStatus(tx.av.SAVING):n.updateSaveStatus(tx.av.PAUSED):n.updateSaveStatus(tx.av.SAVED))},[n,d,l]);let u=(0,o.d4)(e=>(0,tN.Yh)(e.mirror.appModel,"undo")),p=(0,o.d4)(e=>(0,tN.Yh)(e.mirror.appModel,"redo"));a.useEffect(()=>{if(n?.updateUndoEnabled&&n.updateUndoEnabled(u),n?.updateRedoEnabled&&n.updateRedoEnabled(p),c){let t=t=>{e(el.F.dequeue({matchType:"undo_redo_gesture"})),e(el.F.enqueue({message:t,type:"undo_redo_gesture",timeoutOverride:750}))};c._trigger_undo=()=>{u&&(ec.Y5.triggerActionInUserEditScope("undo"),t((0,ei.t)("fullscreen_actions.undo")))},c._trigger_redo=()=>{p&&(ec.Y5.triggerActionInUserEditScope("redo"),t((0,ei.t)("fullscreen_actions.redo")))}}},[n,e,u,p,c]);let m=(0,tl.pt)();a.useEffect(()=>{m&&(m._set_ui_visibility=e=>{e!==s&&ec.Y5.triggerAction("toggle-ui")})},[m,s]);let _=(0,th.Yk)();a.useEffect(()=>{n?.updateDLTHeight&&n.updateDLTHeight(_)},[_,n]);let g=(0,tb.dH)(),E=(0,tS.pK)(g),f=(0,tl.Ef)(),y=(0,o.d4)(e=>e.mirror?.appModel.isReadOnly);a.useEffect(()=>{E&&!y&&(f?.nativeToolbarUpdateActiveTool?.(E),f?.nativeToolbarUpdateMultiselectActive?.("MULTISELECT"===E))},[f,E,y]);let[h,v]=a.useState("ERASER"),[b,N]=a.useState("PENCIL");a.useEffect(()=>{!y&&E&&(0,tS.S0)(E)&&E!==h&&(N(h),v(E))},[E,h,v,N,y]),a.useEffect(()=>{m&&(m._switch_to_eraser=function(){if(y)return{success:!1,error:tw.lj.READ_ONLY_FILE,currentTool:"NONE"};if("ERASER"!==h)return(0,tS.Jm)("set-tool-eraser"),{success:!0,error:null,currentTool:"ERASER"};{let e=tS.Jh.get(b);return e&&(0,tS.Jm)(e),{success:!0,error:null,currentTool:b}}},m._switch_to_previous_drawing_tool=function(){if(y)return{success:!1,error:tw.lj.READ_ONLY_FILE,currentTool:"NONE"};let e=tS.Jh.get(b);return e&&(0,tS.Jm)(e),{success:!0,error:null,currentTool:b}})},[y,E,b,h,m]),c&&(c._update_context_menu_visibility=e=>{ed.glU.updateNativeContextMenuVisibility(e)},c._override_document_visibility_state=tA.R),m&&(m._activate_multiselect_mode=()=>{(0,tS.Jm)("set-tool-multiselect")},m._deactivate_multiselect_mode=()=>{(0,tS.Jm)("set-tool-default")})}(),(0,eP.a4)(),(0,l.fp)(),a.useEffect(()=>eo.Bc,[]);let b=(0,E.I7)("exp_test_exposure_data_loss",!1,!0).getConfig(),N=!!(0,ea.f)("exp_test_exposure_data_loss_has_checked");a.useEffect(()=>{let t=b.getValue("should_expose_once",null);null===t||t&&N||((0,E.hW)("exp_test_exposure_data_loss"),t&&e(C.b({exp_test_exposure_data_loss_has_checked:!0})))},[b,N,e]),a.useEffect(()=>{n===eO.nT.Whiteboard&&(0,E.hW)("exp_unified_index_v3_figjam")},[n]),a.useEffect(()=>(n===eO.nT.Whiteboard&&d.Ay.isMeetDevice&&"undefined"!=typeof document&&document.addEventListener("visibilitychange",rd),()=>{document.removeEventListener("visibilitychange",rd)}),[n]);let T=(0,D.o)();a.useEffect(()=>{if(T)return e(P.HQ({storeInRecentsKey:T})),n===eO.nT.Whiteboard&&(e(P.gr({storeInRecentsKey:T})),e(P.vZ({storeInRecentsKey:T}))),n!==eO.nT.DevHandoff&&e(P.aF({storeInRecentsKey:T})),window.addEventListener("storage",t,!1),()=>{window.removeEventListener("storage",t,!1)};function t(t){switch(t.key){case eC.vY:case eC.S7:e(P.HQ({storeInRecentsKey:T}));break;case eC.YN:case eC.xk:e(P.aF({storeInRecentsKey:T}));break;case eC.SO:e(P.gr({storeInRecentsKey:T}));break;case eC.JG:e(P.vZ({storeInRecentsKey:T}))}}},[e,n,T]);let A=(0,en.TA)();a.useEffect(()=>{A&&e(w.oQ())},[e,A]),function(){let e=(0,eV.Xr)(ez);(0,a.useEffect)(()=>{let t;let n=()=>{clearTimeout(t),t=setTimeout(()=>{e(eK.IDLE_DUE_TO_INACTIVITY)},6e4)},a=()=>{n(),e(eK.ACTIVE_AFTER_IDLE)},o=eR()(a,500,{trailing:!1,leading:!0}),r=()=>{"visible"===document.visibilityState?a():e(eK.IDLE_DUE_TO_TAB_SWITCH)};return e(eK.ACTIVE_FIRST_TIME),eG.forEach(e=>{document.addEventListener(e,o)}),document.addEventListener("visibilitychange",r),n(),()=>{eG.forEach(e=>{document.removeEventListener(e,o)}),document.removeEventListener("visibilitychange",r),clearTimeout(t)}},[e,6e4])}(),a.useEffect(()=>{let t=t=>{if(h===r.y.MERGING)return t.returnValue="A merge operation is in progress. Closing the window could result in data loss or corruption; please wait until the operation completes.",t.preventDefault(),e(S.sx({name:"Unload During Merge Warning Shown"})),!1},n=()=>{h===r.y.MERGING&&e(S.sx({name:"Page Closed During Merge"}))};return window.addEventListener("beforeunload",t),window.addEventListener("unload",n),()=>{window.removeEventListener("beforeunload",t),window.removeEventListener("unload",n)}},[h,e]);let O=(0,a.useRef)(!1);a.useEffect(()=>{(0,s.kc)().search_persistent_sessions&&t?.key&&!O.current&&(O.current=!0,F.y.startTimer(t.key,(0,ek.lM)()))},[t?.key]);let[k,K]=(0,tS.H_)(),W=a.createElement(a.Fragment,null,a.createElement(rp,{file:t,onCanvasExpired:y}),c&&a.createElement(rn.d,null,k?K&&a.createElement(tS.vW,null):a.createElement(tk.aT,null)));return a.createElement(I,{name:"editor",alsoTrack:()=>({editorType:(0,eO.Bu)(n),productType:(0,V.Dc)(n),uiVersion:_.version,fileKey:t?.key||"",slideView:f?(0,tC.R9)():void 0})},a.createElement(B.wG,null,a.createElement(g.q5.Provider,{value:v},a.createElement(a.Fragment,null,!u&&W,!u&&a.createElement(tf,{onWorkshopExpired:y})))))}function rp({file:e,onCanvasExpired:t}){let n=(0,o.d4)(e=>e.userStateLoaded),r=(0,o.d4)(e=>e.mirror.appModel.isInitialized),i=(0,_.R)(e=>e.comments),{anchorPositions:l,boundingBoxPositions:c,DEPRECATED_updateWatchedNodeIds:d,updateWatchedStablePaths:u}=(0,K.Cn)(),p=rc(),m=(0,en.TA)();(0,ty.ox)({file:e,onCanvasExpired:t});let g=(0,et.sZ)();if(function(e){let t=a.useRef(!1),n=function(){let e=(0,eJ.md)(eX._),t=a.useRef(e);return a.useLayoutEffect(()=>{e&&(t.current=!0)},[e]),!!(0,s.kc)().mfa_for_guests&&t.current}(),o=(0,eY.Rs)(eq.NSA,{fileKey:e??""},{enabled:!!e});return a.useLayoutEffect(()=>{var e;n&&"loaded"===o.status&&(null==(e=o.data.file)?void 0:e.canRead)!==!0&&(t.current=!0)},[n,o]),!!(0,s.kc)().mfa_for_guests&&t.current}(e?.key)&&g)return a.createElement(te,{org:g});let E=(0,k.T8)(a.createElement(O.NX,{userId:m,file:e,orgId:e?.parentOrgId??null,activeId:i.activeThread?.id||null,anchorPositions:l,boundingBoxPositions:c,DEPRECATED_updateWatchedNodeIds:d,updateWatchedStablePaths:u,getPageIdsForNodes:p},a.createElement(tL.R,null,a.createElement(tD.P,null,a.createElement(A.tH,{boundaryKey:"InAppPage",fallback:a.createElement(rs,null),hasCustomWASMBuild:Q.y4},a.createElement(ri,null))))),eD.e0.EDITOR,null!=e?(0,V.oP)(e):{},null!=e&&n&&r);return a.createElement(a.Fragment,null,E)}function rm(){return(0,W.co)(),null}let r_=(0,tO.n)(()=>{})},973801:(e,t,n)=>{n.d(t,{X:()=>k});var a=n(411855),o=n(188507),r=n(648836),i=n(385754),l=n(405070),s=n(75888),c=n(677859),d=n(629019),u=n.n(d),p=n(498750),m=n(541524),_=n(852800),g=n(662531),E=n(100197),f=n(7959),y=n(630978),h=n(695342),v=n(221537),b=n(12519);let N="stack_controls--input--gK1jo text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",I="stack_controls--scrubbableControl--b1ChI",T="stack_controls--inputSvg--wFizL",A="stack_controls--stackSpacingRow--Uus3H";function x(){let e=(0,E.J2)(_.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===_.RN9.SPACING?a.createElement(S,{focusOnMount:n}):t===_.RN9.COUNTER_SPACING?a.createElement(P,{focusOnMount:n}):a.createElement(C,{stackRegion:t,focusOnMount:n})}let w=e=>{if(e.keyCode===p.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;_.Qa7.tabActiveStackRegion(t)}};function S({focusOnMount:e}){return a.createElement(f.fI,{className:A},a.createElement(b.KI,{focusOnMount:e,outerClassName:I,inputClassName:N,svgClassName:T,onBlur:_.Qa7.clearActiveStackRegion,onKeyDown:w,onPaste:O,noBorderOnFocus:!0,recordingKey:"stackSpacingControl",inputTestId:"stackSpacingControl",source:"canvas",onCanvasUI:!0}))}function P({focusOnMount:e}){return a.createElement(f.fI,{className:A},a.createElement(y.q,{focusOnMount:e,outerClassName:I,inputClassName:N,svgClassName:T,onBlur:_.Qa7.clearActiveStackRegion,onKeyDown:w,onPaste:O,noBorderOnFocus:!0,recordingKey:"stackCounterSpacingControl",inputTestId:"stackCounterSpacingControl",source:"canvas",onCanvasUI:!0}))}function C({stackRegion:e,focusOnMount:t}){let[n]=(0,v.HF)(e),o=Array.isArray(n)?n.length:0;return e===_.RN9.SPACING?null:a.createElement(f.fI,{className:u()("stack_controls--stackPaddingRow--40WUa",{"stack_controls--large--bJFUN":o>3})},a.createElement(h.s,{paddingSelection:e,focusOnMount:t,outerClassName:I,inputClassName:N,onBlur:_.Qa7.clearActiveStackRegion,onKeyDown:w,onPaste:O,noBorderOnFocus:!0,svgClassName:T,recordingKey:"stackPaddingControl",inputTestId:"stackPaddingControl",source:"canvas",disableVariablesEntryPoint:!0}))}function O(e){(0,m.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),g.l7.user("paste-in-stack",()=>{_.glU.triggerAction("paste",{})}))}let k=a.memo(function(){return(0,o.d4)(e=>e.mirror.appModel.isReadOnly)?null:a.createElement(D,null)});function D(){return a.createElement(r.k,{isShown:!0},a.createElement(s.IA,null,a.createElement(L,{testID:"DesignInlineMenu"})))}function L({testID:e}){let t=(0,o.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t)});return(0,o.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&t?.propertyMenu.length)})?a.createElement(c.W1,{size:"small",testID:e},a.createElement(i.jk,null),a.createElement(l.x,null)):t?a.createElement(c.W1,{testID:e,darkModePreferred:!0},a.createElement(x,{key:"stackControls"})):null}},286886:(e,t,n)=>{n.d(t,{K:()=>y});var a=n(411855),o=n(629019),r=n.n(o),i=n(91408),l=n(374626),s=n(603689),c=n(259927),d=n(809831),u=n(506599),p=n(226055),m=n(617453),_=n(100197),g=n(239671),E=n(672591),f=n(860168);function y(e){let t;let n=(0,s.lz)(),o=(0,m.qw)(),y=(0,d.E3)(),{isPropertiesPanelCollapsed:h}=(0,u.iT)(),v=(0,l.md)(E.Ds),b=(0,_.J2)((0,m.UK)().renderRulers);return(0,p.GS)()&&(t={right:`calc(${y===g.nT.DevHandoff?n:o}px + ${(0,i.jz)(f.M$q)}px)`,top:`${(0,i.jz)(f.M$q)}px`},h&&(t={...t,right:`calc(${v}px + ${(0,i.jz)(f.M$q)}px)`}),b&&(t={...t,top:`calc(${(0,i.jz)(f.M$q)}px + ${(0,i.jz)(f.y9S)}px)`})),a.createElement("div",{style:t,className:r()("nav_container--flexContainer--3Us-2 nav_container--baseContainer--QideS overflow--overflowYAuto--nfK38 overflow--momentumScroll--qtsu7",c.Dm,e.className)},e.children)}},900878:(e,t,n)=>{n.d(t,{E:()=>l,P:()=>s});var a=n(574724),o=n(852800);function r(e,t){let n={},a=e.getVariableConsumptionMap();if(Object.keys(a).length>0)for(let[r,l]of Object.entries(a))if(l?.isMixed||l?.type!==o.Z_n.ALIAS){if(!l?.isMixed&&l?.type===o.Z_n.EXPRESSION)for(let a of function e(t){let n=[];for(let a of t.value.expressionArguments)a.type===o.Z_n.ALIAS?n.push(a.value):a.type===o.Z_n.EXPRESSION&&n.push(...e(a));return n}(l))i(a,r,e,t,n)}else{let a=l?.value;n[a]||i(a,r,e,t,n)}for(let a of e.childrenNodes)Object.assign(n,r(a,t));return n}function i(e,t,n,a,o){if(!o[e]){o[e]={nodesUsed:{}};let t=a.get(e)?.name;t&&(o[e].name=t);let n=a.get(e)?.description;n&&(o[e].description=n);let r=a.get(e)?.resolvedType;r&&(o[e].resolvedType=r)}return o[e].nodesUsed[n.guid]||(o[e].nodesUsed[n.guid]={nodeName:n.name,fields:[]}),o[e].nodesUsed[n.guid].fields.push(t),o}function l(e,t,n=new Map){let a=function(e,t=new Map,n=!1){if(n)return r(e.getRoot(),t);let a=e.getCurrentPage();return null===a?{}:r(a,t)}(e,t);if(n.size>0)for(let[e,t]of n)a[e]||(a[e]={nodesUsed:{}},a[e].name=t.name,a[e].description=t.description,a[e].resolvedType=t.resolvedType,a[e].priority="LOW");return function(e){let t="";for(let[n,a]of Object.entries(e)){if(t+=`${n} has name "${a.name}", resolvedType "${a.resolvedType}"`,a.description&&(t+=`, description "${a.description.slice(0,100)}"`),a.priority?t+=`, priority "${a.priority}"`:t+=', priority "NORMAL"',Object.keys(a.nodesUsed).length>0)for(let[e,{nodeName:n,fields:o}]of(t+=", and is used in ",Object.entries(a.nodesUsed)))t+=`node ${n} with fields ${o.join(", ")}`;t+="\n"}return t}(a)}async function s(e,t,n=.5){let o=[];for(let[t,n]of e)n.description?o.push(`${n.name}: ${n.description}`):o.push(n.name);let r=(await a.Ay.openai.computeEmbeddings({model:"text-embedding-3-small",input:[t,...o],use_cache:!0})).data.map(e=>e.embedding),i=r[0],l=new Map,c=Array.from(e);for(let e=1;e<r.length;e++)if(function(e,t){return e.reduce((e,n,a)=>e+n*t[a],0)/(Math.sqrt(e.reduce((e,t)=>e+t*t,0))*Math.sqrt(t.reduce((e,t)=>e+t*t,0)))}(i,r[e])>n){let[t,n]=c[e-1];l.set(t,n)}return l}},511787:(e,t,n)=>{n.d(t,{f:()=>g});var a=n(411855),o=n(153234),r=n(572206),i=n(268537),l=n(574176),s=n(318812),c=n(720488),d=n(704762),u=n(820396),p=n(675357),m=n(50275),_=n(501191);function g({resolvedTypes:e,recordingKey:t}){let{showing:n,toggle:i,hide:u}=(0,s.BK)("expression-builder-create-variable"),p=a.useRef(null),g=o.rf(o.Pt(t,"createVariableDropdown"),"click",a.useCallback(()=>{1===e.length?v(e[0]):i()},[e,i])),[f,y]=a.useState(!1),h=a.useRef(null),v=e=>{let t=p.current?.getBoundingClientRect();t&&(h.current={initialPosition:new r.Mi(t.left,t.top),resolvedType:e},y(!0))},b=()=>{y(!1)};return a.createElement(a.Fragment,null,a.createElement("button",{ref:p,className:m.ZS,onClick:g},a.createElement(l.B,{svg:_.A})),f&&(f&&h.current?a.createElement(d.IU,{initialPosition:h.current.initialPosition,resolvedType:h.current.resolvedType,onCreateVariable:b,onClose:b}):null),n&&p.current&&a.createElement(c.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:p.current.getBoundingClientRect()},e.map(e=>a.createElement(E,{key:e,resolvedType:e,onClose:u,showCreationModal:v,recordingKey:t}))))}function E({resolvedType:e,onClose:t,showCreationModal:n,recordingKey:r}){let l=(0,p.F)(e),s=o.rf(o.Pt(r,"createVariableOption",l.name),"click",a.useCallback(()=>{n(e),t()},[t,e,n]));return a.createElement(i.c$,{className:m.Fs,onClick:s},a.createElement(u.i,{type:e,showTooltip:!1}),l.name)}},696963:(e,t,n)=>{let a;n.d(t,{E:()=>am});var o=n(411855),r=n(188507),i=n(767129),l=n(829816),s=n(536825),c=n(631437),d=n(629019),u=n.n(d),p=n(866206),m=n(91408),_=n(966712),g=n(374626),E=n(529004),f=n(860601),y=n(153234),h=n(572206),v=n(827586),b=n(46481),N=n(987918),I=n(939863),T=n(259927),A=n(226055),x=n(356390),w=n(541524),S=n(852800),P=n(662531),C=n(848661),O=n(457630),k=n(29680),D=n(335682),L=n(94500),M=n(945020),R=n(498606),V=n(233890),K=n(7959),F=n(611407),U=n(392592),B=n(934533),W=n(239349),H=n(178462),z=n(771941),G=n(869156),Y=n(601607),q=n(113468),J=n(38340),X=n(178248),$=n(900878);function j(){let[e,t]=o.useState(""),n=function(){let e=(0,r.wA)(),t=(0,Y.Fk)(e=>e),n=(0,r.d4)(e=>e.mirror.appModel.currentPage),{selectedInteractions:a}=(0,J.Ay)(q.J.NORMAL),i=(0,G.Rb)(),l=o.useCallback((e,t)=>{let{interactions:n,errorMessage:o}=function(e,t,n){let a=function e(t){var n,a;switch(t.type){case"Navigate to":return n=t.target,{connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE",transitionNodeID:N.sH(n)};case"Back":return{connectionType:"BACK"};case"Open Overlay":return a=t.target,{connectionType:"INTERNAL_NODE",navigationType:"OVERLAY",transitionNodeID:N.sH(a)};case"Close Overlay":return{connectionType:"CLOSE"};case"Set Variable":let o=t.expression.join(" ");return function(e,t){let n;try{n=(0,H.q)(t,new z.o)}catch(e){return console.error("Failed to parse expression string in set variable action: ",t),null}return{connectionType:"SET_VARIABLE",targetVariable:{id:e},targetVariableData:n}}(t.target,o);case"Conditional":return function({guardExpression:t,thenAction:n,elseAction:a}){let o=t.join(" ");if(a)try{return{connectionType:"CONDITIONAL",conditionalActions:[{condition:(0,H.q)(o,new z.o),actions:[e(n)]},{actions:[e(a)]}]}}catch(e){return console.error("Failed to parse guard expression string in conditional action: ",o),null}try{return{connectionType:"CONDITIONAL",conditionalActions:[{condition:(0,H.q)(o,new z.o),actions:[e(n)]}]}}catch(e){return console.error("Failed to parse guard expression string in conditional action: ",o),null}}(t)}}(e);if(!a)return{interactions:t,errorMessage:"Failed to get action"};for(let e of t){for(e.actions=e.actions||[];e.actions.length<=n;)e.actions.push({connectionType:"NONE"});e.actions[n]=a}return{interactions:t,errorMessage:""}}(e,a,t);return o||(x.Y5.updateSelectionProperties({prototypeInteractions:n}),null)},[a]);return o.useCallback(async o=>{try{if(!(0,_.kc)().prototype_ai_auto_adv_proto)return{generatedActions:[],errorMessage:"Feature flag not enabled"};let r=(0,W.Zl)(t,n);if(!r||!r.childrenGuids)return{generatedActions:[],errorMessage:"No page node found"};e(U.F.enqueue({message:"AI is generating interaction",type:"ai-generating-interaction",icon:B.zX.SPINNER}));let s=(0,X.dT)(r.childrenGuids,t,!1),c=(0,F.Lg)(s).join(", "),d=new Map(i.map(e=>[e.node_id,{name:e.name,description:e.description,resolvedType:e.resolvedType}])),u=await (0,$.P)(d,o),p=(0,$.E)(t,d,u),m=a[0]?.actions?.length===1&&"NONE"===a[0].actions[0].connectionType?0:a.length,g=await (0,X.h6)({userDescription:o,variablesUsed:p,canvasDescriptions:c},l,m);return e(U.F.dequeue({matchType:"ai-generating-interaction"})),g.errorMessage?e(U.F.enqueue({message:"AI had issue while generating interaction"})):e(U.F.enqueue({message:"AI has finished generating interaction"})),g}catch(t){return console.error(t),e(U.F.dequeue({matchType:"ai-generating-interaction"})),e(U.F.enqueue({message:"AI failed to generate interaction",type:"error"})),{generatedActions:[],errorMessage:t.toString()}}},[t,n,l,i,a,e])}();return o.createElement(K.ks,{placeholder:"Describe a new action",value:e,onChange:e=>t(e.currentTarget.value),onKeyDown:t=>{t.stopPropagation(),"Enter"===t.key&&(t.currentTarget.blur(),n(e))}})}var Z=n(83695),Q=n(776250),ee=n(344780),et=n(320063),en=n(325682),ea=n(820286),eo=n(175290),er=n(574176),ei=n(762638),el=n(422237),es=n(503965);let ec=(0,el.ex)("prototype_action_info",function(){return o.createElement("div",{className:ei.cx.flex.itemsCenter.justifyCenter.$},o.createElement(er.B,{className:"prototype_action_info_tooltip--prototypeDestinationInfoIcon--GeQWS",svg:es.A}),o.createElement("span",{className:ei.cx.flexGrow1.m6.$,style:{maxWidth:144}},(0,I.tx)("proto.prototype_panel.use_the_circular_node_to_connect_the_selected_object_to_another_frame_tooltip")))},()=>({unconstrainWidth:!0}));function ed(e){return o.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},o.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.5 6.5V11a1.5 1.5 0 0 0 1.5 1.5h4.5"}))}var eu=n(522739),ep=n(723081),em=n(318812),e_=n(30637),eg=n(46878),eE=n(538697),ef=n(872429);class ey extends eE.c${}class eh extends eE.l6{}function ev({action:e}){return o.createElement("div",{className:"prototype_action_dropdown--prototypeActionIcon--qChhY"},o.createElement(b.U,{svg:(0,eg.Yb)(e)},(0,eg.av)(e)))}function eb(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,a=(0,C.E7)(e.action),i=(0,eg.Yb)(a),l=(0,eg.av)(a),s=(0,A.GS)(),c=new ep.js(s),d=new ep.Z6(s),p=!(0,r.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0),m=o.useCallback(e=>e-24,[]),g=o.useCallback(e=>e+24,[]),E=u()({[e.className??""]:!0,"prototype_action_dropdown--select--b3Ssx":!s}),f=o.createElement(b.U,{svg:i},l);return o.createElement(eh,{disabled:p,id:t,dataTestId:"action-select",className:E,chevronClassName:"prototype_action_dropdown--prototypeActionChevron--ZL1Q4",inputClassName:"prototype_action_dropdown--prototypeActionInputWithSvg--Atfua",property:e.action,formatter:n?c:d,onChange:e.onChange,dispatch:e.dispatch,dropdownShown:e.dropdownShown,icon:f,iconClassName:"prototype_action_dropdown--selectActionSvg--XfhUx",recordingKey:y.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,e_.nl)(),dropdownAlignment:m,dropdownWidth:g},function(e){let t=(0,ef.cJ)(),n=o.createElement(ey,{key:"NONE",value:"NONE",icon:o.createElement(ev,{action:"NONE"}),recordingKey:y.Pt(e,"clear-option"),disabled:!1}),a=o.createElement(ey,{key:"NAVIGATE_TO",value:"NAVIGATE_TO",icon:o.createElement(ev,{action:"NAVIGATE_TO"}),recordingKey:y.Pt(e,"navigate-to-option"),disabled:!1}),r=o.createElement(ey,{key:"SWAP_STATE_TO",value:"SWAP_STATE_TO",icon:o.createElement(ev,{action:"SWAP_STATE_TO"}),recordingKey:y.Pt(e,"swap-state-to-option"),disabled:!S.glU.isSelectionContainedInStateOrStateInstance()}),i=o.createElement(ey,{key:"GO_BACK",value:"GO_BACK",icon:o.createElement(ev,{action:"GO_BACK"}),recordingKey:y.Pt(e,"back-option"),disabled:!1}),l=o.createElement(ey,{key:"SCROLL_TO",value:"SCROLL_TO",icon:o.createElement(ev,{action:"SCROLL_TO"}),recordingKey:y.Pt(e,"scroll-to-option"),disabled:!1}),s=o.createElement(ey,{key:"OPEN_URL",value:"OPEN_URL",icon:o.createElement(ev,{action:"OPEN_URL"}),recordingKey:y.Pt(e,"url-option"),disabled:!1}),c=o.createElement(ey,{key:"OPEN_OVERLAY",value:"OPEN_OVERLAY",icon:o.createElement(ev,{action:"OPEN_OVERLAY"}),recordingKey:y.Pt(e,"open-overlay-option"),disabled:!1}),d=o.createElement(ey,{key:"SWAP_WITH",value:"SWAP_WITH",icon:o.createElement(ev,{action:"SWAP_WITH"}),recordingKey:y.Pt(e,"swap-with-option"),disabled:!1}),u=o.createElement(ey,{key:"CLOSE_OVERLAY",value:"CLOSE_OVERLAY",icon:o.createElement(ev,{action:"CLOSE_OVERLAY"}),recordingKey:y.Pt(e,"close-option"),disabled:!1}),p=!t&&o.createElement(ey,{key:"SET_VARIABLE",value:"SET_VARIABLE",icon:o.createElement(ev,{action:"SET_VARIABLE"}),recordingKey:y.Pt(e,"set-variable"),disabled:!1}),m=!t&&(0,_.kc)().prototype_set_mode_action&&o.createElement(ey,{key:"SET_VARIABLE_MODE",value:"SET_VARIABLE_MODE",icon:o.createElement(ev,{action:"SET_VARIABLE_MODE"}),recordingKey:y.Pt(e,"set-variable-mode"),disabled:!1}),g=!t&&!e.isNestedInConditional&&o.createElement(ey,{key:"CONDITIONAL",value:"CONDITIONAL",icon:o.createElement(ev,{action:"CONDITIONAL"}),recordingKey:y.Pt(e,"conditional"),disabled:!1}),E=o.createElement(eE.sK,{key:"first-divider"}),f=o.createElement(eE.sK,{key:"second-divider"}),h=o.createElement(eE.sK,{key:"third-divider"}),v=(0,A.GS)()?[n,E,a,r,i,l,s,f,c,d,u,...t?[]:[h],p,m,g]:[n,E,a,r,i,f,p,m,g,l,s,h,c,d,u];if(e.showVideoActions){let t=[o.createElement(eE.sK,{key:"fourth-divider"}),o.createElement(ey,{key:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",icon:o.createElement(ev,{action:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"}),recordingKey:y.Pt(e,"update-media-play-pause-options"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",icon:o.createElement(ev,{action:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"}),recordingKey:y.Pt(e,"update-media-mute-unmute-options"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_TO",value:"UPDATE_MEDIA_SKIP_TO",icon:o.createElement(ev,{action:"UPDATE_MEDIA_SKIP_TO"}),recordingKey:y.Pt(e,"update-media-skip_to"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_BY_OPTIONS",value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",icon:o.createElement(ev,{action:"UPDATE_MEDIA_SKIP_BY_OPTIONS"}),recordingKey:y.Pt(e,"update-media-skip-by-options"),disabled:!1})];v=v.concat(t)}return v.filter(Boolean)}(e))}var eN=n(983405),eI=n(935283),eT=n(773833),eA=n(736656),ex=n(533573),ew=n(712685),eS=n(912547);let eP="prototype_action_verbose_title--actionNameInsertion--aF4kI",eC="prototype_action_verbose_title--actionName--qWJL3",eO="prototype_action_verbose_title--actionNameUI3--JAYsG",ek=()=>{let e=(0,r.d4)(e=>e.mirror.sceneGraph);return o.useMemo(()=>new ep.cP(e),[e])};function eD({action:e,isNestedInConditional:t,isNarrowPanel:n,onClick:a}){let r=(0,en.YT)()===en.Oz.TWO_COL,i=o.useContext(eA.c),l=r&&i===eA.P.LEFT,s=t||n,c=(0,G.u)((0,C.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?e.targetVariable?.id:void 0),d=(0,C.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,eT.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,p=c?.name??d?.name,m=ek(),_=new ep.Z6((0,A.GS)()),g=(0,ep._X)(e),E=(0,C.E7)(g),y=o.createElement(b.U,{svg:(0,eg.Yb)(E)},(0,eg.av)(E)),h=e=>{if(!e.connectionType||(0,C.gl)(e.connectionType))return null;let t=u()({[eC]:!0,[eO]:r}),n=u()({"prototype_action_verbose_title--actionDestination--JZ-gU":!0,"prototype_action_verbose_title--actionDestinationUI3--ZGxbq":r});switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let a=e.transitionNodeID;if((0,C.gl)(a))return o.createElement("div",{className:t},(0,I.t)("proto.variant_actions.mixed"));if(void 0===a)return null;let r=N.dI(a),i=m.format(r);return o.createElement("div",{className:n},i)}case"URL":{let a=e.connectionURL;if(!a)return null;if((0,C.gl)(a))return o.createElement("div",{className:t},(0,I.t)("proto.variant_actions.mixed"));return o.createElement("div",{className:n},a)}case"SET_VARIABLE":if(!e.targetVariableData||(0,C.gl)(e.targetVariableData))return null;return o.createElement("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--6omxy"},o.createElement(Z.y3,{targetVariableData:e.targetVariableData,onClick:f.lQ,showVariableThumbnails:!1,isNarrowPanel:s,isInConditional:!0}));case"CONDITIONAL":{if((0,C.gl)(e)||(0,C.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return o.createElement(Z.y3,{targetVariableData:t,onClick:f.lQ,isInConditional:!0,showVariableThumbnails:!1})}default:(0,eI.xb)(e.connectionType)}},v=u()({[eS.Li]:s&&!r,[eS.O8]:!s&&!r,[eS.kE]:r}),T=u()({"prototype_action_verbose_title--iconContainer--jqarD":!0,"prototype_action_verbose_title--iconContainerUI3--yBP0-":r});return o.createElement("div",{className:v,onClick:a,role:"button",tabIndex:0},o.createElement(eN.Y1,{horizontalAlignItems:"space-between",width:"fill-parent"},o.createElement("div",{className:T},y),(e=>{let t=E?_.format(E):"Undefined",n=u()({[eC]:!0,[eO]:r});if((0,C.gl)(e.connectionType)&&(t=(0,I.t)("fullscreen.mixed")),!e.connectionType||(0,C.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t));var a=h(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,I.t)("proto.action_change_to")),a);if(a){if("OVERLAY"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:eP},(0,I.tx)("proto.action_overlay_title",{overlayFrameName:o.createElement("span",null,a)})));if("SWAP"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,I.t)("proto.action_swap_overlay_title")),a)}return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t),a);case"UPDATE_MEDIA_RUNTIME":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t),a);case"URL":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},a?(0,I.t)("proto.action_url_title"):(0,I.t)("proto.action_open_link")),a);case"SET_VARIABLE":{let i=e.targetVariableData&&(0,C.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===S.rXF.COLOR,s=u()({"prototype_action_verbose_title--actionNameInsertionColor--isir- prototype_action_verbose_title--actionNameInsertion--aF4kI":!0,"prototype_action_verbose_title--actionNameInsertionColorUI3--Apj0i":r});if(p&&a)return o.createElement(o.Fragment,null,o.createElement("div",{className:i?s:eP},(0,I.tx)("proto.action_set_variable_title",{variableName:o.createElement("span",{className:"prototype_action_verbose_title--variableNameContainer--XeJX2"},o.createElement(ew.w,{text:p,isDeleted:!!c&&(0,ex.eF)(c),disableHover:l})),variableValue:o.createElement("span",{className:"prototype_action_verbose_title--variableDestinationContainer--RXbKo prototype_action_verbose_title--variableNameContainer--XeJX2"},a)})));return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t))}case"SET_VARIABLE_MODE":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,I.t)("proto.action_set_variable_mode")));case"CONDITIONAL":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},r?(0,I.t)("proto.if"):(0,I.t)("proto.action_conditional_title")),a);default:(0,eI.xb)(e.connectionType)}})(e)))}var eL=n(789529),eM=n.n(eL),eR=n(636149),eV=n.n(eR),eK=n(675551),eF=n.n(eK),eU=n(184058),eB=n.n(eU),eW=n(776621),eH=n(886571),ez=n(515009),eG=n(154483),eY=n(994481),eq=n(564092),eJ=n(100039);let eX="prototype_set_variable_mode_controls--dropdownRow--vl5z4",e$="missing";class ej extends eE.l6{}class eZ extends eE.c${}class eQ extends eE.l6{}class e0 extends eE.c${}let e1={},e2=(0,eG.fv)();function e3(){let e=(0,G.h6)()||e1,t=(0,eq.iR)(),n=o.useMemo(()=>{let n=eF()(t,(e,t)=>{var n;return{collectionID:e.node_id,collectionName:e.name,key:e.key,modeOptions:(null==(n=e.modes)?void 0:n.map(t=>({modeId:{guid:t.id,collectionKey:e.key},name:t.name,isCompatible:!0})))||[],explicitMode:null,inheritMode:null,fileKey:e2(e)}});return eM()({},e,n)},[t,e]),a=o.useMemo(()=>Object.entries(n).map(([e,t])=>({setKey:e,modeData:t,isLocal:void 0===t.fileKey})),[n]),i=o.useMemo(()=>Object.values(a).filter(e=>{var t,n;return(null==(t=e.modeData)?void 0:t.modeOptions)&&(null==(n=e.modeData)?void 0:n.modeOptions.length)>1}),[a]),l=o.useMemo(()=>eB()(i.map(e=>e.modeData.fileKey??eJ.BH)),[i]),s=(0,G.el)(l),[c,d]=o.useMemo(()=>{let{_local:e,_unknownFile:t,...n}=eV()(i,e=>e.isLocal?"_local":e.modeData.fileKey&&void 0===s[e.modeData.fileKey]?"_unknownFile":e.modeData.fileKey),a=Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[{fileKey:e,fileName:s[e]},...t]).flat(1);return t&&(a.push({fileKey:eJ.BH,fileName:(0,I.t)("variables.mode_properties_panel.used_variables.subheading")}),a.push(...t)),[e??[],a]},[s,i]),u=(0,eq.d2)(),p=o.useCallback(e=>{let t=u[(0,ez.yG)(e)],n=i.find(t=>t.setKey===e);if(n)return(e=>{var n;if(e)return void 0===t&&(t=e.modeData.modeOptions[0].modeId.guid),null==(n=e.modeData.modeOptions.find(e=>e.modeId.guid!==t&&(t=e.modeId.guid,!0)))?void 0:n.modeId.guid})(n)},[u,i]),m=i.length>0?i[0]:void 0,_=null==m?void 0:m.setKey,g=null==m?void 0:m.modeData.collectionID,E=o.useMemo(()=>_&&p(_),[_,p]),f=(0,r.wA)();return{localVariableSets:c,allVariableSets:i,firstVariableSet:m,firstVariableSetID:g,firstVariableSetMode:E,getDefaultNewModeForVariableCollectionKey:p,reportAnalyticsEventWhenSelected:e=>{let t=S.mSn.getVariableSetInfoForSetModeAnalytics(e);f((0,L.Zh)({name:"prototype.set_mode_select_variable_set",params:{...t}}))},subscribedVariableSetsWithSections:d}}function e4({targetVariableSetID:e,targetVariableModeID:t,deprecatedTargetVariableSetKey:n,updateSelectionProperties:a,recordingKey:r,actionIndexPath:i}){let{getDefaultNewModeForVariableCollectionKey:l,allVariableSets:s,reportAnalyticsEventWhenSelected:c}=e3(),{shouldShowAdvancedPrototypingPaywall:d,showAdvancedPrototypingVariablesModal:u}=(0,en.zt)(),p=(0,A.GS)();o.useEffect(()=>{if(!n||(0,C.gl)(n))return;let e=s.find(e=>e.setKey===n);e?((0,eW.Lo)("SetVariableModeControls","updating variable set key to non-deprecated id value"),a({targetVariableSetKey:void 0,targetVariableSetID:null==e?void 0:e.modeData.collectionID})):((0,eW.Lo)("SetVariableModeControls","attempted to update variable set key to non-deprecated id value, but could not find it in the list of variable sets, will just clear out the bad data."),a({targetVariableSetKey:void 0}))},[n,s,a]);let[m,_]=o.useMemo(()=>{let t=(0,C.gl)(e)||void 0===e?e:function(e,t){let n=e.find(e=>e.modeData.collectionID===t);if(n)return n;let a=eH.gr.toRefIfSubscribed(t);if(a)return e.find(e=>e.setKey===a.key)}(s,e)||e$,n=(()=>{if(!(0,C.gl)(t)&&void 0!==t&&t!==e$)return t})();return[t,n]},[e,s]),g=o.createElement(e7,{selectedVariableSet:m,onChange:e=>{d?u():(c(e.modeData.collectionID),a({targetVariableSetID:e.modeData.collectionID,targetVariableModeID:l(e.setKey)}))},actionIndexPath:i}),E=p?o.createElement(eY.cS,{input:g,label:(0,I.tx)("proto.set_variable_mode.collection_label")}):o.createElement(K.fI,{recordingKey:y.Pt(r,"selectTargetVariableSet")},g),f=o.createElement(te,{selectedVariableSetKey:_&&_.setKey,selectedVariableModeID:t,onChange:e=>{d?u():a({targetVariableModeID:e})},actionIndexPath:i}),h=p?o.createElement(eY.cS,{input:f,label:(0,I.tx)("proto.set_variable_mode.mode_label")}):o.createElement(K.fI,{recordingKey:y.Pt(r,"selectTargetVariableMode")},f);return o.createElement("div",{className:p?void 0:ei.cx.relative.$},E,_&&h)}let e6={format:e=>void 0===e?(0,I.t)("proto.prototype_panel.edit_set_mode.none"):e===e$?(0,I.t)("proto.prototype_panel.edit_set_mode.missing_collection"):e.modeData.collectionName,isEqual:(e,t)=>void 0!==e&&void 0!==t&&e!==e$&&t!==e$&&(e.setKey===t.setKey||e.modeData.collectionID===t.modeData.collectionID)};function e5(e,t){return"fileKey"in e?[t&&o.createElement(eE.sK,{key:e.fileKey+"divider"}),o.createElement(eZ,{isHeader:!0,key:e.fileKey+"header",formattedValue:e.fileName})]:o.createElement(eZ,{key:e.setKey,value:e})}function e7({selectedVariableSet:e,onChange:t,actionIndexPath:n}){let a=(0,r.wA)(),i=(0,em.Um)(),l="set-variable-mode--select-variable-set-"+n,{localVariableSets:s,allVariableSets:c,subscribedVariableSetsWithSections:d}=e3();return o.createElement(ej,{id:l,className:eX,property:e,formatter:e6,dispatch:a,dropdownShown:(null==i?void 0:i.type)===l?i:null,onChange:e=>{(0,C.gl)(e)||void 0===e||e===e$||t(e)}},c.length>0?[s.length>0&&o.createElement(eZ,{key:y.Pt(l,"local_variables"),isHeader:!0,formattedValue:(0,I.t)("variables.mode_properties_panel.local_variables.subheading")}),...s.map(e=>e5(e,!1)),...d.map((e,t)=>e5(e,s.length>0||t>0))]:[])}let e8={format:e=>void 0===e?(0,I.t)("proto.prototype_panel.edit_set_mode.none"):e===e$?(0,I.t)("proto.prototype_panel.edit_set_mode.missing_mode"):(null==e?void 0:e.name)??""};function e9(e){return o.createElement(e0,{key:e.modeId.guid,value:e})}function te({selectedVariableSetKey:e,selectedVariableModeID:t,onChange:n,actionIndexPath:a}){let i=(0,r.wA)(),l=(0,em.Um)(),s="set-variable-mode--select-variable-mode-"+a,{allVariableSets:c}=e3(),d=o.useMemo(()=>{var t;return null==(t=c.find(t=>t.setKey===e))?void 0:t.modeData.modeOptions},[e,c]),u=o.useMemo(()=>(0,C.gl)(t)||void 0===t?t:(null==d?void 0:d.find(e=>e.modeId.guid===t))||e$,[t,d]);return o.createElement(eQ,{id:s,className:eX,property:u,formatter:e8,dispatch:i,dropdownShown:(null==l?void 0:l.type)===s?l:null,onChange:e=>{!e||(0,C.gl)(e)||e===e$||n(e.modeId.guid)}},d&&(null==d?void 0:d.map(e9)))}var tt=n(939791),tn=n(794272),ta=n(32067),to=n(109388),tr=n(485463),ti=n(256296),tl=n(775664),ts=n(279702),tc=n(420186),td=n(218973),tu=n(750029),tp=n(251518),tm=n(205135),t_=n(410465),tg=n(860168),tE=n(910392),tf=n(909666),ty=n(442458);let th=tl.TI;function tv({children:e}){return(0,A.GS)()?o.createElement(eY.TN,null,e):o.createElement(K.fI,{className:"overlay_panel--fplCheckboxRow--EYTAZ checkbox--_checkboxRow--oEhow"},e)}function tb({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:a}){let[i,l]=o.useState(!1),[s,c]=o.useState(new h.Mi),d=(0,r.wA)(),u=(0,A.GS)(),p="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:m,destinationOverlayBackgroundType:_,destinationOverlayPositionType:g,destinationOverlayBackgroundInteraction:E}=(0,tn.R)(e=>({destinationOverlayBackgroundColor:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[p]?.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[p]?.destinationOverlayBackgroundType,destinationOverlayPositionType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[p]?.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[p]?.destinationOverlayBackgroundInteraction})),f=o.useRef(),v=o.useRef(),b=o.useCallback(()=>{l(!1)},[l]),T=o.useCallback(()=>{if(i)b();else{l(!0);let e=u?to.findDOMNode(v.current):to.findDOMNode(f.current);c((0,tc.cn)(e))}},[i,b,u]),x=o.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";P.l7.user("overlay-background-type-edit-scope",()=>{S.X3B.setOverlayBackgroundType(N.dI(a),t)}),d((0,L._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[d,a]),w=o.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";P.l7.user("overlay-background-interaction-edit-scope",()=>{S.X3B.setOverlayBackgroundInteraction(N.dI(a),t)}),d((0,L._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[d,a]),O=o.useCallback(()=>(0,C._W)(m,{r:0,g:0,b:0,a:.25}),[m]),k=o.useCallback((e,t)=>{t!==ts.zk.NO&&P.l7.user("overlay-background-color-edit-scope",()=>{S.X3B.setOverlayBackgroundColor(N.dI(a),e)})},[a]),D=o.useCallback((e,t)=>{k(e,ts.zk.YES)},[k]),M=o.useCallback((e,t)=>{let n=O();k({r:n.r,g:n.g,b:n.b,a:e},t)},[O,k]),R=o.useCallback(e=>{P.l7.user("overlay-position-type-edit-scope",()=>{S.X3B.setOverlayPositionType(N.dI(a),e)}),d((0,L._P)({name:"Overlay position changed",params:{position:e}}))},[d,a]),V=O(),F=O().a,U=(0,C.E7)(g),B="CLOSE_ON_CLICK_OUTSIDE"===(0,C.E7)(E),W="SOLID_COLOR"===(0,C.E7)(_),H=o.createElement("div",{className:"overlay_panel--colorValueContainer--gJtb9 paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},o.createElement(tu.J,{onClick:W?T:()=>{},color:V,opacity:F,recordingKey:y.Pt(t,"chit"),className:"overlay_panel--chit--Zn66r paint_panels--chit--twQEy"}),o.createElement(tm.AN,{className:u?"overlay_panel--colorInputUI3--ozOrK paint_panels--colorInput--nSz13":"overlay_panel--colorInput--6yyym paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:th,property:V,disabled:!W,onChange:D,recordingKey:y.Pt(t,"colorInput"),noBorderOnFocus:!0}),o.createElement(td.Pd,{className:"overlay_panel--opacity--vrrjV paint_panels--opacityInputContainer--oqlsk",value:F,onValueChange:M,dispatch:d,disabled:!W,noBorderOnFocus:!0,recordingKey:y.Pt(t,"opacity")}));return o.createElement(K.Zk,{className:u?"overlay_panel--overlayPanelUI3--GLqgD":"overlay_panel--overlayPanel--l-Hts"},!u&&o.createElement(K.fI,null,o.createElement(K.xw,{faded:!0,className:"overlay_panel--overlayPanelTitle--e9pjs"},(0,I.tx)("proto.overlay_settings"))),o.createElement(tS,{overlayPositionType:U,onOverlayPositionTypeChange:R,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&o.createElement(tv,null,o.createElement(tr.S,{label:o.createElement(ti.J,null,(0,I.tx)("proto.close_when_clicking_outside")),recordingKey:y.Pt(t,"closeOnClickOutside"),onChange:w,checked:B})),o.createElement(tv,null,o.createElement(tr.S,{label:o.createElement(ti.J,null,u?(0,I.tx)("proto.overlay_panel.background"):(0,I.tx)("proto.add_background")),recordingKey:y.Pt(t,"addBackgroundBehindOverlay"),onChange:x,checked:W})),W&&(u?o.createElement(eY.cS,{ref:v,label:(0,I.tx)("proto.overlay_panel.background"),input:H}):o.createElement(K.fI,{ref:f}," ",H," ")),i&&o.createElement(tp.sk,{disabledVariableIds:new Set,title:(0,I.t)("proto.background"),initialPosition:s,color:V,boundVariable:null,onChange:k,onClose:b,recordingKey:y.Pt(t,"colorPicker")}))}class tN extends eE.l6{}class tI extends eE.c${}class tT extends o.PureComponent{constructor(){super(...arguments),this.titleFormatter=new ep.Cr,this.renderOverlayPositionOption=(e,t)=>o.createElement(tI,{key:t,value:e,recordingKey:y.Pt(this.props,e)})}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return o.createElement(tN,{id:this.props.recordingKey??"overlay-position_select",className:this.props.className,chevronClassName:"overlay_panel--chevron--7RTA-",inputClassName:"overlay_panel--input--tGHHB",dropdownWidth:tg.DxS,property:this.props.property,formatter:this.titleFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:y.Pt(this.props,"select")},e,o.createElement(eE.sK,null),this.renderOverlayPositionOption("MANUAL",10))}}tT.displayName="OverlayPositionDropdown";class tA extends t_.I{}class tx extends t_.Y{}class tw extends o.PureComponent{render(){return o.createElement(tA,{className:this.props.className,property:this.props.property,onChange:this.props.onChange,recordingKey:this.props.recordingKey},o.createElement(tx,{value:"CENTER",tooltip:(0,I.t)("proto.tooltip_overlay_position_center"),svg:tf.A,recordingKey:y.Pt(this.props,"center")}),o.createElement(tx,{value:"TOP_LEFT",tooltip:(0,I.t)("proto.tooltip_overlay_position_top_left"),svg:ty.A,recordingKey:y.Pt(this.props,"top-left")}),o.createElement(tx,{value:"BOTTOM_CENTER",tooltip:(0,I.t)("proto.tooltip_overlay_position_bottom_center"),svg:tE.A,recordingKey:y.Pt(this.props,"bottom-center")}))}}function tS({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let a=(0,A.GS)(),i=(0,r.wA)(),l=(0,em.Um)(),s=o.createElement(tT,{className:"overlay_panel--overlayPositionDropdown--ZxxSI",property:e,dispatch:i,dropdownShown:l,onChange:t,recordingKey:y.Pt(n,"overlayPositionDropdown")}),c=o.createElement(tw,{property:e,onChange:t,recordingKey:y.Pt(n,"overlayPositionControl"),className:"overlay_panel--overlayPositionControl--SWngJ"});return a?o.createElement(eY.cS,{label:(0,I.tx)("proto.overlay_panel.position"),input:s}):o.createElement(K.fI,null,s,c)}var tP=n(149658),tC=n(301036),tO=n(927457),tk=n(268537),tD=n(720488),tL=n(501191);function tM(e){let t=`interaction-panel-create-action-${e.recordingKey}`;var{showing:n,toggle:a,hide:r}=(0,em.BK)(t);let i=(0,o.useRef)(null),l=e.recordingKey,{shouldShowAdvancedPrototypingPaywall:s,showAdvancedPrototypinglMultipleActionsModal:c}=(0,en.zt)(),d=(0,o.useCallback)(()=>{!e.skipPaywall&&s?c():a()},[e.skipPaywall,s,c,a]),p=y.rf(y.Pt(l,"createActionDropdown"),"click",d),m=(0,en.YT)()===en.Oz.TWO_COL,_=(0,en.SJ)(),g=(0,en.qv)(_,e.isNestedInConditional),E=u()({[eS.x1]:e.renderButton,[eS.xm]:!e.renderButton&&!m,[eS.U3]:!e.renderButton&&m});return o.createElement(o.Fragment,null,o.createElement("button",{ref:i,className:E,onClick:p,"aria-label":(0,I.t)("proto.prototype_panel.create_action_button"),"data-tooltip-type":R.Ib.TEXT,"data-tooltip":e.isNestedInConditional?(0,I.t)("proto.prototype_panel.add_nested_action"):(0,I.t)("proto.prototype_panel.add")},e.renderButton?o.createElement(b.U,{svg:tL.A},o.createElement(tO.e,null)):(0,I.tx)("fullscreen.properties_panel.click_plus_to_add_new_action")),n&&i.current&&o.createElement(tD.Cf,{arrowOffsetFromRectLeft:17,leanPadding:0,minWidth:130,lean:"right",targetRect:i.current.getBoundingClientRect(),hidePointWhenContentOffScreen:!0},g.map((t,n)=>(0,en.vc)(t)?o.createElement(tk.wv,{key:`type_${n}`}):o.createElement(tR,{onClose:r,addButtonPressed:e.addButtonPressed,key:t,recordingKey:l,actionType:t}))))}function tR({actionType:e,onClose:t,addButtonPressed:n,recordingKey:a}){let r=o.useCallback(()=>{n((0,en.Bs)(e)),t()},[t,e,n]),i=y.rf(y.Pt(a,"createActionOption",e),"click",r),l=(0,A.GS)(),s=(0,eg.Yb)(e),c=(0,eg.av)(e),d=new ep.Z6(l),u=e?d.format(e):"Undefined";return o.createElement(tk.c$,{className:eS.BP,onClick:i},o.createElement(b.U,{className:eS.QE,svg:s},c),o.createElement("div",{"aria-label":u},u))}let tV="prototype_conditional_controls--conditionalRowUI3--rQlu6",tK="prototype_conditional_controls--conditionIcon--Npk57";var tF=n(381809),tU=n(527967),tB=n(5068);function tW({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:a,updateActions:r,onAddAction:i,autoOpenVariablePicker:l,isSelected:s,handleMouseDownUI3:c,...d}){let u=d.conditionalActions,p=u?.actions?u?.actions:[],m=u?.condition?u?.condition:void 0,_=(0,en.YT)()===en.Oz.TWO_COL,g=_?tV:"prototype_conditional_controls--conditionalRowIf--25FqB prototype_conditional_controls--conditionalRow--u0PaS",E=o.createElement(Z.KN,{resolvedType:S.rXF.BOOLEAN,targetVariableData:m,updateSelectionProperties:n,recordingKey:d.recordingKey,updateConditionInConditionalAction:a,showVariableThumbnails:!0,isNarrowPanel:!0}),f=o.createElement("div",{className:"prototype_conditional_controls--addButton--vlYLn"},o.createElement(tM,{addButtonPressed:i,recordingKey:y.Pt(d.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})),h=o.createElement(o.Fragment,null,_?o.createElement("span",{className:"prototype_conditional_controls--conditionIconUI3--zcwx0"},(0,I.tx)("proto.else")):o.createElement(er.B,{className:tK,svg:tF.A}),p.length>0&&o.createElement("div",{className:"prototype_conditional_controls--addButtonForElse--ogBWu prototype_conditional_controls--addButton--vlYLn"},o.createElement(tM,{addButtonPressed:i,recordingKey:y.Pt(d.recordingKey,"addActionToElseButton"),renderButton:!_,isNestedInConditional:!0}))),v=_?o.createElement("div",{className:"prototype_conditional_controls--elseBlockRowUI3--VXjmO",onMouseDown:c},h):o.createElement(K.fI,{className:_?tV:"prototype_conditional_controls--conditionalRow--u0PaS"},h);return o.createElement(o.Fragment,null,d.ifStatement&&o.createElement("div",{className:g},!_&&o.createElement(eo.Y,{direction:"horizontal",spacing:4},o.createElement("span",{className:_?"prototype_conditional_controls--conditionalRowConditionUI3--M2mOx":"prototype_conditional_controls--conditionalRowCondition--kn-f7"},o.createElement(eo.Y,{direction:"horizontal",spacing:0},o.createElement(er.B,{className:tK,svg:tU.A}),o.createElement(eo.Y,{direction:"horizontal",spacing:0},(0,C.hS)(m)&&E),o.createElement(er.B,{className:"prototype_conditional_controls--icon--JV1i0",svg:tB.default}))),p.length>0&&f)),!d.ifStatement&&v,p&&p.map((a,r)=>o.createElement(nV,{key:r,updateMultipleDestinationNodes:t.appendActionIndex(r),action:a,recordingKey:y.Pt(d.recordingKey,"conditional-action-row",r),updateSelectionProperties:n.appendActionIndex(r),onDeleteAction:()=>e(r),interactionType:d.interactionType,actionIndexPath:[d.actionIndexPath[0],d.actionIndexPath[1],r],numActions:p.length,isNestedInConditional:!0,stateManagementVersion:d.stateManagementVersion,selectedInteractions:d.selectedInteractions,onDrop:d.onDrop,onSelect:d.onSelect,onExpand:d.onExpand,onAddAction:i,selectedActionIndex:d.selectedActionIndex,expandedRows:d.expandedRows,autoOpenVariablePicker:l})),0===p.length&&o.createElement(nV,{key:0,updateMultipleDestinationNodes:t.appendActionIndex(0),action:d.emptyAction,recordingKey:y.Pt(d.recordingKey,"conditional-action-row",0),updateSelectionProperties:n.appendActionIndex(0),onDeleteAction:()=>e(0),interactionType:d.interactionType,actionIndexPath:[d.actionIndexPath[0],d.actionIndexPath[1],0],numActions:p.length,isNestedInConditional:!0,stateManagementVersion:d.stateManagementVersion,selectedInteractions:d.selectedInteractions,onDrop:d.onDrop,onSelect:d.onSelect,onExpand:d.onExpand,onAddAction:i,selectedActionIndex:d.selectedActionIndex,expandedRows:d.expandedRows,autoOpenVariablePicker:l}))}function tH(e,t,n){return function(a){var o=[...t];o.length>e?o[e].condition=a:o.push({condition:0===e?a:void 0,actions:[]},{condition:1===e?a:void 0,actions:[]}),n({conditionalActions:o})}}function tz({onDrop:e,onSelect:t,onExpand:n,action:a,updateMultipleDestinationNodes:i,updateSelectionProperties:l,interactionType:s,recordingKey:c,stateManagementVersion:d,selectedInteractions:u,actionIndexPath:p,selectedActionIndex:m,expandedRows:_,autoOpenVariablePicker:g,onNewActionAdded:E,handleMouseDownUI3:f}){let h=(0,r.wA)(),v=(0,k.p8)("currentPage"),b=(0,en.YT)()===en.Oz.TWO_COL,N=b?m.equals(p):void 0,{shouldShowAdvancedPrototypingPaywall:T,showAdvancedPrototypingConditionalActionsModal:A}=(0,en.zt)(),x=(0,C.hS)(a.conditionalActions)&&a.conditionalActions?a.conditionalActions:[],w=e=>function(t){var n=[...x];n.length>e?n[e].actions=[...t]:n.push({actions:t}),l({conditionalActions:n})},S=e=>function(t){var n=[...x],a=0;if(n.length>e){var o=n[e].actions;o?o.push(t):o=[t],a=o.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),a=1;"SET_VARIABLE"===t.connectionType&&(g.current=!0),l({conditionalActions:n}),E&&E(new tC.Op([p[0],e,a-1])),h((0,L._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:v,actionInConditionalAction:!0}}))},P=e=>function(t){if(T)A();else{var n=[...x];let a=x[e],o=[];if(a&&a.actions)for(let e=0;e<a.actions.length;e++){let n=a.actions[e];e!==t?o.push(n):h((0,L._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:v,actionInConditionalAction:!0}}))}n[e].actions=o,l({conditionalActions:n})}},O=x.length>0?x[0]:void 0,D=x.length>1?x[1]:void 0;return o.createElement("div",{style:b?{position:"relative"}:void 0},(0,C.gl)(a.conditionalActions)&&o.createElement(eN.Y1,null,o.createElement("div",{className:"prototype_conditional_controls--mixedConditionalText--6O32b",onClick:()=>{var e=[];e.push({},{}),l({conditionalActions:e})},role:"button",tabIndex:0},(0,I.t)("fullscreen.properties_panel.click_to_replace_mixed_content"))),(0,C.hS)(a.conditionalActions)&&o.createElement(o.Fragment,null,o.createElement(tW,{key:0,conditionalActions:O,recordingKey:y.Pt(c,"conditional-block",0),updateCondition:tH(0,x,l),updateActions:w(0),onAddAction:S(0),updateMultipleDestinationNodes:i.appendActionIndex(0),onDeleteAction:P(0),interactionType:s,updateSelectionProperties:l.appendActionIndex(0),ifStatement:!0,stateManagementVersion:d,selectedInteractions:u,actionIndexPath:[p[0],0],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:m,autoOpenVariablePicker:g,expandedRows:_,emptyAction:{ifStatement:!0,action:a},isSelected:N,handleMouseDownUI3:f}),o.createElement(tW,{key:1,conditionalActions:D,recordingKey:y.Pt(c,"conditional-block",1),updateCondition:tH(1,x,l),updateActions:w(1),onAddAction:S(1),updateMultipleDestinationNodes:i.appendActionIndex(1),onDeleteAction:P(1),interactionType:s,updateSelectionProperties:l.appendActionIndex(1),ifStatement:!1,stateManagementVersion:d,selectedInteractions:u,actionIndexPath:[p[0],1],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:m,autoOpenVariablePicker:g,expandedRows:_,emptyAction:{ifStatement:!1,action:a},isSelected:N,handleMouseDownUI3:f})))}function tG({updateSelectionProperties:e,conditionalActions:t,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,...r}){let i=t.length>0?t[0]:void 0,l=i?.condition?i?.condition:void 0,s=u()({"prototype_conditional_controls--standaloneIfConditional--GLFDU":!0,"prototype_conditional_controls--placeholderText--esG0u":!l});return o.createElement(o.Fragment,null,o.createElement(eY.cS,{input:null,label:(0,I.tx)("proto.condition")}),o.createElement(tt.Ad,{appendedClassName:"prototype_conditional_controls--conditionalActionRightPadding--xpK6Z",label:null,input:(0,C.hS)(l)?o.createElement("div",{className:s},o.createElement(Z.KN,{resolvedType:S.rXF.BOOLEAN,targetVariableData:l,updateSelectionProperties:e.appendActionIndex(0),recordingKey:r.recordingKey,updateConditionInConditionalAction:tH(0,t,e),autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,showVariableThumbnails:!0,isNarrowPanel:!0})):null}))}var tY=n(843495),tq=n(497306),tJ=n(809511),tX=n(234945),t$=n(510879),tj=n(830002),tZ=n(731262);class tQ extends eE.c${}class t0 extends eE.l6{}class t1 extends o.PureComponent{constructor(e){super(e),this.loadDestinationsFromFullscreen=()=>{let e=S.baT.ALL;"SCROLL_TO"===this.props.action?e=S.baT.SCROLL_TO:"SWAP_STATE_TO"===this.props.action&&(e=S.baT.STATES);let{viableIds:t,disabledIds:n}=S.X3B.getTransitionDestinationsOnActiveCanvas(e);return new Promise((e,a)=>{this.setState({viableIds:t,disabledIds:n},e)})},this.onOptionFocus=e=>{tY.Uc(e??"")},this.renderGroupedScrollableNodes=(e,t)=>{let n=eV()(e.filter(e=>this.nodeNameFormatter.hasNameForNode(e)),e=>e===t&&(0,C.hS)(t)?tq.Ql(this.props.scene,e)?.guid:this.props.scene.get(e)?.parentGuid),a=Object.keys(n);(0,tq.X4)(a,this.nodeNameFormatter.format.bind(this.nodeNameFormatter));let{tlfId:r,index:i}=(0,tq.H_)(this.props.scene,a);return r&&i&&(a.splice(i,1),a=[r,...a]),a.reduce((e,t,a)=>(0!==a&&e.push(o.createElement(eE.sK,{key:a})),e.push(o.createElement(tQ,{key:`disabled-${t}`,value:t+" ",recordingKey:y.Pt(this.props,`disabled-option-${t}`),disabled:!0})),n[t].forEach((t,n)=>{e.push(o.createElement(tQ,{key:`enabled-${t+n}`,value:t,recordingKey:y.Pt(this.props,`viable-option-${n}`),disabled:!1}))}),e),[])},this.state={viableIds:[],disabledIds:[]},this.nodeNameFormatter=new ep.cP(e.scene)}render(){let e=this.props.nodeId===C.oV?C.oV:N.dI(this.props.nodeId),t=this.state.viableIds;(0,C.hS)(e)&&e!==N.AD&&-1===t.indexOf(e)&&(t=t.concat([e]));let n=this.state.disabledIds,a=`prototype-destination-select-${this.props.recordingKey}`,r="SCROLL_TO"!==this.props.action?t.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>o.createElement(tQ,{key:`enabled-${e}`,value:e,recordingKey:y.Pt(this.props,`viable-option-${t}`),disabled:!1})):this.renderGroupedScrollableNodes(t,e),i=n.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>o.createElement(tQ,{key:`disabled-${e}`,value:e,recordingKey:y.Pt(this.props,`disabled-option-${t}`),disabled:!0})),l=this.props.isUI3?o.Fragment:K.fI;return o.createElement(l,null,o.createElement(t0,{id:a,dataTestId:"destination-select",className:this.props.className,chevronClassName:"prototype_destination_dropdown--chevron--pmWtI",inputClassName:"prototype_destination_dropdown--input--rzglN",dropdownWidth:tg.DxS,property:e,formatter:this.nodeNameFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:y.Pt(this.props,"select"),willShowDropdown:this.loadDestinationsFromFullscreen,onOptionFocus:this.onOptionFocus,hideDropdownWhenContainerMoves:!(0,e_.nl)()},r,0!==n.length&&0!==t.length&&o.createElement(eE.sK,null),i))}}let t2=o.memo(function(e){let t=(0,D.tS)(),n=(0,D._G)(),a=(0,r.d4)(t3),i=(0,r.d4)(tX.qd),l=(0,r.d4)(tX.dK),s=(0,t$.D)(i,l),c=(0,r.d4)(t4),d=o.useMemo(()=>(0,tZ.cP)(c,t,n,e.actionIndexPath),[c,t,n,e.actionIndexPath]),u=o.useMemo(()=>(0,tZ.cP)(a,t,n),[a,t,n]),p=d||u;if(!p||p.mode!==tJ.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:m,stateGroupModel:_,selectedStates:g,selectedStatesPropertyValues:E}=p,f=_.propertySortOrder||[],y=_.propertyValues;return y?o.createElement(tj.lS,{sortedProperties:f,stateGroupPropertyValues:y,selectedStatesPropertyValues:E,selectedStates:g,allStates:m,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let a=t[e].symbol.node_id;for(let t of(n[e]=a,s[e]||[]))n[t]=a;for(let e of i)n[e]||(n[e]=a)}e.onChange(n)},recordingKey:e.recordingKey,hideErrorsPanel:!0,shouldIndent:!0,extended:!0}):null});function t3(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function t4(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var t6=n(169231),t5=n(100197),t7=n(511787),t8=n(939143),t9=n(656963),ne=n(746806);let nt="prototype_set_variable_controls--dropdownAndIconContainer--6m3Tw",nn="prototype_set_variable_controls--icon---HzDt",na="prototype_set_variable_controls--placeholderText--PBIqf";function no({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:a,...i}){let l=o.useRef(null),s=(0,r.wA)(),c=(0,A.GS)(),d=(0,r.d4)(e=>e.variablePickerShown),p=(0,G.tZ)((0,C.hS)(t)&&"id"in t?t.id:void 0),m=(0,G.u)((0,C.hS)(t)&&"id"in t?t.id:void 0),[g,E]=o.useState("");(0,et.h)(()=>{a&&!0===a.current&&(b(),a.current=!1)});let v=(0,G.BQ)((0,C.hS)(t)&&"id"in t?t.id:void 0)??(0,eT.m9)((0,C.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);o.useEffect(()=>{void 0!==e&&v&&"MIXED"!==v&&(0,C.hS)(e)&&e.resolvedType!==v.resolvedType&&!((0,eT.tz)(e.resolvedType)&&(0,eT.tz)(v.resolvedType))&&n({targetVariableData:void 0})},[v,n,e]);let b=()=>{let e=l.current.getBoundingClientRect();s((0,t6.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:S.rXF.STRING,initialPosition:new h.Mi(e.left-20,e.top),key:i.recordingKey,onVariableSelected:P}))},T=o.useCallback(()=>{s((0,t6.B)())},[s]),[x,w]=o.useState(!1),P=o.useCallback(t=>{if(void 0!==t&&t.node_id){let a={targetVariable:{id:t.node_id}},o=S.CWU.getVariableResolvedValue(t.node_id,N.AD);!e&&t.resolvedType===S.rXF.COLOR&&o&&(a.targetVariableData=o??void 0),n(a),s((0,L.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),w(!0)}},[s,e,n]),O=o.useCallback(e=>{e.value.stablePath.map(e=>N.sH(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),w(!0))},[n]),k=o.useMemo(()=>(0,_.kc)().prototype_expression_props?{type:"COMPONENT_PROPS",layout:"list"}:{type:"LOCAL_VARIABLES",layout:"list"},[]);o.useEffect(()=>{let e=S.Ez5.prototypingEditorState().colorPickerEyedropperVarData;return(0,t5.lu)(e,{onChangeImmediate(){let t=e.getCopy();t&&n({targetVariableData:t})}})},[n]);let D="nodeFieldAlias"in t?(0,eT.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,M=D?(0,eT.Xx)(D.varValue.resolvedType):null,R=null;if((0,C.gl)(t))R=null;else if(v?.resolvedType===S.rXF.COLOR)R=(0,C.gl)(e)?o.createElement("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--H6uGu"},(0,I.t)("fullscreen.mixed")):o.createElement(o.Fragment,null,o.createElement(t9.g,{variableValue:e??v,onChange:e=>{n({targetVariableData:e})},recordingKey:y.Pt(i.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--NaOmp"}));else{let t=i.isNestedInConditional?"prototype_set_variable_controls--absoluteIconInConditional--BbEmW":"prototype_set_variable_controls--absoluteIcon--1XpBF",a=m?.resolvedType??(D?.varValue.resolvedType===S.rXF.TEXT_DATA?S.rXF.STRING:D?.varValue.resolvedType)??S.rXF.BOOLEAN;R=o.createElement("div",{className:c?void 0:ei.cx.ml12.$},o.createElement("div",{className:nt},o.createElement(Z.KN,{resolvedType:a,targetVariableData:e,autoOpenExpressionBuilder:x,setAutoOpenExpressionBuilder:w,updateSelectionProperties:n,recordingKey:i.recordingKey,isNarrowPanel:i.isNarrowPanel,showVariableThumbnails:!0}),!c&&o.createElement(er.B,{className:u()(nn,t),svg:tB.default})))}let V=u()({"prototype_set_variable_controls--targetVariableDropdown--IZwoF":!c&&!i.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownNarrow--WWi-t prototype_set_variable_controls--targetVariableDropdown--IZwoF":!c&&i.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownUI3--Pz71q":c,[na]:c&&!(p||D)}),K=o.createElement(eu.D8,{recordingKey:y.Pt(i.recordingKey,"selectTargetVariable"),onClick:b},o.createElement("div",{className:c?void 0:(0,C.hS)(t)?"prototype_set_variable_controls--targetVariableLabel--AFCqK":"prototype_set_variable_controls--targetVariableLabelInactive--zHWCC prototype_set_variable_controls--targetVariableLabel--AFCqK",ref:l},o.createElement(eo.Y,null,o.createElement("div",{className:V},o.createElement("div",{className:nt},(0,C.gl)(t)?o.createElement("div",{className:u()(ei.cx.pt2.$,ei.cx.pb2.$)},(0,I.t)("fullscreen.mixed")):p?o.createElement(ew.w,{text:p,thumbnailValue:v,isDeleted:!!m&&(0,ex.eF)(m)}):D?o.createElement(ew.w,{text:D.name,thumbnailValue:M,isDeleted:!1,colorTheme:ew.J.COMPONENT}):o.createElement("div",{className:u()(ei.cx.pt2.$,ei.cx.pb2.$,c?"prototype_set_variable_controls--placeholderTextColorUI3--Pc-4N":void 0)},c?(0,I.t)("proto.select_variable.short"):(0,I.t)("proto.select_variable")),!c&&o.createElement(er.B,{className:nn,svg:tB.default})))))),F=c?o.createElement(eY.cS,{input:K,label:(0,I.tx)("proto.variable")}):K,U=u()({"prototype_set_variable_controls--setVariableToContainerNarrow--HHbHQ prototype_set_variable_controls--setVariableToContainer--kxsCZ":!c&&i.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainer--kxsCZ":!c&&!i.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainerUI3--pGbDe":c,[na]:c&&!e&&v?.resolvedType!==S.rXF.COLOR}),B=o.createElement("div",{className:U,"data-testid":"set-variable-container"},R),W=c?null!==R?o.createElement(eY.cS,{label:(0,I.tx)("proto.variable.value"),input:B}):null:B;return o.createElement("div",{className:c?void 0:ei.cx.relative.$},F,d.isShown&&"variable-picker-set-variable-action"===d.type&&d.key===i.recordingKey?o.createElement(o.Fragment,null,o.createElement(ne.vx,{title:"",headerSize:"hidden",initialPosition:d.initialPosition,onClose:T,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0},(0,_.kc)().prototype_expression_props?o.createElement(t8.jc,{selectedItem:m,disabledVariableIds:new Set,currentView:k,toggleLayout:f.lQ,pickerType:"fields",setControlRightButtons:o.createElement(t7.f,{resolvedTypes:[S.rXF.BOOLEAN,S.rXF.STRING,S.rXF.FLOAT,S.rXF.COLOR]}),onVariableSelected:P,onClose:T,recordingKey:y.Pt(i.recordingKey,"variablePickerForSelection"),searchQuery:g,onSearchInputChange:E,onComponentPropSelected:O}):o.createElement(t8.YK,{selectedItem:m,disabledVariableIds:new Set,currentView:k,toggleLayout:f.lQ,pickerType:"fields",setControlRightButtons:o.createElement(t7.f,{resolvedTypes:[S.rXF.BOOLEAN,S.rXF.STRING,S.rXF.FLOAT,S.rXF.COLOR]}),onVariableSelected:P,onClose:T,recordingKey:y.Pt(i.recordingKey,"variablePickerForSelection"),searchQuery:g,onSearchInputChange:E})),o.createElement(t8.$3,{onClose:T})):null,W)}var nr=n(96796),ni=n(463420),nl=n(347082),ns=n(896474),nc=n(394781);let nd=(0,el.ex)("prototype_state_management_info",function(){let e=o.createElement("a",{className:ei.cx.cursorPointer.colorTextTooltipSecondary.$,href:"https://help.figma.com/hc/articles/14397859494295",rel:"noopener noreferrer",target:"_blank",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}},(0,I.tx)("proto.state_management.info_tooltip_learn_more")),t=o.createElement("span",null,o.createElement("strong",null,(0,I.tx)("proto.animation_panel.preserve_scroll_position")));return o.createElement("div",{className:"prototype_state_management_info_tooltip--stateManagementMoreInfo---gER1 tooltip--text--Ll1mS"},(0,I.tx)("proto.state_management.info_tooltip",{PreserveScrollPositionBold:t,LearnMoreLink:e}))}),nu="prototype_state_management_panel--checkboxRow--2u02e checkbox--_checkboxRow--oEhow",np="prototype_state_management_panel--expandCaret--uuDge";var nm=n(949207),n_=n(432023);function ng({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:a,showResetVideoState:i,showResetInteractiveComponentState:l,updateSelectionProperties:s,stateManagementVersion:c,selectedInteractions:d}){let u=(0,r.wA)(),p=(0,A.GS)(),[m,_]=o.useState(!p),g=o.useContext(eA.c);if((0,en.YT)()===en.Oz.TWO_COL&&g===eA.P.LEFT)return null;let E=(0,en.LH)(c),f=o.createElement(tr.S,{onChange:t=>{u((0,L._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),s({...function(e){if((0,C.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,C.gl)(e.preserveScroll),recordingKey:y.Pt(n,"preserve-scroll-check"),label:o.createElement(ti.J,null,(0,I.tx)("proto.animation_panel.preserve_scroll_position"))}),h=p?o.createElement(eY.TN,null,f):o.createElement(K.fI,{className:nu},f),v=o.createElement(tr.S,{onChange:t=>{u((0,L._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:nc.zZ.haveAnyInteractionsBeenUpgraded(d)}})),s({...function(e){if((0,C.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,C.gl)(e.resetScrollPosition),recordingKey:y.Pt(n,"reset-scroll-position-check"),label:o.createElement(ti.J,null,(0,I.tx)("proto.animation_panel.reset_scroll_position"))}),N=o.createElement("div",{"data-tooltip-type":R.Ib.SPECIAL,"data-tooltip":nd,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":240,className:p?"prototype_state_management_panel--stateManagementPanelTooltipUI3--x5MQ3":void 0},o.createElement(ns.In,{icon:"info-16"})),T=p?o.createElement(eY.TN,null,v," ",N):o.createElement(K.fI,{className:nu},v),x=o.createElement(tr.S,{onChange:t=>{u((0,L._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:nc.zZ.haveAnyInteractionsBeenUpgraded(d)}})),s({...function(e){if((0,C.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,C.gl)(e.resetInteractiveComponents),recordingKey:y.Pt(n,"reset-component-state-check"),label:o.createElement(ti.J,null,(0,I.tx)("proto.animation_panel.reset_component_state"))}),w=p?o.createElement(eY.TN,null,x):o.createElement(K.fI,{className:nu},x),S=o.createElement(tr.S,{onChange:t=>{u((0,L._P)({name:"Reset Video Position Changed",params:{newValue:t}})),s({...function(e){if((0,C.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,C.gl)(e.resetVideoPosition),recordingKey:y.Pt(n,"reset-video-position-check"),label:o.createElement(ti.J,null,(0,en.LH)(c)?(0,I.tx)("proto.state_management.reset_video_state"):(0,I.tx)("proto.animation_panel.reset_video_state"))}),P=p?o.createElement(eY.TN,null,S):o.createElement(K.fI,{className:nu},S),O=o.createElement(K.Zk,{className:`prototype_state_management_panel--stateManagementPanel--sYaaj ${(0,en.kM)(c)&&"prototype_state_management_panel--stateManagementPanelWithVersion--AovOP"}`},!p&&o.createElement(K.fI,null,o.createElement(K.xw,{className:"prototype_state_management_panel--panelTitle--Nr4Eh",faded:!0},(0,I.tx)("proto.state_management")),!(0,en.kM)(c)&&N),(0,en.uU)(c)&&a&&h,i&&(0,en.uU)(c)&&P,E&&T,E&&l&&w,E&&i&&P,(0,C.gl)(c)&&o.createElement(eo.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12}},o.createElement(K.UZ,null,(0,I.tx)("proto.state_management.mixed_state_update")))),k=()=>{_(!m)},D=o.createElement(eu.D8,{key:"expand-caret",recordingKey:y.Pt(n,"expand-caret"),onMouseDown:k,role:"presentation"},o.createElement(b.U,{svg:m?nm.A:n_.A},m?o.createElement(nr.O,{className:np}):o.createElement(ni.k,{className:np}))),M=o.createElement("div",{className:"prototype_state_management_panel--expandRow--RVDCp",onMouseDown:k,role:"presentation"},D,o.createElement(eu.oj,null,(0,I.tx)("proto.state")));return o.createElement(nl.p,{name:"prototype_state_management_panel"},p&&M,(m||!p)&&O)}class nE extends eE.c${}class nf extends eE.l6{}let ny=N.AD;class nh extends ep.cP{format(e){return e===ny||null===e?(0,I.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function nv(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:a,dropdownShown:i,targetVideoNodeID:l,isVideoSelected:s,onChange:c}=e,d=(0,r.wA)(),[u,p]=o.useState(()=>s?new nh(a):new ep.cP(a));t.sort((e,t)=>{let n=u.format(e),a=u.format(t);return n.localeCompare(a)}),s&&t.unshift(ny);let m=t.length>0&&n.length>0,_=`prototype-target-video-select-${e.recordingKey}`,g=(0,A.GS)(),E=o.createElement(nf,{id:_,dataTestId:"target-video-select",className:"prototype_target_video_dropdown--targetVideoDropdown--6hKF-",chevronClassName:"prototype_target_video_dropdown--chevron--jgz53",inputClassName:"prototype_target_video_dropdown--input--infAK",property:(0,C.gl)(l)?l:N.dI(l),formatter:u,onChange:c,dispatch:d,dropdownShown:i,recordingKey:y.Pt(e,"select"),onOptionFocus:e=>{tY.Uc(e??"")},dropdownAlignment:"left"},t.filter(e=>u.hasNameForNode(e)).map((t,n)=>o.createElement(nE,{key:`enabled-${n}`,value:t,recordingKey:y.Pt(e,`viable-option-${n}`),disabled:!1})),m&&o.createElement(eE.sK,null),n.filter(e=>u.hasNameForNode(e)).map((t,n)=>o.createElement(nE,{key:`disabled-${n}`,value:t,recordingKey:y.Pt(e,`viable-option-${n}`),disabled:!0})));return g?o.createElement(eY.cS,{input:E,label:(0,I.tx)("proto.video_dropdown.label")}):E}var nb=n(946689);function nN({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:a}){let r=(0,A.GS)(),i=o.createElement(nb.ks,{className:r?"prototype_open_url_action_options--urlInputUI3--H-JfT":"prototype_open_url_action_options--urlInput--T-tGT",dataTestId:"url-input",placeholder:(0,I.t)("proto.interaction.example_com"),value:(0,C.gl)(e.connectionURL)?(0,I.t)("fullscreen.mixed"):(0,C._W)(e.connectionURL,""),onChange:n,recordingKey:y.Pt(t,"urlTextInput"),autoFocus:!1}),l=o.createElement(tr.S,{label:o.createElement(ti.J,null,(0,I.tx)("proto.action_open_url_in_new_tab")),onChange:a,recordingKey:y.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return o.createElement(o.Fragment,null,r?o.createElement(eY.cS,{label:(0,I.tx)("proto.open_url.text_input_label"),input:i}):i,r?o.createElement(eY.TN,null,l):o.createElement(K.fI,{className:"prototype_open_url_action_options--checkboxRow--mu17T checkbox--_checkboxRow--oEhow"},l))}var nI=n(617453),nT=n(588599);function nA({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:a,recordingKey:i}){let{smallNudgeAmount:l,bigNudgeAmount:s}=(0,nI.sT)(),c=(0,r.wA)(),d=(0,A.GS)(),u=(t,n)=>(a,o)=>{t&&e({extraScrollOffset:{...t,[n]:a}},{shouldCommit:o})},p=(0,C._W)(n,{x:0,y:0});if(!a||"SCROLL_TO"!==t)return null;let m=o.createElement(td.gq,{className:d?void 0:eS.U,inputClassName:d?eS.oM:eS.hF,value:p.y,wheelMultiplier:l,scrubMultiplier:l,smallNudgeAmount:l,bigNudgeAmount:s,onValueChange:u(p,"y"),dispatch:c,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,I.t)("proto.trigger.y_offset"),tooltipForScreenReadersOnly:!1,recordingKey:y.Pt(i,"extraScrollOffsetY")},d?o.createElement("span",{className:eS.QK},(0,I.tx)("proto.scroll_options.scroll_offset.y")):o.createElement(er.B,{className:eS.QK,svg:nT.A})),_=o.createElement(td.gq,{className:d?void 0:eS.sC,inputClassName:d?eS.oM:eS.hF,value:p.x,wheelMultiplier:l,scrubMultiplier:l,smallNudgeAmount:l,bigNudgeAmount:s,onValueChange:u(p,"x"),dispatch:c,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,I.t)("proto.trigger.x_offset"),tooltipForScreenReadersOnly:!1,recordingKey:y.Pt(i,"extraScrollOffsetX")},d?o.createElement("span",{className:eS.QK},(0,I.tx)("proto.scroll_options.scroll_offset.x")):o.createElement(er.B,{className:eS.Kh,svg:nT.A}));return d?o.createElement(eY.Cm,{label:(0,I.tx)("proto.scroll_options.offset"),leftInput:_,rightInput:m}):o.createElement(K.fI,null,m,_)}function nx(e){return o.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},o.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0Zm1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0Zm-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793V8.5Z",clipRule:"evenodd"}))}let nw="prototype_video_action_options--chevron--mkNyv",nS="prototype_video_action_options--input--3-cEi",nP=new ep.js,nC=new ep.Z6;function nO({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:a,recordingKey:i}){let l=(0,A.GS)(),s=(0,ep.Od)(e),c=(0,C.E7)(e.mediaAction),d="UPDATE_MEDIA_RUNTIME"===(0,C.E7)(e.connectionType),u="SKIP_TO"===c,p="SKIP_FORWARD"===c||"SKIP_BACKWARD"===c,m="PLAY"===c||"PAUSE"===c||"TOGGLE_PLAY_PAUSE"===c,_="MUTE"===c||"UNMUTE"===c||"TOGGLE_MUTE_UNMUTE"===c,g=(0,r.wA)(),E=(0,nI.RU)(),f=o.useCallback(e=>{n({mediaSkipToTime:e}),g((0,L._P)({name:"Media skip to time changed",params:{value:e}}))},[g,n]),h=`prototype-media-action-select-${i}`,v="prototype_video_action_options--shortDropdown--NOXXv",b=a&&a.type===h?nP:nC,N=o.createElement(eh,{id:h,dataTestId:"media-play-pause-select",className:v,chevronClassName:nw,inputClassName:nS,property:s,formatter:b,onChange:t,dispatch:g,dropdownShown:a,recordingKey:y.Pt(i,"select")},o.createElement(ey,{key:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:y.Pt(i,"toggle-play-pause-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_PLAY",value:"UPDATE_MEDIA_PLAY",recordingKey:y.Pt(i,"play-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_PAUSE",value:"UPDATE_MEDIA_PAUSE",recordingKey:y.Pt(i,"pause-option"),disabled:!1})),T=o.createElement(eh,{id:h,dataTestId:"media-mute-unmute-select",className:v,chevronClassName:nw,inputClassName:nS,property:s,formatter:b,onChange:t,dispatch:g,dropdownShown:a,recordingKey:y.Pt(i,"select")},o.createElement(ey,{key:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:y.Pt(i,"toggle-mute-unmute-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_MUTE",value:"UPDATE_MEDIA_MUTE",recordingKey:y.Pt(i,"mute-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_UNMUTE",value:"UPDATE_MEDIA_UNMUTE",recordingKey:y.Pt(i,"unmute-option"),disabled:!1})),x=o.createElement(eh,{id:h,dataTestId:"media-skip-by-select",className:v,chevronClassName:nw,inputClassName:nS,property:s,formatter:b,onChange:t,dispatch:g,dropdownShown:a,recordingKey:y.Pt(i,"select"),dropdownWidth:160},o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_FORWARD",value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:y.Pt(i,"skip-forward-option"),disabled:!1}),o.createElement(ey,{key:"UPDATE_MEDIA_SKIP_BACKWARD",value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:y.Pt(i,"skip-backward-option"),disabled:!1})),w=o.createElement(td.qd,{className:"prototype_video_action_options--timestampContainer---DdaI",inputClassName:"prototype_video_action_options--timestamp--luOrs",dataTestId:"mediaSkipToTime-input",dispatch:g,value:e.mediaSkipToTime||0,onValueChange:f,wheelMultiplier:E/1e3,scrubMultiplier:E/1e3,max:3600,displayFractions:!0,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,I.t)("proto.trigger.timestamp_to_set_to"),tooltipForScreenReadersOnly:!0,recordingKey:y.Pt(i,"mediaSkipToTimeInput")},l?o.createElement(nx,null):void 0),S="SKIP_BACKWARD"===c?(0,I.t)("proto.trigger.duration_to_jump_backward"):(0,I.t)("proto.trigger.duration_to_jump_forward"),P=o.createElement(td.dE,{className:"prototype_video_action_options--timeAmountContainer--5kpHn",dataTestId:"mediaSkipByAmount-input",dispatch:g,value:e.mediaSkipByAmount||5,onValueChange:e=>{n({mediaSkipByAmount:e}),g((0,L._P)({name:"Media skip by amount changed",params:{value:e}}))},wheelMultiplier:E/1e3,scrubMultiplier:E/1e3,max:3600,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":S,tooltipForScreenReadersOnly:!0,recordingKey:y.Pt(i,"mediaSkipByAmountInput")});if(!d)return null;if(l){if(m)return o.createElement(eY.cS,{input:N,label:(0,I.tx)("proto.video_options.behavior")});if(_)return o.createElement(eY.cS,{input:T,label:(0,I.tx)("proto.video_options.behavior")});if(p)return o.createElement(o.Fragment,null,o.createElement(eY.cS,{input:x,label:(0,I.tx)("proto.video_options.direction")}),o.createElement(eY.cS,{input:P,label:(0,I.tx)("proto.video_options.offset")}));if(u)return o.createElement(eY.cS,{input:w,label:(0,I.tx)("proto.video_options.timestamp")})}return o.createElement(K.fI,null,m&&N,_&&T,p&&x,p&&P,u&&w)}function nk({action:e,recordingKey:t,interactionType:n,onActionChange:a,updateMultipleDestinationNodes:i,updateSelectionProperties:l,stateManagementVersion:s,autoOpenVariablePicker:c,autoOpenExpressionBuilder:d,setAutoOpenExpressionBuilder:p,...m}){let _=(0,r.wA)(),g=(0,em.Um)(),{scene:f,selectionProperties:h}=(0,tn.R)(e=>({scene:e.mirror.sceneGraph,selectionProperties:e.mirror.selectionProperties})),v=(0,A.GS)(),b=(0,en.YT)(),T=b===en.Oz.SINGLE_COL,x=b===en.Oz.TWO_COL,w=o.useContext(eA.c),P=x&&w===eA.P.RIGHT,O="SET_VARIABLE"===(0,C.E7)(e.connectionType),k="SET_VARIABLE_MODE"===(0,C.E7)(e.connectionType),D="CONDITIONAL"===(0,C.E7)(e.connectionType),M="INTERNAL_NODE"===(0,C.E7)(e.connectionType),R="INTERNAL_NODE"===(0,C.E7)(e.connectionType)&&"SWAP_STATE"===(0,C.E7)(e.navigationType),V="URL"===(0,C.E7)(e.connectionType),K=M||"BACK"===(0,C.E7)(e.connectionType)||"CLOSE"===(0,C.E7)(e.connectionType),F="UPDATE_MEDIA_RUNTIME"===(0,C.E7)(e.connectionType),U=(0,eg.dq)(h),B=(0,ta.uQ)(),W=[],H=[];if(B){let{viableIds:e,disabledIds:t}=S.X3B.getVideoNodesOnSameTlfAsNode(B);W=e,H=t}let z=N.dI((0,C.E7)(e.transitionNodeID)),G=null!=z&&z!==N.AD,Y=M&&(!(0,C.hS)(e.transitionNodeID)||G),X=(0,C.E7)(e.navigationType),$=M&&"OVERLAY"===(0,C.E7)(X),j=(0,en.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),Z=K&&!$&&("INSTANT"===j.behavior||"DISSOLVE"===j.behavior),Q=M&&"OVERLAY"===(0,C.E7)(e.navigationType)&&G,ee=M&&($||"SWAP"===(0,C.E7)(X)),et=!F&&(0,en.oc)(e),ea=(0,en.GB)(e),eo=(0,en.uU)(s)?Z||et:(0,en.Fp)(s,e.connectionType,e.navigationType),{selectedInteractions:er}=(0,J.Ay)(q.J.NORMAL),el=er.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>E.d({nodeID:e.sourceNodeID,interactionID:e.id})),es=o.useCallback(e=>{let t=N.sH(e);t&&l({transitionNodeID:t}),_((0,L._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(el),destinationTlfId:e}}))},[_,l,el]),ec=o.useCallback(e=>{i(e),_((0,L._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),_((0,L._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(el)}}))},[i,_,el]),ed=o.useCallback(e=>{l({connectionURL:e.target.value})},[l]),eu=(0,ep.Od)(e),e_=u()({[eS.Ph]:!v,[eS.Ti]:m.isNestedInConditional&&!T&&!P}),eE=M&&!R,ef=o.createElement(t1,{className:eS.iR,dispatch:_,dropdownShown:g,onChange:es,nodeId:e.transitionNodeID||N.Hr,scene:f,recordingKey:y.Pt(t,"destinationDropdown"),action:eu,isUI3:v}),ey=o.createElement(nA,{action:eu,showScrollToOptions:"SCROLL_TO"===eu,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:l,recordingKey:y.Pt(t,"scrollOptionsPanel")}),eh=o.createElement(tb,{interactionType:n,updateSelectionProperties:l,recordingKey:y.Pt(t,"overlaySettings"),actionIndexPath:m.actionIndexPath,nodeId:e.transitionNodeID||N.Hr});return o.createElement("div",{className:e_},eE&&(v?o.createElement(o.Fragment,null,o.createElement(eY.cS,{label:ee?(0,I.tx)("proto.overlay"):(0,I.tx)("proto.destination"),input:ef}),ey,Q&&eh):ef),V&&o.createElement(nN,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{l({openUrlInNewTab:e}),_((0,L._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:ed}),F&&o.createElement(nv,{dropdownShown:g,scene:f,targetVideoNodeID:e.transitionNodeID||N.Hr,recordingKey:y.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:W,disabledSameFrameVideoIds:H,isVideoSelected:U,onChange:es}),o.createElement(nO,{dropdownShown:g,action:e,onChange:a,updateSelectionProperties:l,recordingKey:t}),!v&&ey,O&&o.createElement("div",{className:v?void 0:ei.cx.ml4.$},o.createElement(no,{className:eS.PB,dispatch:_,onChange:es,nodeId:e.transitionNodeID||N.Hr,targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:l,recordingKey:y.Pt(t,"setVariableControls"),action:eu,isNestedInConditional:m.isNestedInConditional,isNarrowPanel:m.isNestedInConditional||m.isNarrowPanel,autoOpenVariablePicker:c})),k&&o.createElement("div",{className:v?void 0:ei.cx.ml4.$},o.createElement(e4,{dispatch:_,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,updateSelectionProperties:l,recordingKey:y.Pt(t,"setVariableControls"),actionIndexPath:m.actionIndexPath.join(",")})),D&&(P?o.createElement(tG,{recordingKey:y.Pt(t,"conditionalActionSection","conditional-block",0),autoOpenExpressionBuilder:d,setAutoOpenExpressionBuilder:p,updateSelectionProperties:l,conditionalActions:(0,C.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]}):o.createElement(tz,{updateSelectionProperties:l,recordingKey:y.Pt(t,"conditionalActionSection"),action:e,updateMultipleDestinationNodes:i,interactionType:n,stateManagementVersion:s,selectedInteractions:m.selectedInteractions,actionIndexPath:m.actionIndexPath,onDrop:m.onDrop,onSelect:m.onSelect,onExpand:m.onExpand,onNewActionAdded:m.onNewActionAdded,selectedActionIndex:m.selectedActionIndex,expandedRows:m.expandedRows,autoOpenVariablePicker:c,handleMouseDownUI3:m.handleMouseDownUI3})),R&&o.createElement("div",{className:ei.cx.ml0.$},o.createElement(t2,{onChange:ec,nodeId:e.transitionNodeID||N.Hr,recordingKey:y.Pt(t,"consumption"),actionIndexPath:m.actionIndexPath})),Y&&o.createElement(o.Fragment,null,v&&o.createElement("div",{className:eS.x}),o.createElement(tP.X7,{transition:j,interactionType:n,navigationType:e.navigationType,recordingKey:y.Pt(t,"animationPanel"),updateSelectionProperties:l,isNarrowPanel:m.isNestedInConditional||m.isNarrowPanel,stateManagementVersion:s})),Q&&!v&&eh,eo&&o.createElement(o.Fragment,null,v&&o.createElement("div",{className:eS.x}),o.createElement(ng,{connectionType:e.connectionType,transition:j,navigationType:e.navigationType,recordingKey:y.Pt(t,"stateManagementPanel"),updateSelectionProperties:l,showPreserveScrollPosition:Z,showResetVideoState:!!et,showResetInteractiveComponentState:!!ea,stateManagementVersion:s,selectedInteractions:m.selectedInteractions})))}var nD=n(344525),nL=n(323110),nM=n(482725);let nR=Symbol("ACTION_ROW");function nV({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:a,selectedInteractions:i,autoOpenVariablePicker:l,autoOpenExpressionBuilder:c,setAutoOpenExpressionBuilder:d,...p}){let m=(0,r.wA)(),{shouldShowAdvancedPrototypingPaywall:_,showAdvancedPrototypingVariablesModal:f,showAdvancedPrototypingConditionalActionsModal:h}=(0,en.zt)(),v=(0,em.Um)(),N=(0,en.SJ)(),{firstVariableSetMode:T,firstVariableSetID:x}=e3(),w=p.action,S=p.isNestedInConditional&&(0,tC.qQ)(p.action),P=!!w.connectionType&&"CONDITIONAL"===w.connectionType,O=(0,A.GS)(),k=(0,en.YT)(),D=k===en.Oz.SINGLE_COL,M=k===en.Oz.TWO_COL,V=o.useContext(eA.c),F=M&&V===eA.P.RIGHT,U=M&&V===eA.P.LEFT,B=!((0,C.gl)(p.action)||["CLOSE","NONE"].includes(w.connectionType))&&!O;var W=p.selectedActionIndex.equals(p.actionIndexPath);let H=1===p.selectedActionIndex.path.length&&p.isNestedInConditional&&p.actionIndexPath[0]===p.selectedActionIndex.path[0];var z=void 0===p.expandedRows||void 0!==p.expandedRows.find(e=>e.equals(p.actionIndexPath));O&&(z=!!D||!U||P);let G=o.useCallback(()=>{(B||D)&&p.onExpand(p.actionIndexPath)},[B,D,p]),[Y,q]=o.useState(!1);o.useEffect(()=>{if(P){let e=setTimeout(()=>{q(!0)},0);return()=>clearTimeout(e)}q(!0)},[P]);let J=P&&!z,X=P&&z,$=o.useRef(null),[j,Z]=(0,g.fp)(en.hV),{position:Q,dragItem:ee}=(0,ea.h4)(()=>({type:nR,element:$,item:p.action,dropPositionThreshold:X?.2:J?1/3:.5,getDeepestTargetOnly:!0,canDrag:!!U||!z,onDrop(e){p.onDrop(e),Z(!0)}})),et=o.useMemo(()=>{let e=$.current;if(!e||!Q||F)return;if(ee&&"CONDITIONAL"===ee.connectionType&&p.isNestedInConditional||(0,tC.qQ)(ee)){Z(!1);return}let t=S?ea.Nz.BEFORE:Q;var n=void 0;let a=e.offsetParent?.firstElementChild?.scrollTop??0;return t===ea.Nz.BEFORE?n=e.offsetTop-a:t===ea.Nz.AFTER&&(n=e.offsetTop+e.offsetHeight-a),Z(!0),n},[Q,F,ee,p.isNestedInConditional,S,Z]),eo=Q&&P&&!z&&Q===ea.Nz.INSIDE&&"CONDITIONAL"!==ee.connectionType,ei=y.rf(p.recordingKey,"mousedown",e=>{z||(W=!0,p.onSelect(p.actionIndexPath,!0))}),el=y.rf(p.recordingKey,"mousedown",e=>{W=!1,p.onSelect(p.actionIndexPath,!1)}),es=y.rf(p.recordingKey,"click",e=>{p.onSelect(p.actionIndexPath,!0)}),ec=y.rf(p.recordingKey,"mousedown",e=>{(0,tC.qQ)(p.action)||p.onSelect(p.actionIndexPath,!0)}),e_=e=>{var n=!0,a=!1;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":_?(n=!1,f()):(t({connectionType:"SET_VARIABLE"}),l.current=!0);break;case"SET_VARIABLE_MODE":_?(n=!1,f()):t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:x,targetVariableModeID:T});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":a=!0,_?(n=!1,h()):(t({connectionType:"CONDITIONAL"}),O&&d&&d(!0))}if(O||z||G(),M&&p.onExpand(p.actionIndexPath,a),n){let t=i.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>E.d({nodeID:e.sourceNodeID,interactionID:e.id}));m((0,L._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},eg=p.isNestedInConditional?eS.It:eS.ft,eE=u()({[eS.wu]:!U,[eS.zX]:U&&j}),ef=o.createElement(b.U,{svg:nL.A},o.createElement(ed,{className:eS._2}));if(S&&p.onAddAction)return o.createElement("div",{className:U?eS.LW:void 0},et&&o.createElement("hr",{className:eg,style:{transform:`translateY(${et}px)`}}),U&&p.isNestedInConditional&&ef,o.createElement("div",{className:eE,ref:$},o.createElement(tM,{addButtonPressed:p.onAddAction,recordingKey:y.Pt(p.recordingKey,"addAction"),isNestedInConditional:!0})));let ey=(0,ep._X)(w),eh="NONE"!==ey,ev=(z||!eh)&&!U,eN=p.numActions>1,eI=(p.numActions>1||p.isNestedInConditional)&&!U,eT=u()({[eS.$l]:!0,[eS.KY]:U&&!p.isNestedInConditional,[eS.Iw]:U&&!p.isNestedInConditional&&j,[eS.DM]:U&&p.isNestedInConditional,[eS.vs]:U&&p.isNestedInConditional&&j,[eS.M9]:U&&p.isNestedInConditional&&H&&j,[eS.I_]:U&&P&&!W&&j,[eS.Cu]:W&&!O,[eS.PE]:W&&U&&!p.isNestedInConditional,[eS.Ze]:eo,[eS.Op]:p.isNestedInConditional&&!O}),ex=u()({[eS.rn]:!0,[eS.Gu]:U,[eS.Ti]:p.isNestedInConditional&&!O&&!F,[eS.Yo]:p.isNestedInConditional&&O&&!F}),ew=o.createElement(er.B,{key:"expand-caret",className:eS.GE,svg:z?nm.A:n_.A,recordingKey:y.Pt(p.recordingKey,"expandCaret"),onClick:G}),eP=o.createElement(eD,{action:w,isNestedInConditional:p.isNestedInConditional,isNarrowPanel:p.isNarrowPanel&&eN,onClick:O?es:void 0}),eC=o.createElement(eb,{className:"NONE"===ey||O?void 0:nD.fH,dispatch:m,dropdownShown:v,onChange:e_,action:ey,recordingKey:y.Pt(p.recordingKey,"actionDropdown"),showVideoActions:N,isNestedInConditional:p.isNestedInConditional}),eO=o.createElement(K.K0,{className:O?eS.gG:eS.hH,onClick:n,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,I.t)("proto.prototype_panel.delete"),"aria-label":(0,I.t)("proto.prototype_panel.delete"),recordingKey:y.Pt(p.recordingKey,"actionDeleteButton")},o.createElement(b.U,{svg:nM.A},o.createElement(s.O,null))),ek=o.createElement(K.fI,{className:ex,onDoubleClick:G},B&&ew,ev?o.createElement("span",{className:eS.P2},eC):eP,eI&&eO),eL=ev?eC:eP,eM=o.createElement(eu.D8,{className:ex,onDoubleClick:G},B&&ew,eI?o.createElement(tt.DE,{appendedClassName:eS.Jw,label:null,input:eL,icon:eO}):o.createElement(tt.Ad,{appendedClassName:eS.Jw,label:null,input:eL})),eR=(0,I.tx)("proto.action"),eV=o.createElement(eu.D8,{className:ex},D||F?o.createElement(eY.cS,{label:eR,input:eL}):eL),eK=O?eV:eM,eF=u()({[eS.Oe]:!0,[eS.h2]:W,[eS.Ob]:P});return o.createElement("div",{className:eT,ref:$,role:"button",tabIndex:0,onMouseDown:O?void 0:ei,onMouseUp:O?void 0:el},void 0!==et&&o.createElement("hr",{className:eg,style:{transform:`translateY(${et}px)`}}),U?o.createElement("div",{className:eF,role:"button",tabIndex:0,onMouseDown:O?ec:void 0},p.isNestedInConditional&&ef,eK):O?eK:ek,z&&Y&&o.createElement(nk,{updateMultipleDestinationNodes:e,action:w,onActionChange:e_,recordingKey:p.recordingKey,updateSelectionProperties:t,interactionType:p.interactionType,stateManagementVersion:a,selectedInteractions:i,isNestedInConditional:p.isNestedInConditional,isNarrowPanel:p.isNarrowPanel,actionIndexPath:p.actionIndexPath,onDrop:p.onDrop,onSelect:p.onSelect,onExpand:p.onExpand,onNewActionAdded:p.onNewActionAdded,selectedActionIndex:p.selectedActionIndex,expandedRows:p.expandedRows,autoOpenVariablePicker:l,autoOpenExpressionBuilder:c,setAutoOpenExpressionBuilder:d,handleMouseDownUI3:ec}))}var nK=n(427113),nF=n(682331),nU=n(73349);function nB({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:a}){let r;let i=(0,nU._i)(t?.keyCodes),l=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[s,c]=o.useState(!1),d=o.useRef(null);o.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&d.current&&(a(!1),d.current.focus(),c(!0))},[a,n,t]),o.useEffect(()=>{if(!s)return()=>{};let t=new nF.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,s]);let u=null,p=(0,nU.E8)(t),m=(0,A.GS)();return s?r=o.createElement(nW,null,m?(0,I.tx)("proto.keyCapture.press_key_lowercase"):(0,I.tx)("proto.keyCapture.press_key")):t?.triggerDevice==="KEYBOARD"&&i?u=(0,nU.U8)(i):p?u=p:r=o.createElement(nW,null,m?(0,I.tx)("proto.keyCapture.click_to_set_key"):(0,I.tx)("proto.keyCapture.click_to_select")),o.createElement(K.rp,{ref:d,className:"prototype_key_capture_field--root--bD21s","data-tooltip-type":R.Ib.TEXT,"data-tooltip":u&&u.length>10?u:null,onFocus:()=>c(!0),onBlur:()=>c(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!nU.RI.has(t)&&nU.pu[t]&&(t===i?.keyCode&&e.repeat?l((0,nU.wb)({keyCode:t,metaKey:e.metaKey||i.metaKey,shiftKey:e.shiftKey||i.shiftKey,ctrlKey:e.ctrlKey||i.ctrlKey,altKey:e.altKey||i.altKey})):l((0,nU.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture"},u??r)}function nW({children:e}){return o.createElement("span",{className:"prototype_key_capture_field--placeholder--gWUKF"},e)}var nH=n(634238);class nz extends eE.l6{}class nG extends eE.c${}let nY=new ep.VG,nq=new ep.EX,nJ=new ep.JV,nX=new ep.Eq;function n$(e){let t=(0,r.wA)(),n=(0,em.Um)(),a=(0,A.GS)(),i=(0,ef.cJ)(),{showVideoV2Triggers:l}=(0,tn.R)(e=>({allStatesInSelection:e.mirror.selectionProperties.stateGroupSelectionInfo?.mode===S.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,eg.dq)(e.mirror.selectionProperties)})),s=(0,g.md)(nH.NE),c=(t,n)=>{let r=o.createElement("div",{className:"transition_interaction_dropdown--prototypeInteractionIcon---njby"},(0,eg.e7)(t));return o.createElement(nG,{key:n,value:t,icon:a?r:void 0,recordingKey:y.Pt(e,t),disabled:!function(t){if("NONE"===t)return!0;let n=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&N.aI(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,C.hS)(e.property),a=(function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>e?.event?.interactionType).filter(e=>void 0!==e))})()?.has(t)&&(0,C.hS)(e.property)&&e.property!==t;return(!n&&!a||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?l:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t)})},d=["NONE"].map(c),u=["ON_CLICK",...i?[]:["DRAG"],"ON_HOVER","ON_PRESS",...i?[]:["ON_KEY_DOWN"]].map(c),p=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(c),m=(i?[]:["ON_MEDIA_HIT","ON_MEDIA_END"]).map(c),_=["AFTER_TIMEOUT"].map(c),E=s?"ON_MEDIA_HIT"!==e.property?nq:nX:"ON_MEDIA_HIT"!==e.property?nY:nJ,f=o.useCallback(e=>e-24,[]),h=(0,C.E7)(e.property);return o.createElement(nz,{id:"interaction-type-select",className:e.className,chevronClassName:"transition_interaction_dropdown--chevron--pyzhq",dataTestId:"interaction-select",property:e.property,formatter:E,icon:a&&h?(0,eg.e7)(h):void 0,onChange:e.onChange,dispatch:t,dropdownShown:n,recordingKey:y.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,e_.nl)(),dropdownAlignment:f,dropdownWidth:160},d,o.createElement(eE.sK,null),u,o.createElement(eE.sK,null),p,!i&&o.createElement(eE.sK,null),!i&&_,l&&[o.createElement(eE.sK,{key:""}),...m])}let nj={keyCodes:[],triggerDevice:"KEYBOARD"};function nZ(e,t,n,a){return n?o.createElement(eY.cS,{label:e,input:t,appendedClassName:a?void 0:eS.dU}):o.createElement(K.fI,null,t)}function nQ(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:a}=(0,J.Ay)(e.category),{interactionType:i="NONE",transitionTimeout:l=.8,mediaHitTime:s=0,interactionMaintained:c=!1,interactionDuration:d=.3,keyTrigger:p=nj}=t.interactionEvent,m=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,C.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},_=void 0!==t.interactionActions.find(e=>m(e,"URL")),g=void 0!==t.interactionActions.find(e=>m(e,"UPDATE_MEDIA_RUNTIME")),E=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,f=void 0!==t.interactionActions.find(e=>m(e,"CONDITIONAL"));return function(e){let t=(0,r.wA)(),n=e.updateSelectionProperties,a=(0,nI.RU)(),[i,l]=o.useState(!1),s=(0,A.GS)(),c=(0,en.YT)(),d=c===en.Oz.SINGLE_COL,p=c===en.Oz.TWO_COL,m=!0===(0,C.E7)(e.maintained),_=(0,C.E7)(e.keyTrigger),g="ON_KEY_DOWN"===(0,C.E7)(e.interactionType),E="AFTER_TIMEOUT"===(0,C.E7)(e.interactionType),f="ON_MEDIA_HIT"===(0,C.E7)(e.interactionType),h=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,C.E7)(e.interactionType)||"")>-1,v=o.createElement(n$,{className:eS.sQ,property:e.interactionType,onChange:a=>{ee.sn.start("interaction_details_changed"),n({interactionType:a}),t((0,L._P)({name:"Prototype Interaction Type Changed",params:{newType:a,oldType:(0,C._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===a&&l(!0)},interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,recordingKey:y.Pt(e,"interactionDropdown"),interactionsOnSelectedNodes:e.interactionsOnSelectedNodes}),b=s?d?o.createElement(eY.cS,{label:(0,I.tx)("proto.trigger"),input:v}):o.createElement("div",{className:eS.BX},v):o.createElement(K.fI,{className:u()(eS.SG,eS.QT)},v,o.createElement("div",{className:eS.LY},e.headerButtons)),N=o.createElement(o.Fragment,null,E&&nZ((0,I.tx)("proto.delay"),o.createElement(td.W4,{className:s?eS.Lp:eS.Zp,inputClassName:s?eS.Gl:void 0,dataTestId:"timeout-input",dispatch:t,value:e.timeout,onValueChange:e=>{n({transitionTimeout:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:20,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,I.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:y.Pt(e,"timeoutInput")},s?o.createElement(nK.A,null):void 0),s,d),g&&nZ((0,I.tx)("proto.key"),o.createElement(nB,{onChange:e=>{n({keyTrigger:e})},value:_,shouldFocusKeyCaptureField:i,setShouldFocusKeyCaptureField:l}),s,d),f&&nZ((0,I.tx)("proto.time"),o.createElement(td.qd,{displayFractions:!0,className:eS.Ym,inputClassName:eS.vE,dataTestId:"mediaHitTime-input",dispatch:t,value:e.mediaHitTime,onValueChange:e=>{n({mediaHitTime:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:3600,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,I.t)("proto.trigger.video_hit_time"),tooltipForScreenReadersOnly:!0,recordingKey:y.Pt(e,"mediaHitTimeInput")},s?o.createElement(nx,null):void 0),s,d),h&&nZ((0,I.tx)("proto.delay"),o.createElement(td.W4,{className:s?eS.Lp:eS.aq,inputClassName:s?eS.Gl:eS.p0,dataTestId:"duration-input",dispatch:t,value:m?e.interactionDuration:void 0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},min:0,allowEmpty:!0,placeholder:(0,I.t)("proto.trigger.add_delay_placeholder"),wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,"data-tooltip-type":R.Ib.TEXT,"data-tooltip":(0,I.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:y.Pt(e,"delayInput")},s?o.createElement(nK.A,null):void 0),s,d));return s?o.createElement("div",{className:p?eS.eU:void 0},b,N):o.createElement("div",{className:eS.cF},b,N)}({...e,updateSelectionProperties:a,interactionType:i,interactionContainsOpenLinkAction:_,interactionContainsUpdateMediaRuntime:g,interactionOnlyContainsBack:E,interactionContainsConditionalAction:f,timeout:l,maintained:c,interactionDuration:d,mediaHitTime:s,keyTrigger:p,interactionsOnSelectedNodes:n,recordingKey:y.Pt(e.recordingKey,en.Qe)})}let n0="prototype_interaction_edit_modal--contentContainer--bo2b4",n1="prototype_interaction_edit_modal--ui3TwoColContentContainer--x9vrG",n2="prototype_interaction_edit_modal--ui3TwoColContentContainerResizable--20T6v",n3="prototype_interaction_edit_modal--ui3WithStateMgmtVersionPanel--9HgX1",n4="prototype_interaction_edit_modal--ui3SingleColContentContainer--uF-ir",n6="prototype_interaction_edit_modal--dividerHorizontal--3wvnB",n5="prototype_interaction_edit_modal--ui3InteractionsPanelContentRight--bVfG8",n7="prototype_interaction_edit_modal--ui3InteractionsPanelContentRightResizable--cbK91";function n8(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:a,differentLengthActions:r,mergedActions:i}=(0,J.Ay)(e.category),l="NONE"!==(0,C.E7)(e.interactionType),s=void 0!==i.find(e=>"CONDITIONAL"===e.connectionType),{selectedActionIndex:c,onSelect:d}=e,p=(0,A.GS)(),m=(0,en.YT)(),_=m===en.Oz.SINGLE_COL,g=m===en.Oz.TWO_COL,{expandedRows:E,setExpandedRows:f,deleteButtonPressed:h,newActionIndexPath:v,resetNewActionIndexPath:b}=e;o.useEffect(()=>{v&&!v?.equals([])&&(p?d(v.path,!0):(f([...E,v]),d([],!1)),b())},[E,f,v,b,d,p]);let N=o.useCallback(e=>{E.find(t=>t.equals(e))?f(E.filter(t=>!t.equals(e))):f([...E,new tC.Op(e)])},[E,f]),T=o.useCallback(n=>{var a=n.dropItem;if((0,C.gl)(a)||(0,tC.qQ)(n.dragItem))return;let o=e.interactionsOnSelectedNodes;if(!o||!t)return;for(var r=0;r<t?.length;r++){let e=t[r];if(e&&e.actions){let o=e.actions,i=(0,tC.Vp)(o,c,E,a,n.position);if(i.newSelectedActionIndex&&g&&d(i.newSelectedActionIndex.path,!0),i.newActions&&(t[r].actions=i.newActions,p||d([],!1)),i.newExpandedRows){if(g){let e=[];i.newActions?.forEach((t,n)=>{"CONDITIONAL"===t.connectionType&&e.push(new tC.Op([n]))}),f(e)}else f(i.newExpandedRows)}}}let i=o.map(e=>t.find(t=>t.id===e.id)??e);x.Y5.updateSelectionProperties({prototypeInteractions:i})},[E,f,e.interactionsOnSelectedNodes,c,t,d,p,g]),w=u()({"prototype_interaction_edit_modal--panelUI3--WK3CN":p,"prototype_interaction_edit_modal--panelUI3TwoColumn--V5gi4":g});return o.createElement(ea.hh,null,o.createElement(K.Zk,{className:w},e.shouldHideTitle?null:o.createElement(K.fI,null,o.createElement(K.U8,{title:(0,I.t)("proto.interaction.interaction"),dataTooltipContentKey:ec,dataTooltipTimeoutDelay:50})),o.createElement("div",null,(l||p)&&o.createElement(o.Fragment,null,_&&o.createElement(o.Fragment,null,o.createElement(nQ,{category:e.category,recordingKey:en.dJ,headerButtons:o.createElement(o.Fragment,null)}),o.createElement("div",{className:"prototype_interaction_edit_modal--dividerHorizontalUI3--HMCeE"})),r&&o.createElement(eo.Y,{direction:"horizontal",padding:{horizontal:16,vertical:12}},o.createElement(K.UZ,null,(0,I.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!r&&o.createElement(o.Fragment,null,i?.map((r,l)=>o.createElement(nV,{key:l,updateMultipleDestinationNodes:a(l),action:r,recordingKey:y.Pt(e.recordingKey,en.eG,l),updateSelectionProperties:n(l),onDeleteAction:()=>h(l),interactionType:e.interactionType,actionIndexPath:[l],numActions:i.length,isNestedInConditional:!1,isNarrowPanel:!s,stateManagementVersion:e.stateManagementVersion,selectedInteractions:t,onDrop:T,onSelect:e.onSelect,onExpand:N,selectedActionIndex:c,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:E,onNewActionAdded:e.onNewActionAdded,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder})))))))}var n9=n(421757);function ae({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:a,selectedInteractions:i}){let l=(0,r.wA)(),s=(0,A.GS)(),c=(0,en.YT)()===en.Oz.SINGLE_COL,d=()=>{for(let t of(Q.az.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:i.length,preserve_scroll_position_value:!!e.preserveScroll}),i))(0,en.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&nc.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,C.hS)(e.preserveScroll)&&(0,C.hS)(a)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),l(U.F.enqueue({type:"state-management-updated",message:(0,I.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,I.t)("proto.state_management.visual_bell_update_all"),action:()=>{x.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),l(U.F.enqueue({type:"state-management-updated-all",message:(0,I.t)("proto.state_management.visual_bell_update_all_message")}))}}}))},u=()=>{Q.az.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:i.length}),n({stateManagementVersion:0})},p=1===a?o.createElement(nb.jG,{className:"prototype_state_management_version_panel--revertButton--Svmg9",recordingKey:y.Pt(t,"revert-state-management-version"),onClick:u,"data-testid":"revert-state-management-button"},(0,I.tx)("proto.state_management.revert_controls")):o.createElement(nb.nR,{recordingKey:y.Pt(t,"update-state-management-version"),onClick:d},(0,I.tx)("proto.state_management.update_controls")),m=c?n9.IK:n9.$n,_=1===a?o.createElement(m,{variant:"secondary",onClick:u,recordingKey:y.Pt(t,"revert-state-management-version"),htmlAttributes:{"data-testid":"revert-state-management-button"}},(0,I.tx)("proto.state_management.revert_controls")):o.createElement(m,{variant:"primary",onClick:d,recordingKey:y.Pt(t,"update-state-management-version")},(0,I.tx)("proto.state_management.update_controls")),g=1===a?(0,I.tx)("proto.state_management.new_controls"):(0,I.tx)("proto.state_management.old_controls"),E=o.createElement("a",{target:"_blank",rel:"noopener",href:"https://help.figma.com/hc/articles/14397859494295",className:s?void 0:"prototype_state_management_version_panel--link--i5iDD blue_link--blueLink--9rlnd"},s?(0,I.tx)("proto.state_management.controls_help_link_new"):(0,I.tx)("proto.state_management.controls_help_link")),f=o.createElement("div",{className:"prototype_state_management_version_panel--versionControls--siAOf"},o.createElement(K.JU,{className:"prototype_state_management_version_panel--label--vvYMX"},g,E),o.createElement("div",{className:"prototype_state_management_version_panel--buttonContainer--rJZ-y"},p)),h=o.createElement("div",{className:"prototype_state_management_version_panel--containerUI3--V5tpG"},o.createElement(ti.J,null,g),E,_),v=o.createElement("div",{className:"prototype_state_management_version_panel--containerUI3TwoCol--AAp8u"},o.createElement("span",{className:"prototype_state_management_version_panel--labelWrapperUI3--37g5A"},o.createElement(ti.J,null,g)),o.createElement("span",{className:"prototype_state_management_version_panel--helpLinkWrapperUI3--BttuC"},E),_);return o.createElement(nl.p,{name:"prototype_state_management_version_panel"},o.createElement(K.Zk,{className:s?"prototype_state_management_version_panel--panelUI3--8-Db5":void 0},s?c?h:v:f))}let at="created_noodle";function an(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:a}=e,r=(0,en.YT)()===en.Oz.TWO_COL,{detailProps:i,detailPropsMultipleActions:l,interactionsOnSelectedNodesAndComponents:s,updateSelectionProperties:c,selectedInteractions:d}=(0,J.Ay)(e.category);(0,et.h)(()=>{if(void 0!==ee.sn.get(at)){let e=ee.sn.stop(at);(0,Q.sx)(at,{elapsedMs:e,numConnectors:d.length},{forwardToDatadog:!0})}});let{showPanel:u,transition:p}=(0,en.n6)(i,l,d),{interactionType:m="NONE",interactionMaintained:_=!1,interactionDuration:g=.3,keyTrigger:E=nj,transitionTimeout:f=.8,mediaHitTime:h=0}=l.interactionEvent,v=(0,en.iC)(d),b=o.createElement(n8,{interactionType:m,timeout:f,mediaHitTime:h,maintained:_,interactionDuration:g,keyTrigger:E,recordingKey:y.Pt(e,en.Qe),shouldHideTitle:t,interactionsOnSelectedNodes:s,category:n,stateManagementVersion:v,autoOpenVariablePicker:e.autoOpenVariablePicker,newActionIndexPath:a,resetNewActionIndexPath:e.resetNewActionIndexPath,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,selectedActionIndex:e.selectedActionIndex,expandedRows:e.expandedRows,setExpandedRows:e.setExpandedRows,deleteButtonPressed:e.deleteButtonPressed,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder});return o.createElement("div",null,b,!r&&u&&o.createElement(ae,{transition:p,recordingKey:y.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:c,stateManagementVersion:v,selectedInteractions:d}))}var aa=n(360803),ao=n(102165);function ar(e,t,n){let[a,o,r]=e.path,i=t[a].conditionalActions;if((0,C.hS)(i)){let e=i?.[o].actions?.length??0;if(r>=e){if(0===e){n([a],!0);return}n([a,o,r-1],!0);return}}}function ai(e,t,n){let a=e.path[0]>=t.length,o=0===e.path.length;if(a){n([t.length-1],!0);return}if(o){n([0],!0);return}}var al=n(146935),as=n(277687);let ac=()=>{S.glU.setSelectedInteractions([]),x.Y5.deselectProperty()},ad=(0,m.jz)("197px"),au=(0,m.c8)("50%");function ap(e){var t;return e&&a?.height<369?a=t={...a,height:369}:a??={width:440,height:e?369:320,leftWidthPct:45}}let am=o.memo(function(){let e=(0,r.d4)(af),t=(0,J.HS)(),{selectedInteractions:n}=(0,J.Ay)(t),a=n.length>0,[i,l]=o.useState(!1),s=y.v_(en.dJ,"keydown",t=>"Shift"!==t.key?y.aH:(l(!0),e&&a)?void 0:y.aH),c=y.v_(en.dJ,"keyup",t=>"Shift"!==t.key?y.aH:(l(!1),e&&a)?void 0:y.aH);if(o.useEffect(()=>(document.addEventListener("keydown",s),document.addEventListener("keyup",c),()=>{document.removeEventListener("keydown",s),document.removeEventListener("keyup",c)}),[s,c]),!e||!a)return null;let d=n.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType));return o.createElement(a_,{category:t,containsConditional:d,pressingShiftKey:i,initialX:e.initialX,initialY:e.initialY,shouldPin:e.shouldPin,setPressingShiftKey:l})}),a_=o.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:c,initialY:d,shouldPin:f,setPressingShiftKey:T}){let C=(0,r.wA)(),[K,F]=o.useState(!1),[,U]=(0,g.fp)(ao.x),B=(0,o.useRef)(null),[W,H]=o.useState(!1),z=f||K,G=(0,A.GS)(),Y=(0,en.YT)(),q=Y===en.Oz.SINGLE_COL,X=Y===en.Oz.TWO_COL,[$,Q]=o.useState(new tC.Op(G?[0]:[])),{selectedInteractions:ee,differentLengthActions:et,interactionsOnSelectedNodesAndComponents:ea,mergedActions:eo,detailProps:er,detailPropsMultipleActions:ei,updateSelectionProperties:el}=(0,J.Ay)(e);var es=$.path.length>0?$:new tC.Op([0]);let ec=es.isConditional(),ed=(e,t)=>es=new tC.Op(e);G&&es.path[0]>=eo.length&&!ec?ai($,eo,ed):G&&ec&&ar($,eo,ed);let eu=o.useCallback((e,t)=>{t?Q(new tC.Op(e)):Q(new tC.Op([]))},[]);o.useEffect(()=>{if((0,p.vA)(eo.length>0,"the interactions panel should always have actions if rendered"),!G)return;let e=$.isConditional();if(e){if(e){ar($,eo,eu);return}}else{ai($,eo,eu);return}},[eo,$,G,eu]);let{shouldShowAdvancedPrototypingPaywall:ep,showAdvancedPrototypinglMultipleActionsModal:em}=(0,en.zt)(),{showPanel:e_,transition:eg}=(0,en.n6)(er,ei,ee),eE=(0,en.iC)(ee);var ef=[];X?eo.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&ef.push(new tC.Op([t]))}):eo.length<4&&eo.forEach((e,t)=>{ef.push(new tC.Op([t]))});let[ey,eh]=o.useState(ef),ev=o.useRef(null),eb=X&&(0,_.kc)().prototype_modal_resize,eN=n&&!z&&!W,eI=(0,m.jz)(al.prototypeInteractionModalWidth),eT=(0,m.jz)(al.prototypeInteractionModalExpandedWidth),ex=ap(e_).width,ew=t?eT:eI;X&&(ew=ex);let[eS,eP]=o.useState(f),eC=(0,O._X)({subscribeToUpdates_expensive:!f}),eO=o.useCallback(()=>{K||(C((0,L._P)({name:"prototype_interaction_details_modal_dragged"})),F(!0))},[C,K,F]),ek=o.useMemo(()=>{let e=new h.Mi(c,d);if(f)return X?new h.Mi(e.x-(ex-eI),e.y):t?new h.Mi(e.x-(eT-eI),e.y):e;{let t=(0,O.$g)(eC,e);return new h.Mi(t.x-ew/2,t.y+30)}},[ew,c,d,t,f,eC,X,eT,eI,ex]);o.useEffect(()=>{if(!n)return;let e=e=>{!e.shiftKey&&n&&T(!1)};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[n,T]),o.useEffect(()=>{U(eN)},[U,eN]),o.useEffect(()=>{eP(f)},[f]),o.useEffect(()=>()=>{C((0,L._P)({name:"prototype_interaction_details_modal_closed"}))},[C]);let eD=o.useRef(null),[eL,eM]=o.useState(!1);o.useEffect(()=>{eL&&(eM(!1),eD.current?.scrollToBottom())},[eL,eM,eD]);let[eR,eV]=o.useState(new tC.Op([])),eK=(0,D.q5)(),eF=o.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case M.zy.COPY:case M.zy.CUT:{let a=JSON.parse(JSON.stringify(ee)),o=(0,aa.l)(a),r=w.fG(eK?.key||null,{prototypeInteractions:o});if(w.C4(n,r,""),t===M.zy.CUT){let e=[];for(let t of ee){let{sourceNodeID:n,id:a}=t;n&&a&&e.push(E.d({nodeID:n,interactionID:a}))}P.l7.user("delete-prototype-interactions",()=>S.glU.deleteInteractions(e)),x.Y5.deselectProperty()}e.accept()}}},[eK?.key,ee]),eU=o.useRef(!1),[eB,eW]=o.useState(!1),{firstVariableSetMode:eH,firstVariableSetID:ez}=e3(),eG=(0,k.p8)("currentPage"),eY=o.useCallback((e,t,n,a)=>{C((0,L._P)({name:"Prototype delete action",params:{action:e,source:"panel",connector_id:t,page_id:n,actionInConditionalAction:a}}))},[C]),eq=o.useCallback(e=>{if(ea&&ee){var t=!1,n=!1;if(ep)em();else{for(let r=0;r<ee?.length;r++){let i=ee[r],l=[];if(i&&i.actions){var a=0,o=[];for(let r=0;r<i.actions.length;r++){let s=i.actions[r];if(r!==e)void 0!==ey.find(e=>e.equals([r]))&&o.push(new tC.Op([a])),l.push(s),a++;else{let e=i.id?i.id:N.Hr;eY(s.connectionType?s.connectionType:"NONE",(0,N.dI)(e),eG),r===i.actions.length-1&&(t=!0),2===i.actions.length&&(n=!0)}eh(o)}ee[r].actions=l}}let r=ea.map(e=>ee.find(t=>t.id===e.id)??e);x.Y5.updateSelectionProperties({prototypeInteractions:r}),n&&G&&eh([new tC.Op([0])]),t&&X&&Q(new tC.Op([e-1]))}}},[ea,ee,ep,em,ey,eG,eY,X,G]),eJ=o.useCallback(e=>{if(!ea||!ee)return;let t=e.isConditional();if(ep)em();else if(t){var n=!1,a=!1;let[t,c,d]=e.path;for(var o=[],r=0;r<ee.length;r++){let e=ee[r],u=e.actions;if(u){for(var i=[],l=0;l<u.length;l++)if(l!==t||"CONDITIONAL"!==u[l].connectionType)i.push(u[l]);else{var s=u[l].conditionalActions;if(!s)continue;let t=s.map((t,o)=>{if(o!==c)return t;{let o=t.actions;if(!o)return t;let r=o[d];if(r){let t=e.id?e.id:N.Hr;eY(r.connectionType?r.connectionType:"NONE",(0,N.dI)(t),eG,!0)}let i=o.filter((e,t)=>t!==d);return n=o&&d===o.length-1,a=0===i.length,{...t,actions:i}}});u[l].conditionalActions=t,i.push(u[l])}e.actions=i,o.push(e)}}x.Y5.updateSelectionProperties({prototypeInteractions:o}),a?Q(new tC.Op([e.path[0]])):!a&&n&&Q(new tC.Op([e.path[0],c,d-1]))}else eq(e.path[0]);document.activeElement?.blur()},[ea,ee,ep,em,eq,eG,eY]),eX=u()({[n0]:!eb,"prototype_interaction_edit_modal--ui3TwoColScrollContainer--IWuQ4":X}),e$=o.createElement(v.P,{className:eX,useBottomPinning:!X,ref:eD,allowScrollAndZoomOver:!0,"data-not-draggable":!0},(0,_.kc)().prototype_ai_auto_adv_proto&&o.createElement(j,null),o.createElement(an,{shouldHideTitle:!0,recordingKey:X?y.Pt("leftCol",en.dJ):en.dJ,category:e,autoOpenVariablePicker:eU,newActionIndexPath:eR,resetNewActionIndexPath:()=>{eV(new tC.Op([]))},onNewActionAdded:e=>{eV(e)},selectedActionIndex:$,onSelect:eu,expandedRows:ey,setExpandedRows:eh,deleteButtonPressed:eq,autoOpenExpressionBuilder:eB,setAutoOpenExpressionBuilder:eW})),ej=1===ee.length,eZ=ee[0],eQ=eZ.actions&&eZ.actions.length<2,e0=eZ.actions&&1===eZ.actions.length&&eZ.actions[0],e1=!e0||"NONE"===e0.connectionType,e2=ej&&eQ&&e1;var e4=N.Hr;let e6=o.createElement(tM,{skipPaywall:e2,addButtonPressed:e=>{if(!ee)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&ep){em();return}"SET_VARIABLE_MODE"===e.connectionType&&(e.targetVariableSetID=ez,e.targetVariableModeID=eH),"SET_VARIABLE"===e.connectionType&&eU&&(eU.current=!0),G&&"CONDITIONAL"===e.connectionType&&eW(!0);let t=!1;var n=null,a=G&&!et&&!e2&&ee[0].actions&&1===ee[0].actions.length;if(et||e2)for(var o=0;o<ee.length;o++){let t=ee[o];t.actions=[e];let n=t.id,a=t.sourceNodeID;(0,en.uU)(t.stateManagementVersion)&&n&&a&&nc.zZ.recordInteractionUpgraded(n,a),t.stateManagementVersion=1}else for(var o=0;o<ee.length;o++){let a=ee[o];if(a.actions){if((0,en.uU)(a.stateManagementVersion)&&(a.id&&a.sourceNodeID&&nc.zZ.recordInteractionUpgraded(a.id,a.sourceNodeID),a.actions?.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),X){if($.isConditional()){let n=$.path[0],o=$.path[1],r=$.path[2],i=a.actions?.[n],l=i.conditionalActions?.[o].actions?.length??0;n===a.actions.length-1&&r===l-1&&(t=!0),i.conditionalActions?.[o].actions?.splice(r+1,0,e)}else{let n=$.path[0]+1;n===a.actions.length&&(t=!0),a.actions?.splice(n,0,e)}}else a.actions?.push(e);e4=a.id?a.id:N.Hr}else a.actions=[e],e4=a.id?a.id:N.Hr;if(a.stateManagementVersion=1,X){let e=[...$.path];e[e.length-1]+=1,n=new tC.Op([...e])}else n=new tC.Op([a.actions.length-1])}let r=ea.map(e=>ee.find(t=>t.id===e.id)??e);if(x.Y5.updateSelectionProperties({prototypeInteractions:r}),a||X){var i=[];r[0].actions?.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&i.push(new tC.Op([t]))}),eh(i)}eM&&(!X||t)&&eM(!0),eV&&eV(n),C((0,L._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,N.dI)(e4),page_id:eG}}))},renderButton:!0,recordingKey:en.dJ,isNestedInConditional:X&&$.isConditional()}),e5=ee.some(e=>void 0!==e.actions&&e.actions?.length>1),e7=!$.isConditional()&&!e5,e8=o.createElement(i.K,{onClick:()=>eJ($),"aria-label":(0,I.t)("proto.prototype_panel.delete"),disabled:e7,recordingKey:y.Pt(en.dJ,"actionDeleteButton"),htmlAttributes:{"data-tooltip":(0,I.t)("proto.prototype_panel.delete"),"data-tooltip-type":R.Ib.TEXT}},o.createElement(b.U,{svg:nM.A},o.createElement(s.O,null))),e9=o.createElement("div",{className:"prototype_interaction_edit_modal--ui3FooterContainer--oYsXM"},e6," ",e8),te=o.createElement(eA.c.Provider,{value:eA.P.LEFT},o.createElement("div",{className:eb?"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeftResizable--16pLu":"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--UYWSG",ref:ev,style:eb?{width:`${ap(e_).leftWidthPct}%`}:void 0},o.createElement(nQ,{category:e,recordingKey:en.dJ,headerButtons:o.createElement(o.Fragment,null)}),o.createElement("div",{className:n6}),e$,o.createElement("div",{className:n6}),o.createElement(o.Fragment,null,e9))),tt=eo.length>0?o.createElement(eA.c.Provider,{value:eA.P.RIGHT},o.createElement(v.P,{allowScrollAndZoomOver:!0,"data-not-draggable":!0,className:eb?"prototype_interaction_edit_modal--ui3ScrollContainerRight--LJr-n":void 0},o.createElement(ag,{selectedActionIndex:es,handleExpandUI3:(e,t)=>{!t&&eo.length>1?eh(ey.filter(t=>!t.equals(e))):ey.find(t=>t.equals(e))||eh([...ey,new tC.Op(e)])},autoOpenVariablePicker:eU,autoOpenExpressionBuilder:eB,setAutoOpenExpressionBuilder:eW}))):null,tn=o.useRef(ad),[,ta]=(0,l.i)({disabled:!eb,onDragStart(){ev.current&&(tn.current=ev.current.getBoundingClientRect().width)},onDrag(e){if(ev.current&&tn.current){let t=ap(e_),n=tn.current+e.delta.x,o=n/t.width*100;n<ad?o=ad/t.width*100:o>au&&(o=au),ev.current.style.width=`${o}%`,a={...t,leftWidthPct:o}}}}),to=u()({"prototype_interaction_edit_modal--ui3TwoColInnerContainer--ZvJj2":!0,"prototype_interaction_edit_modal--ui3TwoColInnerContainerResizable--5GNsT":eb}),tr=X?o.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColPanelContainer--e8MK8"},o.createElement("div",{className:to},te,o.createElement("div",{className:"prototype_interaction_edit_modal--dividerVertical--Noi1C"},eb&&o.createElement("div",{...ta({className:"prototype_interaction_edit_modal--verticalResizeHandle--xkc8V"})})),tt),e_&&o.createElement(ae,{transition:eg,recordingKey:y.Pt(en.dJ,"stateManagementVersionPanel"),updateSelectionProperties:el,stateManagementVersion:eE,selectedInteractions:ee})):e$;return o.createElement(Z.ht.Provider,{value:o.useMemo(()=>({autoCloseOnScroll:!z}),[z])},o.createElement(V.vL,{name:"Prototype Draggable modal",className:"prototype_interaction_edit_modal--prototypeDraggableModal--njJ6A",handleClipboard:eF},o.createElement(ne.vx,{ref:B,dataTestId:"in-context-prototype-interaction-edit-modal",title:t=>o.createElement("div",{className:"prototype_interaction_edit_modal--onboardingRow--UlvE0"},o.createElement(aE,{category:e,recordingKey:en.dJ,createActionTrigger:e6,closeButton:t})),containerClassName:u()({[n0]:!eb,[n1]:X&&!(0,_.kc)().prototype_modal_resize,[n2]:eb,[n3]:!(0,_.kc)().prototype_modal_resize&&X&&e_,[n4]:q,"prototype_interaction_edit_modal--abovePropertiesPanel--hFejC":eS,"prototype_interaction_edit_modal--belowPropertiesPanel--f1Jfl":!eS,"prototype_interaction_edit_modal--modalExpandedWidth--IDl6k":t&&!G,"prototype_interaction_edit_modal--modalWidth--cCH7B":!t&&!G,"prototype_interaction_edit_modal--hideModal--RSp-R":eN}),contentContainerClassName:u()({[n0]:!eb,[n1]:X&&!(0,_.kc)().prototype_modal_resize,[n2]:eb,[n3]:!(0,_.kc)().prototype_modal_resize&&X&&e_,[n4]:q}),headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--OE8Wr",allowWheelPassthrough:!0,initialPosition:ek,headerSize:"small",onClose:ac,recordingKey:"interactionDetailsModal",arrowPosition:f?void 0:ne.F_.TOP,arrowRelativeX:f?void 0:ew/2,onDragStart:()=>{eP(!0),eO()},canRenderBelowViewport:!0,allowAutoExpanding:!0,dragHeaderOnly:!0,onFocus:()=>H(!0),allowResizeHeight:eb,allowResizeWidth:eb,fullFrame:eb,minWidth:eb?440:void 0,minHeight:eb?e_?369:320:void 0,maxWidth:eb?800:void 0,maxHeight:eb?800:void 0,initialHeight:eb?ap(e_).height-ne.uF:void 0,initialWidth:eb?ap(e_).width:void 0,onResize:eb?e=>{a={...ap(e_),height:e.height,width:e.width}}:void 0},G?tr:e$)))});function ag({selectedActionIndex:e,autoOpenVariablePicker:t,handleExpandUI3:n,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:r}){let i=(0,J.HS)(),{selectedInteractions:l,mergedActions:s,makeUpdateSelectionPropertiesForActionIndex:c,makeUpdateMultipleDestinationNodesForActionIndex:d,detailPropsMultipleActions:u}=(0,J.Ay)(i),p=e.path[0],m=d(p),g=c(p),E=(0,en.iC)(l),h=u.interactionEvent.interactionType??"NONE",v=(0,_.kc)().prototype_modal_resize;if(e.isConditional()){let n=e.path[1],i=e.path[2],c=s[p],d=((0,C.hS)(c.conditionalActions)&&c.conditionalActions?c.conditionalActions:[])[n],u=d.actions?.[i];return u?o.createElement("div",{className:v?n7:n5},o.createElement(nV,{key:i,updateMultipleDestinationNodes:m.appendActionIndex(n).appendActionIndex(i),action:u,recordingKey:y.Pt(en.dJ,en.Qe,en.eG,p),updateSelectionProperties:g.appendActionIndex(n).appendActionIndex(i),onDeleteAction:f.lQ,interactionType:h,actionIndexPath:e.path,numActions:s.length,isNestedInConditional:!0,stateManagementVersion:E,selectedInteractions:l,onDrop:f.lQ,onSelect:f.lQ,onExpand:f.lQ,selectedActionIndex:e,expandedRows:[e],autoOpenVariablePicker:t,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:r,isNarrowPanel:!0})):null}return o.createElement("div",{className:v?n7:n5},o.createElement(nV,{key:p,updateMultipleDestinationNodes:m,action:s[p],recordingKey:y.Pt(en.dJ,en.Qe,en.eG,p),updateSelectionProperties:g,onDeleteAction:f.lQ,interactionType:h,actionIndexPath:[p],numActions:s.length,isNestedInConditional:!1,stateManagementVersion:E,selectedInteractions:l,onDrop:f.lQ,onSelect:f.lQ,onExpand:n,selectedActionIndex:e,autoOpenVariablePicker:t,expandedRows:[e],autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:r,isNarrowPanel:!0}))}function aE({category:e,recordingKey:t,closeButton:n,createActionTrigger:a}){let l=(0,r.wA)(),{selectedInteractions:s}=(0,J.Ay)(e),d=(0,en.YT)(),u=d===en.Oz.TWO_COL,p=d===en.Oz.SINGLE_COL,m=(()=>{if(1!==s.length)return 0;let e=s[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return S.X3B.getMatchingInteractions(E.d(t)).length})(),g=(0,_.kc)().prototype_hide_matching_noodles&&1===s.length&&m>1&&o.createElement(i.K,{actionOnPointerDown:!0,onClick:()=>{if(1!==s.length)return;let e=s[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=S.X3B.getMatchingInteractions(E.d(t));S.glU.selectInteractionsAndSourceNodes(n);let a=(0,I.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});x.Y5.showVisualBellWithUndo("selected-matching-noodles",a,!1),l((0,L._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},"aria-label":(0,I.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:m}),htmlAttributes:{tabIndex:-1,onMouseEnter:()=>{if(1!==s.length)return;let e=s[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=S.X3B.getMatchingInteractions(E.d(t));S.glU.hoverInteractions(n)},onMouseLeave:()=>S.glU.hoverInteractions([]),"data-tooltip":(0,I.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:m}),"data-tooltip-type":R.Ib.TEXT}},o.createElement(b.U,{svg:as.A},o.createElement(c.A,null))),f=o.createElement(nQ,{category:e,recordingKey:t,headerButtons:o.createElement(o.Fragment,null,g,a,n)}),y=o.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeader--Ka7aM"},(0,I.tx)("proto.interaction_details.header"),o.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeaderButtons--UqykU"},g,n)),h=o.createElement(o.Fragment,null,(0,I.tx)("proto.interaction_details.header"),o.createElement("div",{className:"prototype_interaction_edit_modal--ui3CollapsedModalHeaderButtons--7yPuD"},g,a,n));return u?y:p?h:f}let af=e=>e.pickerShown?.id===T.o$?e.pickerShown:null},304657:(e,t,n)=>{let a,o,r,i;n.d(t,{k:()=>D});var l=n(411855),s=n(188507),c=n(243742),d=n(752553),u=n(572206),p=n(47506),m=n(941381),_=n(225266),g=n(738269),E=n(902139),f=n(672517),y=n(809831),h=n(728325),v=n(813648),b=n(318812),N=n(239671),I=n(231472),T=n(992303),A=n(384775),x=n(818198),w=n(760445),S=n(76158),P=n(746806),C=n(721950),O=n(301280),k=n(297757);function D(){let e=(0,s.d4)(e=>e.universalInsertModal),t=(0,s.d4)(e=>e.mirror.appModel.showUi),{fdPreviewResource:n,initialFdView:D,initialFdResourceTab:M}=e,R=n?.type,{activeTab:V,setCurrentViewOrTab:K,currentView:F}=function(){let{initialFdResourceTab:e,initialFdView:t}=(0,s.d4)(e=>e.universalInsertModal),[n,a]=l.useState(e||o||S.s.COMPONENT),[c,d]=l.useState(e===S.s.PLUGIN&&t||r||"recents_and_saved"),[u,p]=l.useState(e===S.s.WIDGET&&t||i||"recents_and_saved"),m=l.useCallback(e=>{e===S.s.PLUGIN?r=c:e===S.s.WIDGET&&(i=u)},[c,u]),_=n===S.s.PLUGIN?c:u,g=l.useCallback(({newView:e,newTab:t})=>{let r=t===S.s.PLUGIN?c:t===S.s.WIDGET?u:void 0;e&&r!==e&&(m(n),(t||n)===S.s.PLUGIN?d(e):(t||n)===S.s.WIDGET&&p(e)),t&&n!==t&&(m(n),o=n,a(t))},[n,c,u,m]);return l.useEffect(()=>{g({newView:t,newTab:e})},[e,t]),l.useEffect(()=>{o=n,m(n)},[n,m]),l.useMemo(()=>({activeTab:n,currentView:_,setCurrentViewOrTab:g}),[n,_,g])}(),U="ui3"===(0,c.DP)().version,B=(0,s.wA)(),W=l.useRef(null),[H]=l.useState(D?"":a||"");l.useEffect(()=>{(0,p.YQ)({id:"figma-inserts-opened"}),(0,p.YQ)({id:T.ko})},[]);let z=(0,A.Au)();l.useEffect(()=>{z&&B(E.eo())}),l.useEffect(()=>{a=H},[H]),l.useEffect(()=>B(_.aq()),[B]),(0,d.IT)((0,m.se)()),(0,d.IT)((0,m.fd)()),l.useEffect(()=>{K({newTab:R||M})},[M,R]);let G=(0,y.E3)(),[Y,q]=l.useState(),J=U?w.tS:w.Zv;(0,v.J$)(e.pinned===I.t.NOT_PINNED,W,J);let X=(0,w.CK)(),$=(0,w.CG)(),{bounds:j,showLeftPinBound:Z,setShowLeftPinBound:Q,shouldSnapToPosition:ee,setPinned:et}=(0,x.C)(L,q,e.pinned,X,$,e.showing),en=(0,v.LR)(),ea=(0,b.Um)(),eo=l.useCallback(e=>{e.stopPropagation(),ea&&B(g.oB())},[B,ea]),er=l.useMemo(()=>({activeTab:V,viewResource:e=>{B(E.IN({fdPreviewResource:e}))},closeResource:()=>{B(E.IN({fdPreviewResource:void 0}))},closeModal:en,pinModal:et,setCurrentViewOrTab:K,currentView:F}),[V,en,et,B,K,F]),ei=l.useCallback(e=>{h.VU.get("set-tool-default","toolbar")(),B(E.jy({pinned:I.t.PINNED})),eo(e)},[B,eo]),el=l.useCallback(()=>{Z&&et()},[Z,et]);if(!e.showing)return null;let es={height:"auto",overflow:"hidden"};return(e.pinned!==I.t.NOT_PINNED||U||(es.borderTopLeftRadius="0px"),G===N.nT.DevHandoff)?null:l.createElement(f.fu,{name:"universal-insert"},e.pinned===I.t.PINNED&&Z&&l.createElement("div",{className:O.kV,style:{left:X.x,top:X.y,width:w.AN}}),l.createElement(w.B0.Provider,{value:er},l.createElement(P.vx,{initialPosition:Y||new u.Mi(e.initialX,e.initialY),initialWidth:w.AN,bounds:j,onEnterBound:()=>{U||Q(!0)},onLeaveBound:()=>{Q(!1)},canResetPosition:ee,onClose:en,onDragStart:ei,onDragEnd:el,minTopMargin:t?void 0:0,onClick:eo,ref:W,containerClassName:e.pinned===I.t.PINNED_AND_DOCKED_LEFT?k.gC:k.jT,frameStyle:es},l.createElement(C.z,null))))}function L(){return{x:-w.AN,y:0,width:2*w.AN+w.wR,height:window.innerHeight}}},929018:(e,t,n)=>{n.d(t,{H:()=>g});var a=n(411855),o=n(188507),r=n(776250),i=n(768137),l=n(946689),s=n(322611),c=n(762638),d=n(939863),u=n(662275),p=n(558867),m=n(211789),_=n(15344);function g({isInFileBrowser:e=!1,org:t,switchAccountsSection:n}){let g=(0,o.wA)();return a.createElement("div",{className:c.cx.zIndex0.$},a.createElement(s.u,{headerImage:a.createElement("div",{className:c.cx.pb16.$},a.createElement(p.Ro,{entity:t,size:64})),headerText:(0,d.t)("mfa_required_modal.title",{orgName:t.name}),secondaryText:(0,d.t)("mfa_required_modal.subtitle",{orgName:t.name}),unblockFileBrowserSidebar:e},a.createElement(i.vd,{className:_.lI,type:"submit",onClick:()=>{(0,r.sx)("Two-factor setup started"),g((0,u.to)({type:m.J}))}},(0,d.tx)("mfa_required_modal.cta")),a.createElement(l.CY,{className:_.CU,target:"_blank",href:"https://help.figma.com/hc/en-us/articles/360039817634-Enable-two-factor-authentication-2FA",trusted:!0},(0,d.tx)("general.learn_more")),n))}}}]);

//# debugId=56dc0da1-578d-533b-b8dc-8a2aabbc3498

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/484f12ed14ca5961623a9c9cee210a1731e560a7/fullscreen-db09720c82487188.min.js.map