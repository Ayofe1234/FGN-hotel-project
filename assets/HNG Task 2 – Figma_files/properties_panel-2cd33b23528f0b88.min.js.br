
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="b14ea9c7-febc-5b74-9310-d7e379def8e0")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[7355],{793247:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PropertiesPanel:()=>uX});var l=n(411855),r=n(976404),a=n(629019),i=n.n(a),o=n(91408),s=n(966712),c=n(498750),p=n(755887),d=n(951158),u=n(153234),m=n(776621),h=n(304783),_=n(30637),E=n(763658),y=n(572206),g=n(515009),v=n(448169),b=n(827586),f=n(271779),S=n(979441),P=n(987918),T=n(939863);function w(){return null}var I=n(293017),N=n(286954),k=n(906899),C=n(169231),A=n(103907),O=n(259927),x=n(672517),R=n(798099),L=n(297336),M=n(818),D=n(378905),F=n(697551),K=n(516398),V=n(356390),U=n(852800),B=n(617453),H=n(369870),G=n(848661),Y=n(618056),$=n(809511),W=n(416095),z=n(147206),X=n(316081),Q=n(239671),Z=n(279145),J=n(143678),j=n(109388),q=n(188507),ee=n(459593),et=n(971612),en=n(927457),el=n(243742),er=n(268537),ea=n(46481),ei=n(738269),eo=n(662275),es=n(284321),ec=n(498606),ep=n(420186),ed=n(405206),eu=n(720488),em=n(965908),eh=n(995439),e_=n(900086),eE=n(7959),ey=n(690710),eg=n(939791),ev=n(767129),eb=n(31524),ef=n(404095),eS=n(522739),eP=n(574176),eT=n(865618),ew=n(662531),eI=n(907368),eN=n(215440),ek=n(227795),eC=n(893606),eA=(e=>(e[e.VERTICAL=0]="VERTICAL",e[e.MIDDLE_CHILD=1]="MIDDLE_CHILD",e[e.LAST_CHILD=2]="LAST_CHILD",e))(eA||{});function eO(e){let{lineConfiguration:t,hideLine:n,wideContainer:r}=e;return l.createElement("div",{className:r?"bubbled_props_line_styles--containerWide--csTgg bubbled_props_line_styles--container--XumJm":"bubbled_props_line_styles--container--XumJm"},!n&&l.createElement("div",{className:"bubbled_props_line_styles--lineContainer--pEgTS"},(()=>{switch(t){case 0:return l.createElement("div",{className:"bubbled_props_line_styles--vertical--pialf bubbled_props_line_styles--_line--Vhv8-"});case 1:return l.createElement(l.Fragment,null,l.createElement("div",{className:"bubbled_props_line_styles--middleChildVertical--PxRp- bubbled_props_line_styles--_childVertical--Y-Ypj bubbled_props_line_styles--_line--Vhv8-"}),l.createElement("div",{className:"bubbled_props_line_styles--middleChildHorizontal--ucsHZ bubbled_props_line_styles--_childHorizontal--3bRi7 bubbled_props_line_styles--_line--Vhv8-"}));case 2:return l.createElement(l.Fragment,null,l.createElement("div",{className:"bubbled_props_line_styles--lastChildVertical--83Los bubbled_props_line_styles--_childVertical--Y-Ypj bubbled_props_line_styles--_line--Vhv8-"}),l.createElement("div",{className:"bubbled_props_line_styles--lastChildHorizontal--kGsHC bubbled_props_line_styles--_childHorizontal--3bRi7 bubbled_props_line_styles--_line--Vhv8-"}))}})()),e.children)}let ex="bubbled_instances_list--minusIcon--dY8i-",eR="bubbled_instances_list--instanceIcon--aRlGl",eL="bubbled_instances_list--instanceName--09LuV",eM="bubbled_instances_list--instanceNameWide---L338 bubbled_instances_list--instanceName--09LuV",eD="bubbled_instances_list--ui3InstanceNameAndIcon--W4S9T component_prop_def_row--ui3ComponentPanelNameAndIcon--01Z6g",eF="bubbled_instances_list--ui3LineContainer--OdBbV",eK="bubbled_instances_list--ui3Line--SIYpX";var eV=n(968109),eU=n(349307);function eB(e){let{showUnbubbledPrimaryInstances:t,showNumHidden:n,wideContainer:r,scrollableContainer:a}=e,o=(0,q.d4)(eN.K4),s=(0,eC.R)(),[c,p]=(0,l.useState)(!1),d=t?o:o?.filter(e=>e.isBubbled),m=e=>{ew.l7.user("toggle-props-bubbled",()=>U.glU.togglePropsAreBubbled(e)),U.Ez5.canvasViewState().temporarilyHoveredNodes.set([])},h=e=>{U.Ez5.canvasViewState().temporarilyHoveredNodes.set(e)},_=()=>{U.Ez5.canvasViewState().temporarilyHoveredNodes.set([])},E=0,y=s&&!t&&!c&&null!=d&&d.length>5,g=y?d.slice(0,4):d;return y&&(E=d.length-4),l.createElement("div",{className:i()({"bubbled_instances_list--scrollableContainer--ob0LQ":a})},g?.map((a,i)=>{let o=a.connectedGUIDs.slice(0).sort();return l.createElement(eS.D8,{className:"bubbled_instances_list--instanceSection--tLYN0",key:i,onMouseEnter:()=>h(a.connectedGUIDs),onMouseLeave:_,recordingKey:u.Pt(e,o[0])},s?t?l.createElement(e$,{data:a,showNumHidden:n,onUnbubbleInstance:m,recordingKey:u.Pt(e,"checkbox",o[0]),wideContainer:r}):l.createElement(eG,{data:a,onUnbubbleInstance:m,recordingKey:u.Pt(e,"unbubble",o[0]),wideContainer:r}):l.createElement(l.Fragment,null,l.createElement(eO,{lineConfiguration:eA.VERTICAL,hideLine:0===a.bubbledNestedInstances.length,wideContainer:r},t?l.createElement(eH,{data:a,onUnbubbleInstance:m,showNumHidden:n,wideContainer:r,recordingKey:u.Pt(e,"checkbox",o[0])}):l.createElement(l.Fragment,null,l.createElement(eP.B,{className:eR,svg:eV.A}),l.createElement("p",{className:r?eM:eL},a.name),l.createElement(ek.K0,{className:ex,svg:eU.A,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":T.t("design_systems.component_properties.unbubble_instance"),onClick:()=>{m(a.connectedGUIDs[0])},recordingKey:u.Pt(e,"unbubble",o[0])}))),a.bubbledNestedInstances.map((e,t)=>l.createElement("div",{key:t},l.createElement(eO,{lineConfiguration:t===a.bubbledNestedInstances.length-1?eA.LAST_CHILD:eA.MIDDLE_CHILD,wideContainer:r},l.createElement("div",{className:r?eM:eL},e.name))))))}),s&&!c&&E>0&&l.createElement(eI.t8,{label:(0,T.t)("design_systems.component_properties.show_more_nested_instances_rows",{count:E}),onClick:()=>p(!0)}))}function eH({data:e,onUnbubbleInstance:t,showNumHidden:n,wideContainer:r,recordingKey:a}){return l.createElement("div",{className:r?"bubbled_instances_list--checkboxContainerWide--Kdd3u bubbled_instances_list--checkboxContainer--qm3X7":"bubbled_instances_list--checkboxContainer--qm3X7"},l.createElement(eT.S,{label:e.name,checked:e.isBubbled,onChange:()=>{t(e.connectedGUIDs[0])},truncateLabel:{truncate:"line-clamp",lineClamp:2},recordingKey:a}),n&&!!e.numHidden&&l.createElement("div",{className:"bubbled_instances_list--numHidden--fW-Sr"},(0,T.tx)("design_systems.component_properties.num_hidden",{num:e.numHidden})))}function eG({data:e,onUnbubbleInstance:t,recordingKey:n,wideContainer:r}){let{bubbledNestedInstances:a}=e,i=l.createElement(eg.DE,{label:null,input:l.createElement("div",{className:eD},l.createElement("div",{className:eR},l.createElement(eb.y,null)),l.createElement("p",{className:eL},e.name)),icon:l.createElement("div",{className:ex},l.createElement(ev.K,{"aria-label":(0,T.t)("design_systems.component_properties.unbubble_instance"),onClick:()=>{t(e.connectedGUIDs[0])},recordingKey:n,htmlAttributes:{"data-tooltip":(0,T.t)("design_systems.component_properties.unbubble_instance"),"data-tooltip-type":ec.Ib.TEXT,onMouseDown:R.dG}},l.createElement(ef.f,null)))});return 0===a.length?i:l.createElement(eY,{data:e,row:i,wideContainer:r})}function eY({data:e,row:t,wideContainer:n}){return l.createElement(eI.R$,{row:t,isCollapsedByDefault:!0},e.bubbledNestedInstances.map((e,t)=>l.createElement("div",{key:t},l.createElement(eg.DE,{label:null,input:l.createElement("div",{className:eD},l.createElement("div",{className:eF},l.createElement("div",{className:eK})),l.createElement("div",{className:n?eM:eL},e.name)),icon:null}))))}function e$({data:e,onUnbubbleInstance:t,recordingKey:n,showNumHidden:r,wideContainer:a}){return l.createElement(l.Fragment,null,l.createElement(eg.Ad,{label:null,input:l.createElement(eH,{data:e,onUnbubbleInstance:t,showNumHidden:r,wideContainer:a,recordingKey:n})}),e.bubbledNestedInstances.map((e,t)=>l.createElement("div",{key:t},l.createElement(eg.Ad,{label:null,input:l.createElement("div",{className:"bubbled_instances_list--ui3CheckboxViewNestedInstance--YgTEc"},l.createElement("div",{className:eF},l.createElement("div",{className:eK})),l.createElement("div",{className:a?eM:eL},e.name))}))))}var eW=n(273226),ez=n(746806);function eX(){let e="bubbledPropsPicker",t=(0,q.d4)(e=>e.pickerShown),n=(0,q.wA)(),r=new y.Mi(t?.initialX,t?.initialY);return t?.id!==eW.Dd?null:l.createElement(ez.vx,{title:(0,T.t)("design_systems.component_properties.expose_nested_instances"),initialPosition:r,initialWidth:eW.wh,headerSize:"small",onClose:()=>{n(I.XE())},recordingKey:e},l.createElement("div",{className:"bubbled_props_picker--container--I6VX-"},l.createElement(eB,{showUnbubbledPrimaryInstances:!0,showNumHidden:!0,wideContainer:!0,scrollableContainer:!0,recordingKey:e})))}var eQ=n(208206),eZ=n(25888),eJ=n(107244),ej=n(322515);let eq="props_panel--addButtonContainer--a58gi",e0="props_panel--addButton--jAtAX draggable_list--addButton--D0q--",e1="props_panel--dropdownRowWithIcon--03FtD",e5="props_panel--dropdownRowWithoutIcon--F8Ra-",e4="props_panel--bubbledInstancesHeading--C26v2";var e3=n(633779),e2=n(100562),e6=n(501191);function e7({recordingKey:e}){let t=(0,q.wA)(),{version:n}=(0,el.DP)(),r="ui3"===n,a=(0,q.d4)(ey.i$),i=(0,q.d4)(eJ.od),o=!(0,q.d4)(eZ.Jp),c=(0,q.d4)(e=>!!e.dropdownShown&&e.dropdownShown.type===eW.C4),p=(0,q.d4)(e=>!!e.modalShown&&e.modalShown.type===eQ.n.type),{componentDescription:d}=(0,em.z6)(),m=(0,q.d4)(e=>e.pickerShown),h=c||p||m?.id===eW.Dd,_=!!(0,q.d4)(eN.Z3).length,E=(0,q.d4)(eN.K4),y=!!E?.length,g=(0,q.d4)(es.Dr),v=(0,q.d4)(es.Ct),b=l.useRef(null),f=l.useRef(null),S=l.useCallback(e=>{m&&t(I.XE()),c?t(ei.oB()):t(ei.j7({type:eW.C4}))},[t,m,c]),P=l.useCallback(e=>{(0,eW.Pp)(i,!1,e,eW.Fv.ICON),t(eo.to({type:eQ.n,data:{propType:e}}))},[t,i]),w=l.useCallback(()=>{i&&(i.isLooseComponent?V.Y5.triggerActionInUserEditScope("create-state-group"):P(U.J0O.VARIANT))},[P,i]),N=l.useCallback(()=>{let e=j.findDOMNode(f.current),n=e?(0,ep.cn)(e,eW.wh):{};t(I.u1({id:eW.Dd,initialX:n?.x,initialY:n?.y}))},[t]),k=[U.J0O.BOOL,U.J0O.INSTANCE_SWAP,U.J0O.TEXT,...(0,s.kc)().ds_variable_props_number_type?[U.J0O.NUMBER]:[]];return i?l.createElement(eE.Zk,{ref:f},l.createElement(em.QQ,null),r&&!o?l.createElement(eh.n,{description:d}):null,l.createElement(r?e9:e8,{isPanelEmpty:o,isAddPropButtonSelected:h,hasBubbledInstances:_,stateGroupSelectionMode:a,selectAddPropOptionRef:b,toggleAddPropDropdown:S,recordingKey:e}),c&&b.current&&l.createElement(eu.Cf,{targetRect:b.current.getBoundingClientRect(),propagateCloseClick:!0},l.createElement(er.c$,{disabled:!0,className:e5},(0,T.tx)("design_systems.component_properties.create_new_property")),l.createElement(er.c$,{className:e1,onClick:w,recordingKey:u.Pt("openCreatePropModal",(0,eW.xb)(U.J0O.VARIANT))},l.createElement(ed.Nu,null,l.createElement(ea.U,{svg:e2.A},l.createElement(ee.m,null))),(0,T.tx)("design_systems.component_properties.across_variants")),k.map(e=>l.createElement(er.c$,{key:e,className:e1,onClick:()=>P(e),recordingKey:u.Pt("openCreatePropModal",(0,eW.xb)(e))},l.createElement(ed.Nu,null,l.createElement(ea.U,{svg:(0,eW.qe)(e)},(0,eW.zn)(e,!0))),(0,eW.xb)(e))),y&&l.createElement(l.Fragment,null,l.createElement(er.wv,null),l.createElement(er.c$,{disabled:!0,className:e5},(0,T.tx)("design_systems.component_properties.expose_nested_instances")),l.createElement(er.c$,{className:e1,onClick:N,recordingKey:"openBubbledPropPicker"},l.createElement(ed.Nu,null,l.createElement(ea.U,{svg:e3.A},l.createElement(et.M,null))),(0,T.t)("design_systems.component_properties.choose_instances")))),m?.id===eW.Dd&&l.createElement(eX,null),l.createElement(eI.e6,{containerWidth:r?eW.O2.RESIZABLE_SIDEBAR:eW.O2.REGULAR,propDimension:eW.OE.DEFINITION,guids:[i.guid],recordingKey:e,enableHidingOverflowRowsInUI3:!1,entrypointForInstanceSwapPicker:null}),_&&l.createElement(l.Fragment,null,l.createElement("p",{className:e4},(0,T.t)("design_systems.component_properties.bubbled_instances")),l.createElement(eB,{recordingKey:e})),r&&g&&v?l.createElement(eg.Ad,{label:null,input:l.createElement(e_.U,null)}):null):null}function e8({isPanelEmpty:e,isAddPropButtonSelected:t,hasBubbledInstances:n,stateGroupSelectionMode:r,selectAddPropOptionRef:a,toggleAddPropDropdown:i}){return l.createElement(eE.fI,{className:!e||t||n?void 0:"props_panel--panelHeaderRowFaded--r4klF draggable_list--panelHeaderRowFaded--kETRR"},l.createElement(eE.xw,{className:"props_panel--panelTitleText--i7WqG draggable_list--panelTitleText--SwKez"},(0,T.tx)("design_systems.component_properties.properties")),r!==U.iCO.STATE&&l.createElement("div",{ref:a,className:eq},l.createElement(eE.YW,{className:e0,onClick:i,selected:t,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.component_panel.create_component_property"),svg:e6.A,recordingKey:"openCreatePropModalDropdown"})))}function e9({isPanelEmpty:e,isAddPropButtonSelected:t,hasBubbledInstances:n,stateGroupSelectionMode:r,selectAddPropOptionRef:a,toggleAddPropDropdown:o}){let s=l.useRef(null),c=e&&!n,p=c?(0,T.tx)("design_systems.component_properties.add_property"):(0,T.tx)("design_systems.component_properties.properties");return l.createElement(eg.DE,{ref:s,input:p,label:null,appendedClassName:i()("props_panel--ui3PanelHeaderRow--Ab8Jz",{[ej.yf]:!t}),icon:r!==U.iCO.STATE?l.createElement("div",{ref:a,className:i()(eq,{"props_panel--ui3ShowIconOnHover--ovobs":!c})},l.createElement(eE.YW,{className:e0,onClick:o,selected:t,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.component_panel.create_component_property"),recordingKey:"openCreatePropModalDropdown"},l.createElement(en.e,null))):void 0})}var te=n(10199),tt=n(946689),tn=n(927990),tl=n(502242),tr=n(144119),ta=n(452883),ti=n(125944),to=n(184027),ts=n(766022),tc=n(641160);function tp({initialPosition:e,styleNameInputPrefix:t,styleType:n,inheritStyleKeyField:r,onCreate:a,recordingKey:i}){let o=(0,q.wA)(),s=(0,q.d4)(e=>e.mirror.selectedStyleProperties),c=(0,q.d4)(e=>e.mirror.sceneGraphSelection),p=l.useRef(Object.keys(c).length>0),[d,m]=l.useState(!p.current&&void 0),h="ui3"===(0,el.DP)().version,_=(0,tr.sO)(),[E,y]=l.useState((0,ta.$)()),g=_&&(0,ti.Rc)(n),{styleRef:v,createStyle:b}=(0,tn.u)({inheritStyleKeyField:r,isCreatingFromSelection:p.current,trackingOptions:{styleType:n}}),f=u.of(i,"submit",()=>{let e=b();g&&U.Ez5.slideThemeLibBindings().addStyleToLocalTheme(e||"",E),o(I.XE()),o(I.Uv()),o(k.sw()),a&&a(e||"")}),S=(0,q.d4)(e=>{let t=e.mirror.selectedStyleProperties;switch(n){case"FILL":return t.fillPaints&&"length"in t.fillPaints&&t.fillPaints.length>0;case"GRID":return t.layoutGrids&&t.layoutGrids.length>0;case"EFFECT":return t.effects&&t.effects.length>0;default:return!0}});return s.styleType?l.createElement(to.zK.Provider,{value:to.zM.CREATE_STYLE},l.createElement(ez.vx,{title:(e=>{switch(e){case"FILL":return(0,T.t)("design_systems.create_style.color");case"TEXT":return(0,T.t)("design_systems.create_style.text");case"EFFECT":return(0,T.t)("design_systems.create_style.effect");case"EXPORT":return(0,T.t)("design_systems.create_style.export");case"GRID":return(0,T.t)("design_systems.create_style.grid");default:return(0,T.t)("design_systems.create_style.create_new_style_generic")}})(s.styleType),headerSize:"small",initialWidth:ts.tA,initialPosition:e,onClose:()=>{o(k.sw())},recordingKey:u.Pt("createStyleModal"),dragHeaderOnly:!0},l.createElement("div",{className:tc.FY},l.createElement(tl.O8,{type:s.styleType,recordingKey:"createStyleModal",styleNameInputPrefix:t,isInspectPanel:!1,selectedStyleProperties:s,showProperties:d,onEnterPressed:f,showSlideThemeField:g,slideThemeId:E,setSlideThemeId:y}),!v&&l.createElement("div",{className:"create_style_modal--errorMessage--8ZpFE"},(0,T.tx)("design_systems.create_style.an_error_occurred_while_creating_the_style")),l.createElement(te.AutoLayout,{horizontalAlignItems:p.current?void 0:"end",verticalAlignItems:"center",spacing:p.current?"auto":void 0,padding:h?8:16},p.current&&l.createElement(eE.JU,{className:d?"create_style_modal--fadedShowMorePropertiesLabel--g8ydZ":"create_style_modal--showMorePropertiesLabel--mJpGe",onClick:()=>m(!d)},d?(0,T.tx)("design_systems.create_style.hide_options"):(0,T.tx)("design_systems.create_style.show_more_options")),l.createElement(tt.$$,{style:{justifySelf:"right"},onClick:f,disabled:!S||!v,tabIndex:0},(0,T.tx)("design_systems.create_style.create_style")))))):null}var td=n(507956),tu=n(663668),tm=n(601607);function th(e){let t=(0,q.wA)(),n=(0,P.dI)(e.selectedStyleProperties.guid),r="",a="",[i,o]=(0,tm.Fk)((t,n)=>{if(e.externalStyle)return["",""];let l=t.get(n);return[l?.name||"",l?.styleDescription||""]},n);return e.externalStyle?(r=e.externalStyle.name||"",a=e.externalStyle.description_rt?(0,tu.A)(e.externalStyle.description_rt):e.externalStyle.description||""):(0,P.dI)(e.selectedStyleProperties.guid)&&(r=i,a=(0,tu.A)(o)),l.createElement(to.zK.Provider,{value:to.zM.EDIT_STYLE},l.createElement(tl.O8,{type:e.selectedStyleProperties.styleType,recordingKey:e.recordingKey,onEnterPressed:()=>t(k.sw()),styleName:r,styleDescription:a,...e}))}var t_=n(595755),tE=n(236192),ty=n(233890),tg=n(776250),tv=n(935283),tb=n(297666),tf=n(358145),tS=n(886653),tP=n(437304),tT=n(286640),tw=n(347082),tI=n(395281),tN=n(452246),tk=n(226055),tC=n(29680),tA=n(335682),tO=n(237929),tx=n(444576),tR=n(945020),tL=n(173454),tM=n(602029),tD=n(463420),tF=n(96796),tK=n(912666),tV=n(255942),tU=n(860168);let tB="styles--contextMenu--C-hVT",tH="styles--showOnRowHover--OUqRT",tG="styles--showOnSelectedRowHover--Lcf7e styles--showOnRowHover--OUqRT",tY="styles--caret--DZmzh",t$="styles--rowSelectedExpanded--MGvUV",tW="styles--rowSelectedSecondaryLightBlue--S-zy- draggable_list--rowSelectedSecondary--yOI1g raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip";function tz({childLeft:e,childRight:t,deleteSelectedItems:n,forceShowHoverBorder:r,hideStylePreview:a,index:o,inspectStyleSelected:s,isDragging:p,isEditable:d,isRenaming:m,isCollapsed:h=!0,isLastChildOfSelection:_=!1,isFirstChildOfSelection:E=!1,isFolder:y,level:g,name:v,nameRef:b,onChildLeftClick:f,onContextMenu:S,onCreateFolder:P,onDoubleClick:T,onHoverChange:w,onMouseDown:I,onMouseMove:N,recordingKey:k,rowRef:C,secondaryName:A,selected:O,selectedSecondary:x,stopRenamingItem:L,tooltipData:M}){let D=l.useRef(null),[F,K]=l.useState(v),[U,B]=l.useState(!1),H=(0,tk.GS)(),G=l.useCallback(e=>{if(e){let t=j.findDOMNode(e);t&&t.select()}},[]);l.useEffect(()=>{K(v)},[v]);let Y=l.useCallback(e=>{""===e.trim()?(L(o,v),K(v)):L(o,e)},[o,v,L]),$=(0,u.AF)((0,u.Pt)(k,"text-input"),"change",l.useCallback(e=>{K(e.currentTarget.value)},[K])),W=(0,u.v_)((0,u.Pt)(k,"text-input"),"keydown",e=>{e.keyCode===c.Uz.ESCAPE?(L(o,v),K(v)):e.keyCode===c.Uz.ENTER&&Y(e.currentTarget.value)},{recordMetadata:e=>({inputValue:e.currentTarget.value}),playbackMetadata:e=>({currentTarget:{value:e.inputValue}})}),z=(0,u.v_)(k,"keydown",e=>{d&&!m&&(e.keyCode===c.Uz.BACKSPACE||e.keyCode===c.Uz.DELETE)?n():d&&!m&&e.keyCode===c.Uz.G&&(0,c.Fo)(e)?(P(),e.preventDefault()):!m&&e.nativeEvent&&V.Y5.forwardKeyboardEvent(e.nativeEvent)}),X=l.useCallback(()=>{Y(F)},[Y,F]),Q=(0,u.rf)(k,"contextmenu",e=>{S(e)}),Z=(0,u.rf)(k,"mousemove",e=>{N(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),J=(0,u.rf)(k,"mousedown",e=>{I(e),a()}),q=(0,u.rf)(k,"mouseenter",l.useCallback(()=>{B(!0),w?.(!0)},[B,w])),ee=l.useCallback(()=>{B(!1),w?.(!1)},[B,w]),et=(0,u.rf)(k,"dblclick",l.useCallback(e=>{T(e)},[T])),en=Math.min((g-1)*3,18),el=tU.jNX-4-en,er=el-(H?7:5),ea=U&&!m||s?er:el,ei=O||x,eo=i()({[t$]:!h&&ei,"styles--folderSecondarySelected--SL0JY":x||O&&!E,[tW]:x&&!H}),es=i()({[tW]:ei,[t$]:!_&&ei}),ec=i()("styles--rowWithBorder--bphZ-",{[eo]:y,[es]:!y,"styles--rowWithHover--RWNMH":!ei&&(r||U&&!p)}),ep=l.createElement("div",{className:m?"styles--rowContentsRenaming--oDTtO styles--rowContents--37JBy":"styles--rowContents--37JBy",key:v,style:H?{width:"100%"}:{gridColumnEnd:`span ${ea}`}},m?l.createElement(eE.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"styles--input--LbjR0",onBlur:X,onChange:$,onKeyDown:W,ref:G,spellCheck:!1,value:F}):l.createElement(l.Fragment,null,l.createElement("div",{className:"styles--name--KWZ8d ellipsis--ellipsis--Tjyfa",ref:b,...M},v),A&&l.createElement("div",{className:"styles--textStyle--DiUv4"},A)));return l.createElement(tM.e,{className:ec,dragging:p,hideGrabber:!0,onContextMenu:Q,onKeyDown:z,onMouseDown:J,onMouseEnter:q,onMouseLeave:ee,onMouseMove:Z,onDoubleClick:et,ref:(0,tV.A)(D,C),selected:O,selectedSecondary:!1,tabIndex:0},en>0&&l.createElement("span",{style:{gridColumnEnd:`span ${en}`}}),l.createElement("div",{className:"styles--childLeftContainer--Hu61K",style:H?{gridColumnEnd:`span ${ea}`}:void 0},l.createElement("div",{onMouseDown:f&&R.dG,onClick:f},e),H&&ep),!H&&ep,t)}var tX=n(949207),tQ=n(432023),tZ=n(660164);function tJ({deleteSelectedItems:e,folder:t,folderNameToNestUnder:n,hideStylePreview:r,index:a,isCollapsed:i,isDragging:o,isEditable:s,isRenaming:c,isTemporarilyExpanded:p,isFirstChildOfSelection:d,level:m,onContextMenu:h,onCreateFolder:_,onMouseDown:E,onMouseMove:y,onRenameItem:g,recordingKey:v,selected:b,selectedSecondary:f,stopRenamingItem:S,temporarilyExpandFolder:P,toggleFolder:w}){let I=(0,q.wA)(),[N,C]=l.useState(!1),A=l.useRef(null),O=N&&!c&&s;l.useEffect(()=>{if(N&&o&&i){let e=setTimeout(()=>{P(t.name)},1e3);return()=>clearTimeout(e)}},[N,o,i,P,t]);let x=l.useCallback(()=>{let e=(0,tK.Zk)(t.styleTypeSection),n=A.current?.getBoundingClientRect();e&&n&&I(k.Zs({rowLeft:n.left,rowTop:n.top,styleType:t.styleTypeSection,styleNameInputPrefix:`${t.name}/`,inheritStyleKeyField:e}))},[A,t.name,t.styleTypeSection,I]);return l.createElement(tz,{deleteSelectedItems:e,forceShowHoverBorder:n===t.name,hideStylePreview:r,index:a,isDragging:o,isEditable:s,isRenaming:c,isCollapsed:i,isFolder:!0,isFirstChildOfSelection:d,level:m,name:(0,tO.kH)(t.name),onChildLeftClick:function(){w(!i)},onContextMenu:h,onCreateFolder:_,onDoubleClick:function(){t.styleTypeSection&&g(t.name,!1,t.styleTypeSection)},onHoverChange:C,onMouseDown:E,onMouseMove:y,onRenameItem:g,recordingKey:v,selected:b,selectedSecondary:f,stopRenamingItem:S,rowRef:e=>{e&&(A.current=j.findDOMNode(e))},childLeft:l.createElement(ea.U,{svg:i&&!p?tQ.A:tX.A,className:tY},i&&!p?l.createElement(tD.k,{className:tY}):l.createElement(tF.O,{className:tY})),childRight:O&&l.createElement(eE.$4,null,l.createElement(eE.K0,{className:b?tG:tH,recordingKey:u.Pt(v,"addButton"),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.styles.tooltips.create"),svg:e6.A,fallbackSvg:tZ.A,onClick:x}))})}var tj=n(221768),tq=n(44892),t0=n(991443),t1=n(720384),t5=n(162502);function t4({deleteSelectedItems:e,hideStylePreview:t,index:n,isDragging:r,isEditable:a,isRenaming:i,isLastChildOfSelection:s,level:c,onContextMenu:p,onCreateFolder:d,onInspectStyle:m,onMouseDown:h,onMouseMove:_,onRenameItem:E,recordingKey:y,selected:g,selectedSecondary:v,stopRenamingItem:b,dsStyle:f,stylePreviewShown:S,updateContextMenuStyleRef:P,updateSelection:w,updateFocusRowRef:N}){let[C,A]=l.useState(!1),O=(0,q.wA)(),x=l.useRef(null),L=l.useRef(null),M=l.useCallback(()=>{a&&E(f.node_id,!0,f.style_type)},[E,f.node_id,f.style_type,a]),F=S.isShown&&!S.isCreating&&S.style.node_id===f.node_id&&(0,D.EF)(S.style,f),K=C&&!i||F,V=l.useCallback(function(){let e=L.current;if(e){let t=e.getBoundingClientRect();F?O(k.sw()):(O(k.rk({style:f,rowTop:t.top,rowLeft:t.left})),m(f),w({type:f.style_type,folderNames:new Set,styleIds:new Set(f.node_id)}))}O(I.XE())},[O,m,w,f,F]),U=l.useCallback(e=>{(2===e.button||e.ctrlKey)&&P(L.current),h(e),F&&V()},[V,h,F,P]),B=x.current,H=!!B&&B.offsetWidth<B.scrollWidth,G=l.useMemo(()=>!r&&f.description&&H?{"data-tooltip-type":ec.Ib.SPECIAL,"data-tooltip":t1.Z,"data-tooltip-style-name":(0,tO.kH)(f.name),"data-tooltip-style-description":f.description,"data-tooltip-max-width":tU.jNX*(0,o.hG)(tU.dGl)}:null,[H,r,f.name,f.description]),Y="TEXT"===f.style_type&&f.meta?.style_thumbnail?f.meta.style_thumbnail:null;return l.createElement(tz,{deleteSelectedItems:e,hideStylePreview:t,index:n,inspectStyleSelected:F,isDragging:r,isEditable:a,isRenaming:i,isFolder:!1,isLastChildOfSelection:s,level:c,name:(0,tO.kH)(f.name),nameRef:x,onContextMenu:p,onCreateFolder:d,onDoubleClick:M,onHoverChange:A,onMouseDown:U,onMouseMove:_,onRenameItem:E,recordingKey:y,rowRef:e=>{if(e){let t=j.findDOMNode(e);N&&N(t),L.current=t}},secondaryName:Y&&(0,tq.P$)(Y),selected:g,selectedSecondary:v,stopRenamingItem:b,tooltipData:G,childLeft:l.createElement(l.Fragment,null,l.createElement(t0.zi,{dsStyle:f,disableTooltip:!0}),g&&"FILL"===f.style_type&&l.createElement("div",{className:"styles--selectedRing--UniEc"})),childRight:K&&l.createElement(eE.$4,null,l.createElement("div",{style:{gridColumnEnd:"span 1"}}),l.createElement(ek.YW,{className:g?tG:tH,recordingKey:u.Pt(y,"customButton"),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":a?(0,T.t)("design_systems.styles.edit_style"):(0,T.t)("design_systems.styles.view_style"),selected:F,onMouseDown:R.dG,onClick:V},l.createElement(ea.U,{svg:t5.A},l.createElement(tj.A,null))))})}function t3({styleType:e,children:t}){let n=!(0,tC.p8)("isReadOnly");return l.createElement("div",{className:"styles--styleTypeSection--jPjTq component_tiles--section--qMua7"},n?l.createElement(t2,{styleType:e,recordingKey:`style-section-header-${e}`}):l.createElement("div",{className:"styles--styleTypeSectionHeader--224lA component_tiles--sectionHeader--eEC6d raw_components--panelTitle--VAQQA"},(0,W.QT)(e)),t)}function t2({styleType:e,recordingKey:t}){let[n,r]=l.useState(!1),a=(0,q.wA)(),i=l.useRef(null),o=l.useCallback(()=>{let t=(0,tK.Zk)(e),n=i.current?.getBoundingClientRect();t&&n&&a(k.Zs({rowLeft:n.left,rowTop:n.top,styleType:e,inheritStyleKeyField:t}))},[i,e,a]);return l.createElement(eS.D8,{className:"styles--styleTypeSectionRow--wVTIO",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),recordingKey:t,forwardedRef:i},l.createElement(eE.JU,{className:"styles--styleTypeSectionRowLabel--PrKm-"},(0,W.QT)(e)),n&&l.createElement(ek.K0,{className:"styles--styleTypeSectionRowButton--V4Co2 styles--showOnRowHover--OUqRT",recordingKey:u.Pt(t,"addButton"),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,W.XV)(e).toLowerCase()}),svg:e6.A,fallbackSvg:tZ.A,onClick:o}))}t3.displayName="StyleTypeSection";var t6=n(318812),t7=n(333370);let t8=er.ms,t9=er.c$,ne=er.wv,nt="styles-by-type-context-menu",nn=.75*(0,o.hG)(tU.uj0);function nl({styleRowRef:e,onEditStyle:t,onRenameItem:n,onCreateFolder:r,onDeleteItems:a,onCutItems:i,onPasteItems:o,styleType:s}){let c=(0,t6.Um)(),p=(0,q.d4)(e=>e.library.localStyleSelection),d=l.useMemo(()=>p&&p.type===s&&c?.type===nt?(0,t7.QA)(p,c.data.uiList):[],[p,c,s]),u=l.useMemo(()=>(0,t7.Ug)(d).map(e=>e.node_id),[d]),m=u.length;return c&&u.length?l.createElement(nr,{styleRowRef:e,selectedItems:d,numStyles:m,dropdownShown:c,onEditStyle:t,onRenameItem:n,onCreateFolder:r,onDeleteItems:a,onCutItems:i,onPasteItems:o}):l.createElement("div",null)}function nr({styleRowRef:e,selectedItems:t,numStyles:n,dropdownShown:r,onEditStyle:a,onRenameItem:i,onCreateFolder:o,onDeleteItems:s,onCutItems:c,onPasteItems:p}){let d=(0,q.wA)();l.useEffect(()=>(U.glU.computePastableStyleCount(),()=>{U.glU.clearPastableStyleCount()}),[]);let u=(0,q.d4)(e=>e.mirror.appModel.pastableStyleCount),m=!!tA.q5()?.canEdit,h=l.useCallback(()=>{if(!t.length||t[0].type!==tL.PW.STYLE)return;let n=t[0];if(e){let t=e.getBoundingClientRect();d(k.rk({style:n,rowTop:t.top,rowLeft:t.left})),d(I.XE())}a(n)},[d,t,a,e]),_=l.useCallback(()=>{if(!t.length||t[0].type===tL.PW.STYLE)return;let e=t[0];i(e.name,!1,e.styleTypeSection)},[i,t]);if(-1===u)return l.createElement("div",null);if(!m)return n>1?l.createElement("div",null):l.createElement(t8,{style:r.data.position,className:tB},l.createElement(t9,{recordingKey:"edit-style-option",onClick:h},(0,T.tx)("design_systems.styles.view_style")));let E=1===n&&(t[0].type===tL.PW.STYLE?l.createElement(t9,{recordingKey:"edit-style-option",onClick:h},(0,T.tx)("design_systems.styles.edit_style")):l.createElement(t9,{recordingKey:"rename-folder-option",onClick:_},(0,T.tx)("design_systems.styles.rename_folder")));return l.createElement(t8,{style:r.data.position,className:tB},l.createElement(t9,{recordingKey:"create-folder-option",onClick:o},(0,T.tx)("design_systems.styles.add_new_folder")),E,l.createElement(t9,{recordingKey:"delete-style-option",onClick:s},(0,T.tx)("design_systems.styles.delete_styles",{numStyles:n})),l.createElement(ne,null),l.createElement(t9,{recordingKey:"cut-style-option",onClick:c},(0,T.tx)("design_systems.styles.cut_styles",{numStyles:n})),!!u&&l.createElement(t9,{recordingKey:"paste-style-option",onClick:p},(0,T.tx)("design_systems.styles.paste_styles",{numStyles:u})))}var na=n(710752),ni=n(582288),no=n(884909),ns=n(304173),nc=n(608974),np=n(257812),nd=n(319431),nu=n(914110);let nm="local-style-creation-dropdown";function nh(){let e=(0,q.wA)(),t=(0,l.useContext)(to.lk),n=!(0,tC.p8)("isReadOnly"),r=l.useRef(null),a=l.useRef(null),i=r.current,o=(0,t6.Um)(),s=o?.type===nm,c=o?.data?.targetRect,p="localStyleHeader",d=0===(0,ts.Bs)().length,m=(0,q.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),h=l.useMemo(()=>c||(s&&i?i.getBoundingClientRect():null),[c,i,s]),_=()=>{e(ei.oB())},E=()=>{e(ei.j7({type:nm}))},y=t=>{t.stopPropagation(),e(k.YG());let n=r.current;s?_():n&&((0,tg.sx)("editor-local-styles-dropdown-show"),E())},g=e=>{_();let n=(0,tK.Zk)(e),l=a.current?.getBoundingClientRect();n&&l&&t({styleType:e,inheritStyleKeyField:n,rowLeft:l.left,rowTop:l.top})},v=d&&!s&&!m;return l.createElement(eE.fI,{className:v?"styles--panelHeaderRowFaded--pfgKz styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO draggable_list--panelHeaderRowFaded--kETRR":"styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO",forwardedRef:a},l.createElement(eE.xw,{className:"styles--panelTitleText--v7gXm draggable_list--panelTitleText--SwKez",onMouseDown:e=>v&&y(e),onClick:e=>e.stopPropagation()},(0,T.tx)("design_systems.styles.local_styles")),n&&l.createElement(l.Fragment,null,l.createElement(eE.K0,{ref:r,onMouseDown:y,onClick:e=>e.stopPropagation(),className:s?"styles--stylesHeaderButtonHighlight--WTeWy raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6":"styles--stylesHeaderButton--jhpA5 draggable_list--addButton--D0q--","data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.create_style.create_style"),recordingKey:u.Pt(p,"addButton")},l.createElement(ea.U,{svg:e6.A,fallbackSvg:tZ.A},l.createElement(en.e,null))),s&&h&&l.createElement(eu.Cf,{targetRect:h,minWidth:128,disableDropdownScrollContainer:!0,propagateCloseClick:!0},W.og.map(e=>{let{icon:t,label:n}=function(e){switch(e){case"TEXT":return{icon:l.createElement(ea.U,{svg:nu.A},l.createElement(na.e,null)),label:(0,T.t)("design_systems.styles.dropdown.text")};case"FILL":return{icon:l.createElement(ea.U,{svg:np.A},l.createElement(ni.G,null)),label:(0,T.t)("design_systems.styles.dropdown.fill")};case"GRID":return{icon:l.createElement(ea.U,{svg:nd.A},l.createElement(no.E,null)),label:(0,T.t)("design_systems.styles.dropdown.grid")};case"EFFECT":return{icon:l.createElement(ea.U,{svg:nc.A},l.createElement(ns.n,null)),label:(0,T.t)("design_systems.styles.dropdown.effect")};default:throw(0,tv.j)(e),Error(`Invalid style type: ${e}`)}}(e),r=t=>{t.stopPropagation(),g(e)};return l.createElement(er.c$,{key:e,className:"styles--createStyleDropdownRow--7iCXQ",onClick:r,onPointerUp:r,recordingKey:u.Pt(p,`dropdown-option-${e}`)},l.createElement(ed.Nu,null,t),n)}))))}let n_="collapsed-style-folders";function nE({scrollContainer:e,recordingKey:t}){let n=(0,ts.Bs)(),r=(0,tC.p8)("isReadOnly");return 0===n.length&&r?null:l.createElement(tw.p,{name:"local_styles_panel"},l.createElement(eE.Zk,null,l.createElement(ny,{scrollContainer:e,recordingKey:t})))}function ny({scrollContainer:e,recordingKey:t}){let n=(0,q.wA)(),r=(0,q.d4)(e=>e.stylePreviewShown),a=(0,q.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),i=(0,q.d4)(e=>e.mirror.appModel.currentTool),o=l.useRef(null),s=(0,ts.Bs)(),c=(0,q.d4)(e=>e.library.localStyleSelection),[p,d]=l.useState(null),[m,h]=l.useState(null),_=l.useRef(null),[E,y]=l.useState(!1),v=a===U.m1T.GRADIENT||a===U.m1T.RASTER||i===U.NLJ.DROPPER_COLOR;l.useEffect(()=>{let e=()=>{!v&&(n(tI.Bn(null)),r.isShown&&(n(k.sw()),U.glU.selectStyle(g.n3.INVALID,g.IA.INVALID)))},t=(0,R.ft)();return t?window.addEventListener("pointerdown",e):window.addEventListener("mousedown",e),()=>{t?window.removeEventListener("pointerdown",e):window.removeEventListener("mousedown",e)}},[n,r.isShown,v]);let{stylesByType:b,foldersAndStylesByType:f}=l.useMemo(()=>{let e=(0,W.Kw)(s),t=new Map;return W.og.map(n=>{let l=e.get(n);if(l){(0,W.LX)(l);let e=(0,t7.lM)(l,n),r=(0,t7.l0)(e);t.set(n,r)}}),{stylesByType:e,foldersAndStylesByType:t}},[s]),S=l.useCallback(e=>{(0,tv.KF)(null!=e.content_hash,"style does not have a hash"),U.glU.selectStyleByGuid(e.node_id),n(tI.ay({isRenaming:!1})),(0,tg.sx)("Style Inspected",{styleType:e.style_type,from:"styleListClick"})},[n]),P=l.useCallback((e,t,n)=>{d(t?e:null),h(t?null:{name:e,styleTypeSection:n})},[]),T=l.useCallback(e=>{if(!e){n(tI.Bn(null));return}let t=new Set;e.styleIds.forEach(n=>{let l=s.find(e=>e.type===tL.PW.STYLE&&e.node_id===n);if(!l)return;let r=(0,tO.In)(l.name);e.folderNames.has(r)||t.add(n)});let l={type:e.type,folderNames:e.folderNames,styleIds:t};n(tI.Bn(l))},[n,s]),w=l.useCallback((e,t,n)=>{if(!c)return;let l=e[t],r=(e,t)=>{let l=(0,tO.ke)(e.name),r=null!=t?t:l.length-1;l[r]=n;let a=(0,t7.Pc)(l.join("/"));ew.l7.user("rename-style",()=>U.glU.renameNode(e.node_id,a))};if(l.name!==n){if(l.type===tL.PW.STYLE)r(l);else{(0,t7.mx)(t,e).forEach(t=>{let n=e[t];n.type===tL.PW.STYLE&&r(n,l.level-1)});let a=new Set(c.folderNames);a.delete(l.name);let i=(0,tO.In)(l.name)+"/"+n;a.add(i),T({type:c.type,folderNames:a,styleIds:c.styleIds})}}V.Y5.triggerAction("commit"),d(null),h(null)},[c,T]),I=l.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation(),n(ei.j7({type:nt,data:{uiList:e,position:{top:t.clientY,left:Math.min(t.clientX,window.innerWidth-nn)}}}))},[n]),N=l.useCallback(e=>{_.current=e},[]),C=l.useCallback(()=>{y(!0)},[]),A=l.useCallback(()=>{y(!1)},[]);return l.createElement("div",{className:"styles--localStylesPanel--T4Gqs",ref:o},l.createElement(nh,null),W.og.map(n=>{let r=b.get(n);if(!r)return;let a=f.get(n);if(a)return l.createElement(ng,{key:n,recordingKey:u.Pt(t,`style-section-${n}`),styleType:n,storedStyleList:r,styleList:a,updateSelection:T,isDragging:E,onDragStart:C,onDragEnd:A,onInspectStyle:S,onContextMenu:I,updateContextMenuStyleRef:N,renamingStyleID:p,renamingFolder:m,onRenameItem:P,stopRenamingItem:w,styleRowRef:_.current,onEditStyle:S,scrollContainer:e})}))}function ng({styleType:e,storedStyleList:t,styleList:n,renamingStyleID:r,renamingFolder:a,onRenameItem:i,stopRenamingItem:o,onDragStart:s,onDragEnd:c,onInspectStyle:d,onContextMenu:m,updateContextMenuStyleRef:h,updateSelection:_,styleRowRef:E,scrollContainer:y,recordingKey:v}){let b=(0,tA.q5)(),f=!(0,tC.p8)("isReadOnly"),S=(0,q.wA)(),P=(0,q.d4)(e=>e.stylePreviewShown),w=(0,tk.GS)(),N=(0,q.d4)(t=>(0,tx.i4)(t,e)),C=(0,q.d4)(t=>(0,tx.A7)(t,e,n)),[A,O]=l.useState(()=>{if(tT.x4&&b){let t=JSON.parse(tT.x4.getItem(n_)||"{}");if(b.key in t){let n=t[b.key];if(e in n)return new Set(n[e])}else t[b.key]={},tT.x4.setItem(n_,JSON.stringify(t))}return new Set(n.filter(e=>"STYLE_FOLDER"===e.type).map(e=>e.name))}),[x,R]=l.useState([]),[L,M]=l.useState(null),[D,F]=l.useState(null),K=l.useMemo(()=>(0,tb.s)(()=>{S(tN.GT({styleType:e}))},200),[S,e]);l.useEffect(()=>{K()},[K,n]);let B=(0,tf.ZC)(A);l.useEffect(()=>{if(!B||!tT.x4||!b||(0,tP._f)(B,A))return;let t=JSON.parse(tT.x4.getItem(n_)||"{}"),n=t[b.key];n&&(n[e]=[...A],tT.x4.setItem(n_,JSON.stringify(t)))},[A,b,B,e]);let H=l.useCallback(e=>!!e&&"STYLE_FOLDER"===e.type,[]),G=l.useCallback((e,t)=>{let l=new Set(e),r=[];n.forEach((e,t)=>{if(l.has(e)&&(r.push(t),"STYLE_FOLDER"===e.type)){let e=(0,t7.mx)(t,n);r.push(...e)}});let a=new Set(r),i=t?n.indexOf(t):n.length,o=[...(0,p.y1)(i).filter(e=>!a.has(e)),...r,...(0,p.y1)(i,n.length).filter(e=>!a.has(e))],s=new Map;return o.forEach((e,t)=>{e!==t&&s.set(e,t)}),s},[n]),Y=l.useCallback(()=>{P.isShown&&(S(k.sw()),S(I.XE()),U.glU.selectStyle(g.n3.INVALID,g.IA.INVALID))},[S,P.isShown]),$=l.useMemo(()=>{if(!L)return null;if("in"===L.type){let e=n[L.index];return e?{folderNameToNestUnder:e.name,dividerStyles:{display:"none"}}:null}if(null==L.index||null==D||!N)return null;let e=(0,t7.QA)(N,n),t=e[0],l=null,r=null;if(0===L.index?r=n[L.index]:L.index===n.length?l=n[L.index-1]:(l=n[L.index-1],r=n[L.index]),l?.type==="STYLE_FOLDER"&&A.has(l.name)&&-1===x.indexOf(l.name))return{folderNameToNestUnder:l.name,dividerStyles:{display:"none"}};if(l?.type===tL.PW.STYLE){let e=(0,tO.In)(l.name).split("/");for(let n=0;n<e.length;n++){let l=e.slice(0,n+1).join("/");if(A.has(l)&&-1===x.indexOf(l)){if("STYLE_FOLDER"!==t.type)return{folderNameToNestUnder:l,dividerStyles:{display:"none"}};return{folderNameToNestUnder:(0,tO.In)(l),dividerStyles:{marginLeft:24*Math.min((0,tO.ke)(l).length,8)-8}}}}}let a=0,i=null,o=l?(0,t7.rM)(l):0,s=r?(0,t7.rM)(r):0;if(o<=s)a=s,i=l?l.type===tL.PW.STYLE?(0,tO.In)(l.name):l.name:"";else if((0,tv.KF)(null!=l,"Dragging after an item that doesn't exist"),t.type===tL.PW.STYLE||D>=.5)a=o,i=(0,tO.In)(l.name);else{let e=Math.floor(D/.5*(0,t7.rM)(l));e=Math.max(s-1,e),i=(0,tO.ke)((0,tO.In)(l.name)).slice(0,e).join("/"),a=e+1}let c={marginLeft:24*Math.min(a,8)-8};return l&&e.includes(l)||!(0,t7.Md)(l,t,r)?{folderNameToNestUnder:null,dividerStyles:c}:{folderNameToNestUnder:i,dividerStyles:c}},[A,D,N,L,n,x]),W=l.useCallback((l,r,a,i)=>{if(!t||!r&&!a||!$)return;let o=$.folderNameToNestUnder;if(null===o)return;let s=[],c=[];l.forEach(e=>{(0,t7.Md)(r,e,a,o)&&("STYLE_FOLDER"===e.type?c.push(e):s.push(e))});let p=s.concat(c);if(!p.length)return;let d=ew.l7.user("reorder-styles",()=>(0,t7.VB)(p,r,a,o,n,t,i||!1)),u=new Set,m=new Set;p.forEach(e=>{let t=(0,t7.t_)(e),n=d?.get(t);n&&("STYLE_FOLDER"===e.type?u.add(n):m.add(t))}),_({type:e,folderNames:u,styleIds:m});let h=new Set;return A.forEach(e=>{if(o.startsWith(e))return;let t=d?.get(e);t?h.add(t):h.add(e)}),O(h),Y(),i||V.Y5.triggerAction("commit"),G(p,a)},[_,A,$,G,Y,t,n,e]),z=l.useCallback((e,t)=>{if("STYLE_FOLDER"!==t.type)return;let l=n.indexOf(t),r=(0,t7.dm)(t).filter(e=>(0,tO.In)(e.name)===t.name);if(!r.length)return W(e,t,n[l+1]);{let t=r[r.length-1],l=n.indexOf(t);return W(e,t,n[l+1])}},[W,n]),X=(0,tS.xx)((e,t)=>{let l=new Map,r=t.map(e=>e.type===tL.PW.STYLE?e.node_id:e.name);return e.forEach(e=>{let a=r.indexOf(e);-1!==a&&(0,t7.mx)(a,n).forEach(e=>{let n=t[e],r="STYLE_FOLDER"===n.type?n.name:n.node_id,a=l.get(r);a||(a=0),l.set(r,a+1)})}),l}),Q=l.useCallback(()=>{if(!N)return;let t=(0,t7.QA)(N,n);if(0===t.length)return;let l=t[0],r=n.indexOf(l),a=r,o=r+1;if(l.type===tL.PW.STYLE&&n[o]&&n[o].type===tL.PW.STYLE){let e=(0,t7.rM)(l);for(let t=r+1;t<n.length;t++){let l=n[t];if("STYLE_FOLDER"===l.type&&l.level===e||(0,t7.rM)(l)<e){a=t-1,o=t;break}t===n.length-1&&(a=t,o=t+1)}}W(t,n[a],n[o],!0);let s=(0,tO.In)(l.name),c=w?(0,T.t)("design_systems.create_style.new_folder"):(0,T.t)("design_systems.create_style.untitled_folder");s&&(c=`${s}/${c}`);let p=(e,t)=>{if(e.type===tL.PW.STYLE){let n=c+"/"+t+(0,tO.kH)(e.name);ew.l7.user("rename-style",()=>{U.glU.renameNode(e.node_id,n)})}else{let n=t+(0,tO.kH)(e.name)+"/";e.styles.forEach(e=>{p(e,n)}),e.subfolders.forEach(e=>{p(e,n)})}};t.forEach(e=>{p(e,"")}),_({type:e,folderNames:new Set([c]),styleIds:new Set}),i(c,!1,e)},[_,W,w,N,i,n,e]),Z=l.useCallback((e,t)=>{let l=n[e];"STYLE_FOLDER"===l.type&&O(e=>{let n=new Set(e);return t?n.add(l.name):n.delete(l.name),n})},[n]),J=l.useCallback((e,t)=>{O(l=>{let r=new Set(l),a=n[e];if("STYLE_FOLDER"===a.type){let e=(0,tO.In)(a.name),n=""===e?t:e+"/"+t;A.has(a.name)&&(A.delete(a.name),A.add(n)),(0,t7.KU)(a).forEach(e=>{if(A.has(e.name)){let t=e.name.replace(a.name,"");A.add(n+t),A.delete(e.name)}})}return r}),o(n,e,t)},[o,A,n]),j=l.useCallback(e=>{m(n,e)},[m,n]),ee=l.useCallback((e,t,n)=>{let l=t>.5?1:Math.round(1e3*t)/1e3;M({index:e,type:n?"in":"before"}),F(l)},[]),et=l.useCallback(()=>{O(e=>ew.l7.user("delete-styles",()=>{let t=new Set(e);return(N?(0,t7.QA)(N,n):[]).forEach(e=>{"STYLE_FOLDER"===e.type?((0,t7.a2)(e,b?.key||null),A.delete(e.name),(0,t7.KU)(e).forEach(e=>A.delete(e.name))):(0,t7.Nr)(e,b?.key||null)}),t})),V.Y5.triggerAction("commit"),P.isShown&&(S(k.sw()),S(I.XE()),U.glU.selectStyle(g.n3.INVALID,g.IA.INVALID)),_(null)},[P.isShown,_,N,n,b?.key,A,S]),en=l.useMemo(()=>{let e=N?(0,t7.QA)(N,n):[];return(0,t7.Ug)(e).map(e=>e.node_id)},[N,n]),el=l.useCallback(()=>{ew.l7.user("cut-styles",()=>U.glU.cutStyles(en))},[en]),er=l.useCallback((e,t)=>{t===tR.zy.PASTE?ew.l7.user("paste-styles",()=>U.glU.pasteStyles()):e.shouldPropagate=!0},[]);l.useEffect(()=>{if(!N)return;let e=e=>{e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)||el()};return document.addEventListener("cut",e),()=>{document.removeEventListener("cut",e)}},[el,N]);let ea=l.useCallback(()=>{U.glU.pasteStyles()},[]),ei=l.useCallback(e=>{R(t=>[...t,e])},[]),eo=l.useCallback(()=>{s()},[s]),es=u.rf(v,"ondragend",l.useCallback(()=>{M(null),F(null),R([]),c()},[c])),ec=(0,tf.ZC)(N);l.useEffect(()=>{ec!==N&&N&&O(e=>{let n=new Set(e);for(let e of N.styleIds.values()){let l=t.find(t=>t.node_id===e);if(!l)continue;let r=(0,tO.ke)(l.name);for(let e=0;e<r.length;e++){let t=r.slice(0,e).join("/");n.delete(t)}}return n})},[N,ec,t]);let ep=l.useRef(null),ed=l.useCallback(e=>{ep.current=e},[ep]),eu=l.useMemo(()=>N?(0,t7.h$)(N,n):[],[N,n]),em=l.useMemo(()=>C?(0,t7.h$)(C,n):[],[C,n]),eh=l.useMemo(()=>[...eu,...em].sort((e,t)=>e-t),[eu,em]),e_=l.useCallback((e,t,o,s,c,p)=>{let u="STYLE_FOLDER"===e.type?e.name:e.node_id,m=!1,E=!1;for(let t of x)if("STYLE_FOLDER"===e.type){if(e.name===t){E=!0;break}e.name.startsWith(t)&&(m=!0)}else if((0,tO.In)(e.name)===t){m=!0;break}if(!E&&!m&&X(A,n).has(u))return null;let y=eh&&eh[eh.length-1]===t,g=eh&&eh[0]===t;if(e.type===tL.PW.STYLE){let n=(0,t7.rM)(e),a=null!=r&&r===e.node_id;return l.createElement(t4,{hideStylePreview:Y,recordingKey:`style-row-${t}`,index:t,key:e.node_id,isDragging:s,dsStyle:e,selected:o,selectedSecondary:C?.styleIds.has(e.node_id)||!1,level:n,stylePreviewShown:P,onContextMenu:j,updateContextMenuStyleRef:h,updateFocusRowRef:o?ed:null,onMouseDown:c,onMouseMove:p,onInspectStyle:d,updateSelection:_,isEditable:f,deleteSelectedItems:et,isRenaming:a,onRenameItem:i,stopRenamingItem:J,onCreateFolder:Q,isLastChildOfSelection:y})}{let n=null!=a&&a.name===e.name&&a.styleTypeSection===e.styleTypeSection,r=$?.folderNameToNestUnder||null;return l.createElement(tJ,{recordingKey:`folder-section-${e.styleTypeSection}-row-${t}`,key:t,index:t,isDragging:s,folder:e,selected:o,selectedSecondary:C?.folderNames.has(e.name)||!1,isCollapsed:A.has(e.name),temporarilyExpandFolder:ei,isTemporarilyExpanded:E,isRenaming:n,folderNameToNestUnder:r,onRenameItem:i,stopRenamingItem:J,level:e.level,toggleFolder:e=>Z(t,e),onContextMenu:j,onCreateFolder:Q,onMouseDown:c,onMouseMove:p,isEditable:f,deleteSelectedItems:et,hideStylePreview:Y,isFirstChildOfSelection:g})}},[_,eh,A,et,$?.folderNameToNestUnder,X,Y,j,Q,d,i,a,r,C?.folderNames,C?.styleIds,J,n,P,ei,x,Z,h,f,ed]),eE=l.useCallback(t=>{let l=new Set,r=new Set;t.forEach(e=>{let t=n[e];"STYLE_FOLDER"===t.type?l.add(t.name):r.add(t.node_id)}),_({type:e,folderNames:l,styleIds:r})},[_,n,e]),ey=l.useRef(),eg=l.useRef();return l.useEffect(()=>{ey.current&&eu.length?(ey.current(),ep.current&&!ep.current.contains(document.activeElement)&&ep.current.focus()):eg.current&&!eu.length&&(eg.current(),ep.current=null)},[ey,eu,ep]),l.createElement(ty.vL,{name:"StyleDraggableList",handleClipboard:er,focusFunctionRef:ey,blurFunctionRef:eg},l.createElement(t3,{styleType:e},l.createElement(nv,{recordingKey:"style-draggable-list",listItems:n,onInsertItemsIn:z,canInsertItemsIn:H,onInsertItemsBetweenValues:W,onDrag:ee,onDragStart:eo,onDragEnd:es,insertDividerStyle:$?.dividerStyles,selectedIndices:eu,updateSelection:eE,renderListItem:e_,scrollContainer:y,isDragDisabled:!f}),l.createElement(nl,{styleRowRef:E,onDeleteItems:et,onCutItems:el,onPasteItems:ea,onRenameItem:i,onEditStyle:d,onCreateFolder:Q,styleType:e})))}class nv extends tM.q{}var nb=n(987950),nf=n(875157),nS=n(535904),nP=n(520581),nT=n(869156),nw=n(635736);function nI(e){return e.modalShown?.type===nw.y.type||e.modalShown?.prevModal?.type===nw.y.type}function nN(){let e=(0,nw.m)(),t=(0,l.useCallback)(()=>{e()},[e]),n=(0,q.d4)(nI),r=0===(0,nT.Rb)().length&&!n;return l.createElement(tw.p,{name:"local_variables_panel"},l.createElement(eE.Zk,null,l.createElement(eE.fI,{className:r?"local_variables_panel--localVariablesPanelRowFaded--atToe local_variables_panel--localVariablesPanelRow--zR8nJ draggable_list--panelHeaderRowFaded--kETRR":"local_variables_panel--localVariablesPanelRow--zR8nJ"},l.createElement(eE.xw,{className:"local_variables_panel--titleText--7rdD7 draggable_list--panelTitleText--SwKez",onClick:t,"data-onboarding-key":"local-variables-panel-title"},(0,T.tx)("variables.local_variables_panel.local_variables_title")),l.createElement(nP.E,{name:"variables_modal_button"},(0,s.kc)().fpl_variables_button_migration?l.createElement(nS.d,{onClick:t,recordingKey:(0,u.Pt)("localVariablesPanel","variablesModalButton"),toggled:n,"aria-label":(0,T.t)("variables.local_variables_panel.open_variables_button_tooltip"),htmlAttributes:{"data-tooltip":(0,T.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":ec.Ib.TEXT}},l.createElement(ea.U,{svg:t5.A},l.createElement(tj.A,null))):l.createElement(ek.YW,{className:"local_variables_panel--openAuthoringModalButton--FiNXt draggable_list--addButton--D0q--",selected:n,recordingKey:(0,u.Pt)("localVariablesPanel","variablesModalButton"),"data-tooltip":(0,T.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":ec.Ib.TEXT,onClick:t},l.createElement(ea.U,{svg:t5.A},l.createElement(tj.A,null)))))))}var nk=n(19038);function nC({recordingKey:e}){let t=(0,q.wA)(),{version:n}=(0,el.DP)(),r=(0,q.d4)(eJ._k),a=!(0,q.d4)(eZ.Jp),i=(0,q.d4)(e=>!!e.dropdownShown&&e.dropdownShown.type===eW.C4),o=(0,q.d4)(e=>!!e.modalShown&&e.modalShown.type===eQ.n.type),s=(0,q.d4)(e=>e.pickerShown),c=i||o||s?.id===eW.Dd,p=!!(0,q.d4)(eN.Z3).length,d=(0,q.d4)(eN.K4),u=!!d?.length,m=l.useRef(null),h=l.useRef(null),_=l.useCallback(()=>{s&&t(I.XE()),i?t(ei.oB()):t(ei.j7({type:eW.C4}))},[t,s,i]),E=l.useCallback(()=>{let e=j.findDOMNode(h.current),n=e?(0,ep.cn)(e,eW.wh):{};t(I.u1({id:eW.Dd,initialX:n?.x,initialY:n?.y}))},[t]);return r&&u?l.createElement(eE.Zk,{ref:h},l.createElement("ui3"===n?e9:e8,{isPanelEmpty:a,isAddPropButtonSelected:c,hasBubbledInstances:p,selectAddPropOptionRef:m,toggleAddPropDropdown:_,stateGroupSelectionMode:void 0}),i&&m.current&&l.createElement(eu.Cf,{targetRect:m.current.getBoundingClientRect(),propagateCloseClick:!0},l.createElement(er.c$,{disabled:!0,className:e5},(0,T.tx)("design_systems.component_properties.expose_nested_instances")),l.createElement(er.c$,{className:e1,onClick:E,recordingKey:"openBubbledPropPicker"},l.createElement(ed.Nu,null,l.createElement(ea.U,{svg:e3.A},l.createElement(nk.r,null))),(0,T.t)("design_systems.component_properties.choose_instances"))),s?.id===eW.Dd&&l.createElement(eX,null),p&&l.createElement(l.Fragment,null,l.createElement("p",{className:e4},(0,T.t)("design_systems.component_properties.bubbled_instances")),l.createElement(eB,{recordingKey:e}))):null}var nA=n(324666),nO=n(872429),nx=n(753243),nR=n(871642),nL=n(662294);function nM({recordingKey:e}){let[t,n]=(0,nR.Xw)();return l.createElement(eE.Zk,{className:"slides_align_panel--panel--4jgTN",...n},l.createElement(nL.l,{isHoveringOverPanel:t,inSlidesPanel:!0,recordingKey:e}))}var nD=n(421757),nF=n(427113),nK=n(762638),nV=n(973149),nU=n(723081),nB=n(46878),nH=n(100197),nG=n(218973),nY=n(952675),n$=n(149658),nW=n(623711),nz=n(708918),nX=n(538697),nQ=n(12519),nZ=n(552901),nJ=n(683570),nj=n(343559),nq=n(983724),n0=n(195601),n1=n(366501),n5=n(149988);function n4({panelClassName:e,children:t,hideBorderBottom:n}){return l.createElement("div",{className:i()("slides_panel--panel--lPYTn",{"slides_panel--withBorderBottom--CymRv":!n},e),"data-non-interactive":!0},t)}function n3({titleTx:e,input:t}){return l.createElement(n4,{panelClassName:"slides_panel--panelTitleInput--Paowl"},l.createElement(n5.I,{titleTx:e,input:t}))}let n2="slides_animation_panel--row--cC8Np",n6="slides_animation_panel--rowInput--klQ98",n7="slides_animation_panel--rowWithPadding--CVhk5 slides_animation_panel--row--cC8Np",n8="slides_animation_panel--rowWithPaddingSpacer3--N0vBM slides_animation_panel--row--cC8Np",n9="slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce";var le=n(579758);let lt=["SMART_ANIMATE","DISSOLVE","PUSH","SLIDE","SLIDE_OUT","MOVE","MOVE_OUT"],ln=["EASE_IN","EASE_OUT","EASE_IN_AND_OUT"],ll=["GENTLE","QUICK","BOUNCY","SLOW"],lr={EASE_IN:U.mgy.IN_CUBIC,EASE_OUT:U.mgy.OUT_CUBIC,EASE_IN_AND_OUT:U.mgy.INOUT_CUBIC,LINEAR:U.mgy.LINEAR,GENTLE:U.mgy.GENTLE_SPRING,QUICK:U.mgy.SPRING_PRESET_ONE,BOUNCY:U.mgy.SPRING_PRESET_TWO,SLOW:U.mgy.SPRING_PRESET_THREE},la=e=>ll.includes(e),li=["ON_CLICK","AFTER_TIMEOUT"],lo={[U.v$l.NONE]:{behavior:"INSTANT"},[U.v$l.DISSOLVE]:{behavior:"DISSOLVE"},[U.v$l.SLIDE_FROM_LEFT]:{direction:"LEFT",behavior:"SLIDE"},[U.v$l.SLIDE_FROM_RIGHT]:{direction:"RIGHT",behavior:"SLIDE"},[U.v$l.SLIDE_FROM_TOP]:{direction:"TOP",behavior:"SLIDE"},[U.v$l.SLIDE_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"SLIDE"},[U.v$l.SLIDE_OUT_TO_LEFT]:{direction:"LEFT",behavior:"SLIDE_OUT"},[U.v$l.SLIDE_OUT_TO_RIGHT]:{direction:"RIGHT",behavior:"SLIDE_OUT"},[U.v$l.SLIDE_OUT_TO_TOP]:{direction:"TOP",behavior:"SLIDE_OUT"},[U.v$l.SLIDE_OUT_TO_BOTTOM]:{direction:"BOTTOM",behavior:"SLIDE_OUT"},[U.v$l.PUSH_FROM_LEFT]:{direction:"LEFT",behavior:"PUSH"},[U.v$l.PUSH_FROM_RIGHT]:{direction:"RIGHT",behavior:"PUSH"},[U.v$l.PUSH_FROM_TOP]:{direction:"TOP",behavior:"PUSH"},[U.v$l.PUSH_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"PUSH"},[U.v$l.MOVE_FROM_LEFT]:{direction:"LEFT",behavior:"MOVE"},[U.v$l.MOVE_FROM_RIGHT]:{direction:"RIGHT",behavior:"MOVE"},[U.v$l.MOVE_FROM_TOP]:{direction:"TOP",behavior:"MOVE"},[U.v$l.MOVE_FROM_BOTTOM]:{direction:"BOTTOM",behavior:"MOVE"},[U.v$l.MOVE_OUT_TO_LEFT]:{direction:"LEFT",behavior:"MOVE_OUT"},[U.v$l.MOVE_OUT_TO_RIGHT]:{direction:"RIGHT",behavior:"MOVE_OUT"},[U.v$l.MOVE_OUT_TO_TOP]:{direction:"TOP",behavior:"MOVE_OUT"},[U.v$l.MOVE_OUT_TO_BOTTOM]:{direction:"BOTTOM",behavior:"MOVE_OUT"},[U.v$l.SMART_ANIMATE]:{behavior:"SMART_ANIMATE"}},ls=new nU.el(!0),lc=new nU.VG,lp=new n$.Mk;function ld({behavior:e,duration:t,direction:n,triggerType:l,triggerDelay:r,easingType:a}){return{type:function(e,t){for(let[n,{behavior:l,direction:r}]of Object.entries(lo))if(l===e&&r===t)return n;return U.v$l.NONE}(e,n),duration:la(a)?(e=>{let t=lu(e);return(0,nz.J5)((0,nz.w_)(t))})(a):t,easingType:function(e){let t=lr[e||"EASE_OUT"];return void 0!==t?t:U.mgy.OUT_CUBIC}(a),trigger:{type:"AFTER_TIMEOUT"===l?U.tbx.AFTER_DELAY:U.tbx.ON_CLICK,delay:"AFTER_TIMEOUT"===l&&r?r:0}}}let lu=e=>{switch(e){case"GENTLE":return[1,100,15,0];case"QUICK":return[1,300,20,0];case"BOUNCY":return[1,600,15,0];default:return[1,80,20,0]}},lm=[.1,.2,.3,.5,1,2];class lh extends nX.c${}let l_=[0,.05,.1,.2,.3,.5,1,2];class lE extends nX.c${}let ly=new nV.ag(nV.i5.MILLISECONDS,.01,10),lg=new nV.ag(nV.i5.MILLISECONDS,.001,30),lv=e=>{let t={type:U.v$l.NONE,duration:0,easingType:U.mgy.OUT_CUBIC,trigger:{type:U.tbx.ON_CLICK,delay:0}},n=P.AD;return e.forEach(e=>{let l=U.Ez5.slideAnimationBindings().getSlideTransition(e);l&&t.type===U.v$l.NONE&&(t=l,n=e)}),{appliedTransition:t,slideGuid:n}},lb=(e,t,n)=>l=>{let r={...t};if("behavior"===e){let e=t.direction;"INSTANT"===l||"DISSOLVE"===l||"SMART_ANIMATE"===l?e=void 0:void 0===e&&(e="LEFT"),r.direction=e,"INSTANT"===l&&(r.triggerType="ON_CLICK")}"easingType"===e&&l&&!la(l)&&la(t.easingType)&&(r.duration=.3);let a=ld({...r,[e]:l});ew.l7.user("slide-transition",()=>{n.forEach(e=>{U.Ez5.slideAnimationBindings().setSlideTransition(e,a)}),V.Y5.commit()})};function lf(){let e=(0,q.wA)(),t=(0,t6.Um)(),n=(0,nq.l5)(),{appliedTransition:r,slideGuid:a}=lv(n),i=(0,tm.Fk)((e,t)=>{if(e){let n=e.get(t);if(n)return n.name}return null},a),o=i?(0,T.t)("fullscreen.properties_panel.layer_header.node_type_slide",{slideNumber:i}):(0,T.t)("slides.properties_panel.slide_transition"),c=function(e){let{behavior:t,direction:n}=lo[e.type],l=function(e){for(let[t,n]of Object.entries(lr))if(n===e)return t;return"EASE_OUT"}(e.easingType),r=Math.round(1e3*e.duration)/1e3;if(la(l)){let e=lu(l);r=(0,nW.xX)((0,nz.w_)(e))}let a=Math.round(1e3*e.trigger.delay)/1e3;return{behavior:t,direction:n,duration:r,easingType:l,triggerType:e.trigger.type===U.tbx.AFTER_DELAY?"AFTER_TIMEOUT":"ON_CLICK",triggerDelay:a}}(r),p=lb("triggerType",c,n),d=lb("triggerDelay",c,n),u=lb("behavior",c,n),m=lb("direction",c,n),h=lb("duration",c,n),_=lb("easingType",c,n),E=!("INSTANT"===c.behavior||"DISSOLVE"===c.behavior||"SMART_ANIMATE"===c.behavior),y="INSTANT"!==c.behavior,g="AFTER_TIMEOUT"===c.triggerType,v=l.createElement(ea.U,{svg:le.A},l.createElement(nF.A,null));return l.createElement(tw.p,{name:"slides_animation_panel"},l.createElement(n4,null,(0,s.kc)().piper_transition_controls?l.createElement("p",{className:"slides_animation_panel--transitionTitle---2ON-"},o):l.createElement(nj.r,{titleTx:(0,T.tx)("slides.properties_panel.slide_transition")}),l.createElement("div",{className:(0,s.kc)().piper_transition_controls?n7:n2},l.createElement("label",null,(0,T.tx)("slides.properties_panel.slide_transition.style")),l.createElement(nP.E,{name:"slide_transition_style"},l.createElement(nX.l6,{formatter:ls,id:"slide-transitions-behavior-select",property:c.behavior,onChange:u,dispatch:e,dropdownShown:t},l.createElement(nX.c$,{value:"INSTANT",key:"INSTANT"}),l.createElement(nX.sK,null),lt.map(e=>l.createElement(nX.c$,{value:e,key:e}))))),E&&l.createElement("div",{className:n2},l.createElement("label",null,(0,T.tx)("slides.properties_panel.slide_transition.direction")),l.createElement(nP.E,{name:"slide_transition_direction"},l.createElement(n$.sP,{onChange:m,property:c.direction??null}))),(0,s.kc)().piper_transition_controls&&y&&l.createElement(l.Fragment,null,l.createElement(nP.E,{name:"slide_transition_easing"},l.createElement("div",{className:n2},l.createElement("label",null,(0,T.tx)("slides.properties_panel.slide_transition.curve")),l.createElement(nX.l6,{formatter:lp,id:"slide-transitions-easing-select",property:c.easingType,onChange:_,dispatch:e,dropdownShown:t},l.createElement(nX.c$,{value:"LINEAR",key:"LINEAR"}),l.createElement(nX.sK,null),ln.map(e=>l.createElement(nX.c$,{value:e,key:e})),l.createElement(nX.sK,null),ll.map(e=>l.createElement(nX.c$,{value:e,key:e}))))),l.createElement(tw.p,{name:"slides_duration"},l.createElement("div",{className:n2},l.createElement("label",null,(0,T.tx)("slides.properties_panel.slide_transition.duration")),l.createElement("div",{className:n6},l.createElement(nP.E,{name:"slides_duration_dropdown"},l.createElement(nY.ow,{value:{select:nQ.pW,inputComponent:nQ.gm}},l.createElement(nX.tV,{value:{chevron:nZ.c9}},l.createElement(nG.W0,{id:"slide-animation-duration",disabled:la(c.easingType),onValueChange:h,value:c.duration,dropdownShown:t,min:.01,max:10,icon:v,dispatch:e,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.slide_transition.duration"),tooltipForScreenReadersOnly:!0,enablePreview:!0},lm.map(e=>l.createElement(lh,{key:`duration-${e}`,value:e},ly.format(e)))))))))))),(0,s.kc)().piper_transition_controls&&y&&l.createElement(n4,null,l.createElement("div",{className:n7},l.createElement("label",null,(0,T.tx)("slides.properties_panel.slide_transition.timing")),l.createElement(nX.l6,{formatter:lc,id:"slide-transitions-trigger-select",property:c.triggerType,onChange:p,dispatch:e,icon:(0,nB.e7)(c.triggerType),dropdownShown:t},li.map(e=>l.createElement(nX.c$,{icon:(0,nB.e7)(e),value:e,key:e})))),g&&l.createElement(tw.p,{name:"slides_delay"},l.createElement("div",{className:n2},l.createElement("label",null,(0,T.tx)("slides.properties_panel.slide_transition.delay")),l.createElement("div",{className:n6},l.createElement(nP.E,{name:"slides_delay_dropdown"},l.createElement(nY.ow,{value:{select:nQ.pW,inputComponent:nQ.gm}},l.createElement(nX.tV,{value:{chevron:nZ.c9}},l.createElement(nG.W0,{id:"slide-animation-delay",onValueChange:d,value:c.triggerDelay,dropdownShown:t,min:.001,max:30,icon:v,dispatch:e,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.slide_transition.delay"),tooltipForScreenReadersOnly:!0,enablePreview:!0},l_.map(e=>l.createElement(lE,{key:`delay-${e}`,value:e},lg.format(e))))))))))),y&&l.createElement("div",{className:n8},l.createElement("div",{style:{width:"100%"}},l.createElement(lS,{appliedProperties:c}))),l.createElement("div",{className:n8},l.createElement(nD.IK,{variant:"secondary",onClick:()=>{var e;return e=ld(c),void ew.l7.user("slide-transition-all-slides",()=>{U.Ez5.slideAnimationBindings().setSlideTransitionForAll(e),V.Y5.commit()})}},(0,T.tx)("slides.properties_panel.slide_transition.apply_to_all"))))}function lS({appliedProperties:e}){let t=(0,n1.Jj)(),n=(0,nH.J2)(U.Ez5.slideDeck().slideGrid),r=(0,n1.Rn)(n,t),a="MOVE_OUT"===e.behavior||"SLIDE_OUT"===e.behavior,i=a?t:r??P.AD,o=a?r??P.AD:t,s=(0,n0.p)(i),c=(0,n0.p)(o),p=la(e.easingType),d={behavior:e.behavior,direction:e.direction??null,shouldSmartAnimate:"SMART_ANIMATE"===e.behavior,duration:e.duration,easing:e.easingType,isSpringTransition:p,easingFunction:p?lu(e.easingType):[],preserveScroll:!1,resetVideoPosition:!1,openUrlInNewTab:!1,resetInteractiveComponents:!1,resetScrollPosition:!1};return p?l.createElement(nJ.SA,{transition:d,isUI3:!0}):l.createElement(lP,{transition:d,belowThumbnailUrl:c,aboveThumbnailUrl:s})}class lP extends nJ.ub{rectangleStateToCSSStyle(e,t,n,l){let r=this.cssEasingFunction(e),a=this.cssDuration(e);return{transition:n===nJ.H_.RETURN_TO_START?"all ease-out 200ms":n===nJ.H_.STATIC?"unset":`all ${a}s ${r}`,top:25.5+45*t.top,left:80+80*t.left,opacity:t.opacity,border:0}}renderSimpleScreenToScreenAnimationPreview(e,t,n,r,a,o,s){return l.createElement("div",{className:"slides_animation_panel--previewPanel--0XANz transition_preview--previewPanel--Gp-aI",onMouseEnter:this.onMouseEnterNew,onMouseLeave:this.onMouseLeaveNew},l.createElement("div",{className:i()(e,n9),style:t},l.createElement("img",{src:this.props.belowThumbnailUrl,alt:"",className:nK.cx.relative.wFull.hFull.$})),l.createElement("div",{className:i()(n,n9),style:r},l.createElement("img",{src:this.props.aboveThumbnailUrl,alt:"",className:nK.cx.relative.wFull.hFull.$})),l.createElement("div",{className:"slides_animation_panel--screenContainer--6eR6r transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce"}),l.createElement("div",{className:"slides_animation_panel--screenBorder--G7ZdP transition_preview--screenBorder--Fz-dz transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--screenContainer--6eR6r transition_preview--screenContainer--iuLzq transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce slides_animation_panel--previewFrame--cO6cR transition_preview--previewFrame--WAa8e transition_preview--_previewItem--o2gce"}))}}var lT=n(648598),lw=n(978783),lI=n(623402),lN=n(531664),lk=n(555074);function lC(e){return l.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M2.486 5.142a1 1 0 0 0 0 1.715L4.39 8 2.486 9.142a1 1 0 0 0 0 1.715L6.97 13.55a2 2 0 0 0 2.058 0l4.486-2.692a1 1 0 0 0 0-1.715L11.61 8l1.905-1.143a1 1 0 0 0 0-1.715l-4.486-2.69a2 2 0 0 0-2.058 0l-4.486 2.69ZM9.665 8l.973-.583 1.39-.834L13 6l-.972-.583-3.514-2.108a1 1 0 0 0-1.028 0L3.972 5.417 3 6l.972.583 1.39.834.971.583 1.152.691a1 1 0 0 0 1.03 0L9.666 8Zm-4.304.583 1.609.966a2 2 0 0 0 2.058 0l1.61-.966 1.39.834L13 10l-.972.583-3.514 2.108a1 1 0 0 1-1.028 0l-3.514-2.108L3 10l.972-.583 1.39-.834Z",clipRule:"evenodd"}))}var lA=n(505113),lO=n(775664),lx=n(241691),lR=n(750029),lL=n(892109),lM=n(478655);let lD=l.forwardRef(function({isOpen:e,onMouseDown:t,children:n,recordingKey:r},a){return l.createElement(eS.GG,{forwardedRef:a,className:i()("slides_flyout_input--input--cM6kp ellipsis--ellipsis--Tjyfa",{"slides_flyout_input--selected--CgFEs":e}),onMouseDown:t,recordingKey:r},n,l.createElement(tF.O,null))});var lF=n(742934),lK=n(173915);let lV={type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1,blendMode:"NORMAL"};function lU({paint:e,onChange:t,inheritStyleKeyField:n,inheritStyleKey:r,inheritStyleName:a,pickerId:i,label:o,recordingKey:s,hideCustomColorPickerFillTypeToggle:c}){let p=(0,q.wA)(),d=(0,q.d4)(e=>e.pickerShown&&e.pickerShown.id===i?e.pickerShown:null),u=(0,l.useRef)(null),m=(0,q.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),h=()=>{m===U.m1T.GRADIENT&&V.Y5.triggerAction("leave-edit-mode"),p(I.XE())},_=e=>{if(d)h();else if(u.current){let{x:t,y:n}=(0,ep.cn)(u.current,e?lK.jP:nx.pg);p(I.u1({id:i,initialX:t,initialY:n}))}else console.error("rowRef.current is null")},[E]=(0,lk.lJ)("slidesDividedSwatchColors"),g=(0,q.d4)(e=>{let t=e.mirror.selectionProperties.fillPaints;return(0,G.gl)(t)?G.oV:null==t?void 0:t.length}),[v]=(0,lk.lJ)("imageOverlayPaint"),b=v&&(0,G.hS)(v),f=(0,G._W)(g,0)>(b?2:1),S=!(0,G.gl)(e)&&(null==e?void 0:e.type)&&(0,Y.bn)(e.type),P=(0,q.d4)(e=>(0,lx.b)(e,(0,G._W)(r,null),null)),w=(0,l.useMemo)(()=>(0,G.hS)(e)&&e&&e.color?[e.color]:Array.isArray(E)&&E.length>1?E:[{r:1,g:1,b:1,a:1}],[E,e]),N=(()=>{var t,n;if((0,G.gl)(e))return null;let l=null==(n=null==(t=null==e?void 0:e.colorVar)?void 0:t.value)?void 0:n.alias;return l?lM.dI(l):null})(),k=()=>(0,G.gl)(e)||(0,G.gl)(a)?(0,T.t)("fullscreen.mixed"):a||(f?(0,T.t)("slides.properties_panel.color_picker.multiple"):S?(0,T.t)("slides.properties_panel.fill.fill_type_gradient"):lO.TI.format(w[0])),C=l.createElement(nP.E,{name:"slides_color_input"},l.createElement(lD,{isOpen:!!d,onMouseDown:e=>{e.stopPropagation(),_(!!S)},recordingKey:s},l.createElement("span",{className:nK.cx.pl4.inlineFlex.gap6.overflowHidden.$},f?l.createElement(lC,null):P?l.createElement(t0.zi,{dsStyle:{...null==P?void 0:P.data,style_type:"FILL"},disableTooltip:!0}):l.createElement(lH,{colors:w,paint:e}),!a&&N?l.createElement(lB,{variableId:N,fallbackText:k()}):l.createElement(lA.o,{text:k()})))),A=(0,lF.PG)(t),O=(0,lF.o9)(n);return l.createElement(l.Fragment,null,o?l.createElement(lL.No,{ref:u,label:o,input:C}):l.createElement("span",{ref:u},C),d&&e&&(S?l.createElement(lK.Ph,{paint:e,onPaintChange:t,onColorVariableChange:A,onApplyStyle:O,onClose:h,initialPosition:new y.Mi(d.initialX,d.initialY),enableGradients:!0,recordingKey:"slidesCustomColorPicker",hideCustomColorPickerFillTypeToggle:c}):l.createElement(nx.GY,{paint:e,onChange:t,onClose:h,pickerShown:d,recordingKey:"slidesColorPicker",hideCustomColorPickerFillTypeToggle:c,inheritStyleKeyField:n})))}function lB({variableId:e,fallbackText:t}){let n=(0,nT.u)(e);return l.createElement(lA.o,{lastClassName:nK.cx.overflowHidden.noWrap.ellipsis.$,text:(null==n?void 0:n.name)??t})}function lH({colors:e,paint:t}){if(!(e.length>1))return l.createElement(lR.J,{className:nK.cx.w14.h14.bRadius2.$,paint:t??lV,allowMouseDownPropagation:!0});{let t={type:"SOLID",color:e[0],opacity:1,blendMode:"NORMAL"},n={type:"SOLID",color:e[1],opacity:1,blendMode:"NORMAL"};return l.createElement("div",{className:nK.cx.relative.w14.h14.$},l.createElement("span",{className:nK.cx.absolute.w14.h14.left0.top0.$,style:{clipPath:"polygon(0% 0%, 100% 0%, 0% 100%)"}},l.createElement(lR.J,{className:nK.cx.w14.h14.bRadius2.$,paint:t,allowMouseDownPropagation:!0})),l.createElement("span",{className:nK.cx.absolute.w14.h14.left0.top0.$,style:{clipPath:"polygon(0% 100%, 100% 100%, 100% 0%)"}},l.createElement(lR.J,{className:nK.cx.w14.h14.bRadius2.$,paint:n,allowMouseDownPropagation:!0})))}}var lG=n(902237);function lY({legend:e,value:t,onChange:n,recordingKey:r,children:a}){return l.createElement("div",{className:nK.cx.py4.pr8.pl16.$},l.createElement(lT.I.Root,{legend:l.createElement(lG.q,null,e),value:t,onChange:n,recordingKey:r},a))}var l$=n(26659),lW=n(344764);class lz extends nX.c${}let lX=[0,2,4,8,16,24],lQ=["NONE","SOLID","DASHED_BIG","DASHED_SMALL"],lZ=lQ.filter(e=>"NONE"!==e);function lJ({recordingKey:e}){let t=(0,q.wA)(),n=(0,t6.Um)(),{smallNudgeAmount:r,bigNudgeAmount:a}=(0,B.sT)(),[i,o]=(0,lk.lJ)("strokeWeight"),[s,c]=(0,lk.lJ)("dashPattern"),[p,d]=(0,lk.lJ)("strokePaints"),[m]=(0,lk.lJ)("inheritFillStyleKeyForStroke"),[h]=(0,lk.lJ)("inheritFillStyleNameForStroke"),_=p?(0,G.hS)(p)?p[0]:G.oV:void 0,E=(0,lk.kl)("numSelectedByType"),y=E&&(0,G.hS)(E)&&(0,L.Kl)(E,["LINE","TABLE","CONNECTOR"]),g=E&&(0,G.hS)(E)&&(0,L.vx)(E,"TABLE"),v=l.useMemo(()=>({NONE:{value:void 0,displayText:(0,T.t)("slides.properties_panel.border_panel.style_none"),icon:l.createElement(lw.t,null)},SOLID:{value:[],displayText:(0,T.t)("slides.properties_panel.border_panel.style_solid"),icon:l.createElement(lI.y,null)},DASHED_BIG:{value:[20,24],displayText:(0,T.t)("slides.properties_panel.border_panel.style_dashed_big"),icon:l.createElement(eP.B,{svg:l$.A,className:nK.cx.colorIconSecondary.$})},DASHED_SMALL:{value:[8,10],displayText:(0,T.t)("slides.properties_panel.border_panel.style_dashed_small"),icon:l.createElement(eP.B,{svg:lW.A,className:nK.cx.colorIconSecondary.$})}}),[]),[b,f]=l.useState(()=>S(s));function S(e){if(!(0,G.gl)(e))return e&&_?(0,lN.c2)(e,v.SOLID.value)?"SOLID":(0,lN.c2)(e,v.DASHED_BIG.value)?"DASHED_BIG":(0,lN.c2)(e,v.DASHED_SMALL.value)?"DASHED_SMALL":"NONE":"NONE"}return(0,tC.f4)(()=>{f(S(s))}),l.createElement(tw.p,{name:"slides_border_panel"},l.createElement(n4,null,l.createElement(nj.r,{titleTx:(0,T.tx)("slides.properties_panel.border_panel.title")}),l.createElement(lY,{legend:(0,T.tx)("slides.properties_panel.border_panel.style_title"),value:b,onChange:e=>{let t=v[e].value;("NONE"===b||(0,G.gl)(s))&&t&&V.Y5.triggerActionInUserEditScope("add-stroke-to-selection"),t?c(t):d([]),f(e)},recordingKey:u.Pt(e,"borderStyle")},(y?lZ:lQ).map(e=>l.createElement(lT.I.Option,{key:e,value:e,icon:v[e].icon,"data-onboarding-key":v[e].displayText,"aria-label":v[e].displayText}))),"NONE"!==b&&_&&l.createElement(n5.g,{leftLabel:(0,T.tx)("slides.properties_panel.border_panel.color"),leftInput:l.createElement(lU,{paint:_,onChange:e=>{d([e])},inheritStyleKeyField:"inheritFillStyleKeyForStroke",inheritStyleKey:m,inheritStyleName:h,pickerId:`${O.Yr}-border`,recordingKey:u.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!1}),rightLabel:(0,T.tx)("slides.properties_panel.border_panel.width_slider_tooltip"),rightInput:l.createElement(nP.E,{name:"slides_corner_radius_dropdown"},l.createElement(nY.ow,{value:{select:nQ.pW,inputComponent:nQ.gm}},l.createElement(nX.tV,{value:{chevron:nZ.c9}},l.createElement(nG.YZ,{id:"border-width-select",onValueChange:e=>{o(e)},value:void 0===i||(0,G.gl)(i)?G.oV:i,dropdownShown:n,willShowDropdown:()=>(V.Y5.commit(),Promise.resolve()),min:1,max:50,dispatch:t,recordingKey:u.Pt(e,"borderWidth"),smallNudgeAmount:r,bigNudgeAmount:a,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.border_panel.width_slider_tooltip"),tooltipForScreenReadersOnly:!0,enablePreview:!0},lX.map(t=>l.createElement(lz,{key:`border-width-${t}`,value:t,disabled:g,recordingKey:u.Pt(e,"borderWidth","select",t)},t))))))})))}var lj=n(106075),lq=n(784940),l0=n(595869);class l1 extends nX.c${}let l5=[0,8,16,24,32,64,96];class l4 extends nV.X9{format(e){return 1e6===e?"Circular":`${e}`}}function l3({recordingKey:e}){let t=(0,q.wA)(),n=(0,t6.Um)(),{smallNudgeAmount:r,bigNudgeAmount:a}=(0,B.sT)(),i=(0,l.useMemo)(()=>new l4({min:0,smallNudgeAmount:r,bigNudgeAmount:a}),[r,a]),[o,s]=(0,lk.lJ)("cornerRadius");if(!(0,lq.Qr)(U.Sqb.CORNER_RADIUS))return null;let c=void 0===o||(0,G.gl)(o)?G.oV:o,p=l.createElement(ea.U,{svg:l0.A},l.createElement(lj.a,null));return l.createElement(tw.p,{name:"slides_corner_panel"},l.createElement(n3,{titleTx:(0,T.tx)("slides.properties_panel.corner"),input:l.createElement(nP.E,{name:"slides_corner_radius_dropdown"},l.createElement(nY.ow,{value:{select:nQ.pW,inputComponent:nQ.gm}},l.createElement(nX.tV,{value:{chevron:nZ.c9}},l.createElement(nG.YZ,{id:"corner-radius-select",onValueChange:e=>{s(e)},value:c,icon:p,dropdownShown:n,willShowDropdown:()=>(V.Y5.commit(),Promise.resolve()),formatter:i,scrubbingDisabled:1e6===o,dispatch:t,recordingKey:u.Pt(e,"cornerRadius"),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.corner_radius"),tooltipForScreenReadersOnly:!1,enablePreview:!0},l5.map(t=>l.createElement(l1,{key:`corner-radius-${t}`,value:t,recordingKey:u.Pt(e,"cornerRadius","select",t)},t)),l.createElement(nX.sK,{key:"divider"}),l.createElement(l1,{key:"corner-radius-circular",value:1e6,recordingKey:u.Pt(e,"cornerRadius","select","circular")},(0,T.tx)("slides.properties_panel.corners_panel.circular"))))))}))}var l2=n(823223),l6=n(256296),l7=n(523099),l8=n(737947),l9=n(341860),re=n(934576),rt=n(276625);let rn="slides_flapp_prop_panel--panelSelectorRow--8JJYh";function rl({selection:e}){let t=(0,q.wA)(),n=(0,t6.Um)(),r=(0,l.useMemo)(()=>Object.keys(e),[e])[0],a=(0,tm.Fk)((e,t)=>{let n=e.get(t);return n?.interactiveSlideConfigData?n.interactiveSlideConfigData:void 0},r),i=(0,l.useMemo)(()=>(function(e){if(!e||!e.startingPointsData)return[];try{return JSON.parse(e.startingPointsData)}catch(e){return[]}})(a),[a]),o=(0,l.useMemo)(()=>new ri(i),[i]),s=(0,l.useCallback)(e=>{ew.l7.user("set_slides_embeddable_prototype_starting_point",()=>{let t=l9.q.instance;t.get(r)?.setInteractiveSlideConfigData("activeStartingPointNodeId",e)})},[r]),c=(0,l.useCallback)(e=>{ew.l7.user("set_slides_embeddable_prototype_show_device_frame",()=>{let t=l9.q.instance;t.get(r)?.setInteractiveSlideConfigData("deviceFrameShownOverride",e.toString())})},[r]);if(!a)return null;let p=a.activeStartingPointNodeId??"";return l.createElement(tw.p,{name:"slides_embeddable_prototype_panel"},l.createElement(eE.Zk,null,l.createElement(rr,{fileName:function(e){if(e.fileName)return e.pageName?`${e.fileName} - ${e.pageName}`:e.fileName}(a),baseUrl:a.url,activeStartingPointNodeId:a.activeStartingPointNodeId}),l.createElement("div",{className:rn},l.createElement("label",null,(0,T.tx)("slides.properties_panel.embeddable_prototype.flow_label")),l.createElement(nP.E,{name:"slide_embeddable_prototype_flow_selector"},l.createElement(nX.l6,{disabled:0===i.length,formatter:o,id:"slide-embeddable-prototype-flow-selector",property:p,onChange:e=>{s(e)},dispatch:t,dropdownShown:n},i.map(e=>l.createElement(nX.c$,{value:e.id,key:e.id}))))),void 0!==a.deviceFramePreset&&""!==a.deviceFramePreset?l.createElement(ra,{showDeviceFrame:(0,re.Wd)(a),onChange:c}):null))}function rr({fileName:e,baseUrl:t,activeStartingPointNodeId:n}){let r=(0,l.useCallback)(()=>{let e;if(t){try{e=new URL(t)}catch(e){return}n&&(0,rt.e)(e.searchParams,"starting-point-node-id",n),l8.Ay.redirect(e.toString(),"_blank")}},[t,n]);return l.createElement(nj.r,{titleTx:e?l.createElement("div",{className:nK.cx.textBodyMediumStrong.$},e):(0,T.tx)("slides.properties_panel.embeddable_prototype.default_title"),icon:l.createElement(ev.K,{"aria-label":(0,T.t)("slides.properties_panel.embeddable_prototype.open_prototype_label"),onClick:r,htmlAttributes:{"data-tooltip":(0,T.t)("slides.properties_panel.embeddable_prototype.open_prototype_label"),"data-tooltip-type":"text"}},l.createElement(l7.E,null))})}function ra({showDeviceFrame:e,onChange:t}){return l.createElement("div",{className:rn},l.createElement("label",null,(0,T.tx)("slides.properties_panel.embeddable_prototype.device_frame_label")),l.createElement(nP.E,{name:"slides_embeddable_prototype_device_frame_switch"},l.createElement(l2.d,{label:l.createElement(l6.h,null,(0,T.t)("slides.properties_panel.embeddable_prototype.device_frame_label")),checked:e,onChange:t})))}class ri{constructor(e){this.startingPointsData=e}format(e){return this.startingPointsData?.find(t=>t.id===e)?.name??""}}var ro=n(424928),rs=n(954625),rc=n(116226),rp=n(279702),rd=n(485463);function ru(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.5 8.5H9A3.5 3.5 0 0 0 5.5 12v0A3.5 3.5 0 0 0 9 15.5h.5m2-7-2-2m2 2-2 2m5-2h.5a3.5 3.5 0 0 1 3.5 3.5v0a3.5 3.5 0 0 1-3.5 3.5h-2.5m0 0 2-2m-2 2 2 2"}))}function rm(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9.854 6.146a.5.5 0 1 0-.708.708L10.293 8H9a4 4 0 0 0-2.857 6.8.5.5 0 1 0 .714-.7A3 3 0 0 1 9 9h1.293l-1.147 1.146a.5.5 0 0 0 .708.708l2-2a.5.5 0 0 0 0-.708l-2-2Zm8.003 3.055a.5.5 0 1 0-.714.7A3 3 0 0 1 15 15h-1.293l1.147-1.147a.5.5 0 0 0-.708-.708l-2 2a.5.5 0 0 0 0 .708l2 2a.5.5 0 0 0 .708-.708L13.707 16H15a4 4 0 0 0 2.857-6.8Z",clipRule:"evenodd"}),l.createElement("path",{stroke:"var(--color-icon)",strokeLinecap:"round",strokeLinejoin:"round",d:"m6.5 17.5 11-11"}))}var rh=n(43604),r_=n(978488),rE=n(30090),ry=n(278733),rg=n(931770),rv=n(53119),rb=n(186126),rf=n(527718),rS=n(172834),rP=n(671209),rT=n(407058),rw=n(306143),rI=n(617398);function rN({value:e,onValueChange:t,dispatch:n,dataTooltipType:r=ec.Ib.TEXT,dataTooltip:a,recordingKey:i}){return l.createElement(nG.w2,{"data-tooltip-type":r,"data-tooltip":a,value:e,onValueChange:t,dispatch:n,decimals:0,tooltipForScreenReadersOnly:!1,hidePercentSign:!0,childrenAtEnd:!0,inputClassName:nK.cx.w64.br0.$,recordingKey:i},l.createElement("span",{className:nK.cx.flex.w100.justifyEnd.pr4.eventsNone.colorTextSecondary.$},(0,T.tx)("fullscreen.scrubbable.percent")))}var rk=n(752256);function rC({value:e,min:t,max:n,step:r,bigStep:a,hints:i,onChange:o,ariaLabel:s,numberInput:c,sliderTrackableName:p,recordingKey:d}){return l.createElement("div",{className:"slides_slider_input_row--sliderInputRow--Z9EzC ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu"},l.createElement("div",{className:"slides_slider_input_row--slider--M8t1y"},l.createElement(nP.E,{name:p},l.createElement(rk.A,{min:t,max:n,step:r,bigStep:a,hints:i,rangeAnchor:t,mixed:(0,G.gl)(e),value:(0,G.hS)(e)?e:0,onChange:o,"aria-label":s,recordingKey:u.Pt(d,"slider")}))),l.createElement("div",{className:"slides_slider_input_row--input--E4qTs"},c))}var rA=n(676938);function rO({rowRef:e,recordingKey:t}){let[n,r]=l.useState(!1),[a,i]=l.useState(null),o=l.useCallback(()=>{n?r(!1):e.current&&(i((0,ep.cn)(e.current,240)),r(!0))},[n,e]),s=l.useRef(null),c=l.useRef(null);return(0,rA.Y)(()=>r(!1),{closeOnEsc:!0,ignore:[s,c]}),l.createElement(l.Fragment,null,l.createElement(nP.E,{name:"slides_blur_input"},l.createElement(lD,{isOpen:n,onMouseDown:o,ref:s,recordingKey:t},l.createElement("div",{className:nK.cx.inlineFlex.itemsCenter.$},l.createElement(rI.V,null),(0,T.tx)("slides.properties_panel.blur.label")))),n&&a&&l.createElement("div",{ref:c},l.createElement(ez.vx,{title:(0,T.t)("slides.properties_panel.blur.title"),headerSize:"small",initialPosition:a,initialWidth:240,onClose:()=>r(!1),autoflowHeight:!0,recordingKey:t},l.createElement("div",{className:nK.cx.py12.pr8.$},l.createElement(rx,{recordingKey:t})))))}function rx({recordingKey:e}){let t=(0,q.wA)(),[n,r]=(0,lk.lJ)("blur"),a=l.useCallback(e=>r(100*e),[r]);return l.createElement(tw.p,{name:"slides_blur_controls"},l.createElement(rC,{min:0,max:1,step:.01,bigStep:.1,value:(0,G.gl)(n)?G.oV:(n||0)/100,onChange:a,ariaLabel:(0,T.t)("slides.properties_panel.blur.strength"),numberInput:l.createElement(nP.E,{name:"slides_blur_strength_input"},l.createElement(rN,{dataTooltip:(0,T.t)("slides.properties_panel.blur.strength"),value:(0,G.gl)(n)?G.oV:(n||0)/100,onValueChange:a,dispatch:t,recordingKey:u.Pt(e,"blurStrength","input")})),sliderTrackableName:"slides_blur_strength_slider",recordingKey:u.Pt(e,"blurStrength")}))}var rR=n(227944);let rL=`${O.Yr}-overlay`,rM={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:.4,blendMode:"NORMAL",visible:!0};function rD({rowRef:e,recordingKey:t}){let[n,r]=l.useState(!1),[a,i]=l.useState(null),o=l.useCallback(()=>{n?r(!1):e.current&&(i((0,ep.cn)(e.current,240)),r(!0))},[n,e]),s=l.useRef(null),c=l.useRef(null);(0,rA.Y)(()=>r(!1),{closeOnEsc:!0,ignore:[s,c]});let p=(0,lk.kl)("imageOverlayPaint"),d=(0,G.E7)(p??null)||rM;return l.createElement(l.Fragment,null,l.createElement(nP.E,{name:"slides_overlay_input"},l.createElement(lD,{isOpen:n,onMouseDown:o,ref:s,recordingKey:t},l.createElement("span",{className:nK.cx.inlineFlex.gap6.pl4.ellipsis.noWrap.overflowHidden.$},l.createElement(lH,{paint:d,colors:[]}),(0,T.tx)("slides.properties_panel.overlay")))),n&&a&&l.createElement("div",{ref:c},l.createElement(ez.vx,{title:(0,T.t)("slides.properties_panel.overlay"),headerSize:"small",initialPosition:a,initialWidth:240,onClose:()=>r(!1),autoflowHeight:!0,recordingKey:t},l.createElement("div",{className:nK.cx.py12.pr8.$},l.createElement(rF,{recordingKey:t})))))}function rF({recordingKey:e}){let t=(0,q.wA)(),n=(0,rR.Zr)("add-image-overlay"),[r,a]=(0,lk.lJ)("imageOverlayPaint"),i=(0,G.gl)(r)||r&&n,o=e=>{(0,tv.KF)((0,G.hS)(r),"overlay paint should not be mixed");var t={...r||rM};t.opacity=e,a(t)};return l.createElement(tw.p,{name:"slides_overlay_controls"},l.createElement(rC,{min:0,max:1,step:.01,bigStep:.1,value:i?G.oV:r?.opacity||0,onChange:o,ariaLabel:(0,T.t)("slides.properties_panel.overlay.opacity_slider_aria_label"),numberInput:l.createElement(nP.E,{name:"slides_image_overlay_opacity_slider"},l.createElement(rN,{dataTooltip:(0,T.t)("fullscreen.scrubbable.opacity"),value:i?G.oV:r?.opacity||0,onValueChange:o,dispatch:t})),sliderTrackableName:"slides_image_overlay_opacity_slider",recordingKey:u.Pt(e,"opacity")}),l.createElement("div",{className:nK.cx.pt8.pb4.pr8.pl16.$},l.createElement(lU,{paint:i?G.oV:r||rM,onChange:e=>{(0,tv.KF)((0,G.hS)(r),"overlay paint should not be mixed");var t={...e};r&&e.color&&r.color&&lO.z5.format(e.color)!==lO.z5.format(r.color)&&(t.opacity=r.opacity),r||(t.opacity=.4),a(t)},pickerId:rL,inheritStyleKeyField:"inheritFillStyleKey",inheritStyleKey:void 0,inheritStyleName:void 0,recordingKey:u.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!1})))}var rK=n(99123);let rV="image-scale-mode-select";function rU({paint:e,paintIndex:t,onChange:n,recordingKey:r,selectedPropertyType:a}){let o=(0,q.wA)(),s=(0,l.useMemo)(()=>new nU.D,[]),c=(0,q.d4)(e=>e.dropdownShown?.type===rV?e.dropdownShown:null),[p,d]=(0,l.useState)(!1),[m,h]=(0,l.useState)(0),[_,E]=(0,l.useState)(0),[y,g]=(0,l.useState)(!1),[b,f]=(0,l.useState)(null),[S,P]=(0,l.useState)(!1),[w,I]=(0,l.useState)(!1),[N,k]=(0,l.useState)(0),[C,A]=(0,l.useState)(null),[O,x]=(0,l.useState)(null),R=(0,Y.y7)(e),L=(0,l.useRef)(R);L.current=R;let M=(0,tA.tS)(),D=!!e?.animatedImage,F=!!e?.video||e?.type==="VIDEO";(0,l.useEffect)(()=>{D&&L.current?.animationFrame!=null?(k(L.current.animationFrame),(0,rT.Bc)(L.current).then(e=>{A((0,rv.J)(e))})):F&&(0,rE.Fe)().then(e=>f(e))},[F,D,R?.animatedImage?.hash]);let K=function(){let e=(0,lk.kl)("videoMediaLoop");return{mediaLoop:e,autoplay:(0,lk.kl)("videoAutoplay"),muted:(0,lk.kl)("videoMuted"),numVideosSelected:(0,lk.kl)("numVideosSelected")}}();return e?l.createElement("div",null,l.createElement(v.Y,{isDragTarget:()=>!0,onTargetDragEnter:()=>(d(!0),u.aH),onTargetDragLeave:()=>(d(!1),u.aH),onTargetDrop:n=>{if(d(!1),V.Y5.fileArrayToString){let l=V.Y5.fileArrayToString(Array.from(n.files));U.glU.dropImageOnPaintThumbnail(e?.blendMode??"NORMAL",e?.opacity??1,l,t,a)}},recordingKey:u.Pt(r,"imageDragTarget")},l.createElement("div",{className:i()(nK.cx.relative.wAuto.h100.flex.itemsCenter.justifyCenter.radiusMedium.$,rK.xm,{[nK.cx.colorBorderSelected.bSolid.b1.$]:p})},R&&F?l.createElement(rS.A,{imagePaint:R,openFileKey:M||void 0,width:200,height:100,className:nK.cx.opacity1.block.$,currentTime:m,onUpdateCurrentTime:e=>h(e),setDuration:e=>E(e),playing:y,setPlaying:e=>g(e),videoJsLib:b,isVideoLoaded:S,setIsVideoLoaded:e=>P(e),userClickedControls:w,setUserClickedControls:e=>I(e)}):R&&D?l.createElement(rb.Y,{imagePaint:R,width:200,height:100,animatedImage:C,animationFrame:N,onUpdateFrameData:e=>x(e),playing:y}):R?l.createElement(rf.K,{imagePaint:R,width:200,height:100,forceUpdate:!1}):null,l.createElement("div",{className:i()(nK.cx.absolute.top0.bottom0.left0.right0.flex.itemsCenter.justifyCenter.$,rK.CL)},l.createElement(nP.E,{name:"slides_media_upload"},l.createElement(eE.rp,{onClick:()=>{V.Y5.updateAppModel({currentSelectedProperty:{type:U.rrT.FILL,indices:[t]}});let n=e.blendMode||"NORMAL",l=e.opacity||1;U.glU.uploadPaintMedia(n,l)},style:ry.sx.wAuto.py4.px8.$,recordingKey:u.Pt(r,"uploadMedia")},(0,T.tx)("slides.properties_panel.replace_media")))))),l.createElement(eg.Ad,{label:null,input:l.createElement(nP.E,{name:"slides_image_scale_mode"},l.createElement(nX.l6,{id:rV,property:e.imageScaleMode??"FILL",onChange:t=>{"STRETCH"===t?V.Y5.triggerActionInUserEditScope("crop-image"):n({...e,imageScaleMode:t})},formatter:s,dispatch:o,dropdownShown:c,targetDomNode:document.body,inputWidth:80,recordingKey:u.Pt(r,"imageScaleMode")},rT.GA.map((e,t)=>l.createElement(nX.c$,{key:t,value:e,recordingKey:u.Pt(r,"imageScaleMode",e)}))))}),l.createElement(rH,{recordingKey:r}),F&&l.createElement(l.Fragment,null,l.createElement("div",{className:rK.iS},l.createElement(rw.P,{paint:e,currentTime:m||0,duration:_,onVideoTimeChange:e=>{h(e),g(!1)},disabled:!e.video,isVideoLoaded:S,setPlaying:e=>g(e),playing:!!e.video&&y,setUserClickedControls:e=>I(e)})),l.createElement("div",{className:nK.cx.pl16.pr8.flex.minH32.itemsCenter.$},l.createElement("div",{className:nK.cx.flex1.$},l.createElement(rd.S,{label:l.createElement(l6.J,{"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.default_video_playback_state")},(0,T.tx)("proto.prototype_panel.autoplay")),onChange:e=>V.Y5.updateSelectionProperties({videoAutoplay:e}),checked:!0===K.autoplay,mixed:(0,G.gl)(K.autoplay)})),l.createElement(rB,{icon:!0===K.mediaLoop?l.createElement(ru,{color:"var(--color-border-selected)"}):l.createElement(rm,null),enabled:!0===K.mediaLoop,onClick:()=>V.Y5.updateSelectionProperties({videoMediaLoop:!K.mediaLoop}),recordingKey:u.Pt(r,"videoLoopToggle"),tooltip:(0,T.t)("proto.prototype_panel.loop"),trackingName:"slides_video_loop_toggle"}),l.createElement(rB,{icon:!0!==K.muted?l.createElement(rh.L,{color:"var(--color-border-selected)"}):l.createElement(r_.P,null),enabled:!0!==K.muted,onClick:()=>V.Y5.updateSelectionProperties({videoMuted:!K.muted}),recordingKey:u.Pt(r,"videoSoundToggle"),tooltip:(0,T.t)("proto.prototype_panel.sound"),trackingName:"slides_video_sound_toggle"}))),D&&l.createElement("div",{className:rK.iS},l.createElement(rP.F,{paint:e,animationFrame:N,numFrames:C?C.numFrames():null,onGIFFrameChange:e=>{k(Math.round(e)),g(!1)},disabled:!C,setPlaying:e=>g(e),playing:!!C&&y,setGIFCoverFrame:t=>{if(!O)return;let n=t??N;(null!=t||n!==e.animationFrame)&&(V.Y5.triggerAction("toggle-raster-edit-mode"),ew.l7.user("update-gif-image-slides",()=>(0,rg.SK)({...e,animationFrame:n},O.data,U.rrT.FILL)),U.glU.setDefaultEditMode())}}))):null}function rB({enabled:e,onClick:t,icon:n,tooltip:r,trackingName:a,recordingKey:o}){return l.createElement(nP.E,{name:a},l.createElement(eS.GG,{className:i()(rK.BE,{[rK.Sn]:e}),onClick:t,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":r,"aria-label":r,recordingKey:o},n))}function rH({recordingKey:e}){let t=(0,l.useRef)(null);return l.createElement(n5.g,{ref:t,leftLabel:null,leftInput:l.createElement(rD,{rowRef:t,recordingKey:u.Pt(e,"overlay")}),rightLabel:null,rightInput:l.createElement(rO,{rowRef:t,recordingKey:u.Pt(e,"blur")})})}let rG=`${O.Yr}-fill`,rY=["NONE","SOLID","GRADIENT","MEDIA"],r$={SOLID:"SOLID",GRADIENT:"GRADIENT_LINEAR",MEDIA:"IMAGE"};function rW({recordingKey:e}){let t=(0,q.d4)(e=>e.mirror.selectionProperties.numSelectedByType),n=!!t&&(0,L.OU)(t,["SLIDE"]),r=t&&(0,L.Kl)(t,["SLIDE","TEXT"]),[a]=(0,lk.lJ)("fillsType"),i=(0,q.d4)(e=>{let t=e.mirror.selectionProperties.fillPaints;return(0,G.gl)(t)?G.oV:t?.[0]}),[o]=(0,lk.lJ)("imageOverlayPaint"),[s]=(0,lk.lJ)("inheritFillStyleKey"),[c]=(0,lk.lJ)("inheritFillStyleName"),p=l.useMemo(()=>({NONE:{displayText:(0,T.t)("slides.properties_panel.fill.fill_type_none"),icon:l.createElement(ef.f,null)},SOLID:{displayText:(0,T.t)("slides.properties_panel.fill.fill_type_solid"),icon:l.createElement(ro.H,null)},GRADIENT:{displayText:(0,T.t)("slides.properties_panel.fill.fill_type_gradient"),icon:l.createElement(rs.z,null)},MEDIA:{displayText:(0,T.t)("slides.properties_panel.fill.fill_type_media"),icon:l.createElement(rc.Z,null)}}),[]),d=l.useCallback((e,t)=>{Y.Tm.clearCache();let n=[e];o&&(0,G.hS)(o)&&n.push(o),V.Y5.updateSelectionProperties({fillPaints:n},{shouldCommit:t})},[o]),m=l.useCallback(e=>(0,G.gl)(e)?void 0:e?"RASTER"===e||o&&(0,G.hS)(o)?"MEDIA":e:r?"SOLID":"NONE",[r,o]),[h,_]=l.useState(m(a));l.useEffect(()=>{_(m(a))},[a,i,m]);let E=l.useCallback(e=>{h!==e&&("NONE"===e?V.Y5.updateSelectionProperties({fillPaints:[]}):r$[e]&&d(Y.Tm.initPaint(r$[e],lK.li.color,(0,G._W)(i,{}),"slides-fill-panel"),rp.zk.YES),_(e))},[i,d,h]);(0,tC.f4)(()=>{_(m(a))});let y=h&&(0,G.hS)(a)&&("SOLID"===h||"GRADIENT"===h),g=h&&(0,G.hS)(a)&&i&&(0,G.hS)(i)&&"MEDIA"===h;return l.createElement(tw.p,{name:"slides_fill_panel"},l.createElement(n4,null,l.createElement(nj.r,{titleTx:(()=>{if(t){if(n)return(0,T.tx)("slides.properties_panel.fill.slide_fill_title");if((0,L.OU)(t,["TEXT"]))return(0,T.tx)("slides.properties_panel.fill.text_fill_title")}return(0,T.tx)("slides.properties_panel.fill.fill_title")})()}),l.createElement(lY,{legend:(0,T.tx)("slides.properties_panel.fill.type_label"),value:h,onChange:E,recordingKey:u.Pt(e,"fillType")},rY.filter(e=>!(r&&"NONE"===e)).map(e=>l.createElement(lT.I.Option,{key:e,value:e,icon:p[e].icon,"data-onboarding-key":p[e].displayText,"aria-label":p[e].displayText}))),y&&l.createElement("div",{className:nK.cx.py4.pr8.pl16.$},l.createElement(lU,{paint:i,onChange:d,inheritStyleKeyField:"inheritFillStyleKey",inheritStyleName:c,inheritStyleKey:s,pickerId:rG,recordingKey:u.Pt(e,"color"),hideCustomColorPickerFillTypeToggle:!0})),g&&l.createElement(rU,{paint:i,paintIndex:0,onChange:d,recordingKey:e,selectedPropertyType:U.rrT.FILL})))}var rz=n(234945),rX=n(690122),rQ=n(721478),rZ=n(371623),rJ=n(687881);let rj=l.memo(function({recordingKey:e}){let t=(0,q.d4)(rz.qd),n=(0,q.d4)(rz.dT),r=(0,q.d4)(eN.Z3),a=(0,G.E7)((0,lk.kl)("resettableInstanceOverrides")),{onlyInstances:i,onlyInstanceSublayers:o}=(0,rX.p)(n);return i||o?l.createElement(eE.Zk,{className:rJ.Mx},i&&l.createElement("div",{className:rJ.Og},l.createElement(eI.e6,{containerWidth:eW.O2.RESIZABLE_SIDEBAR,propDimension:eW.OE.ASSIGNMENT,guids:t,recordingKey:e,enableHidingOverflowRowsInUI3:!0,hideIcon:!0,entrypointForInstanceSwapPicker:rZ.S.InstancePickerEntrypoint.INSTANCE_SWAP_PROP_INSTANCE_PANEL})),r.map(t=>l.createElement("div",{key:`bubbledInstance.${t[0]}`,className:rJ.Wf},l.createElement(eI.ME,{containerWidth:eW.O2.RESIZABLE_SIDEBAR,propDimension:eW.OE.ASSIGNMENT,guids:t,hideErrors:!0,resettableInstanceOverrides:a&&a.bubbledInstanceOverrides?a.bubbledInstanceOverrides[t[0]]:void 0,instanceAndSublayerGUIDs:t,instanceNameDisplayOverride:rQ.NA.NAME_ONLY,shouldHideInstanceTitleButtons:!0,hideIcon:!0,recordingKey:e,forBubbledProps:!0,highlightNodesOnHover:!0,entrypointForInstanceSwapPicker:rZ.S.InstancePickerEntrypoint.INSTANCE_SWAP_PROP_INSTANCE_PANEL_BUBBLED})))):l.createElement(eE.Zk,{className:rJ.Mx})});var rq=n(992739),r0=n(447636);function r1({selection:e}){let t=(0,l.useMemo)(()=>Object.keys(e),[e]),n=t[0],r=(0,tm.Fk)((e,t)=>(function(e){let t;if(!e)return;let n=e.interactiveSlideElementType;if(null===n||n===U.a9h.EMBED)return;switch(n){case U.a9h.POLL:t=(0,T.t)("slides.flapp.embed.widget_poll");break;case U.a9h.FACEPILE:t=(0,T.t)("slides.flapp.embed.widget_stamps");break;case U.a9h.ALIGNMENT:t=(0,T.t)("slides.flapp.embed.widget_alignment");break;case U.a9h.YOUTUBE:t=(0,T.t)("slides.flapp.embed.widget_youtube")}let l=Object.keys(e.interactiveSlideParticipantData).length>0,r=e.interactiveSlideConfigData,a=(0,r0.aF)(r);return{displayName:t,currentTheme:a.theme,hasParticipantData:l,shouldShowBackground:!a.transparentMode}})(e.get(t)),n),a=(0,l.useCallback)(()=>{ew.l7.user("reset_slides_interactive_widget_participant_data",()=>{let e=l9.q.instance;e.get(n)?.resetInteractiveSlideParticipantData()})},[n]),i=(0,l.useCallback)(e=>{ew.l7.user("set_interactive_widget_theme",()=>{let t=l9.q.instance;t.get(n)?.setInteractiveSlideConfigData("theme",e)})},[n]),o=(0,l.useCallback)(e=>{ew.l7.user("set_interactive_widget_hide_background",()=>{let t=l9.q.instance;t.get(n)?.setInteractiveSlideConfigData("hideBackground",(!e).toString())})},[n]);return!r||t.length>1?null:l.createElement(tw.p,{name:"slides_interactive_widget_panel"},l.createElement(eE.Zk,null,l.createElement(nj.r,{titleTx:l.createElement("p",{className:nK.cx.textBodyMediumStrong.$},r.displayName),icon:l.createElement(r4,{canReset:r.hasParticipantData,onReset:a})}),l.createElement(r2,{currentTheme:r.currentTheme,onThemeSelected:i}),l.createElement(r7,{showBackground:r.shouldShowBackground,onChange:o}),l.createElement(r5,null)))}function r5(){return l.createElement("div",{className:nK.cx.p8.$},l.createElement("div",{className:nK.cx.colorBgSecondary.radiusMedium.p8.$},l.createElement("div",{className:nK.cx.textBodyMediumStrong.colorText.pb4.$},(0,T.tx)("slides.properties_panel.interactive_widget.usage_guidance_header")),l.createElement("div",{className:nK.cx.textBodyMedium.colorTextTertiary.$},(0,T.tx)("slides.properties_panel.interactive_widget.usage_guidance_text"))))}function r4({canReset:e,onReset:t}){let{showing:n,toggle:r}=(0,t6.BK)("RESET_INTERACTIVE_WIDGET_ICON_DROPDOWN_ID"),a=(0,l.useRef)(null);return l.createElement(l.Fragment,null,l.createElement(ev.K,{"aria-label":(0,T.t)("slides.properties_panel.interactive_widget.reset_label"),disabled:!e,onClick:()=>r(),ref:a},l.createElement(rq.m,null)),n&&a.current&&l.createElement(eu.Cf,{targetRect:a.current.getBoundingClientRect(),displayOverTarget:!0},l.createElement(er.c$,{disabled:!0},(0,T.tx)("slides.properties_panel.interactive_widget.reset_confirmation_title")),l.createElement(er.c$,{onClick:t},(0,T.tx)("slides.properties_panel.interactive_widget.confirm_reset_label"))))}let r3="flappThemeSelector";function r2({currentTheme:e,onThemeSelected:t}){let n=(0,q.wA)(),r=(0,t6.Um)();return l.createElement("div",{className:rn},l.createElement("label",null,(0,T.tx)("slides.properties_panel.interactive_widget.theme_selector_label")),l.createElement(nP.E,{name:"slides_interactive_widget_theme_selector"},l.createElement(nX.l6,{id:"slides-interactive-widget-theme-selector",formatter:r6,property:e,onChange:t,dispatch:n,dropdownShown:r,recordingKey:r3},l.createElement(nX.c$,{value:r0.Pm.Light,key:r0.Pm.Light,recordingKey:u.Pt(r3,"lightOption")}),l.createElement(nX.c$,{value:r0.Pm.Dark,key:r0.Pm.Dark,recordingKey:u.Pt(r3,"darkOption")}))))}let r6=new class{format(e){switch(e){case r0.Pm.Light:return(0,T.t)("slides.properties_panel.interactive_widget.light_theme_label");case r0.Pm.Dark:return(0,T.t)("slides.properties_panel.interactive_widget.dark_theme_label");case r0.Pm.Translucent:return(0,T.t)("slides.properties_panel.interactive_widget.transparent_theme_label")}}};function r7({showBackground:e,onChange:t}){return l.createElement("div",{className:rn},l.createElement("label",null,(0,T.tx)("slides.properties_panel.interactive_widget.background_label")),l.createElement(nP.E,{name:"slides_interactive_widget_background_switch"},l.createElement(l2.d,{label:l.createElement(l6.h,null,(0,T.t)("slides.properties_panel.interactive_widget.background_label")),checked:e,onChange:t,recordingKey:"flappBackgroundToggle"})))}var r8=n(334495);let r9=/^\w+:/;function ae({recordingKey:e}){let t=(0,q.wA)(),n=(0,t6.Um)(),[r,a]=(0,lk.lJ)("hyperlink"),i=(0,G.E7)(r),o=null;i&&void 0!==i.guid?o={type:"guid",guid:i.guid}:i&&void 0!==i.url?o={type:"url",url:i.url}:(0,G.gl)(r)&&(o=G.oV);let s=(0,nH.J2)(U.Ez5.slideDeck().slideGrid),c=(0,n1.rY)(s),p=l.useMemo(()=>c.reduce((e,t,n)=>(e.set(t,n),e),new Map),[c]),d=l.useMemo(()=>({format:e=>{if(null===e)return"";if((0,G.gl)(e))return(0,T.t)("fullscreen.mixed");if("guid"===e.type){let t=(0,P.dI)(e.guid),n=p.get(t);return void 0===n?"":(0,T.t)("slides.properties_panel.link_panel.slide_number",{orderNum:n+1})}return"url"===e.type?e.url:""},parse:e=>{if(!e)return null;let t=(0,T.t)("slides.properties_panel.link_panel.slide_number",{orderNum:""}),n=e.replace(t,"").trim();if(n.length>0){let e=parseInt(n)-1,t=(0,P.sH)(c[e]);if(t)return{type:"guid",guid:t}}return{type:"url",url:e}},isEqual:(e,t)=>(0,lN.c2)(e,t)}),[p,c]),m=ew.nc.user("slides-link-change",l.useCallback(e=>{null===e?a({},rp.zk.YES):"guid"===e.type?a({guid:e.guid},rp.zk.YES):"url"===e.type&&a({url:e.url.match(r9)?e.url:`https://${e.url}`},rp.zk.YES),U.glU.hideHyperlinkEditor()},[a]));return l.createElement(tw.p,{name:"slides_link_panel"},l.createElement(n4,null,l.createElement(nj.r,{titleTx:(0,T.tx)("slides.properties_panel.link_panel.title")}),l.createElement(eg.Ad,{input:l.createElement(nY.ow,{value:{select:nQ.pW,inputComponent:nQ.gm}},l.createElement(nX.tV,{value:{chevron:nZ.c9}},l.createElement(nY.a3,{id:"slides-link-combo-box",dispatch:t,inputClassName:r8.lb,dropdownShown:n,formatter:d,property:o,onChange:e=>{m(e)},placeholder:(0,T.t)("slides.properties_panel.link_panel.placeholder"),forceInputPlaceholder:null===o,recordingKey:u.Pt(e,"link")},c.map(t=>l.createElement(nX.c$,{value:{type:"guid",guid:(0,P.sH)(t)},key:t,recordingKey:u.Pt(e,t)}))))),label:null})))}var at=n(668e3);class an extends nX.c${}class al extends nV.LN{isEqual(e,t){return 1e-5>Math.abs(e-t)}}let ar=[.1,.3,.5,.8,1];function aa({recordingKey:e}){let t=(0,q.wA)(),n=(0,t6.Um)(),[r,a]=(0,lk.lJ)("opacity"),i=new al,o=void 0===r||(0,G.gl)(r)?G.oV:r,s=l.createElement(ea.U,{svg:l0.A},l.createElement(at.N,null));return l.createElement(tw.p,{name:"slides_opacity_panel"},l.createElement(n3,{titleTx:(0,T.tx)("slides.properties_panel.opacity"),input:l.createElement(nP.E,{name:"slides_opacity_dropdown"},l.createElement(nY.ow,{value:{select:nQ.pW,inputComponent:nQ.gm}},l.createElement(nX.tV,{value:{chevron:nZ.c9}},l.createElement(nG.xW,{id:"opacity-select",onValueChange:e=>{a(e)},value:o,icon:s,dropdownShown:n,min:0,max:1,willShowDropdown:()=>(V.Y5.commit(),Promise.resolve()),formatter:i,dispatch:t,recordingKey:u.Pt(e,"opacity"),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.opacity"),tooltipForScreenReadersOnly:!1,enablePreview:!0},ar.map(t=>l.createElement(an,{key:`opacity-${t}`,value:t,recordingKey:u.Pt(e,"opacity","select",t)},i.format(t)))))))}))}function ai(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("rect",{width:"8",height:"8",x:"7.5",y:"7.5",stroke:"var(--color-icon)",rx:"1"}),l.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M8.064 15.936A1.5 1.5 0 0 0 9.5 17h6a1.5 1.5 0 0 0 1.5-1.5v-6a1.5 1.5 0 0 0-1.064-1.436A1.5 1.5 0 0 1 16 8.5v6a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-.436-.064Z",clipRule:"evenodd"}))}function ao(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("rect",{width:"8",height:"8",x:"7.5",y:"7.5",stroke:"var(--color-icon)",rx:"1"}),l.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M9 16v.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 16.5 9H16v5.5a1.5 1.5 0 0 1-1.5 1.5H9Z",clipRule:"evenodd"}))}function as(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("rect",{width:"8",height:"8",x:"6.5",y:"6.5",stroke:"var(--color-icon)",rx:"1"}),l.createElement("path",{fill:"var(--color-icon-tertiary)",fillRule:"evenodd",d:"M9 15v1.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5v-6A1.5 1.5 0 0 0 16.5 9H15v4.5a1.5 1.5 0 0 1-1.5 1.5H9Z",clipRule:"evenodd"}))}let ac=["NONE","LIGHT","MEDIUM","STRONG"];function ap({recordingKey:e}){let t=(0,q.wA)(),[n,r]=(0,lk.lJ)("shadow"),a=l.useMemo(()=>({NONE:{value:null,displayText:(0,T.t)("slides.properties_panel.shadow_style_none"),icon:l.createElement(ef.f,null)},LIGHT:{value:{radius:3,x:0,y:1},displayText:(0,T.t)("slides.properties_panel.shadow_style_light"),icon:l.createElement(ai,null)},MEDIUM:{value:{radius:16,x:0,y:5},displayText:(0,T.t)("slides.properties_panel.shadow_style_medium"),icon:l.createElement(ao,null)},STRONG:{value:{radius:40,x:0,y:10},displayText:(0,T.t)("slides.properties_panel.shadow_style_strong"),icon:l.createElement(as,null)}}),[]),[i,o]=l.useState(()=>s(n));function s(e){if(!(0,G.gl)(e))return e?ad(e,a.LIGHT.value)?"LIGHT":ad(e,a.MEDIUM.value)?"MEDIUM":ad(e,a.STRONG.value)?"STRONG":"NONE":"NONE"}let c=e=>{(0,G.hS)(n)&&n&&r({...n,opacity:e})};return(0,tC.f4)(()=>{o(s(n))}),l.createElement(tw.p,{name:"slides_shadow_panel"},l.createElement(n4,null,l.createElement(nj.r,{titleTx:(0,T.tx)("slides.properties_panel.shadow")}),l.createElement(lY,{legend:(0,T.tx)("slides.properties_panel.shadow_style"),value:i,onChange:e=>{let t=a[e].value,l=(0,G.hS)(n)&&n?.opacity||.25;r(t?{offset:{x:t.x,y:t.y},radius:t.radius,spread:0,opacity:l}:null,rp.zk.YES),o(e)},recordingKey:u.Pt(e,"shadowStyle")},ac.map(e=>l.createElement(lT.I.Option,{key:e,value:e,icon:a[e].icon,"data-onboarding-key":a[e].displayText,"aria-label":a[e].displayText}))),!!n&&l.createElement(rC,{value:(0,G.gl)(n)?G.oV:n?.opacity??0,min:0,max:1,step:.01,bigStep:.1,onChange:c,ariaLabel:(0,T.t)("slides.properties_panel.shadow_opacity"),numberInput:l.createElement(nP.E,{name:"slides_shadow_opacity_input"},l.createElement(rN,{dataTooltip:(0,T.t)("slides.properties_panel.shadow_opacity"),value:(0,G.gl)(n)?G.oV:n?.opacity??0,onValueChange:c,recordingKey:u.Pt(e,"shadowOpacity","input"),dispatch:t})),sliderTrackableName:"slides_shadow_opacity_slider",recordingKey:u.Pt(e,"shadowOpacity")})))}function ad(e,t){return e.radius===t?.radius&&e.offset.x===t?.x&&e.offset.y===t?.y}var au=n(966981),am=n(392592),ah=n(179243),a_=n(50127);function aE({}){let e=(0,q.wA)(),t=(0,ta.$)(),{Sprig:n}=(0,au.A)(),r=(0,tA.tS)(),a=(0,nq.l5)(),i=l.useCallback((l,i)=>ew.l7.user("swap-slide-theme",()=>{let o=(0,ah.Dh)(l);if(!o)return;let s=new Set(o.variableIDs);i&&(i=i.filter(e=>s.has(e)));let c=U.Ez5.slideThemeLibBindings().swapSelectedSlidesToNewTheme(l,i||[]);c===U.qYO.NO_THEME_COLORS?e(am.F.enqueue({message:(0,T.t)("slides.properties_panel.theme.shuffle_no_change_visual_bell")})):c===U.qYO.NONE_AVAILABLE&&e(am.F.enqueue({message:(0,T.t)("slides.properties_panel.theme.no_swap_available")})),r&&tg.az.trackDefinedEvent("slides.editor.theme_swap",{fromThemeId:t,toThemeId:l,fileKey:r,slideIds:a.join(",")}),V.Y5.triggerAction("commit"),n("track","swap_slide_theme")}),[e,n,t,r,a]);return l.createElement(tw.p,{name:"slides_theme_panel"},l.createElement(eE.Zk,null,l.createElement(nj.r,{titleTx:(0,T.tx)("slides.properties_panel.theme.panel_title")}),l.createElement("div",{className:nK.cx.grid.px16.$},l.createElement(a_.n,{pickerKey:"theme-swap-picker",selectedThemeId:t,onChange:i,allowShuffle:!0,allowEditTheme:!!(0,s.kc)().piper_rename_theme}))))}var ay=n(993086),ag=n(923793),av=n(226129),ab=n(343427),af=n(794272),aS=n(860601),aP=n(75540),aT=n(238093),aw=n(282647),aI=n(872442),aN=n(688998),ak=n(599677),aC=n(231139),aA=n(937348),aO=n(304022),ax=n(176019),aR=n(564092),aL=n(533573),aM=n(841983),aD=n(326331),aF=n(646240),aK=n(374626),aV=n(877432),aU=n(632430),aB=n(407182),aH=n(559681),aG=n(352046),aY=n(175290),a$=n(83909),aW=n(311206);let az=(0,o.hG)(tU.wQn);function aX({selectedStyleProperties:e,styleName:t,styleNameInputPrefix:n,isInspectPanel:r,viewOnly:a,recordingKey:i,showProperties:o=!0,showStylePreview:s=!1,onEnterPressed:c}){return l.createElement(aY.Y,{direction:"vertical",spacing:0,height:"hug-contents"},s&&l.createElement(tl.we,{selectedStyleProperties:e}),l.createElement(b.P,{maxHeight:300,width:az},l.createElement(aQ,{styleName:t,styleNameInputPrefix:n,selectedStyleProperties:e,isInspectPanel:r,viewOnly:a,recordingKey:i,onEnterPressed:c}),o&&(r?l.createElement(aW.U,{recordingKey:u.Pt(i,"inspectionPanel"),inStyleModal:!0}):l.createElement(tl.RO,{selectedStyleProperties:e,recordingKey:i}))))}function aQ({selectedStyleProperties:e,styleName:t,styleNameInputPrefix:n,recordingKey:r,viewOnly:a,onEnterPressed:i}){let[s,p]=l.useState((n??"")+(t?(0,tO.kH)(t):"")),d=(0,q.wA)(),m=e.guid,h=e.styleType,_=l.useRef(null),E=l.useContext(to.zK),y=u.of(u.Pt(r,"styleName"),"submit",()=>{if(""===s)return;let n=t?(0,tO.In)(t):void 0,l=n?n+"/"+s:s;ew.l7.user("rename-style",()=>U.glU.renameNode((0,P.dI)(m),(0,tq.J_)(l))),V.Y5.triggerAction("commit"),g(),(0,tg.sx)("Style Renamed",{styleType:e.styleType})}),g=()=>{d(tI.ay({isRenaming:!1}))},v=u.v_(r,"keydown",e=>{if(e.keyCode===c.Uz.TAB)y();else if(e.keyCode===c.Uz.ENTER)y(),E===to.zM.EDIT_STYLE&&""===s||null==i||i();else{if(e.keyCode!==c.Uz.ESCAPE)return u.aH;(0,j.flushSync)(()=>{p(t?(0,tO.kH)(t):"")}),g();let n=j.findDOMNode(_.current);n&&n.blur()}});return l.createElement("div",{className:nK.cx.flex.flexColumn.gap8.pl16.pr16.pt8.pb8.bb1.bSolid.colorBorder.$},l.createElement(eE.JU,{disabled:a},(0,T.tx)("design_systems.create_style.name")),a?l.createElement(aY.Y,{padding:{vertical:(0,o.hG)(tU.dGl)},width:"hug-contents",height:"hug-contents",verticalAlignItems:"start"},t):l.createElement(eE.ks,{ref:_,className:"slides_styles_properties_form--textInput--H1F0- raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",name:"styleName",value:s,placeholder:(0,tl.Qv)(h),onFocus:()=>(d(tI.ay({isRenaming:!0})),p(s),u.aH),onBlur:y,onChange:e=>{let n=e.target.value;p(n),t!==n&&a$.wt.reportEditAction("style-rename")},onKeyDown:v,recordingKey:u.Pt(r,"styleName"),delay:50,autoFocus:!0,autoComplete:"off"}))}function aZ({closePicker:e,recordingKey:t}){let n=(0,ta.$)(),r=(0,q.d4)(e=>e.stylePreviewShown),a=(0,q.wA)(),i=(0,q.d4)(e=>e.mirror.selectedStyleProperties),o=(0,q.d4)(e=>e.mirror.sceneGraphSelection),s=l.useRef(Object.keys(o).length>0),[c,p]=l.useState(!s.current&&void 0),{styleType:d,inheritStyleKeyField:m,styleNameInputPrefix:h}=r,{styleRef:_,createStyle:E}=(0,tn.u)({inheritStyleKeyField:m,isCreatingFromSelection:s.current,trackingOptions:{styleType:d}}),g=u.of(u.Pt("createStyleModal"),"submit",()=>{let t=E();a(I.XE()),a(I.Uv()),a(k.sw()),U.Ez5.slideThemeLibBindings().addStyleToLocalTheme(t||"",n),e()});if(!r.isShown||!r.isCreating)return null;let v=new y.Mi(r.rowLeft-300,r.rowTop);return l.createElement(to.zK.Provider,{value:to.zM.CREATE_STYLE},l.createElement(ez.vx,{title:(0,T.t)("design_systems.create_style.text"),headerSize:"small",initialWidth:300,initialPosition:v,onClose:()=>{a(k.sw())},recordingKey:t,dragHeaderOnly:!0},l.createElement(aX,{type:i.styleType,recordingKey:t,styleNameInputPrefix:h,isInspectPanel:!1,selectedStyleProperties:i,showProperties:c,onEnterPressed:g}),!_&&l.createElement("div",{className:nK.cx.pl16.pr16.pt16.$},(0,T.tx)("design_systems.create_style.an_error_occurred_while_creating_the_style")),l.createElement(te.AutoLayout,{horizontalAlignItems:s.current?void 0:"end",verticalAlignItems:"center",spacing:s.current?"auto":void 0,padding:16},s.current&&l.createElement(l.Fragment,null,l.createElement(nD.$n,{variant:"secondary",onClick:()=>p(!c),recordingKey:u.Pt(t,"showHideOptionsButton")},c?(0,T.tx)("design_systems.create_style.hide_options"):(0,T.tx)("design_systems.create_style.show_more_options")),l.createElement(nD.$n,{onClick:g,disabled:!_,recordingKey:u.Pt(t,"createStyleButton")},(0,T.tx)("design_systems.create_style.create_style"))))))}var aJ=n(844519),aj=n(762127);function aq({closePicker:e,recordingKey:t}){var n;let r;let a=(0,q.wA)(),i=(0,tC.p8)("isReadOnly"),o=(0,tA.tS)(),{inheritTextStyleKey:s,styleIdForText:c,stylePreviewShown:p,selectedStyleProperties:d}=(0,af.R)(e=>({inheritTextStyleKey:e.mirror.selectionProperties.inheritTextStyleKey,styleIdForText:e.mirror.selectionProperties.styleIdForText,stylePreviewShown:e.stylePreviewShown,selectedStyleProperties:e.mirror.selectedStyleProperties})),m=(0,P.dI)(d.guid),h=(0,tm.Fk)((e,t)=>{let n=e.get(t);return(null==n?void 0:n.name)||""},m);if(!p.isShown||p.isCreating||!d&&!s&&!c&&!m)return null;let _=()=>{U.glU.selectStyle(g.n3.INVALID,g.IA.INVALID),a(k.sw())},E=(n=(0,W.IW)(p),r="",n?r=n.name||"":(0,P.dI)(null==d?void 0:d.guid)&&h&&(r=h),r),v=ew.nc.user("slides-delete-style",()=>{p.style.isLocal&&(0,t7.Nr)(p.style,o),_(),e()});return l.createElement(to.zK.Provider,{value:to.zM.EDIT_STYLE},l.createElement(tw.p,{name:"slides_edit_text_style"},l.createElement(ez.vx,{title:l.createElement("div",{className:nK.cx.pl8.flex.wFull.itemsCenter.justifyBetween.$},(0,T.tx)("slides.properties_panel.text_style.edit_text_style"),l.createElement(ev.K,{htmlAttributes:{"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.text_style.delete_style")},"aria-label":(0,T.t)("slides.properties_panel.text_style.delete_style"),onClick:v,recordingKey:u.Pt(t,"deleteStyle")},l.createElement(ea.U,{svg:aj.A},l.createElement(aJ.i,null)))),key:"slides-edit-text-style-modal",headerSize:"small",initialWidth:300,initialPosition:new y.Mi(p.rowLeft-300,p.rowTop),onClose:_,dragHeaderOnly:!0},l.createElement(aX,{type:d.styleType,onEnterPressed:()=>a(k.sw()),viewOnly:i,key:"style-preview-panel",selectedStyleProperties:d,isInspectPanel:!1,styleName:E,recordingKey:u.Pt(t,"editTextStyle")}))))}var a0=n(902008),a1=n(811027),a5=n(896474),a4=n(110382),a3=n(783908),a2=n(418985),a6=n(656164);function a7({parentRef:e,inheritTextStyleKey:t,styleIdForText:n,closePicker:r,recordingKey:a}){let i="inheritTextStyleKey",o=(0,aT._S)(i),c=(0,q.wA)();return l.createElement(l.Fragment,null,l.createElement(a2.M,{inheritStyleKey:t,inheritStyleID:n,styleType:tK.s4.TEXT}),o&&l.createElement(a2.U,{picker:o,styleType:tK.s4.TEXT,inheritStyleKey:t,inheritStyleKeyField:i,inheritStyleID:n,stylePickerListLayout:!0,onToggleListLayout:aS.lQ,onApplyStyle:(e,t)=>{c(aU.AV({style:e,inheritStyleKeyField:i,fromSearch:t})),r()},hideBrowseLibraries:!(0,s.kc)().piper_style_libraries,hideCreateStyleButton:!0,customPickerTitle:(0,T.t)("slides.properties_panel.library_text_styles"),minBottomMargin:4,recordingKey:"subscribedStylePicker",hideLocalStyles:!0}),l.createElement(nP.E,{name:"slides_toggle_library_text_style_picker"},l.createElement(ek.YW,{selected:!1,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.tooltip_applyStyles"),recordingKey:u.Pt(a,"showStylesButton"),onClick:()=>{if(o)c(I.Uv());else if(e.current){let t=e.current.getBoundingClientRect();c(k.sw()),c(I.bS({id:(0,aT.OS)("inheritTextStyleKey"),initialX:t.left-t.width-4,initialY:t.top,modal:!0}))}},onMouseDown:R.dG,svg:a6.A})))}let a8="slides_text_style_dropdown_contents--styleOption--29CYO text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",a9="slides_text_style_dropdown_contents--optionHeader---tOKJ";function ie({mainStyle:e,inheritStyleID:t,inheritStyleKey:n,closePicker:r,recordingKey:a}){let i=(0,q.wA)(),o=(0,ta.$)(),s=(0,aH.Xo)(o),c=l.useMemo(()=>(null==e?void 0:e.node_id)&&s.some(t=>t.node_id===e.node_id),[null==e?void 0:e.node_id,s]),p=l.createRef(),d=(0,q.d4)(e=>e.stylePreviewShown),m=d.isShown&&d.isCreating,h=d.isShown&&!d.isCreating,_=l.useContext(to.lk),[E,y]=l.useState([]),v=l.useCallback((e,t,n)=>{for(let l of e)ew.l7.user("reorder-slide-theme-style",()=>{U.glU.insertStyleBetween(l.node_id,(null==t?void 0:t.node_id)||"",(null==n?void 0:n.node_id)||"")})},[]);return l.createElement(eS.D8,{className:"slides_text_style_dropdown_contents--dropdownContainer--pwY1T",onMouseDown:R.dG,forwardedRef:p},l.createElement(tw.p,{name:"slides_text_style_picker"},l.createElement("div",{className:"slides_text_style_dropdown_contents--dropdownHeader--m278H"},l.createElement("span",{className:nK.cx.flexGrow1.$},(0,T.tx)("slides.properties_panel.text_styles")),l.createElement(a7,{parentRef:p,styleIdForText:t,inheritTextStyleKey:n,closePicker:r,recordingKey:a}),l.createElement(nS.d,{toggled:m,"aria-label":(0,T.t)("slides.properties_panel.text_style.create_new_style"),onClick:()=>{if(m)i(k.sw());else if(p.current){ew.l7.user("slides-create-style",()=>{U.glU.applyStyleToSelection("inheritTextStyleKey",P.AD,!0),U.glU.selectStyle(g.n3.INVALID,g.IA.INVALID)}),i(I.Uv());let e=p.current.getBoundingClientRect();_({styleType:tK.s4.TEXT,inheritStyleKeyField:"inheritTextStyleKey",rowLeft:e.left,rowTop:e.top})}},recordingKey:u.Pt(a,"addStyleButton"),htmlAttributes:{"data-tooltip":(0,T.t)("slides.properties_panel.text_style.create_new_style"),"data-tooltip-type":ec.Ib.TEXT}},l.createElement(en.e,null))),l.createElement("div",{className:nK.cx.flex.flexColumn.$,style:{padding:"8px"}},s.length>0?l.createElement(tM.q,{listItems:s,renderListItem:(n,i,o,s,c,p,d)=>l.createElement(il,{key:n.node_id,textStyle:n,isSelected:(0,G.hS)(t)&&(null==e?void 0:e.node_id)===n.node_id,isDragging:o,isReorderingItems:s,closePicker:r,onMouseDown:c,onMouseMove:p,onMouseUp:d,recordingKey:a}),selectedIndices:E,updateSelection:y,onDragEnd:()=>y([]),onInsertItemsBetweenValues:v,isDragDisabled:h}):l.createElement(it,null),!c&&l.createElement(ir,{mainStyle:e,inheritStyleID:t,closePicker:r})),!e&&l.createElement(eS.D8,{className:nK.cx.p8.bt1.bSolid.colorBorder.$},l.createElement(ia,{closePicker:r,recordingKey:u.Pt(a,"custom")}))))}function it(){return l.createElement("span",{className:nK.cx.px8.colorTextSecondary.$},(0,T.tx)("slides.properties_panel.text_style.empty_styles",{title:l.createElement("strong",null,(0,T.tx)("slides.properties_panel.text_style.title_style")),body:l.createElement("strong",null,(0,T.tx)("slides.properties_panel.text_style.body_style"))}))}function il({textStyle:e,isSelected:t,isDragging:n,isReorderingItems:r,closePicker:a,onMouseDown:o,onMouseMove:s,onMouseUp:c,recordingKey:d}){let m=(0,q.wA)(),[h,_]=l.useState(!1),E=(0,tm.Fk)((e,t)=>{var n;return null==(n=e.get(t||""))?void 0:n.fontSize},e.node_id),y=(0,tm.Fk)((e,t)=>{var n;return(null==(n=e.get(t||""))?void 0:n.hasMissingFont)||!1},e.node_id),g=l.createRef(),v=(0,a3.bf)(e),b=!r&&(h||v);return l.createElement(eS.D8,{forwardedRef:g,className:i()(a8,{[nK.cx.colorBgHover.$]:n||h&&!r}),onMouseDown:e=>{e.target===e.currentTarget&&o(e)},onMouseUp:e=>{e.target===e.currentTarget&&c(e)},onClick:()=>{y?U.glU.findMissingFontsAndShowPopover():m(aU.AV({style:e,inheritStyleKeyField:"inheritTextStyleKey"})),a()},onMouseMove:s,onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),recordingKey:u.Pt(d,e.name)},l.createElement("span",{className:i()(nK.cx.eventsNone.$,t?nK.cx.visible.$:nK.cx.invisible.$)},l.createElement(a0.l,null)),l.createElement("div",{className:nK.cx.flexGrow1.ellipsis.eventsNone.inlineFlex.truncate.$},l.createElement("span",{className:i()(nK.cx.colorText.$)},e.name),E&&l.createElement("span",{className:nK.cx.colorTextSecondary.pl2.$},(0,T.tx)("slides.properties_panel.text.style_description_font_size",{fontSize:(0,p.z0)(E)}))),y&&l.createElement("span",{className:nK.cx.w24.$},l.createElement(a1.z,null)),l.createElement("span",{className:b?nK.cx.visible.$:nK.cx.invisible.$},l.createElement(nS.d,{"aria-label":(0,T.t)("slides.properties_panel.text_style.edit_text_style"),onClick:t=>{if(v)m(k.sw());else if(g.current){U.glU.selectStyleByGuid(e.node_id);let t=g.current.getBoundingClientRect();m(k.rk({style:e,rowTop:t.y,rowLeft:t.x-8}))}null==t||t.stopPropagation()},recordingKey:u.Pt(d,e.name,"editButton"),toggled:v},l.createElement(tj.A,null))))}function ir({mainStyle:e,inheritStyleID:t,closePicker:n}){let r=(0,a4.AH)((0,G.E7)(null==e?void 0:e.key),(0,G.E7)(t)),a=(0,aK.md)(ah.TN),i=l.useMemo(()=>{if(null==e?void 0:e.node_id)for(let t of a){let n=aK.zl.get((0,ah.i1)(t)).data;if(n&&n.styleGUIDs.includes(e.node_id))return U.Ez5.slideThemeLibBindings().getThemeName(t)}return null},[null==e?void 0:e.node_id,a]),o="",s="";return(r&&"loaded"===r.status?(o=r.data.fileName,s=r.data.name):i&&(o=i,s=(null==e?void 0:e.name)||""),o&&s)?l.createElement(l.Fragment,null,l.createElement("div",{className:a9},o),l.createElement(eS.D8,{className:a8,onMouseUp:n},l.createElement(a0.l,null),s)):null}function ia({closePicker:e,recordingKey:t}){let n=(0,lk.kl)("fontFamily")||G.oV,r=(0,lk.kl)("fontSize")||G.oV;return l.createElement("div",{className:nK.cx.pb4.$},l.createElement("div",{className:a9},(0,T.tx)("slides.properties_panel.text_style.custom")),l.createElement(eS.D8,{className:a8,onClick:e,recordingKey:u.Pt(t,"custom")},l.createElement("div",{className:nK.cx.pr8.$},l.createElement(a5.In,{icon:"checkmark-on-16"})),(0,G.hS)(n)&&(0,G.hS)(r)?l.createElement(l.Fragment,null,l.createElement("div",{className:nK.cx.colorText.$},n),l.createElement("div",{className:nK.cx.colorTextSecondary.$,style:{paddingLeft:"3px"}},(0,T.tx)("slides.properties_panel.text.style_description_font_size",{fontSize:(0,p.z0)(r)}))):(0,T.tx)("slides.properties_panel.text_style.mixed")))}function ii({mainStyle:e,inheritTextStyleKey:t,styleIdForText:n,previouslyAppliedStyle:r,recordingKey:a}){let i=l.createRef(),[o,s]=l.useState(!1),c=(0,aF.Xr)(ah.q0),p=(0,aG.i)();l.useEffect(()=>{c({})},[p,c]);let d=()=>s(!1),m=l.useCallback(e=>{i.current&&e.target instanceof Node&&i.current.contains(e.target)||d()},[i]);return l.useEffect(()=>(window.addEventListener("mousedown",m),()=>window.removeEventListener("mousedown",m)),[m]),l.createElement(l.Fragment,null,l.createElement(eg.Ad,{ref:i,input:l.createElement(io,{mainStyle:e,inheritStyleID:n,inheritStyleKey:t,previouslyAppliedStyle:r,textPreviewColor:p,isOpen:o,onClick:()=>{o?(d(),I.Uv()):s(!0)},closePicker:d,recordingKey:a}),label:null,appendedClassName:"slides_text_style_row--textStyleRow--FE95p"}),l.createElement(aZ,{closePicker:d,recordingKey:u.Pt(a,"createTextStyleModal")}),l.createElement(aq,{closePicker:d,recordingKey:a}))}function io({mainStyle:e,inheritStyleID:t,inheritStyleKey:n,previouslyAppliedStyle:r,textPreviewColor:a,isOpen:o,onClick:s,closePicker:c,recordingKey:p}){let d;let u=is(e),m=is(r);return d=(0,G.gl)(t)?(0,T.tx)("slides.properties_panel.text_style.mixed"):e&&!e.is_soft_deleted?u?l.createElement(ip,{mainStyle:e,textPreviewColor:a}):e.name:m?l.createElement(l.Fragment,null,l.createElement(id,{previouslyAppliedStyle:r,textPreviewColor:a}),l.createElement("span",{className:nK.cx.pl4.colorTextSecondary.$},(0,T.tx)("slides.properties_panel.text_style.edited"))):(0,T.tx)("design_systems.styles.custom"),l.createElement("div",null,l.createElement(eS.GG,{className:i()(nK.cx.relative.wFull.h40.py4.pl8.pr4.$,nK.cx.bRadius5.b1.bSolid.colorBorder.$,nK.cx.flex.itemsCenter.$),onMouseDown:R.dG,onClick:s,recordingKey:p,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("slides.properties_panel.text_style.tooltip")},l.createElement("div",{className:i()(nK.cx.flexGrow1.$,nK.cx.fontMedium.colorText.alignLeft.ellipsis.$,nK.cx.flex.itemsCenter.overflowHidden.$)},d),l.createElement(aD.r,null),!e&&m&&l.createElement(ih,{themeStyleToUpdate:r,recordingKey:p})),o&&l.createElement(ie,{mainStyle:e,inheritStyleID:t,inheritStyleKey:n,closePicker:c,recordingKey:"slidesTextStylePicker"}))}function is(e){let t=(0,ta.$)(),n=(0,aH.Xo)(t);return!!e&&n.some(t=>t.node_id===e.node_id)}function ic(e,t,n,l,r){return(async()=>{if(U.vXe.fontsAreLoading()){let e=0;await new Promise((t,n)=>{let l=setInterval(()=>{U.vXe.fontsAreLoading()||(t(),clearInterval(l)),e>10&&n(),e++},100)})}if(!U.vXe.fontIsLoaded(l,r))return"";let a=U.Ez5.slideThemeStylePreview().generateTextPreview(e,t,n,l,r);return a?URL.createObjectURL(new Blob([a])):""})()}function ip({mainStyle:e,textPreviewColor:t}){let n=e.node_id,r=(0,tm.Fk)((e,t)=>{var n;return(null==(n=e.get(t))?void 0:n.name)||""},n),a=(0,tm.Fk)((e,t)=>{var n,l;return(t&&(null==(l=null==(n=e.get(t))?void 0:n.fontName)?void 0:l.family))??""},n),i=(0,tm.Fk)((e,t)=>{var n,l;return(t&&(null==(l=null==(n=e.get(t))?void 0:n.fontName)?void 0:l.style))??""},n),o=(0,tm.Fk)((e,t)=>{var n;return t&&(null==(n=e.get(t))?void 0:n.fontSize)||0},n),[s,c]=(0,aK.fp)(ah.q0),p=s[n],d=(0,tf.PD)(p);l.useEffect(()=>{n&&a&&i&&!(n in s)&&ic(n,r||"Text",t,a,i).then(e=>{c(t=>({...t,[n]:e}))})},[n,r,i,a,t,s,c]);let u=im(o);return l.createElement(iu,{thumbnailUrl:p??d,styleName:r,previewHeight:u})}function id({previouslyAppliedStyle:e,textPreviewColor:t}){let n=e.node_id,r=e.name,{fontFamily:a,fontStyle:i,fontSize:o}=(0,af.R)(e=>{let t=e.mirror.selectionProperties;return{fontFamily:(0,G.hS)(t.fontFamily)?t.fontFamily:"",fontStyle:(0,G.hS)(t.fontStyle)?t.fontStyle:"",fontSize:(0,G.hS)(t.fontSize)&&t.fontSize?t.fontSize:0}}),[s,c]=l.useState("");l.useEffect(()=>{n&&a&&i&&ic(n,r,t,a,i).then(e=>c(e))},[n,r,i,a,t,c]);let p=im(o);return l.createElement(iu,{thumbnailUrl:s,styleName:r,previewHeight:p})}function iu({thumbnailUrl:e,styleName:t,previewHeight:n}){return e?l.createElement("img",{className:"slides_text_style_row--previewImg--vXJc9",style:{height:`${n}px`},src:e,alt:"Text style preview"}):l.createElement("div",{className:nK.cx.fontMedium.colorText.$},t)}function im(e){var t;let n=(0,ta.$)(),l=(0,aH.Xo)(n),r=(0,tC.eY)(),a=[];for(let e of l){let n=null==(t=r.get(e.node_id))?void 0:t.fontSize;n&&a.push(n)}if(a.push(e),!e||0===a.length)return 17;let i=Math.min(...a),o=Math.max(...a);return i===o?17:Math.round(12+(e-i)/(o-i)*10)}function ih({themeStyleToUpdate:e,recordingKey:t}){let n=(0,q.wA)(),{fontFamily:r,fontStyle:a,fontSize:i,lineHeight:o,letterSpacing:s}=(0,af.R)(e=>{let t=e.mirror.selectionProperties;return{fontFamily:t.fontFamily,fontStyle:t.fontStyle,fontSize:t.fontSize,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing}}),c=(0,aO.B)(),p=async t=>{t.stopPropagation(),e.isLocal&&r&&a&&i&&o&&s&&(n(aU.AV({style:e,inheritStyleKeyField:"inheritTextStyleKey"})),U.glU.selectStyleByGuid(e.node_id),await (0,aV.yQ)(),V.Y5.updateSelectionProperties({fontFamily:r},{shouldCommit:rp.zk.NO,editScopeType:U.zkO.USER}),await (0,aV.yQ)(),V.Y5.updateSelectionProperties({fontStyle:a,fontSize:i,lineHeight:(0,aB.TK)(c,o),letterSpacing:s},{shouldCommit:rp.zk.NO,editScopeType:U.zkO.USER}),U.glU.selectStyle(g.n3.INVALID,g.IA.INVALID),V.Y5.triggerAction("commit"))};return l.createElement(nD.$n,{variant:"primary",onClick:p,recordingKey:u.Pt(t,"saveButton")},(0,T.tx)("slides.properties_panel.text_style.save_button"))}function i_({recordingKey:e}){let{inheritTextStyleKey:t,styleIdForText:n}=(0,af.R)(e=>({inheritTextStyleKey:e.mirror.selectionProperties.inheritTextStyleKey||null,styleIdForText:e.mirror.selectionProperties.styleIdForText||null})),r=(0,aT.WH)(t,n,"TEXT"),a=(0,q.d4)(e=>e.fonts),i=l.useMemo(()=>(0,aP.pn)(a),[a]),o=(0,t6.Um)(),[s,c]=l.useState(null===r);l.useEffect(()=>{o||c(!r?.node_id)},[r?.node_id]);let[p,d]=l.useState(null),m=l.useCallback(()=>{r&&d(r)},[r]),h=(0,q.d4)(e=>e.mirror.sceneGraphSelection);return l.useEffect(()=>{d(null)},[h]),l.createElement(tw.p,{name:"slides_type_panel"},l.createElement(n4,{panelClassName:"slides_type_panel--typePanel--BLBhl"},l.createElement(ii,{mainStyle:r,inheritTextStyleKey:t,styleIdForText:n,previouslyAppliedStyle:p,recordingKey:u.Pt(e,"textStyle")}),s&&l.createElement(iE,{fonts:a,versionsForStyles:i,recordingKey:e,savePreviouslyAppliedStyleOnFontChange:m}),l.createElement(ig,{versionsForStyles:i,recordingKey:e}),l.createElement(ib,{recordingKey:e}),!s&&l.createElement(eg.Ad,{input:l.createElement(nD.IK,{variant:"secondary",onClick:()=>c(!0),recordingKey:u.Pt(e,"showDetails")},(0,T.tx)("slides.properties_panel.text.show_details")),label:null})))}function iE({fonts:e,versionsForStyles:t,savePreviouslyAppliedStyleOnFontChange:n,recordingKey:r}){let a=(0,q.wA)(),i=(0,G._W)((0,lk.kl)("missingFont"),!1),o=!!V.Y5?.isFontListLoaded(),s=i||!o,c=(0,lk.kl)("fontFamily"),p=(0,lk.kl)("fontStyle"),d=(0,lk.kl)("fontSize"),m=(0,lk.kl)("lineHeight"),h=(0,lk.kl)("letterSpacing"),{bigNudgeAmount:_,smallNudgeAmount:E}=(0,B.sT)(),y=(0,q.d4)(e=>e.mirror.selectionProperties.fontVariations),g=c?(0,ax.LM)({fontFamily:c,fontStyle:p,fonts:e,versionsForStyles:t}):void 0,v=(0,aO.B)(),{consumedVariable:b,clearVariableConsumption:f}=(0,aR.u3)(["FONT_FAMILY"]),S=b?(0,aL.MH)(b):null,P=(0,nT.u)(S??void 0),w=c?l.createElement(aw.ay,{id:"slides-type-panel-font-family",fontFamily:c,editingStyleGuid:void 0,onChange:l=>{n(),(0,ax.PK)({fontFamily:l,lineHeightInContext:v,fonts:e,fontVariations:y,versionsForStyles:t})},boundVariable:P??void 0,onDetachVariableClick:f,fonts:e,versionsForStyles:t,showPlaceholder:!1,disabled:s,hideTypographyVariableOptions:!0,recordingKey:u.Pt(r,"fontFamily")}):null,I=c&&p?l.createElement(nP.E,{name:"slides_font_style"},l.createElement(aN.zz,{id:"slides-type-panel-font-style",fontFamily:c,fontStyle:p,editingStyleGuid:void 0,onChange:(e,t,l)=>{n(),(0,aN.zD)({fontStyle:e,shouldCommit:t,fontVariations:l,lineHeightInContext:v,showVariableFontSettings:aS.lQ,showTypeVariablePicker:aS.lQ})},fonts:e,versionsForStyles:t,fontVariations:y,fontVariationAxes:g?.variationAxes,dropdownAlignment:"right",showMissingIcon:!1,hideVariableFontOptions:!0,hideTypographyVariableOptions:!0,recordingKey:u.Pt(r,"fontStyle")})):null,N=d?l.createElement(nP.E,{name:"slides_font_size"},l.createElement(aI.Z,{id:"slides-type-panel-font-size",fontSize:d,onChange:n,disabled:s,editingStyleGuid:void 0,hideVariableOptions:!0,recordingKey:u.Pt(r,"fontSize")})):null,k=l.createRef(),C=m?l.createElement(aC.a,{lineHeight:m,lineHeightInContext:v,onChange:n,disabled:s,rowElementRef:k,editingStyleGuid:void 0,disableVariables:!0,recordingKey:u.Pt(r,"lineHeight")}):null,A=h?l.createElement(ak.I,{dispatch:a,letterSpacing:h,disabled:s,onChange:n,editingStyleGuid:void 0,rowElementRef:k,bigNudgeAmount:_,smallNudgeAmount:E,disableVariables:!0,recordingKey:u.Pt(r,"letterSpacing")}):null;return l.createElement(l.Fragment,null,w,l.createElement(n5.g,{leftLabel:(0,T.tx)("slides.properties_panel.text.weight_label"),leftInput:I,rightLabel:(0,T.tx)("slides.properties_panel.text.font_size_label"),rightInput:N}),l.createElement(n5.g,{ref:k,leftLabel:null,leftInput:C,rightLabel:null,rightInput:A}))}function iy(e){return e.toLowerCase().includes("italic")}function ig({versionsForStyles:e,recordingKey:t}){let{isBold:n,isItalic:r,isUnderline:a,isUnorderedList:i,fontFamily:o}=(0,af.R)(e=>({isBold:(0,aM.N)(e.mirror.selectionProperties.fontStyle?.toString()||""),isItalic:iy(e.mirror.selectionProperties.fontStyle?.toString()||""),isUnderline:"UNDERLINE"===e.mirror.selectionProperties.textDecoration,isUnorderedList:"UNORDERED_LIST"===e.mirror.selectionProperties.textLineType,fontFamily:e.mirror.selectionProperties.fontFamily})),s=o&&(0,G.hS)(o)&&e[o]?Object.keys(e[o]):[],c=s.every(e=>!(0,aM.N)(e)),p=s.every(e=>!iy(e));return l.createElement(eg.Ad,{label:null,input:l.createElement("div",{className:nK.cx.flex.wFull.gap4.$},l.createElement(iv,{selected:n,disabled:c,onClick:()=>{V.Y5.triggerActionInUserEditScope("toggle-bold")},icon:l.createElement(ay.j,{color:n?"var(--color-border-selected)":void 0}),tooltip:(0,T.t)("slides.properties_panel.text.bold"),trackingName:"slides_bold_button",recordingKey:u.Pt(t,"bold")}),l.createElement(iv,{selected:r,disabled:p,onClick:()=>{V.Y5.triggerActionInUserEditScope("text-toggle-italic")},icon:l.createElement(ag.s,{color:r?"var(--color-border-selected)":void 0}),tooltip:(0,T.t)("slides.properties_panel.text.italic"),trackingName:"slides_italic_button",recordingKey:u.Pt(t,"italic")}),l.createElement(iv,{selected:a,disabled:!1,onClick:()=>{V.Y5.triggerActionInUserEditScope("text-toggle-underline")},icon:l.createElement(av.W,{color:a?"var(--color-border-selected)":void 0}),tooltip:(0,T.t)("slides.properties_panel.text.underline"),trackingName:"slides_underline_button",recordingKey:u.Pt(t,"underline")}),l.createElement(iv,{selected:i,disabled:!1,onClick:()=>{V.Y5.triggerActionInUserEditScope("text-toggle-unordered-list")},icon:l.createElement(ab.Z,{color:i?"var(--color-border-selected)":void 0}),tooltip:(0,T.t)("slides.properties_panel.text.unordered_list"),trackingName:"slides_unordered_list_button",recordingKey:u.Pt(t,"unorderedList")}))})}function iv({selected:e,disabled:t,onClick:n,icon:r,tooltip:a,trackingName:o,recordingKey:s}){return l.createElement(nP.E,{name:o},l.createElement(eS.GG,{className:i()("slides_type_panel--formatButton--71QdB",{"slides_type_panel--selected--dHazD":e,"slides_type_panel--disabled--Vd8xM":t}),onClick:n,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":a,"aria-label":a,recordingKey:s},r))}function ib({recordingKey:e}){let t=(0,lk.kl)("textAlignVertical")||G.oV;return l.createElement(n5.g,{leftLabel:null,leftInput:l.createElement(nP.E,{name:"slides_text_align_horizontal"},l.createElement(aA.jw,{recordingKey:u.Pt(e,"textAlignHorizontal")})),rightLabel:null,rightInput:l.createElement(nP.E,{name:"slides_text_align_vertical"},l.createElement(aA.Ln,{textAlignVertical:t,recordingKey:u.Pt(e,"textAlignVertical")}))})}var iS=n(656147),iP=n(390487),iT=n(69961),iw=n(75215),iI=n(251518),iN=n(750693),ik=n(129978),iC=n(781867),iA=n(37819),iO=n(57392),ix=n(715762),iR=n(507662),iL=n(664241),iM=n(258376);function iD({recordingKey:e}){let t=(0,aK.md)(iO.I7);return(0,aR.Tt)()&&!(0,s.kc)().ds_variables_relax_modes&&t?l.createElement(iK,{recordingKey:e}):null}let iF="VARIABLES_INCOMPATIBLE_MODES_UPDATE_DROPDOWN";function iK({recordingKey:e}){let t=(0,q.wA)(),n=(0,t6.Um)(),r=l.useRef(null),a=n&&n.type===iF,i=l.useCallback(()=>{r.current&&t(ei.j7({type:iF,data:{targetRect:r.current.getBoundingClientRect()}}))},[t]),o=l.useCallback(()=>{t(eo.to({type:iR.T,data:{initialTab:tL.Wv.UPDATES,entrypoint:ix.r6.VARIABLE_MODES_ACCEPT_UPDATES_DROPDOWN_OPTION}}))},[t]);return l.createElement(l.Fragment,null,l.createElement("div",{ref:r},l.createElement(ek.YW,{recordingKey:u.Pt(e,"updateIcon"),selected:!!a,svg:iM.A,className:iL.l_,dataTestId:"updatesModesButton","data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("variables.layer_panel.header.update_button_direct.tooltip"),onMouseDown:e=>e.stopPropagation(),onClick:i})),a&&(r.current?l.createElement(eu.Cf,{targetRect:r.current.getBoundingClientRect(),maxWidth:226,disableDropdownScrollContainer:!0,propagateCloseClick:!0},l.createElement(l.Fragment,null,l.createElement(er.c$,{className:iL.Ig,recordingKey:u.Pt(e,"description"),key:"description",disabled:!0},(0,T.t)("variables.layer_panel.header.update_button.dropdown.description")),l.createElement(er.wv,null),l.createElement(er.c$,{onClick:o,recordingKey:u.Pt(e,"review-update"),key:"review_update"},(0,T.t)("variables.layer_panel.header.update_button_direct.dropdown.option")))):null))}function iV(e){let t=(0,l.useRef)(null),n=(0,el.DP)(),r=e=>V.Y5.updateSelectionProperties({backgroundEnabled:e}),a=e=>{V.Y5.updateSelectionProperties({exportBackgroundDisabled:!e})},i=(0,tS.xx)(e=>{let t=(0,G.E7)(e.backgroundColor),n=(0,G.E7)(e.backgroundOpacity);return null!=t&&null!=n?{...t,a:n}:e.backgroundColor||G.oV}),o=l.createElement(iU,{backgroundColor:e.backgroundColor,backgroundEnabled:e.backgroundEnabled,backgroundOpacity:e.backgroundOpacity,pickerShown:e.pickerShown,chitRowRef:t,recordingKey:e.recordingKey}),s=()=>l.createElement("span",{className:"background_panel--visible--2-4Ns"},l.createElement(iC.B,{visible:e.backgroundEnabled,onChange:r,recordingKey:u.Pt(e,"visibleToggle")}));return l.createElement(tw.p,{name:"background_panel"},l.createElement(eE.Zk,null,l.createElement("div",null,l.createElement(eE.fI,{className:"background_panel--panelTitleRow--uNINf"},l.createElement(eE.xw,null,(0,T.tx)("fullscreen.properties_panel.page")),l.createElement(iD,{recordingKey:"pageLevel"}),l.createElement(iA.M,{showLibrarySets:!0,recordingKey:"pageLevel"})),"ui2"===n.version?l.createElement(l.Fragment,null,l.createElement(eE.fI,{forwardedRef:t},o,s())):l.createElement(eg.DE,{ref:t,label:null,input:o,icon:s()})),e.hasExports?"ui3"===n.version&&iT.nt.ui3ClipContentControl.getValue()?l.createElement(eg.Ad,{label:l.createElement(l.Fragment,null),input:l.createElement(rd.S,{muted:!0,mixed:e.exportBackgroundDisabled===G.oV,checked:!1===e.exportBackgroundDisabled,onChange:a,recordingKey:u.Pt(e,"exportDisableCheckbox"),label:l.createElement(l6.J,{"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.include_the_canvas_or_group_background_in_exports")},(0,T.tx)("fullscreen.properties_panel.show_in_exports")),htmlAttributes:{"data-tooltip":(0,T.t)("fullscreen.properties_panel.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":ec.Ib.TEXT}})}):l.createElement(eE.fI,{className:"background_panel--checkboxLabelRow--r-hmK"},l.createElement(iw.t,{className:"background_panel--checkbox--6U3j-",id:"export-background-disabled",property:e.exportBackgroundDisabled===G.oV?G.oV:!e.exportBackgroundDisabled,onChange:a,recordingKey:u.Pt(e,"exportDisableCheckbox")}),l.createElement(eE.JU,{className:"background_panel--checkboxLabel--ITthj",htmlFor:"export-background-disabled","data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.include_the_canvas_or_group_background_in_exports")},(0,T.tx)("fullscreen.properties_panel.show_in_exports"))):void 0,e.pickerShown?.id===O.k8&&l.createElement(iI.sk,{disabledVariableIds:new Set,title:(0,T.t)("fullscreen.properties_panel.background"),initialPosition:new y.Mi(e.pickerShown.initialX,e.pickerShown.initialY),color:(0,G.hS)(i(e))?(0,G.E7)(i(e)):{r:1,g:1,b:1,a:1},boundVariable:null,onChange:(e,t)=>{let n=e.a;e.a=1,V.Y5.updateSelectionProperties({backgroundColor:e,backgroundOpacity:n,backgroundEnabled:!0},{shouldCommit:t})},recordingKey:u.Pt(e,"colorPicker")}),l.createElement(ik.wu,{showExplicitOnly:!0,recordingKey:"backgroundPanel-variableModeEntries"})))}function iU(e){let t=(0,q.wA)(),n=(0,tS.xx)(e=>{let t=(0,G.E7)(e.backgroundColor),n=(0,G.E7)(e.backgroundOpacity);return null!=t&&null!=n?{...t,a:n}:e.backgroundColor||G.oV}),r=l.useMemo(()=>(0,G.hS)(e.backgroundOpacity)&&"number"==typeof e.backgroundOpacity&&isNaN(e.backgroundOpacity)?0:e.backgroundOpacity,[e.backgroundOpacity]),a=(0,G.E7)(e.backgroundColor),i=(0,G.E7)(r),o=(0,G.E7)(e.backgroundEnabled),c={backgroundColor:a,opacity:i,visible:o},p=Object.keys(c).filter(e=>null==c[e]);p.length>0&&(0,m.$D)(h.e.EDITOR_USABILITY,Error(`Missing file background properties: ${p.join(", ")}`));let d={color:{...a??{r:1,g:1,b:1,a:1}},opacity:(0,G.E7)(r)??void 0,type:"SOLID",blendMode:"NORMAL",visible:o??void 0};return l.createElement("div",{className:"background_panel--colorValueContainer---lsls paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},l.createElement(iN.y7,{recordingKey:e.recordingKey,togglePicker:()=>{if(e.pickerShown&&e.pickerShown.id===O.k8)t(I.XE());else{(0,s.kc)().ce_properties_panel_tracking&&(0,tg.sx)("editor-background-panel-color-picker-show");let n=e.chitRowRef.current?(0,ep.cn)(e.chitRowRef.current):{x:0,y:0};t(I.u1({id:O.k8,initialX:n.x,initialY:n.y})),t(k.sw())}},chitOverride:{color:n(e),opacity:r},paint:d,onChange:(t,n)=>{let l=!(0,q.bN)(t.color,e.backgroundColor),r=t.opacity!==e.backgroundOpacity;V.Y5.updateSelectionProperties({backgroundColor:l?t.color:void 0,backgroundOpacity:r?t.opacity:void 0,backgroundEnabled:0!==t.opacity},{shouldCommit:n})}}))}var iB=n(33136),iH=n(553609);function iG(e){let t=(0,iB.t)();return e.readOnly?l.createElement(iH.l,{...e}):t.nodesAreAllInsideStacks&&"AUTO"===t.stackPositioning?null:l.createElement(eE.Zk,null,l.createElement(eE.fI,null,l.createElement(eE.xw,{extended:!0},(0,T.tx)("fullscreen.properties_panel.constraints_panel.constraints"))),l.createElement(iH.l,{...e}))}function iY(e){return l.createElement(tw.p,{name:"constraints_panel"},l.createElement(iG,{...e}))}var i$=n(233711),iW=n(924491),iz=n(511617),iX=n(154483),iQ=n(733169),iZ=n(132135),iJ=n(321487),ij=n(167807);let iq=(0,iX.fv)();function i0(e){let t=(0,W.IW)(e.stylePreviewShown),n=iq(t),r=(0,ij.$Q)(n).data,a=(0,iQ.S)(r?.key).unwrapOr(!1);if(!t||!r)return null;let i=(0,iZ.to)(r);return i=(0,iz.dR)(i,{"node-id":encodeURIComponent((0,iJ.E)(t.node_id))}),l.createElement(tw.p,{name:"external_style_options"},l.createElement(eE.Zk,{key:"external-style-options"},a&&l.createElement(eE.fI,null,l.createElement(tt.N_,{className:tc.lf,href:i,target:"_blank",trusted:!0},(0,T.tx)("fullscreen.properties_panel.go_to_style_definition_to_edit")))))}var i1=n(464558),i5=n(503359),i4=n(613023),i3=n(841368),i2=n(877953),i6=n(499777),i7=n(335691),i8=n(567488),i9=n(714939),oe=n(224690),ot=n(760066),on=n(290022),ol=n(493424),or=n(468570),oa=n(414879),oi=n(559568),oo=n(171975),os=n(77763),oc=n(737834),op=n(861726),od=n(416580),ou=n(113058),om=n(301462),oh=n(878319),o_=n(219101),oE=n(824374),oy=n(161115);let og=new nU.SU;class ov extends nX.c${}class ob extends nX.l6{}class of extends l.PureComponent{render(){var e;let t=this.props.includePassThrough?oy.j4:oy.r5;return l.createElement(ob,{id:(e=this.props.id,`blend-mode-select-${e}`),className:this.props.className,inputClassName:this.props.inputClassName,chevronClassName:this.props.chevronClassName,property:this.props.property,formatter:og,onChange:this.props.onChange,onMouseDown:this.props.onMouseDown,willShowDropdown:this.props.willShowDropdown,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:this.props.recordingKey,dropdownWidth:this.props.isUI3?120:"auto",icon:this.props.isUI3?void 0:l.createElement(oE.M,{value:(0,G.E7)(this.props.property)}),enablePreview:!0},t.map((e,t)=>"SELECT_DIVIDER"===e?l.createElement(nX.sK,{key:t}):l.createElement(ov,{key:t,value:e,recordingKey:u.Pt(this.props,e)})))}}of.displayName="BlendMode";var oS=n(697652),oP=n(83695),oT=n(731262),ow=n(282263),oI=n(952277),oN=n(82131),ok=n(490393),oC=n(435091),oA=n(424148),oO=n(144919);function ox(e){let{blendMode:t,opacity:n,visible:r}=e,a="ui3"===(0,el.DP)().version,o=l.useRef(null),c=l.useMemo(oe.On,[]),p=l.useMemo(oe.Tn,[]),{dropdownShown:d,isDefReferencedBySelection:m,selectedGUIDs:h,visibilityIsBoundToComponentProp:_}=(0,af.R)(e=>({dropdownShown:e.dropdownShown,isDefReferencedBySelection:!!c(e,i7.R.VISIBLE),selectedGUIDs:(0,rz.qd)(e),visibilityIsBoundToComponentProp:p(e,(0,rz.qd)(e),i7.R.VISIBLE)})),E=(0,G.gl)(r),y=(0,q.wA)(),g=l.useCallback((e,t=rp.zk.YES)=>{a$.wt.shouldReportForShouldCommit(t)&&om.F.trackFromFullscreen("editor-blend-mode-change",{blendMode:e}),V.Y5.updateSelectionProperties({blendMode:e,visible:!0},{shouldCommit:t})},[]),v=l.useCallback((e,t)=>{V.Y5.updateSelectionProperties({opacity:e},{shouldCommit:t}),e>0&&!m&&V.Y5.updateSelectionProperties({visible:!0},{shouldCommit:t})},[m]),b=l.useRef(null),[,f]=oL(),{clearVariableConsumption:S}=(0,aR.u3)(["VISIBLE"]),{variableConsumptionMap:P}=(0,aR.R1)(),w=oM(),I=(0,nT.u)(w),N=I?.name,k=oR();return l.createElement(tw.p,{name:"layer_panel"},l.createElement(eE.Zk,null,l.createElement(eE.fI,{className:oN.LO},l.createElement(oS.Tu,{isPanelBodyCollapsedAtom:null},l.createElement(eE.xw,{isPanelBodyCollapsedAtom:null},(0,T.tx)("fullscreen.layer_panel.layer")),l.createElement(iD,{recordingKey:"frameLevel"}),!k&&l.createElement(i8.yQ,{nodeField:i7.R.VISIBLE,defaultValue:r,guids:h}),l.createElement(iA.M,{showLibrarySets:!1,recordingKey:"frameLevel"}))),l.createElement(oS.JH,{isPanelBodyCollapsedAtom:null},l.createElement(eE.fI,null,l.createElement(of,{id:"layer-blend-mode",className:oC.jK,inputClassName:oC.Df,chevronClassName:oC.ai,property:t,dispatch:y,dropdownShown:d,onChange:g,willShowDropdown:()=>((0,tg.sx)("editor-blend-mode-dropdown-show"),Promise.resolve()),includePassThrough:!0,recordingKey:u.Pt(e,"blendMode"),isUI3:a}),l.createElement(o_.e,{condition:!0,wrapper:t=>l.createElement(ot.sA,{recordingKey:u.Pt(e,"layerOpacityInputWrapper"),fields:["OPACITY"],disabled:!1,resolvedType:U.rXF.FLOAT,currentFieldValue:(0,G.hS)(n)?n:void 0,inputClassName:i()({[oC.ke]:!0,[oC.TQ]:!0}),hideIcon:!0,inputRef:o,hasBindingContextMenu:!0},t)},l.createElement(nG.Pd,{isTokenizable:!0,value:n,onValueChange:v,mixedMathHandler:oF,dispatch:y,recordingKey:u.Pt(e,"opacity"),forwardedRef:o,noBorderOnHover:!0})),l.createElement(oV,{recordingKey:e.recordingKey})),E&&!m&&l.createElement(eE.fI,{dataTestId:"mixed-visibility-label"},l.createElement(eE.UZ,{className:ok.Pf},(0,T.tx)("fullscreen.layer_panel.replace_mixed_visibility",{svg:l.createElement("div",{className:oC.dY},l.createElement(ea.U,{svg:oO.A},l.createElement(op.l,null)))}))),l.createElement("div",{className:oC.I0},l.createElement(i9.L,{nodeField:i7.R.VISIBLE,currentValue:e.visible})),(0,s.kc)().prototype_expressions_nodefields?P.VISIBLE&&l.createElement(aY.Y,{direction:"horizontal",spacing:"auto",verticalAlignItems:"center",horizontalAlignItems:"space-between",padding:{top:0,left:16,bottom:0,right:8}},l.createElement(oP.y3,{targetVariableData:P.VISIBLE.isMixed?void 0:P.VISIBLE,onClick:()=>{f(b.current)},isNarrowPanel:!0,isInCell:!1,showVariableThumbnails:!0,isInConditional:!1,isMixed:P.VISIBLE.isMixed}),l.createElement(ev.K,{onClick:()=>S(),"aria-label":(0,T.t)("variables.binding_ui.detach_variable_tooltip"),recordingKey:"detachVisibilityVariable",htmlAttributes:{"data-tooltip":(0,T.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip-type":ec.Ib.TEXT}},l.createElement(ea.U,{svg:oA.A},l.createElement(od.U,null)))):k&&!_&&l.createElement(aY.Y,{direction:"horizontal",spacing:"auto",verticalAlignItems:"center",horizontalAlignItems:"space-between",padding:{top:0,left:16,bottom:0,right:8}},l.createElement(oI.P,{value:N||(0,T.t)("fullscreen.mixed"),isStandalone:!0,styleOverride:{width:"auto"},isDeleted:!!I&&(0,aL.eF)(I)}),l.createElement(ev.K,{onClick:()=>S(),"aria-label":(0,T.t)("variables.binding_ui.detach_variable_tooltip"),recordingKey:"detachVisibilityVariable",htmlAttributes:{"data-tooltip":(0,T.t)("variables.binding_ui.detach_variable_tooltip"),"data-tooltip-type":ec.Ib.TEXT}},l.createElement(ea.U,{svg:oA.A},l.createElement(od.U,null)))),l.createElement(ik.wu,{showExplicitOnly:!0,recordingKey:"layerPanel-variableModeEntries"}))))}function oR(){let{consumedVariable:e}=(0,aR.u3)(["VISIBLE"]),t=oM(),n=(0,nT.u)(t);return!!e&&!!n}let oL=()=>(0,ow.JV)(["VISIBLE"],U.rXF.BOOLEAN,void 0,{requestedTypes:[U.rXF.BOOLEAN,U.rXF.FLOAT,U.rXF.STRING],variableFilters:{[oh.t.MUST_INCLUDE_ONE_OF]:{[U.rXF.STRING]:oT.O4},[oh.t.HIDE_IN_DEFAULT_VIEW]:{[U.rXF.FLOAT]:!0}},mapVariableIdToTypedValue:ow.eT});function oM(){let e;let{consumedVariable:t}=(0,aR.u3)(["VISIBLE"]);if(t){if((0,G.hS)(t)&&t.type===U.Z_n.ALIAS)e=t.value;else if((0,G.hS)(t)&&t.type===U.Z_n.EXPRESSION){for(let n of(0,aL.Pr)(t))if(n.type===U.Z_n.ALIAS){e=n.value;break}}}return e}class oD extends ou.M{getValueForNode(e){return e.opacity}setValueForNode(e,t){ew.l7.user("set-opacity",()=>{a$.wt.reportAnyPropertyChange(["opacity"]),e.opacity=t})}}let oF=new oD,oK=(0,oe.Tn)();function oV(e){let t=l.useCallback(e=>{V.Y5.updateSelectionProperties({visible:e})},[]),n=l.useMemo(oe.On,[]),{isDefReferencedBySelection:r,visibilityIsBoundToComponentProp:a}=(0,af.R)(e=>({isDefReferencedBySelection:!!n(e,i7.R.VISIBLE),visibilityIsBoundToComponentProp:oK(e,(0,rz.qd)(e),i7.R.VISIBLE)})),i=(0,nT.SG)(["VISIBLE"]).data??[],[o]=(0,lk.lJ)("visible"),{consumedVariable:c}=(0,aR.u3)(["VISIBLE"]),p=l.useRef(null),[d,m]=oL(),h=oM(),_=(0,nT.u)(h),E=!!c&&!!_,y=E||a||r,g=!E&&!a&&i.length>0,v=o?(0,T.t)("fullscreen.properties_panel.tooltip_hide"):(0,T.t)("fullscreen.properties_panel.tooltip_show"),b=l.createElement("span",{className:oC.RK},l.createElement(iC.B,{disabled:y,visible:o,onChange:t,recordingKey:u.Pt(e,"visibleToggle")})),f=(0,eC.R)();return l.createElement("div",{className:oC.RK},l.createElement(ot.JQ,{ref:p,currentFieldValue:!!(0,G.gl)(o)||o,isActive:d,disabled:!g,onPickerOpen:()=>m(p.current),recordingKey:u.Pt(e,"visibilityVariableControl"),dataTestId:"visibility-variable-control"},f?(0,s.kc)().ce_tv_fpl_toggle_button?l.createElement(oo.f,{onIcon:l.createElement(os.j,null),offIcon:l.createElement(oc._,null),checked:!y&&!o,mixed:!y&&(0,G.gl)(o),disabled:y,onChange:()=>t(o===G.oV||!o),recordingKey:u.Pt(e,"visibleToggle"),"aria-label":v,variant:"highlighted",htmlAttributes:{"data-test-id":"visibility-variable-control","data-tooltip":v,"data-tooltip-type":ec.Ib.TEXT}}):l.createElement(ek.YW,{selected:!y&&!o,disabled:y,onClick:()=>t(o===G.oV||!o),recordingKey:u.Pt(e,"visibleToggle"),dataTestId:"visibility-variable-control","data-tooltip":v,"data-tooltip-type":ec.Ib.TEXT},o?l.createElement(oc._,null):l.createElement(os.j,null)):b))}function oU(){let{consumedVariable:e,clearVariableConsumption:t}=(0,aR.u3)(["VISIBLE"]),n=oM(),r=(0,nT.u)(n),a=r?.name,i=!!e&&!!r,o=l.useMemo(oe.Tn,[]),s=(0,nT.BQ)(n),c=(0,af.R)(e=>o(e,(0,rz.qd)(e),i7.R.VISIBLE));return!i||c?null:l.createElement(eg.DE,{appendedClassName:"component_bound_vibisility_row--row--Pss97",input:l.createElement(oI.P,{value:a||(0,T.t)("fullscreen.mixed"),isStandalone:!0,classNameOverride:"component_bound_vibisility_row--pillCover--q5iKl",styleOverride:{width:"auto"},isDeleted:!!r&&(0,aL.eF)(r),fullWidth:!0,varaiablePillContainerClassName:"component_bound_vibisility_row--ui3RowVariablePillContainer--ocnP8",thumbnailValue:"MIXED"!==s?s:void 0}),icon:l.createElement("div",{className:"component_bound_vibisility_row--detachVisibilityIcon--FcjEN"},l.createElement(ev.K,{onClick:()=>t(),"aria-label":(0,T.t)("variables.binding_ui.detach_variable_tooltip"),recordingKey:"detachVisibilityVariable",htmlAttributes:{"data-tooltip-type":ec.Ib.TEXT}},l.createElement(od.U,null))),label:null})}let oB=new nU.SU;class oH extends nX.c${}class oG extends nX.l6{renderInput(){return l.createElement(ev.K,{recordingKey:(0,u.Pt)(this.props.recordingKey,"blendMode"),"aria-label":(0,T.t)("properties.dropdown.apply_blend_mode"),onClick:this.onMouseDown,actionOnPointerDown:!0,htmlAttributes:{"data-tooltip":(0,T.t)("properties.dropdown.apply_blend_mode"),"data-tooltip-type":ec.Ib.TEXT}},l.createElement(oE.M,{value:this.props.property,normalIsActive:!0}))}}function oY(e){let[t,n]=(0,oy.sL)(),r=(0,q.wA)(),a=(0,t6.Um)(),i=(0,nO.cJ)(),o=oy.j4.map((t,n)=>{let r="LINEAR_BURN"===t&&i;return"SELECT_DIVIDER"===t?l.createElement(nX.sK,{key:n}):l.createElement(oH,{key:n,value:t,disabled:r,recordingKey:u.Pt(e,"blendMode",t)})});return l.createElement(oG,{id:"layer-blend-mode-select",className:"selection_blend_mode_icon_button--container--Wv9Hd",dropdownClassName:"selection_blend_mode_icon_button--blendModeSelectDropdown--WcwN1 blend_mode_select--blendModeSelectDropdown--jlg6p",property:t,onChange:n,formatter:oB,dispatch:r,dropdownShown:a,onMouseDown:R.dG,minTop:6,recordingKey:u.Pt(e,"blendMode"),enablePreview:!0,dropdownAlignment:"right",willShowDropdown:()=>((0,tg.sx)("editor-blend-mode-dropdown-show"),Promise.resolve())},o)}var o$=n(866577);function oW(e){let t=(0,lq.Df)(),n=(0,i2.C)("fpl_dialog_trigger"),r=(0,lq.Jo)(),a=(0,i6.kG)("corner-smoothing"),[i]=(0,lk.lJ)("rectangleCornerRadiiIndependent"),o=(0,lk.kl)("visible"),c=!r.rectangleCornerRadii,p=t.cornerRadius,[d,m]=l.useState(null),[h]=(0,lk.lJ)("opacity"),_=t.rectangleCornerRadii,E=t.rectangleCornerRadii&&!!d,y=!r.cornerRadius,g=y||c,v=(0,l.useRef)(null),b=l.useRef(null),f=oR(),S=l.useMemo(oe.On,[]),{isDefReferencedBySelection:P,selectedGUIDs:w}=(0,af.R)(e=>({isDefReferencedBySelection:!!S(e,i7.R.VISIBLE),selectedGUIDs:(0,rz.qd)(e)})),I=l.useCallback((e,t)=>{V.Y5.updateSelectionProperties({opacity:e},{shouldCommit:t}),e>0&&!P&&V.Y5.updateSelectionProperties({visible:!0},{shouldCommit:t})},[P]),N=(0,l.useCallback)(()=>{a.hide(),V.Y5.deselectProperty()},[a]),k=(0,q.wA)(),C=l.useCallback(()=>{(0,s.kc)().ce_properties_panel_tracking&&(0,tg.sx)("editor-transform-panel-change",{key:"rectangleCornerRadiiIndependent",value:!(0,G._W)(i,!1)}),!E&&v.current?m((0,ep.cn)(v.current,parseInt(o$.Je,10))):m(null)},[i,E]),A=n?l.createElement(nS.d,{actionOnPointerDown:!0,toggled:E,onClick:C,"aria-label":(0,T.t)("fullscreen.properties_panel.transform_panel.independent_corners"),disabled:g,recordingKey:u.Pt(e,"rectangleCornerToolIndependentToggle")},l.createElement(i4.Q,null)):l.createElement(eE.YW,{selected:E,onClick:C,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.transform_panel.independent_corners"),recordingKey:u.Pt(e,"rectangleCornerToolIndependentToggle"),disabled:g},l.createElement(i4.Q,null)),O=(0,s.kc)().ce_tv_fpl_dialog_trigger_button?l.createElement(nS.d,{recordingKey:u.Pt(e,"cornerSmoothingToggle"),"aria-label":(0,T.t)("fullscreen.properties_panel.transform_panel.corner_smoothing"),toggled:a.showing,disabled:y,htmlAttributes:{onMouseDown:e=>{(0,on._)(a,v,e)},"data-tooltip":(0,T.t)("fullscreen.properties_panel.transform_panel.corner_smoothing"),"data-tooltip-type":ec.Ib.TEXT}},l.createElement(i3.J,null)):l.createElement(eE.YW,{onMouseDown:e=>{(0,on._)(a,v,e)},recordingKey:u.Pt(e,"cornerSmoothingToggle"),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.transform_panel.corner_smoothing"),selected:a.showing,disabled:y},l.createElement(i3.J,null));return l.useEffect(()=>{m(null)},[w]),l.createElement(eE.Zk,null,l.createElement(nj.Wv,{titleTx:(0,T.tx)("fullscreen.appearance_panel.appearance")},!f&&l.createElement(i8.yQ,{nodeField:i7.R.VISIBLE,defaultValue:o,guids:w}),l.createElement(iD,{recordingKey:"frameLevel"}),l.createElement(iA.M,{showLibrarySets:!1,recordingKey:"frameLevel"}),l.createElement(oV,{recordingKey:e.recordingKey}),l.createElement(oY,{recordingKey:e.recordingKey})),l.createElement(eg.fn,{ref:v,leftInput:l.createElement(ot.sA,{recordingKey:u.Pt(e,"layerOpacityInputWrapper"),fields:["OPACITY"],disabled:!1,resolvedType:U.rXF.FLOAT,currentFieldValue:(0,G.hS)(h)?h:void 0,inputRef:b,hasBindingContextMenu:!0},l.createElement(nG.Pd,{inputClassName:"appearance_panel--input--h3br5 raw_components--flushLeft--YH-5P",ui3RightJustifyPercentSign:!1,noBorderOnHover:!0,isTokenizable:!0,value:h,onValueChange:I,mixedMathHandler:oz,dispatch:k,recordingKey:u.Pt(e,"opacity"),forwardedRef:b},l.createElement("div",{className:"appearance_panel--opacityIconContainer---kdX-"},l.createElement(at.N,null)))),rightInput:l.createElement(ol.C,{recordingKey:e.recordingKey,disabled:!p||E||y}),icon:p?_?l.createElement(nP.E,{name:"independent_corner_radius_toggle"},A):O:null,leftLabel:(0,T.tx)("fullscreen.properties_panel.section_appearance.label_opacity"),rightLabel:p?(0,T.tx)("fullscreen.properties_panel.transform_panel.corner_radius"):null}),(t.count||t.starInnerScale)&&l.createElement(oi.cU,{countShown:t.count,countDisabled:!r.count,starInnerScaleShown:t.starInnerScale,starInnerScaleDisabled:!r.starInnerScale,recordingKey:e.recordingKey}),t.arcData&&l.createElement(oi.Je,{arcDataDisabled:!r.arcData,recordingKey:e.recordingKey}),l.createElement(i9.L,{nodeField:i7.R.VISIBLE,currentValue:o}),l.createElement(ik.wu,{showExplicitOnly:!0,recordingKey:"layerPanel-variableModeEntries"}),l.createElement(oU,null),E&&d&&l.createElement(oa.$,{initialPosition:d,onClose:C,recordingKey:u.Pt(e,"advanced")}),a.showing&&l.createElement(or.T,{initialPosition:a.initialPosition,onClose:N,recordingKey:u.Pt(e,"advanced")}))}let oz=new oD;var oX=n(89586);let oQ="mask_panel--maskTypeDropdown--3Etsx";class oZ extends nX.l6{}class oJ extends nX.c${}class oj extends l.PureComponent{constructor(){super(...arguments),this.onMaskTypeChange=(e,t=rp.zk.YES)=>{V.Y5.updateSelectionProperties({maskType:e},{shouldCommit:t})},this.maskTypeFormatter={format:e=>{switch(e){case"ALPHA":return(0,T.t)("fullscreen.mask_panel.alpha");case"OUTLINE":return(0,T.t)("fullscreen.mask_panel.vector");case"LUMINANCE":return(0,T.t)("fullscreen.mask_panel.luminance")}},formatExtended:e=>{switch(e){case"ALPHA":return{text:(0,T.t)("fullscreen.mask_panel.alpha_extended")};case"OUTLINE":return{text:(0,T.t)("fullscreen.mask_panel.vector_extended")};case"LUMINANCE":return{text:(0,T.t)("fullscreen.mask_panel.luminance_extended")}}}},this.stopPropagation=e=>e.stopPropagation()}render(){let e=l.createElement(eE.fI,null,l.createElement(oZ,{id:"mask-type-dropdown",className:oQ,property:this.props.maskType,formatter:this.maskTypeFormatter,onChange:this.onMaskTypeChange,dispatch:this.props.dispatch,dropdownClassName:oQ,dropdownShown:this.props.dropdownShown,onMouseDown:this.stopPropagation,recordingKey:u.Pt(this.props,"maskType"),enablePreview:!0},l.createElement(oJ,{value:"ALPHA",recordingKey:u.Pt(this.props,"maskType","alpha")}),l.createElement(oJ,{value:"OUTLINE",recordingKey:u.Pt(this.props,"maskType","outline")}),l.createElement(oJ,{value:"LUMINANCE",recordingKey:u.Pt(this.props,"maskType","luminance")})));return l.createElement(tw.p,{name:"mask_panel"},l.createElement(eE.Zk,null,l.createElement(eE.fI,null,l.createElement(eE.xw,null,(0,T.tx)("fullscreen.mask_panel.mask"))),e))}}oj.displayName="MaskPanel";var oq=n(536825),o0=n(819785),o1=n(695038);function o5({addProperty:e,children:t,contentsVisibleOrMixed:n,minusDisabled:r,plusDisabled:a,recordingKey:i,removeProperty:o,showButton:s,title:c,dataTestId:p,shouldHideButton:d}){let{version:m}=(0,el.DP)(),h=(0,l.useCallback)(()=>{!1!==n||a||e()},[e,n,a]),_=n===G.oV,E=!_&&!n;null==s&&(s=!0===n?"-":"+");let y="+"===s?l.createElement(ev.K,{recordingKey:u.Pt(i,"addButton"),onClick:e,disabled:a,"aria-label":(0,T.t)("fullscreen.properties_panel.add"),htmlAttributes:{onMouseDown:R.dG,"data-testid":p??""}},l.createElement(ea.U,{svg:e6.A,fallbackSvg:tZ.A},l.createElement(en.e,null))):l.createElement(ev.K,{recordingKey:u.Pt(i,"removeButton"),onClick:o,disabled:r,"aria-label":(0,T.t)("fullscreen.properties_panel.remove"),htmlAttributes:{onMouseDown:R.dG,"data-testid":p??""}},l.createElement(ea.U,{svg:o0.A,fallbackSvg:o1.A},l.createElement(oq.O,null)));return"ui3"===m?l.createElement(l.Fragment,null,c&&l.createElement(nj.r,{onMouseDown:h,faded:E,isEmpty:E,titleTx:l.createElement("span",null,c),icon:d?void 0:y}),_&&l.createElement(eE.fI,null,l.createElement(eE.UZ,{className:ok.Pf},(0,T.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!_&&!E&&t):l.createElement(l.Fragment,null,c&&l.createElement(eE.fI,{onMouseDown:h,className:E?ok.et:void 0,recordingKey:u.Pt(i,"panelTitle")},l.createElement(eE.xw,{faded:E,extended:!0},l.createElement("div",{className:ok.yr},c)),l.createElement(eE.$4,null,d?null:y)),_&&l.createElement(eE.fI,null,l.createElement(eE.UZ,{className:ok.Pf},(0,T.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!_&&!E&&t)}class o4 extends u.uA{constructor(){super(...arguments),this.noop=()=>{}}render(){return l.createElement(tw.p,{name:"remove_group_fill_and_stroke_panel"},l.createElement(eE.Zk,null,l.createElement(o5,{title:"Background",addProperty:this.noop,removeProperty:U.glU.clearFillAndStrokePaintsOnSelectedGroups,contentsVisibleOrMixed:!0},l.createElement(eE.fI,{className:"remove_group_fill_and_stroke_panel--labelContainer--ngqjq"},l.createElement(eE.UZ,{className:"remove_group_fill_and_stroke_panel--label--orOpK"},(0,T.tx)("fullscreen.remove_group_fill_and_stroke.background_color_group_unsupported"))))))}}var o3=n(456363),o2=n(832637),o6=n(529358),o7=n(376503),o8=n(161459);let o9="pencil_tool_panel--advancedStroke--1497y";var se=n(362679),st=n(13556),sn=n(306413);function sl(e){let t="stroke-settings",[n,r]=(0,aK.fp)(o3.GI),a=n.paints||[],i=(0,q.wA)(),o=l.useContext(to.zK),c=()=>null!=o,p=e=>e.stopPropagation(),d=l.useRef(null),m=()=>{if(e.pickerShown?.id===t)i(I.XE());else{if(!d)return;let e=j.findDOMNode(d.current),n=(0,ep.cn)(e);i(I.u1({id:t,initialX:n.x,initialY:n.y}))}},h=e=>{r({paints:e}),Y.Tm.clearCache()},_=e=>{let{strokeWeight:t,dashPattern:n}=e,l=(0,G.E7)(t);l&&r({strokeWeight:l});let a=(0,G.E7)(n);a&&r({dashPattern:a})},E=e=>{let t=a.filter((t,n)=>!e.has(n));0===t.length&&(t=[a[0]]),h(t)},y=(e,{fromSearch:t}={})=>{i(aU.AV({style:e,inheritStyleKeyField:"inheritFillStyleKeyForStroke",fromSearch:t}))},{version:g}=(0,el.DP)(),v=!!n.styleId||a.length>0,b=e.pickerShown?.id===t,f=!e.userFlags.dismissed_shift_to_draw_straight_lines_hint,S=l.createElement(o6.v9,{strokeWeight:n.strokeWeight||o8.wv,onChange:_,recordingKey:u.Pt(e,"weight")}),P=l.createElement(o7.qR,{className:"ui3"===g?void 0:"pencil_tool_panel--dashCap--OD1E2",dashCap:(0,o7.Hd)(n.strokeCap||"ROUND")||"ROUND",onChange:e=>{r({strokeCap:e})},recordingKey:u.Pt(e,"dashCap")}),w=(0,s.kc)().ce_tv_fpl_dialog_trigger_button?l.createElement("span",{className:o9},l.createElement(nS.d,{onClick:m,toggled:b,"aria-label":(0,T.t)("fullscreen.pencil_tool.advanced_stroke_settings"),recordingKey:u.Pt(e,"more"),htmlAttributes:{onMouseDown:p,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.pencil_tool.advanced_stroke_settings")}},l.createElement(ea.U,{svg:se.A,fallbackSvg:st.A},l.createElement(i3.J,null)))):l.createElement(eE.YW,{svg:se.A,fallbackSvg:st.A,className:o9,onClick:m,onMouseDown:p,selected:b,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.pencil_tool.advanced_stroke_settings"),recordingKey:u.Pt(e,"more")});return l.createElement("div",{className:"pencil_tool_panel--pencilPanelContainer--O-fFF"},l.createElement(eE.Zk,null,l.createElement(iN.W4,{title:(0,T.t)("fullscreen.pencil_tool.stroke"),propertyList:a,onChange:h,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:U.rrT.STROKE_PRESET,styleType:"FILL",addProperty:()=>{V.Y5.triggerAction("add-stroke-to-selection")},onDeleteProperty:e=>E(e),onReorder:()=>{Y.Tm.clearCache()},renderProperty:(t,n,r,o,s,p,d,m,h)=>{let _=c()?"preview-paint":"paint",v=Y.Tm.getId(n,U.rrT.STROKE_PRESET,_),b=a.slice(0,n).some(e=>e.visible);return l.createElement(iN.Gg,{key:`paint-${n}`,id:v,index:n,inheritStyleKeyField:"inheritFillStyleKeyForStroke",singletonRow:1===a.length,selectedPropertyType:U.rrT.STROKE_PRESET,paint:t,selected:e.stylePickerShown.isShown?e.pickerShown?.id===v:r,isDragging:o,hasFocus:s,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,onChange:p,onApplyStyle:y,onMouseDown:d,onMouseMove:m,onMouseUp:h,onRemovePaint:a.length>1?()=>E(new Set([n])):void 0,hideVisibilityToggle:1===a.length,currentSelectedGradientStop:e.currentSelectedGradientStop,currentTool:U.NLJ.VECTOR_PENCIL,colorFormat:e.colorFormat,dispatch:i,dropdownShown:e.dropdownShown,pickerShown:e.pickerShown,editModeType:e.editModeType,defaultColor:Y.Em,library:e.library,openFile:e.openFile,recordingKey:u.Pt(e,n),variableScopes:new Set([U.j0r.STROKE]),isUI3:"ui3"===g,hasVisiblePaintBelow:b})},recordingKey:e.recordingKey,sceneGraphSelection:e.sceneGraphSelection,library:e.library,modalShown:e.modalShown,openFile:e.openFile,inheritStyleKeyField:"inheritFillStyleKeyForStroke",inheritStyleKey:n.styleId||null,inheritStyleID:null,selectedStyleProperties:e.selectedStyleProperties,stylePickerListLayout:e.stylePickerListLayout,stylePickerShown:e.stylePickerShown,onToggleListLayout:()=>{i(I.Y({isListLayout:!e.stylePickerListLayout}))},removeAllProperties:null,onApplyStyle:y,defaultColor:Y.rC}),v&&("ui3"===g?l.createElement(eg.fn,{ref:d,leftLabel:(0,T.tx)("fullscreen.properties_panel.section_stroke.label_weight"),leftInput:S,rightLabel:(0,T.tx)("fullscreen.properties_panel.section_stroke.label_end_cap"),rightInput:P,icon:w}):l.createElement(eE.fI,{ref:d},S,P,w))),f&&l.createElement("div",{className:"pencil_tool_panel--hintPanel--917wK"},l.createElement(o2.u,{title:(0,T.t)("fullscreen.pencil_tool.hold_shift_to_draw_straight_lines"),icon_DEPRECATED:sn.A,userFlag:"dismissed_shift_to_draw_straight_lines_hint",hintText:(0,T.t)("fullscreen.pencil_tool.now_vertical_horizontal_and_diagonal_lines_are_a_breeze")})),b&&e.pickerShown&&l.createElement(o7._2,{onChange:_,strokePanelMode:U.yTM.PENCIL,strokePanelTerminalPointCount:2,strokeCap:n.strokeCap||"ROUND",strokeJoin:"ROUND",maxStrokeWeight:n.strokeWeight||o8.wv,dashPattern:n.dashPattern,dropdownShown:e.dropdownShown,pickerShown:e.pickerShown,recordingKey:u.Pt(e,"advanced")}))}function sr(e){let t=(0,B.Ku)(),n=(0,af.R)(e=>({currentSelectedGradientStop:e.mirror.appModel.currentSelectedGradientStop,library:e.library,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,colorPicker:e.colorPicker,styleSets:e.styleSets,openFileKey:e.openFile?.key||null,reposById:e.repos,teams:e.teams,editModeType:e.mirror.appModel.activeCanvasEditModeType,currentTool:e.mirror.appModel.currentTool,sceneGraphSelection:e.mirror.sceneGraphSelection,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,inheritStyleKey:e.mirror.selectionProperties.inheritFillStyleKeyForStroke||null,selectedStyleProperties:e.mirror.selectedStyleProperties,stylePickerListLayout:e.stylePickerListLayout,userFlags:e.userFlags}));return l.createElement(sl,{...n,...e,colorFormat:t})}var sa=n(438377),si=n(270296),so=n(697378),ss=n(824189),sc=n(283942),sp=n(843495),sd=n(147723),su=n(252828);function sm({label:e,tab:t,active:n,className:r,recordingKey:a,keyboardShortcut:i}){let o=(0,q.d4)(e=>e.mirror.appModel.topLevelMode),s=(0,tC.dH)(),c=(0,eC.R)(),p=(0,nO.cJ)(),d=u.rf(a,"mousedown",()=>{if(!n){let e=sh(t,c,p).analyticsName;(0,tg.sx)("properties-panel-select-tab",{tab:e}),s===U.NLJ.SCALE&&t===U.FAf.PROTOTYPE&&V.Y5.triggerAction("set-tool-default"),(0,sp.NT)(t),o===U.lyf.PREVIEW&&(t===U.FAf.COMMENT?V.Y5.triggerAction("set-tool-comments"):V.Y5.triggerAction("set-tool-default"))}});return l.createElement("div",{className:r,onMouseDown:d,"data-label":e,...i?{"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":e,"data-tooltip-shortcut-key":i}:void 0},e)}function sh(e,t,n){return({[U.FAf.DESIGN]:{label:(0,T.t)("fullscreen.properties_panel.design"),tab:U.FAf.DESIGN,className:tc.Mf,recordingKey:"designTab",analyticsName:"design"},[U.FAf.PROTOTYPE]:{label:n?(0,T.t)("fullscreen.properties_panel.interactive"):(0,T.t)("fullscreen.properties_panel.prototype"),tab:U.FAf.PROTOTYPE,className:tc.Mf,recordingKey:n?"interactionsTab":"prototypeTab",analyticsName:n?"interactions":"prototype"},[U.FAf.INSPECT]:{label:(0,T.t)("fullscreen.properties_panel.properties"),tab:U.FAf.INSPECT,className:tc.Mf,recordingKey:"inspectTab",analyticsName:"inspect"},[U.FAf.COMMENT]:{label:t?(0,T.t)("fullscreen.properties_panel.comments"):(0,T.t)("fullscreen.properties_panel.comment"),tab:U.FAf.COMMENT,className:tc.Mf,recordingKey:"commentTab",analyticsName:"comment"},[U.FAf.EXPORT]:{label:(0,T.t)("fullscreen.properties_panel.export"),tab:U.FAf.EXPORT,className:tc.Mf,recordingKey:"exportTab",analyticsName:"export"},[U.FAf.SLIDE]:{label:(0,T.t)("fullscreen.properties_panel.design"),tab:U.FAf.SLIDE,className:tc.Mf,recordingKey:"designTab",analyticsName:"design"},[U.FAf.SLIDE_ANIMATION]:{label:(0,T.t)("slides.properties_panel.animate"),tab:U.FAf.SLIDE_ANIMATION,className:tc.Mf,recordingKey:"animateTab",analyticsName:"animate"},[U.FAf.SITE]:{label:(0,T.t)("fullscreen.properties_panel.design"),tab:U.FAf.SITE,className:tc.Mf,recordingKey:"sitesTab",analyticsName:"sites"},[U.FAf.COOPER]:{label:(0,T.t)("fullscreen.properties_panel.cooper_edit"),tab:U.FAf.COOPER,className:tc.Mf,recordingKey:"cooperTab",analyticsName:"cooper"}})[e]}function s_({activeTab:e,isUI3:t,shouldShowAlignControls:n,shouldRenderInspectTab:r,recordingKey:a}){let i=(0,q.d4)(e=>e.mirror.appModel.topLevelMode),o=(0,tC.dH)(),s=(0,tC.p8)("isReadOnly"),c=(0,td.ks)(),p=s&&!c,d=(0,tr.sO)(),u=(0,nO.cJ)(),m=(0,ss.g)(),h=(()=>{let n=t?d?[U.FAf.COMMENT]:[U.FAf.COMMENT,U.FAf.INSPECT]:[U.FAf.COMMENT,U.FAf.INSPECT,U.FAf.EXPORT];switch(i){case U.lyf.LAYOUT:if(p)return n;if(e===U.FAf.COMMENT)return[U.FAf.COMMENT];if(u)return[U.FAf.SITE,U.FAf.PROTOTYPE];if(d)return[U.FAf.SLIDE,U.FAf.SLIDE_ANIMATION];if(m)return[U.FAf.COOPER,U.FAf.EXPORT];return r?[U.FAf.DESIGN,U.FAf.PROTOTYPE,U.FAf.INSPECT]:[U.FAf.DESIGN,U.FAf.PROTOTYPE];case U.lyf.PREVIEW:case U.lyf.DEV_HANDOFF:return n;case U.lyf.BRANCHING:return[U.FAf.INSPECT];default:return[U.FAf.DESIGN,U.FAf.PROTOTYPE,U.FAf.INSPECT]}})(),_=h.find(t=>t===e),E=h.map((n,l)=>{let r=sh(n,t,u),a=r.tab===e||0===l&&void 0===_,s=r.className;return a&&(s=h.length>1?tc.yR:tc.iV),{...r,className:s,active:a,topLevelMode:i,currentTool:o}});return h.length&&(1!==h.length||t)?l.createElement(A.j9.Consumer,null,()=>{if(t)return l.createElement(sE,{recordingKey:a,tabInfo:E});let r=e===U.FAf.DESIGN&&n||e===U.FAf.COMMENT?tc.yW:tc.hv;return l.createElement("div",{className:r,"data-non-interactive":!0},E.map((e,t)=>l.createElement(sm,{key:t,...e})))}):null}function sE({tabInfo:e,recordingKey:t}){let n=e.reduce((e,t)=>(e[t.tab]=!0,e),{}),r=e.find(e=>e.active),[a,i]=so.t.useManagedTabs(n,r?.tab.toString()??"",e=>{let t=parseInt(e),n=sh(t,o,s).analyticsName;(0,tg.sx)("properties-panel-select-tab",{tab:n}),c===U.NLJ.SCALE&&t===U.FAf.PROTOTYPE&&V.Y5.triggerAction("set-tool-default"),(0,sp.NT)(t),p===U.lyf.PREVIEW&&(t===U.FAf.COMMENT?V.Y5.triggerAction("set-tool-comments"):V.Y5.triggerAction("set-tool-default"))},{recordingKey:u.Pt(t,"tabs")}),o=(0,eC.R)(),s=(0,nO.cJ)(),c=(0,tC.dH)(),p=(0,q.d4)(e=>e.mirror.appModel.topLevelMode);return l.createElement("div",{className:tc.A7},l.createElement("div",{role:"presentation",className:tc.tq,onKeyDown:e=>{e.isDefaultPrevented()||(0,sc.f7)(e,!0)}},l.createElement(so.t.TabStrip,{manager:i},e.map((e,t)=>l.createElement(so.t.Tab,{key:`props-panel-tab-${t}`,...a[e.tab]},e.label)))),l.createElement("div",{className:tc.wR},l.createElement(su.HT,{recordingKey:u.Pt(t,"zoomMenu")})),l.createElement("div",{"data-onboarding-key":sd.D9,className:tc.qq}))}var sy=n(101505),sg=n(94500),sv=n(178248),sb=n(205135),sf=n(994481);class sS extends u.o6{render(){return l.createElement(eE.Zk,null,l.createElement(eE.fI,null,l.createElement(eE.xw,null,(0,T.tx)("proto.menu.background"))),l.createElement(sP,{...this.props}))}}function sP(e){let t=l.useRef(null),n=l.useRef(null),r=(0,tk.GS)(),{dispatch:a,pickerShown:i,prototypeBackgroundColor:o}=e,s=l.useCallback(()=>{let e=r?j.findDOMNode(n.current):j.findDOMNode(t.current);if(i&&i.id===O.$T)a(I.XE());else if(e&&e instanceof HTMLElement){let t=(0,ep.cn)(e);a(I.u1({id:O.$T,initialX:t.x,initialY:t.y}))}},[a,i,r]),c=l.useCallback((e,t)=>{a((0,sg._P)({name:"Prototype Background Modified"})),V.Y5.updateSelectionProperties({prototypeBackgroundColor:e},{shouldCommit:t})},[a]),p=(0,G._W)(o,{r:0,g:0,b:0,a:1}),d=l.createElement("div",{className:"prototype_background_panel--colorValueContainer--CEbzl paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},l.createElement(lR.J,{onClick:s,color:p,opacity:p.a,recordingKey:u.Pt(e,"chit"),className:"prototype_background_panel--chit--F--d0 paint_panels--chit--twQEy"}),l.createElement(sb.AN,{className:"prototype_background_panel--color--e5Pc8 paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:lO.TI,property:p,onChange:c,recordingKey:u.Pt(e,"colorInput"),noBorderOnFocus:!0}));return l.createElement(l.Fragment,null,r?l.createElement(sf.TN,{ref:n},d):l.createElement(eE.fI,{ref:t,className:"prototype_background_panel--colorRow--MtNeY"},d),i&&i.id===O.$T&&l.createElement(iI.sk,{disabledVariableIds:new Set,title:(0,T.t)("proto.menu.background"),initialPosition:new y.Mi(i.initialX??0,i.initialY??0),color:p,boundVariable:null,onChange:c,recordingKey:u.Pt(e,"colorPicker")}))}sS.displayName="PrototypeBackgroundPanel";var sT=n(992271),sw=n(410465),sI=n(371435),sN=n(761725);let sk="prototype_device_panel--deviceSelect--wnOgI",sC="prototype_device_panel--deviceDropdown--ufbuZ",sA="prototype_device_panel--deviceOption--rvW-q",sO="prototype_device_panel--inactiveLabel--UEKyk prototype_device_panel--activeLabel--l162n",sx="prototype_device_panel--labelInactive--pv4Sf",sR="prototype_device_panel--deviceDropdownChevron--kq9TV",sL="prototype_device_panel--deviceDropdownInput--AxG9E";var sM=n(537545),sD=n(64111);class sF extends sw.I{}class sK extends sw.Y{}class sV extends l.PureComponent{constructor(){super(...arguments),this.deviceInfo=()=>sT.hY[this.props.prototypeDevice.presetIdentifier],this.shouldShowModelDropdown=()=>{let e=this.deviceInfo();return sT.yr[e?.deviceName||""].length>1},this.onModelChange=e=>{if(!this.deviceInfo())return;let t=sT.hY[e];if(!t)return;let n=this.props.prototypeDevice.rotation;V.Y5.updateSelectionProperties({prototypeDevice:{type:"PRESET",size:t.framePresetSize,presetIdentifier:e,rotation:n}})},this.renderModelDropdown=(e,t,n)=>{if(!e)return;let r=l.createElement(sW,{dispatch:this.props.dispatch,presetIdentifier:this.deviceInfo().presetIdentifier,dropdownShown:this.props.dropdownShown,onChange:this.onModelChange,recordingKey:u.Pt(this.props,"modelDropdown")}),a=t?l.createElement(sf.dx,{left:r,right:n}):l.createElement(sf.TN,null,r);return l.createElement("div",null,!this.props.isUI3&&l.createElement(eE.hl,null,l.createElement(eE.UZ,{className:sx},(0,T.tx)("presets.device_panel.model"))),this.props.isUI3?a:l.createElement(eE.fI,null,r))},this.cssForCurrentDeviceRotation=()=>{if("NONE"===this.props.prototypeDevice.type)return;let e="";switch("MICROSOFT_SURFACE_PRO_4"===this.props.prototypeDevice.presetIdentifier&&(e="scale(0.65)"),this.props.prototypeDevice.rotation){case"NONE":default:return;case"CCW_90":return`rotate(-90deg) ${e}`}},this.renderDevicePreview=()=>{let e=this.deviceInfo();if(!e)return;let t=(0,G._W)(this.props.prototypeBackgroundColor,{r:0,g:0,b:0,a:0}),n=lO.z5.format(t),r=t.r>.9&&t.g>.9&&t.b>.9,a=`1px solid ${r?"#EFEFEF":"transparent"}`,i=l.createElement("div",{className:"prototype_device_panel--devicePreview--T2Tzn",style:{backgroundColor:n,border:a}},l.createElement("img",{className:"prototype_device_panel--deviceImage--Wpr8Y",src:e.thumbnailUrl,style:{transform:this.cssForCurrentDeviceRotation()},alt:`${e.getI18nDeviceName()}`}));return l.createElement("div",null,!this.props.isUI3&&l.createElement(eE.hl,null,l.createElement(eE.UZ,{className:sx},(0,T.tx)("presets.device_panel.preview"))),this.props.isUI3?l.createElement(sf.TN,{appendedClassName:sN.Rk},i):l.createElement("div",{className:"prototype_device_panel--devicePreviewContainer--pC-H4"},i))},this.onChangeOrientation=e=>{let t=this.props.prototypeDevice;if("NONE"===t.type)return;let n=t.size.y>t.size.x,l=t.rotation;l=n?"PORTRAIT"===e?"NONE":"CCW_90":"PORTRAIT"===e?"CCW_90":"NONE",V.Y5.updateSelectionProperties({prototypeDevice:{...t,rotation:l}})},this.currentDeviceOrientation=()=>{let e=this.props.prototypeDevice;return"NONE"===e.type?"PORTRAIT":e.size.y>e.size.x?"NONE"===e.rotation?"PORTRAIT":"LANDSCAPE":"NONE"===e.rotation?"LANDSCAPE":"PORTRAIT"}}render(){let e=this.props.prototypeDevice,t=l.createElement(sG,{dispatch:this.props.dispatch,prototypeDevice:this.props.prototypeDevice,isUI3:this.props.isUI3,dropdownShown:this.props.dropdownShown,recordingKey:u.Pt(this.props,"deviceDropdown")}),n=l.createElement(sF,{property:this.currentDeviceOrientation(),onChange:this.onChangeOrientation,recordingKey:u.Pt(this.props,"orientationControl"),className:"prototype_device_panel--orientationControl--YdZ-v"},l.createElement(sK,{value:"PORTRAIT",svg:sD.A}),l.createElement(sK,{value:"LANDSCAPE",svg:sM.A})),r=(0,sT.$X)(e.type||"NONE",e.presetIdentifier),a=l.createElement(eE.fI,null,t,r&&n),i=this.deviceInfo()&&this.shouldShowModelDropdown(),o=r&&!i?l.createElement(sf.dx,{left:t,right:n}):l.createElement(sf.TN,null,t),s=l.createElement(sU,{prototypeDevice:this.props.prototypeDevice,dispatch:this.props.dispatch,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:u.Pt(this.props,"deviceSizeInputs")});return l.createElement(eE.Zk,null,l.createElement(eE.fI,{className:"prototype_device_panel--panelTitleRowOuter--wkKKy collapsible_property_panel--panelTitleRowOuter--i5K0R"},l.createElement(eE.xw,{extended:this.props.isUI3},this.props.isUI3?(0,T.tx)("presets.device_panel.prototype_settings"):(0,T.tx)("presets.device_panel.device"))),this.props.isUI3?o:a,this.renderModelDropdown(!!i,r,n),this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s,this.props.isUI3&&l.createElement(sP,{pickerShown:this.props.pickerShown,dispatch:this.props.dispatch,prototypeBackgroundColor:this.props.prototypeBackgroundColor,recordingKey:u.Pt(this.props,"backgroundPanel")}),this.renderDevicePreview(),!this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s)}}function sU(e){let t=l.useCallback(t=>{V.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:t,y:e.prototypeDevice.size.y},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.y,e.prototypeDevice.rotation]),n=l.useCallback(t=>{V.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:e.prototypeDevice.size.x,y:t},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.x,e.prototypeDevice.rotation]),r=l.createElement(nG.$j,{className:"prototype_device_panel--scrubbableInputLeftCol--P2T66 prototype_device_panel--scrubbableInput--0TFVb",inputClassName:"prototype_device_panel--leftColInput--pAJSy prototype_device_panel--input--vNirJ",dispatch:e.dispatch,value:e.prototypeDevice.size.x,onValueChange:t,smallNudgeAmount:e.smallNudgeAmount,bigNudgeAmount:e.bigNudgeAmount,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("presets.device_panel.device_width_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:u.Pt(e,"deviceWidth")},l.createElement("span",{className:sO},(0,T.tx)("proto.device_panel.width"))),a=l.createElement(nG.$j,{className:"prototype_device_panel--scrubbableInput--0TFVb",inputClassName:"prototype_device_panel--input--vNirJ",dispatch:e.dispatch,value:e.prototypeDevice.size.y,onValueChange:n,smallNudgeAmount:e.smallNudgeAmount,bigNudgeAmount:e.bigNudgeAmount,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("presets.device_panel.device_height_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:u.Pt(e,"deviceHeight")},l.createElement("span",{className:sO},(0,T.tx)("proto.device_panel.height")));return(0,tk.GS)()?l.createElement(sf.dx,{left:r,right:a}):l.createElement(eE.fI,null,r,a)}sV.displayName="PrototypeDevicePanel";class sB extends nX.l6{}class sH extends nX.c${}class sG extends u.o6{constructor(){super(...arguments),this.formatter={format:e=>"NONE"===e?this.props.isUI3?(0,T.t)("proto.frame_preset_panel.no_device"):(0,T.t)("proto.frame_preset_panel.none"):"CUSTOM"===e?(0,T.t)("proto.frame_preset_panel.custom_size"):"PRESENTATION"===e?(0,T.t)("proto.frame_preset_panel.presentation"):e.getI18nDeviceName(),isEqual:(e,t)=>"NONE"===e||"CUSTOM"===e||"PRESENTATION"===e||"NONE"===t||"CUSTOM"===t||"PRESENTATION"===t?e===t:e.presetIdentifier===t.presetIdentifier},this.onChange=e=>{(0,sg.$J)(e,this.props.prototypeDevice);let t=this.props.prototypeDevice.type,n=t;n="NONE"===e?"NONE":"PRESENTATION"===e?"PRESENTATION":"CUSTOM"===e?"CUSTOM":"PRESET",this.props.dispatch((0,sg._P)({name:"Prototype Device Type Changed",params:{oldType:this.props.prototypeDevice.presetIdentifier||t,newType:e.presetIdentifier||n,isInlinePreviewOpened:aK.zl.get(sI.h).modalStatus===sI.b.OPEN}}))},this.renderPresetOption=(e,t)=>{let n=(0,sT.Fh)(e,this.props.prototypeDevice);if(null===n)return null;let r=n.framePresetSize;return l.createElement(sH,{value:n,key:t,recordingKey:u.Pt(this.props,n.deviceName)},l.createElement("div",{className:sA},l.createElement("span",null,n.getI18nDeviceName()),l.createElement("span",null,r.x,"\u200A\xd7\u200A",r.y)," "))}}render(){let e;return e="NONE"===this.props.prototypeDevice.type?"NONE":"PRESENTATION"===this.props.prototypeDevice.type?"PRESENTATION":"CUSTOM"===this.props.prototypeDevice.type?"CUSTOM":sT.hY[this.props.prototypeDevice.presetIdentifier]||"NONE",l.createElement(sB,{className:sk,chevronClassName:sR,inputClassName:sL,id:"prototype-device-select",property:e,formatter:this.formatter,onChange:this.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownClassName:sC,recordingKey:u.Pt(this.props,"select")},l.createElement(sH,{value:"NONE",recordingKey:u.Pt(this.props,"NONE")}),l.createElement(nX.sK,null),sT.r6.map(this.renderPresetOption),l.createElement(nX.sK,null),sT.J_.map(this.renderPresetOption),l.createElement(nX.sK,null),sT.AG.map(this.renderPresetOption),l.createElement(nX.sK,null),sT.$w.map(this.renderPresetOption),l.createElement(nX.sK,null),l.createElement(sH,{value:"CUSTOM",recordingKey:u.Pt(this.props,"CUSTOM")},l.createElement("div",{className:sA},l.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.custom_size")),l.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.fit")))),l.createElement(sH,{value:"PRESENTATION",recordingKey:u.Pt(this.props,"PRESENTATION")},l.createElement("div",{className:sA},l.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.presentation")),l.createElement("span",null,(0,T.tx)("proto.frame_preset_panel.fill")))),l.createElement(nX.sK,null),sT.dr.map(this.renderPresetOption))}}sG.displayName="DeviceDropdown";class sY extends nX.l6{}class s$ extends nX.c${}class sW extends u.o6{constructor(){super(...arguments),this.formatter={format:e=>{let t=sT.hY[e];return t?t.getI18nStyleName():(0,T.t)("proto.frame_preset_panel.missing")},isEqual:(e,t)=>e===t},this.renderStyleOption=(e,t)=>{let n=e.presetIdentifier;return l.createElement(s$,{value:n,key:t,recordingKey:u.Pt(this.props,n)},sT.hY[n].getI18nStyleName())}}render(){let e=sT.hY[this.props.presetIdentifier];if(!e)return null;let t=sT.yr[e.deviceName],n=this.props.presetIdentifier;return l.createElement(sY,{className:sk,chevronClassName:sR,inputClassName:sL,id:"prototype-style-select",property:n,formatter:this.formatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownClassName:sC,recordingKey:u.Pt(this.props,"select")},t.map(this.renderStyleOption))}}sW.displayName="ModelDropdown";var sz=n(939683),sX=n(529004),sQ=n(348425),sZ=n(634238),sJ=n(497306),sj=n(113468),sq=n(248752);function s0(e){return e??"Default"}let s1=l.createContext({getNodeName:s0}),s5=l.memo(function({getNodeName:e=s0,children:t}){let n=l.useMemo(()=>({getNodeName:e}),[e]);return l.createElement(s1.Provider,{value:n},t)});var s4=n(73349),s3=n(38340),s2=n(908946),s6=n(987850),s7=n(239737),s8=n(222478),s9=n(709731),ce=n(921717),ct=n(384775),cn=n(119081),cl=n(351631);function cr(){let e=(0,q.wA)(),t=(0,q.d4)(e=>(0,Z.Yh)(e.mirror.appModel,s8.JT.MAGIC_LINK)),n=(0,s7.vh)(),{withinMeter:r}=(0,s6.X)(s8.JT.MAGIC_LINK);return n&&r?l.createElement("span",{className:"magic_link--magicLinkButton--CWefW","data-testid":"magic-link-entry"},l.createElement(ev.K,{recordingKey:u.Pt("prototypeInteractionList","magicLinkButton"),"aria-label":(0,T.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip"),onClick:()=>{(0,ct.$I)({moduleToOpen:{type:"custom",module:l.createElement(cn.p,null),name:ce.S.MAGIC_LINK,beforeModuleOpen:()=>{e((0,sg.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"properties_panel"}})),(0,s9.B3)(s8.JT.MAGIC_LINK),t&&(0,s9.Ag)(s8.JT.MAGIC_LINK,cl.e,{})}},trackingData:{source:"prototype_magic_link_triggered"}})},htmlAttributes:{"data-tooltip":(0,T.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip"),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip-show-above":!0}},l.createElement(s2.B,null))):null}var ca=n(422237);let ci=(0,ca.ex)("prototype_info",function(e){let{tooltipText:t}=e;return l.createElement("div",{className:nK.cx.flex.justifyCenter.itemsCenter.$},l.createElement("span",{className:nK.cx.m6.flexGrow1.$,style:{maxWidth:144}},t))},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var co=n(764257),cs=n(146935);let cc="prototype_interaction_list--warningIcon--Mgr5O";var cp=n(612325);let cd=new nU.JV,cu=new nU.Eq,cm=new nU.sX,ch=l.memo(function({inSites:e}){let t=(0,q.wA)(),n=(0,q.d4)(cy),r=(0,q.d4)(cg),a=(0,q.d4)(cT),i=(0,q.d4)(cb),s=(0,q.d4)(cf),c=(0,q.d4)(cS),p=(0,s3.a2)(),d=(0,s3.R)(),u=(0,q.d4)(cw),m=(0,q.d4)(cv),h=Object.keys(c).length>1,_=cI(),E=function(){let e=cI(),t=(0,q.d4)(cP);return!!e&&!!t&&t.selectionOverrides[U.YnC.PROTOTYPE_INTERACTIONS]}(),g=(0,tA.q5)(),v=(0,sz.U)(),b=l.useMemo(()=>new nU.cP(s),[s]),f=l.useCallback(e=>b.format(e),[b]),S=l.useRef(null),T=e=>{V.Y5.updateSelectionProperties({prototypeInteractions:e},{shouldCommit:rp.zk.NO_BUT_TRACK_AS_EDIT}),V.Y5.commit()},w=(0,sv.Zj)(Object.keys(c),s),N=l.createElement(c_,{interactionGroups:p,inheritedInternalInteractionGroups:d,mixed:h,isOrInInstance:_,openFile:g,dispatch:t,currentSelectedProperty:i,onChange:(e,t)=>{let l=e.map(e=>e.interactions).reduce((e,t)=>e.concat(t),[]),a=new Set,i=[];for(let e of l){let t=P.dI(e.id);if(t&&!a.has(t))i.push(e);else{if(!(t=U.glU.generateUniqueID()))continue;let n=P.sH(t);if(!n)continue;i.push({...e,id:n})}t&&a.add(t)}t===sj.J.NORMAL?i=[...i,...r]:t===sj.J.INHERITED_INTERNAL&&(i=[...n,...i]),T(i)},onAddProperty:e=>{e.stopPropagation();let t=[],l=[];for(let e of Object.keys(c)){let n=U.glU.generateUniqueID();if(!n)return;let r=P.sH(n);if(!r)return;let a={id:r,sourceNodeID:P.sH(e)??P.Hr,event:{interactionType:function(e){let t=new Set;for(let{event:n}of e)t.add(n.interactionType);for(let e of cN)if(!t.has(e))return e;return"ON_KEY_DOWN"}(p)}};a.stateManagementVersion=1,a.actions=[{connectionType:"NONE"}],t.push(a);let i=(0,sJ.kh)(s,e);l.push(i?i.guid:"")}let a=t.map(e=>sX.d({nodeID:e.sourceNodeID,interactionID:e.id}));if(a.length>0){U.glU.setSelectedInteractions(a);let e=j.findDOMNode(S.current),t=(0,ep.cn)(e);cx(new y.Mi(t.x,t.y+(0,o.jz)(cs.rightNavGridRowHeight)))}let i=[...n,...t,...r];v("prototype_interaction_added",{interactionCount:i.length,sourceTlfIds:JSON.stringify(l)}),T(i)},onDeleteProperty:(e,t)=>{let n=(t===sj.J.NORMAL?p:d).filter((t,n)=>e.has(n)),l=[];for(let e of n)l.push(...e.interactions);let r=cO(l);ew.l7.user("delete-prototype-interactions",()=>U.glU.deleteInteractions(r)),V.Y5.deselectProperty()},shouldIgnoreKeyboardEvents:a.length>0||i.type!==U.rrT.PROTOTYPE_INTERACTION&&i.type!==U.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,isValidPrototypingSourceSelected:u,showResetInteractionsButton:E,toggleScrollBehaviorPicker:()=>{if(m?.id===O.AO)t(I.XE());else{let e=j.findDOMNode(S.current),n=(0,ep.cn)(e);t(I.u1({id:O.AO,initialX:n.x,initialY:n.y}))}},headerAccessory:w&&l.createElement(cr,null),inSites:e});return l.createElement(s5,{getNodeName:f},e?N:l.createElement(eE.Zk,{"data-onboarding-key":"prototypePanel",ref:S,"data-testid":"prototype-interaction-list"},N))});function c_(e){let t=l.useRef(!1);return l.createElement(l.Fragment,null,l.createElement(sq.h6,{title:e.inSites?"":(0,T.t)("proto.title_interactions"),stylePickerShown:{isShown:!1},addProperty:e.onAddProperty,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,hideAddButton:!e.isValidPrototypingSourceSelected,renderProperty:(n,r,a,i,o,s,c,p,d)=>e.inSites&&(0,co.p4)(n.interactions)?l.createElement(l.Fragment,null):l.createElement(cE,{interactionGroups:e.interactionGroups,interactionGroup:n,index:r,selected:a,hasFocus:o,isDragging:i,singletonRow:e.interactionGroups.length<=1,onMouseDown:c,onMouseMove:p,onMouseUp:d,dispatch:e.dispatch,category:sj.J.NORMAL,autoOpenVariablePicker:t,recordingKey:u.Pt("prototypeInteractionList",r),key:r,inSites:e.inSites}),openFile:e.openFile,onChange:t=>e.onChange(t,sj.J.NORMAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:U.rrT.PROTOTYPE_INTERACTION,propertyList:e.interactionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,sj.J.NORMAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:"prototypeInteractionList",boldHeaderRow:e.interactionGroups.length>=1||e.inheritedInternalInteractionGroups.length>=1,showResetInteractionsButton:e.showResetInteractionsButton,onResetInteractions:ew.nc.user("reset-instance-interactions",()=>U.glU.resetSymbolOverrides(U.YnC.PROTOTYPE_INTERACTIONS)),headerAccessory:e.headerAccessory}),e.isOrInInstance&&e.inheritedInternalInteractionGroups.length>0&&l.createElement(eE.fI,null,l.createElement(eE.UZ,{className:"prototype_interaction_list--label--dGwgy"},(0,T.tx)("proto.interaction_list.variant_interactions"))),e.isOrInInstance&&l.createElement(sq.h6,{title:"",stylePickerShown:{isShown:!1},addProperty:aS.lQ,hideAddButton:!0,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,renderProperty:(n,r,a,i,o,s,c,p,d)=>l.createElement(cE,{interactionGroups:e.inheritedInternalInteractionGroups,interactionGroup:n,index:r,selected:a,hasFocus:o,isDragging:i,singletonRow:e.inheritedInternalInteractionGroups.length<=1,onMouseDown:c,onMouseMove:p,onMouseUp:d,dispatch:e.dispatch,category:sj.J.INHERITED_INTERNAL,autoOpenVariablePicker:t,recordingKey:u.Pt("prototypeInheritedInternalInteractionList",r)}),openFile:e.openFile,onChange:t=>e.onChange(t,sj.J.INHERITED_INTERNAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:U.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,propertyList:e.inheritedInternalInteractionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,sj.J.INHERITED_INTERNAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:u.Pt("prototypeInheritedInternalInteractionList")}))}function cE({interactionGroups:e,interactionGroup:t,index:n,hasFocus:r,isDragging:a,selected:o,singletonRow:s,onMouseDown:c,onMouseMove:p,onMouseUp:d,dispatch:m,category:h,recordingKey:_,inSites:E}){let y=(0,tk.GS)(),{getNodeName:g}=l.useContext(s1),v=(0,q.d4)(cT),b=(0,s3.a2)(),f=(0,q.d4)(cv),S=f?.id===O.o$?f:null,w=(0,q.d4)(cf),N=(0,aK.md)(sZ.NE)?cu:cd,k=function(e,t){let n=new Set(t.map(e=>{let t=sX.s(e);return t?P.dI(t.interactionID):""}).filter(e=>""!==e));for(let t of e.interactions){let e=P.dI(t.id);if(e&&n.has(e))return!0}return!1}(t,v),C=l.useRef(null),A=l.useRef(null),x=l.useCallback(()=>{let e=y&&E?A.current:j.findDOMNode(C.current);cx((0,ep.cn)(e))},[E,y]),R=l.useCallback(()=>{U.glU.setSelectedInteractions([]),m(I.XE()),V.Y5.deselectProperty()},[m]),L=n=>{if(!C||!A)return;let l=cA(t);if(n.metaKey||n.ctrlKey)k?l=v.filter(e=>!l.includes(e)):l.push(...v);else if(n.shiftKey){var r;let n,a;let i=(r=t.key,e.findIndex(({key:e})=>e===r));if(-1===i)return;let o=function(e,t){let n=1/0,l=e;for(let r of t){let t=Math.abs(e-r);t<n&&(l=r,n=t)}return l}(i,function(e,t){let n=new Set,l=new Set(t);for(let t=0;t<e.length;t++)cA(e[t]).some(e=>l.has(e))&&n.add(t);return n}(e,v)),s=(n=i,a=o,i>o&&(n=o,a=i),e.slice(n,a+1));for(let e of(l=[...v],s))l.push(...cA(e))}U.glU.setSelectedInteractions(l),V.Y5.updateAppModel({currentSelectedProperty:{type:h===sj.J.NORMAL?U.rrT.PROTOTYPE_INTERACTION:U.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,indices:[]}}),l.length?S&&S.shouldPin?E&&R():x():R()},M=!1,D=null;for(let e of t.interactions)if(!D&&e.actions&&e.actions.length>0)D=e.actions[0];else if(cC(D,g,y)!=cC((e.actions??[])[0],g,y)){M=!0;break}let F=()=>{let e=cO(t.interactions);U.glU.hoverInteractions(e)},K=()=>{U.glU.hoverInteractions([])},B=e=>{e.stopPropagation()},H=e=>{e.stopPropagation();let n=cO(t.interactions);ew.l7.user("delete-prototype-interactions",()=>U.glU.deleteInteractions(n)),V.Y5.deselectProperty(),V.Y5.commit()},G=!1,Y=!1;if(h===sj.J.NORMAL){for(let e of t.interactions){if(!e.actions||0===e.actions.length)continue;let t=e.actions[0];if(!t||"SWAP_STATE"!==t.navigationType)continue;let n="";if(t.transitionNodeID){let e=w.get(P.dI(t.transitionNodeID));if(e){if(e.isState)n=e.parentGuid||"";else{G=!0;break}}}let l=U.glU.getContainingStateGroupOrSelf(P.dI(e.sourceNodeID??P.Hr))||"";if(""===l||""!==n&&l!==n){G=!0;break}}let n=["ON_CLICK","MOUSE_DOWN","MOUSE_UP"].includes(t.event.interactionType??""),l=e.some(e=>"ON_HOVER"===e.event.interactionType);Y=n&&l}G=h!==sj.J.INHERITED_INTERNAL&&G;let $=function(e,t,n){if(e!==sj.J.INHERITED_INTERNAL)return null;let l=n.find(e=>e.key===t.key&&e.interactions.length===t.interactions.length&&1===t.interactions.length&&function(e,t){let n=void 0!==e.actions&&e.actions.length>=1,l=void 0!==t.actions&&t.actions.length>=1;if(!n||!l)return!1;let r=e.actions.every(e=>"UPDATE_MEDIA_RUNTIME"===e.connectionType),a=e.actions.every(e=>P.fn(e.transitionNodeID));var i=!1;for(let e of t.actions)if("INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType){i=!0;break}return r&&a&&i}(e.interactions[0],t.interactions[0]));return l?.interactions[0]??null}(h,t,e),W=(0,tf.ZC)($),z=(0,sz.U)();l.useEffect(()=>{null===W&&$&&z("prototype_interaction_conflict_override_created",{interaction_type:t.interactions[0].event?.interactionType,action_type:$.event?.interactionType})});let X=h===sj.J.INHERITED_INTERNAL&&b.some(e=>e.key===t.key)&&!$,Q=o&&r,Z=k&&!o,J=new nU.js,ee=(0,nU.mj)(D),et=M||!D||"NONE"===ee?void 0:J.format(ee),en=l.createElement(eg.Y9,{ref:A,"data-testid":`prototypeInteractionItem-${n}`,singletonRow:s,dragging:a,onMouseDown:c,onMouseMove:p,onMouseUp:d,onMouseEnter:F,onMouseLeave:K,recordingKey:u.Pt(_,"draggableRow")},l.createElement(eg.s2,{label:null,leftIcon:l.createElement(eE.YW,{selected:!!(S&&S.shouldPin),recordingKey:u.Pt(_,"interactionIcon"),onClick:L,onMouseDown:B,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":ck(t.event,N)},(0,nB.e7)(t.event.interactionType)),input:l.createElement(eS.D8,{onClick:L,onMouseDown:B,recordingKey:u.Pt(_,"interactionText")},ck(t.event,N),et&&l.createElement("span",{className:"prototype_interaction_list--summaryText--hGpp4"},"\xa0\xb7\xa0",et)),rightIcon:l.createElement(ev.K,{onClick:H,"aria-label":(0,T.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:u.Pt(_,"removeButton"),htmlAttributes:{onMouseDown:B}},l.createElement(ea.U,{svg:o0.A,fallbackSvg:o1.A},l.createElement(oq.O,null)))}));return E?en:l.createElement("div",null,l.createElement(tM.e,{ref:C,className:y?"prototype_interaction_list--interactionListRow---i0Rg ui3_rows--ui3OneInputOneIconRow--SMoQ9 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu":void 0,"data-testid":`prototypeInteractionItem-${n}`,selected:Q,selectedSecondary:Z,singletonRow:s,dragging:a,onMouseDown:c,onMouseMove:p,onMouseUp:d,onMouseEnter:F,onMouseLeave:K,recordingKey:u.Pt(_,"draggableRow")},l.createElement(eS.D8,{className:i()({"prototype_interaction_list--interactionButton--q-58Q":!0,"prototype_interaction_list--interactionButtonSelected--8YX9A":Q,"prototype_interaction_list--interactionButtonSelectedSecondary--Nx73L":Z}),onClick:L,onMouseDown:B,recordingKey:_},G?l.createElement(eP.B,{className:cc,svg:cp.A,"data-tooltip-type":ec.Ib.SPECIAL,"data-tooltip":ci,"data-tooltip-text":(0,T.t)("proto.prototype_panel.this_interaction_must_swap_from_a_variant_to_another_variant_within_the_same_component_set_tooltip")}):Y?l.createElement(eP.B,{className:cc,svg:cp.A,"data-tooltip-type":ec.Ib.SPECIAL,"data-tooltip":ci,"data-tooltip-text":(0,T.t)("proto.prototype_panel.prototype_multiple_interactions_mouse_and_hover_tooltip")}):X&&l.createElement(eP.B,{className:cc,svg:cp.A,"data-tooltip-type":ec.Ib.SPECIAL,"data-tooltip":ci,"data-tooltip-text":(0,T.t)("proto.prototype_panel.this_interaction_will_not_be_triggered_as_interactions_on_instances_are_triggered_before_inherited_internal_interactions_tooltip")}),l.createElement("div",{className:Y||G||X?"prototype_interaction_list--interactionNameShort--5UMLL prototype_interaction_list--interactionName--zQsSL":"prototype_interaction_list--interactionName--zQsSL"},ck(t.event,N)),l.createElement(sQ.t,{className:"prototype_interaction_list--actionIcon--x-haP",svg:M?(0,nB.Yb)("NONE"):(0,nB.Yb)((0,nU.mj)(D))}),l.createElement("div",{className:"prototype_interaction_list--targetText--UMXyE",dir:"auto"},M?(0,T.t)("proto.variant_actions.mixed"):h===sj.J.INHERITED_INTERNAL?(0,T.t)("proto.variant_actions.change_to"):cC(D,g,y))),l.createElement("span",{className:"prototype_interaction_list--removeButton--g6aiQ"},l.createElement(ev.K,{onClick:H,"aria-label":(0,T.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:u.Pt(_,"removeButton"),htmlAttributes:{onMouseDown:B}},l.createElement(ea.U,{svg:o0.A,fallbackSvg:o1.A},l.createElement(oq.O,null))))))}function cy(e){return e.mirror.selectionProperties.prototypeInteractions||[]}function cg(e){return e.mirror.selectionProperties.prototypeInheritedInternalInteractions||[]}function cv(e){return e.pickerShown}function cb(e){return e.mirror.appModel.currentSelectedProperty}function cf(e){return e.mirror.sceneGraph}function cS(e){return e.mirror.sceneGraphSelection}function cP(e){return e.mirror.selectionProperties.resettableInstanceOverrides}function cT(e){return e.mirror.appModel.selectedInteractions}function cw(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0}function cI(){let e=(0,q.d4)(cS),t=(0,q.d4)(cf);for(let n of Object.keys(e)){let e=t.get(n);if(e&&("INSTANCE"===e.type||e.isInstanceSublayer))return!0}return!1}let cN=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"];function ck(e,t){let n=t.format(e.interactionType??"NONE");if("ON_KEY_DOWN"===e.interactionType&&e.keyTrigger&&e.keyTrigger.keyCodes){let t=(0,s4._i)(e.keyTrigger.keyCodes),l=(0,s4.E8)(e.keyTrigger,!0);if("KEYBOARD"===e.keyTrigger.triggerDevice&&t)return n+" ("+(0,s4.U8)(t)+")";if(l)return n+" ("+l+")"}return n}function cC(e,t,n){let l=new nU.js(n);if(!e)return l.format("NONE");let r=(0,nU.mj)(e);switch(r){case"NONE":case"GO_BACK":case"CLOSE_OVERLAY":case"SET_VARIABLE":case"SET_VARIABLE_MODE":case"CONDITIONAL":return l.format(r);case"OPEN_URL":if(null!=e.connectionURL){if((0,G.gl)(e.connectionURL))return(0,T.t)("fullscreen.mixed");return e.connectionURL.replace(/https?:\/\//,"")}return l.format("NONE");case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":case"UPDATE_MEDIA_SKIP_TO":return cm.format(e)}return e.transitionNodeID?(0,G.gl)(e.transitionNodeID)?(0,T.t)("fullscreen.mixed"):t(P.dI(e.transitionNodeID)):l.format("NONE")}function cA(e){return e.interactions.filter(e=>e.id&&e.sourceNodeID).map(e=>sX.d({nodeID:e.sourceNodeID,interactionID:e.id}))}function cO(e){let t=[];for(let n of e){let{sourceNodeID:e,id:l}=n;e&&l&&t.push(sX.d({nodeID:e,interactionID:l}))}return t}function cx(e){V.Y5.triggerAction("show-prototype-interaction-edit-modal",{args:{source:U.yxn.PROPERTIES_PANEL,x:e.x,y:e.y}})}var cR=n(386560);function cL(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M14 7.879V6a1 1 0 0 0-1.707-.707L9.586 8H6.5A1.5 1.5 0 0 0 5 9.5v5a1.5 1.5 0 0 0 .974 1.405L6.879 15H6.5a.5.5 0 0 1-.5-.5v-5a.5.5 0 0 1 .5-.5H10l2-2 1-1v2.879l1-1Zm0 4.242-1 1V18l-1-1-1.44-1.44-.706.708 2.439 2.44A1 1 0 0 0 14 18v-5.879Zm3.854-5.975a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.707l11-11a.5.5 0 0 1 .708 0ZM15.5 10.677v-.056l.681-.68A2.999 2.999 0 0 1 15.5 14.6v-1.277c.311-.352.5-.816.5-1.323s-.189-.97-.5-1.323ZM18 12a3.987 3.987 0 0 0-1.112-2.767l.708-.707a5.002 5.002 0 0 1-2.096 8.246V15.71A4.001 4.001 0 0 0 18 12Z",clipRule:"evenodd"}))}var cM=n(553738),cD=n(647215),cF=n(477633),cK=n(564734),cV=n(68710),cU=n(632319);function cB({videoPlayback:{mediaLoop:e,muted:t}}){let n=null;return(0,G.gl)(e)&&(0,G.gl)(t)?n=(0,T.tx)("proto.prototype_panel.replace_mixed_muted_and_loop_video_playback",{loopSvg:l.createElement(eP.B,{svg:cF.A,className:cD.eT}),speakerSvg:l.createElement(eP.B,{svg:cV.A,className:cD.To})}):(0,G.gl)(e)?n=(0,T.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:l.createElement(eP.B,{svg:cF.A,className:cD.eT})}):(0,G.gl)(t)&&(n=(0,T.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:l.createElement(eP.B,{svg:cV.A,className:cD.To})})),n?l.createElement(eE.fI,null,l.createElement(eE.UZ,{className:cD.pc},n)):null}let cH=e=>(0,G.gl)(e)?"mixed":e,cG=e=>!0===e,cY=function(e){let t=()=>{let t=!cG(e.videoPlayback.mediaLoop);e.updateSelectionProperties({videoMediaLoop:t}),e.dispatch((0,sg._P)({name:"Node video loop changed",params:{newLoop:t,oldLoop:cH(e.videoPlayback.mediaLoop),numVideosSelected:e.videoPlayback.numVideosSelected}}))},n=()=>{let t=!e.videoPlayback.muted;e.updateSelectionProperties({videoMuted:t}),e.dispatch((0,sg._P)({name:"Node video muted changed",params:{newMuteValue:t,oldMuteValue:cH(e.videoPlayback.muted),numVideosSelected:e.videoPlayback.numVideosSelected}}))},r=l.createElement("span",{className:(0,tk.GS)()?void 0:cD.hW},l.createElement(rd.S,{label:l.createElement(l6.J,{"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.default_video_playback_state")},(0,T.tx)("proto.prototype_panel.autoplay")),onChange:t=>{e.updateSelectionProperties({videoAutoplay:t}),e.dispatch((0,sg._P)({name:"Node video autoplay Changed",params:{newAutoplay:t,oldAutoplay:cH(e.videoPlayback.autoplay),numVideosSelected:e.videoPlayback.numVideosSelected}}))},checked:cG(e.videoPlayback.autoplay),mixed:(0,G.gl)(e.videoPlayback.autoplay)})),a=(0,tk.GS)()?l.createElement(oo.f,{checked:cG(e.videoPlayback.mediaLoop),mixed:(0,G.gl)(e.videoPlayback.mediaLoop),onIcon:l.createElement(ea.U,{svg:cF.A},l.createElement(ru,null)),offIcon:l.createElement(ea.U,{svg:cK.A},l.createElement(rm,null)),onChange:t,recordingKey:u.Pt(e,"videoLoopToggle"),"aria-label":(0,T.t)("proto.prototype_panel.loop"),htmlAttributes:{"data-tooltip":(0,T.t)("proto.prototype_panel.loop"),"data-tooltip-type":ec.Ib.TEXT}}):l.createElement(cM.m,{toggled:cG(e.videoPlayback.mediaLoop),svg:e.videoPlayback.mediaLoop?cF.A:cK.A,fallbackSvg:e.videoPlayback.mediaLoop?cF.A:cK.A,onMouseDown:t,recordingKey:u.Pt(e,"videoLoopToggle"),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.loop"),dataTestId:"videoLoopToggle",className:cD.BM}),i=(0,tk.GS)()?l.createElement(oo.f,{checked:cG(!e.videoPlayback.muted),mixed:(0,G.gl)(e.videoPlayback.muted),onIcon:l.createElement(ea.U,{svg:cV.A},l.createElement(rh.L,null)),offIcon:l.createElement(ea.U,{svg:cU.A},l.createElement(cL,null)),onChange:n,recordingKey:u.Pt(e,"videoSoundToggle"),"aria-label":(0,T.t)("proto.prototype_panel.sound"),htmlAttributes:{"data-tooltip":(0,T.t)("proto.prototype_panel.sound"),"data-tooltip-type":ec.Ib.TEXT}}):l.createElement(cM.m,{toggled:!e.videoPlayback.muted,svg:cG(e.videoPlayback.muted)?cU.A:cV.A,fallbackSvg:cG(e.videoPlayback.muted)?cU.A:cV.A,onMouseDown:n,recordingKey:u.Pt(e,"videoSoundToggle"),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("proto.prototype_panel.sound"),dataTestId:"videoSoundToggle",className:cD.BM}),o=(0,tk.GS)()?l.createElement(eg.pG,{input:r,leftIcon:a,rightIcon:i}):l.createElement(eE.fI,{className:cD.kh},r,l.createElement("div",{className:cD.zc},a,i));return l.createElement(eE.Zk,null,l.createElement(eE.fI,null,l.createElement(eE.xw,{extended:!0},(0,T.tx)("proto.prototype_panel.video"))),o,l.createElement(cB,{videoPlayback:e.videoPlayback}))};var c$=n(509453),cW=n(420450),cz=n(955136);function cX(e){let{type:t}=e;return l.createElement("div",{className:nK.cx.flex.justifyCenter.itemsCenter.$},l.createElement(eP.B,{className:nK.cx.flexGrow1.mx12.$,useOriginalSrcFills_DEPRECATED:!0,svg:"horizontal"===t?cW.A:cz.A}),l.createElement("span",{className:nK.cx.flexGrow1.m6.$,style:{maxWidth:144}},(0,T.tx)("proto.prototype_panel.content_needs_to_be_bigger_than_the_frame_tooltip")))}let cQ=(0,ca.ex)("prototype_scroll_horizontal_info",cX,()=>({type:"horizontal",unconstrainWidth:!0})),cZ=(0,ca.ex)("prototype_scroll_vertical_info",cX,()=>({type:"vertical",unconstrainWidth:!0})),cJ="scroll_behavior_panel--inactiveLabel--IexW8",cj="scroll_behavior_panel--inactiveLabelContainer--lQjAi";var cq=n(591363);function c0(e){let{scrollDirection:t,showScrollWarning:n,disableOverflowBehaviorItem:r,dropdownShown:a,updateSelectionProperties:i}=e,o=(0,q.wA)(),[s,c]=function(){let e=(0,nH.J2)(U.Ez5.propertiesPanelState().shownPropertiesPanels)[U.ibQ.OVERFLOW_ITEM],t=(0,nO.cJ)(),n=(0,lk.kl)("isSection"),l=(0,lk.kl)("anyTopLevelFramesInSelection");return[e,!t&&!n&&!l]}(),p=(0,tk.GS)()?l.createElement(nj.mS,{titleTx:(0,T.tx)("proto.scroll_panel.scroll_behavior_title")}):l.createElement(eE.fI,null,l.createElement(eE.xw,{className:"scroll_behavior_panel--panelTitle--kN-Nl"},(0,T.tx)("proto.scroll_panel.scroll_behavior_title")));return s||c?l.createElement(tw.p,{name:"scroll_behavior_panel"},l.createElement(eE.Zk,null,p,c&&l.createElement(eE.fI,null,l.createElement("div",{className:cj},l.createElement("span",{className:cJ},(0,T.tx)("proto.scroll_panel.position_dropdown.position"))),l.createElement(c7,{recordingKey:u.Pt(e,"scrollBehavior"),dropdownShown:a})),s&&l.createElement(eE.fI,null,l.createElement("div",{className:cj},l.createElement("span",{className:cJ},(0,T.tx)("proto.scroll_panel.overflow_dropdown.overflow"))),n&&l.createElement(eP.B,{className:"scroll_behavior_panel--infoIcon--FeXbf",svg:cq.A,useOriginalSrcFills_DEPRECATED:!0,"data-tooltip-type":ec.Ib.SPECIAL,"data-tooltip":"HORIZONTAL"===t?cQ:cZ,"data-tooltip-show-immediately":!0}),l.createElement(c3,{className:n?"scroll_behavior_panel--scrollDirectionShort--w6iSo":"scroll_behavior_panel--scrollDirection--XSmzK",property:t,dispatch:o,dropdownShown:a,onChange:e=>{o((0,sg._P)({name:"Overflow Behavior changed",params:{newDirection:e,oldDirection:(0,G._W)(t,"MIXED")}})),i({scrollDirection:e})},disabled:r,recordingKey:u.Pt(e,"scrollDirection")})))):null}class c1 extends nX.c${}class c5 extends nX.l6{}let c4=["NONE","HORIZONTAL","VERTICAL","BOTH"];class c3 extends l.PureComponent{render(){return l.createElement(c5,{id:"scroll-direction-select",className:this.props.className,chevronClassName:"scroll_behavior_panel--scrollDirectionChevron--5keRt",inputClassName:"scroll_behavior_panel--scrollDirectionInput--vJSqu",property:this.props.property||"NONE",formatter:nU.Rk,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,disabled:this.props.disabled,recordingKey:this.props.recordingKey,dataTestId:"scroll-direction-dropdown"},c4.map(e=>l.createElement(c1,{key:e,value:e,recordingKey:u.Pt(this.props,e)})))}}c3.displayName="ScrollDirectionDropdown";class c2 extends nX.l6{}class c6 extends nX.c${}function c7(e){let t=(0,q.wA)(),n=(0,lk.kl)("scrollBehavior"),{fixedScrollingDisabled:r}=(0,af.R)(e=>{let t=e.mirror.selectionProperties;return{fixedScrollingDisabled:!t.nodesAreAllNotInStacksOrAbsolutePositioned||!t.allHaveScrollableFrameAsParent}}),a="scroll-behavior-select",i=e.dropdownShown&&e.dropdownShown.type===a?nU.Ge:nU.wi;return l.createElement(c2,{id:a,className:"scroll_behavior_panel--scrollPosition--YAyUM",formatter:i,property:n||"SCROLLS",onChange:e=>{t((0,sg._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}}));let n="FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===e?U.KjJ.FIXED:"STICKY_SCROLLS"===e?U.KjJ.STICKY_SCROLLS:U.KjJ.SCROLLS;ew.l7.user("set-scroll-behavior",()=>U.X3B.aggressivelySetScrollBehaviorOfSelection(n)),V.Y5.commit()},dispatch:t,dropdownShown:e.dropdownShown,dropdownClassName:"scroll_behavior_panel--fullWidth--reSmx",recordingKey:e.recordingKey,disabled:e.disabled,dataTestId:"scroll-behavior-dropdown"},l.createElement(c6,{value:"SCROLLS"}),l.createElement(c6,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:r}),l.createElement(c6,{value:"STICKY_SCROLLS"}))}var c8=n(105020),c9=n(548183),pe=n(854547),pt=n(654784),pn=n(351731);function pl(){return l.createElement(o2.u,{idForTests:"create-connection-hint",title:(0,T.t)("proto.onboarding.creating_a_connection"),userFlag:"dismissed_create_connection_hint",icon_DEPRECATED:pe.A,iconFallback:pt.A,hintText:(0,T.t)("proto.onboarding.select_a_frame_or_object_hint")})}function pr(){return l.createElement(o2.u,{idForTests:"delete-connection-hint",title:(0,T.t)("proto.onboarding.removing_a_connection"),userFlag:"dismissed_delete_connection_hint",icon_DEPRECATED:c8.A,iconFallback:c9.A,hintText:(0,T.t)("proto.onboarding.to_delete_a_connection_click_and_drag_on_either_end")})}function pa(){return l.createElement(o2.u,{idForTests:"play-button-hint",title:(0,T.t)("proto.onboarding.running_your_prototype"),userFlag:"dismissed_play_button_hint",icon_DEPRECATED:pn.A,hintText:(0,T.t)("proto.onboarding.use_the_play_button_hint")})}function pi({dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:r}){let a=0===r&&!e,i=0!==r&&!t,o=!n,s=l.useMemo(()=>a?sy.c.CREATING_A_CONNECTION:i?sy.c.REMOVING_A_CONNECTION:o?sy.c.RUNNING_YOUR_PROTOTYPE:null,[a,i,o]);return s?l.createElement(x.fu,{name:"Prototype Onboarding Hint Panel V1",properties:{trackingDescriptor:s}},l.createElement(eE.Zk,null,l.createElement("div",null,a&&l.createElement(pl,null),i&&l.createElement(pr,null),o&&l.createElement(pa,null)))):null}class po extends l.PureComponent{constructor(){super(...arguments),this.onClickShowPrototypeSettings=()=>{this.props.dispatch((0,sg._P)({name:"Show Prototype Settings Clicked"})),sp.wr()}}renderOnboardingPanel(){let e=!!this.props.userFlags.dismissed_create_connection_hint,t=!!this.props.userFlags.dismissed_delete_connection_hint,n=!!this.props.userFlags.dismissed_play_button_hint,r=this.props.selectionProperties.numTransitionsOnCurrentPage;return l.createElement(pi,{dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:r})}renderPrototypeSettingsPanel(){return l.createElement(tw.p,{name:"show_prototype_settings_panel"},l.createElement(eE.Zk,{className:this.props.isUI3?tc.rq:void 0},l.createElement(c$.z,{onClick:this.onClickShowPrototypeSettings,recordingKey:u.Pt(this.props,"prototypeSettingsButton")},(0,T.tx)("proto.menu.show_prototype_settings"))))}renderDevicePanel(){(0,tv.KF)((0,G.hS)(this.props.selectionProperties.prototypeDevice),"should not have mixed device selection");let e=(0,sg.Qx)(this.props.selectionProperties.prototypeDevice);return l.createElement(sV,{key:"device-panel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,prototypeBackgroundColor:this.props.selectionProperties.prototypeBackgroundColor,prototypeDevice:e,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:"devicePanel",isUI3:this.props.isUI3,pickerShown:this.props.pickerShown})}render(){let e=!(0,G.hS)(this.props.selectionProperties.transitionNodeID)||P.fn((0,G.E7)(this.props.selectionProperties.transitionNodeID)),t=this.props.selectionProperties.numSelected??!1,n=!this.props.isSites&&!!this.props.selectionProperties.numVideosSelected,r=this.props.selectionProperties.isInstanceSelected||this.props.selectionProperties.isInstanceSublayerSelected,a=!this.props.isSites&&this.props.selectionProperties.prototypeStartingPointsInfo&&this.props.selectionProperties.prototypeStartingPointsInfo.length>0,i=!this.props.isSites&&!e,o=!this.props.isSites&&((this.props.selectionProperties.isValidPrototypingSourceSelected??!0)||this.props.selectionProperties.isSectionSelected&&(0,sv.YR)());if(!t)return l.createElement("div",null,!this.props.isSites&&this.renderDevicePanel(),!this.props.isUI3&&l.createElement(sS,{recordingKey:u.Pt(this.props,"backgroundPanel"),prototypeBackgroundColor:this.props.selectionProperties.prototypeBackgroundColor,pickerShown:this.props.pickerShown,dispatch:this.props.dispatch}),a&&l.createElement(nb.A,null),!this.props.isSites&&i&&this.renderOnboardingPanel(),l.createElement(iP.Mw,{panelName:iP.ON.PROTOTYPE}));{let e=l.createElement(c0,{dropdownShown:this.props.dropdownShown,scrollDirection:this.props.selectionProperties.scrollDirection??"NONE",showScrollWarning:this.props.selectionProperties.showWontScrollWarning??!1,disableOverflowBehaviorItem:!!r,recordingKey:u.Pt(this.props,"scrollBehaviorPanel"),updateSelectionProperties:V.Y5.updateSelectionProperties});return l.createElement("div",null,!this.props.isSites&&this.props.selectionProperties.isTopLevelFrameAndValidPrototypeSourceSelected&&l.createElement(cR.A,{recordingKey:u.Pt(this.props,"startingPointPanel")}),o&&l.createElement(ch,null),e,n&&l.createElement(cY,{updateSelectionProperties:V.Y5.updateSelectionProperties,dispatch:this.props.dispatch,videoPlayback:function(e){let{videoMediaLoop:t,videoAutoplay:n,videoMuted:l,numVideosSelected:r}=e;return(0,tv.B1)(t),(0,tv.B1)(n),(0,tv.B1)(l),(0,tv.B1)(r),{autoplay:n,muted:l,mediaLoop:t,numVideosSelected:r}}(this.props.selectionProperties)}),!this.props.isSites&&this.renderPrototypeSettingsPanel(),i&&this.renderOnboardingPanel(),l.createElement(iP.Mw,{panelName:iP.ON.PROTOTYPE}))}}}po.displayName="PrototypePanel";let ps=(0,x.kp)(function(e){let{bigNudgeAmount:t,smallNudgeAmount:n}=(0,B.sT)(),r=(0,tk.GS)(),a=(0,nO.cJ)();return l.createElement(po,{...e,bigNudgeAmount:t,smallNudgeAmount:n,isUI3:r,isSites:a})},J.e0.PROTOTYPE_PANEL);var pc=n(544403),pp=n(672591),pd=n(139689),pu=n(146394),pm=n(155300);let ph={[U.eVK.TOP_LEFT]:"anchor_point_selector--apTopLeft--jsueH",[U.eVK.TOP_CENTER]:"anchor_point_selector--apTopMiddle--Wp-kD",[U.eVK.TOP_RIGHT]:"anchor_point_selector--apTopRight--mbC5X",[U.eVK.MIDDLE_LEFT]:"anchor_point_selector--apMiddleLeft--G-YlO",[U.eVK.MIDDLE_CENTER]:"anchor_point_selector--apMiddleMiddle--gut-r",[U.eVK.MIDDLE_RIGHT]:"anchor_point_selector--apMiddleRight--VZnhH",[U.eVK.BOTTOM_LEFT]:"anchor_point_selector--apBottomLeft--30X3n",[U.eVK.BOTTOM_CENTER]:"anchor_point_selector--apBottomMiddle--ySpzF",[U.eVK.BOTTOM_RIGHT]:"anchor_point_selector--apBottomRight--rXs-P"},p_={[U.eVK.TOP_LEFT]:"top_left",[U.eVK.TOP_CENTER]:"top_center",[U.eVK.TOP_RIGHT]:"top_right",[U.eVK.MIDDLE_LEFT]:"middle_left",[U.eVK.MIDDLE_CENTER]:"middle_center",[U.eVK.MIDDLE_RIGHT]:"middle_right",[U.eVK.BOTTOM_LEFT]:"bottom_left",[U.eVK.BOTTOM_CENTER]:"bottom_center",[U.eVK.BOTTOM_RIGHT]:"bottom_right"};function pE(e){let{value:t,anchorPoint:n,onAnchorPointChange:r,disabled:a,dataTestId:o}=e,s=l.useCallback(()=>{r(t)},[r,t]),c=t===n;return l.createElement("button",{className:`anchor_point_selector--anchorPointButton--JCPGp ${ph[t]}`,onClick:s,disabled:a,"data-testid":o},l.createElement("div",{className:i()("anchor_point_selector--anchorPointButtonInner--LSo9Y",{"anchor_point_selector--apButtonActive--eNX6V":c,"anchor_point_selector--disabled--YCcFc":a}),"data-testid":c?`${o}.active`:void 0}))}let py=e=>"INPUT"===e.tagName;function pg(e){let{anchorPoint:t,onAnchorPointChange:n,disabled:r,restoreFocusElements:a}=e,[o,s]=l.useState(document.activeElement),c=e=>{n(e),o&&py(o)&&a?.includes(o)&&o.focus()};return l.createElement("div",{className:i()("anchor_point_selector--anchorPointSelector--ZC9rv",{"anchor_point_selector--anchorPointSelectorDisabled--JScxh":r}),onMouseDown:()=>{s(document.activeElement)}},l.createElement(l.Fragment,null,l.createElement(pE,{disabled:r,value:U.eVK.TOP_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${p_[U.eVK.TOP_LEFT]}`}),l.createElement(pE,{disabled:r,value:U.eVK.TOP_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${p_[U.eVK.TOP_CENTER]}`}),l.createElement(pE,{disabled:r,value:U.eVK.TOP_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${p_[U.eVK.TOP_RIGHT]}`})),l.createElement(l.Fragment,null,l.createElement(pE,{disabled:r,value:U.eVK.MIDDLE_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${p_[U.eVK.MIDDLE_LEFT]}`}),l.createElement(pE,{disabled:r,value:U.eVK.MIDDLE_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${p_[U.eVK.MIDDLE_CENTER]}`}),l.createElement(pE,{disabled:r,value:U.eVK.MIDDLE_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${p_[U.eVK.MIDDLE_RIGHT]}`})),l.createElement(l.Fragment,null,l.createElement(pE,{disabled:r,value:U.eVK.BOTTOM_LEFT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${p_[U.eVK.BOTTOM_LEFT]}`}),l.createElement(pE,{disabled:r,value:U.eVK.BOTTOM_CENTER,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${p_[U.eVK.BOTTOM_CENTER]}`}),l.createElement(pE,{disabled:r,value:U.eVK.BOTTOM_RIGHT,anchorPoint:t,onAnchorPointChange:c,dataTestId:`scale_panel.anchor.${p_[U.eVK.BOTTOM_RIGHT]}`})))}let pv=U.eVK.MIDDLE_CENTER;var pb=(e=>(e.TextInput="text-input",e.Selector="selector",e))(pb||{}),pf=(e=>(e.Select="select",e.Input="input",e.Scrub="scrub",e.Width="width",e.Height="height",e))(pf||{});function pS(e,t){return(0,p.xN)(e,0)?((0,m.x1)("clampScaleValue","scale is 0",{originalValue:e,newValue:t}),1):(0,p.qE)(t/e,.01,100)}var pP=n(336417),pT=n(127285),pw=n(360882),pI=n(614851),pN=n(59466);let pk=[.25,.5,.75,1,2,3,4,5,10];class pC extends nY.a3{}class pA extends nX.c${}let pO=new class{constructor(){this.MAX_SCALE=100,this.MIN_SCALE=.01}parse(e){let t=(0,pw.q)(e),n=(0,pT.O4)(t,1);if(null!==n.value&&isFinite(n.value)){let t=(0,pw.v)(e);return{value:n.value,anchorPoint:null===t?void 0:t}}throw new nV.LS("Could not parse input",n.error)}format(e){if(null==e)return"";let t=parseFloat(e.value.toFixed(2));return`${t}x`}getNudgeAmount(e){return e?1:.5}incrementBy(e,t){return{value:e.value+t,anchorPoint:e.anchorPoint}}snap(e,t){return{value:(0,p.YE)(e.value,t),anchorPoint:e.anchorPoint}}clamp(e){return{value:(0,p.qE)(e.value,this.MIN_SCALE,this.MAX_SCALE),anchorPoint:e.anchorPoint}}isEqual(e,t){return e.value===t.value&&e.anchorPoint===t.anchorPoint}},px=l.forwardRef((e,t)=>{let{disabled:n,scale:r,onScaleChange:a,recordingKey:i,onInputKeyDown:o}=e,s=(0,q.wA)(),c=(0,q.d4)(e=>e.dropdownShown),p=u.c1(i),d=(0,tk.GS)(),m=pk.map((e,t)=>l.createElement(pA,{key:t,value:{value:e},recordingKey:p("scaleInput",e)})),h={smallNudgeAmount:1,bigNudgeAmount:10,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01,"data-tooltip":"","data-tooltip-type":ec.Ib.TEXT,dispatch:s,value:{value:r},onValueChange:(e,t)=>{a(e.value,pf.Scrub,t),t&&V.Y5.commit()},scrubbingDisabled:n,formatter:pO},_=l.createElement(ea.U,{svg:pN.A},l.createElement(pP.l,null));return l.createElement(nY.ow,{value:{select:d?nQ.pW:void 0,inputComponent:d?nQ.gm:void 0}},l.createElement(nX.tV,{value:{chevron:d?nZ.c9:void 0}},l.createElement(pC,{scrubbableControlProps:h,id:"scale-input-fullscreen.scale_panel.scale",forwardedRef:t,className:"scale_row--scaleCombobox--jimxi",property:{value:r},onKeyDown:o,onChange:(e,t,n)=>{a(e.value,n===nY.G7.Input?pf.Input:pf.Select,t??rp.zk.NO,e.anchorPoint),t&&V.Y5.commit()},formatter:pO,dispatch:s,dropdownShown:c,onMouseDown:e=>{e.stopPropagation()},recordingKey:p("scaleInput"),disabled:n,icon:_,iconClassName:pI.QK,dropdownWidth:104,dataTestId:"scale_panel.scale"},m)))});l.forwardRef((e,t)=>l.createElement(eE.fI,null,l.createElement(px,{...e,ref:t})));let pR="scale_width_height_row--condensedWidthHeightRow--VOTEM",pL="scale_width_height_row--condensedScrubbableInput--XxHxl",pM={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};function pD(e){let{disabled:t,scale:n,property:r,selectionRegionsBounds:a,selectionRegionsOriginalBounds:i,onScaleChange:o,recordingKey:s,forwardedRef:c,onKeyDown:d}=e,m="width"===r?pf.Width:pf.Height,h=(0,q.wA)(),_=u.c1(s),E=function(){if(a&&a.length){let e=a[0][r];return a.every(t=>(0,p.xN)(t[r],e,.005))?e:G.oV}return G.oV}(),y=(0,lq.Xs)(),g=(0,G.gl)(E)?pM:{},v=(0,tk.GS)();return l.createElement(nG.$j,{noBorderOnHover:!0,dispatch:h,forwardedRef:c,className:pL,inputClassName:pI.hF,disabled:t,floatingPointFormat:v?void 0:{maxNumDigits:4},onKeyDown:d,dataTestId:`scale_panel.${r}`,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":"width"===r?(0,T.t)("fullscreen.properties_panel.transform_panel.width"):(0,T.t)("fullscreen.properties_panel.transform_panel.height"),tooltipForScreenReadersOnly:!0,recordingKey:_(`${r}Input.input`),min:(0,G.gl)(E)?.01:1,value:E??0,mixedMathHandler:{getValue:()=>n,onChange:(e,t,n)=>{let l=t(e);Number.isNaN(l)||o((0,p.qE)(l,.01,100),m,n)}},onValueChange:(e,t)=>{!Number.isNaN(e)&&E&&E!==G.oV&&i&&i.length&&o(pS(i[0][r],e),m,t)},...y,...g},l.createElement("span",{className:`${pI.QK} svg`},"width"===r?(0,T.tx)("fullscreen.properties_panel.transform_panel.w"):(0,T.tx)("fullscreen.properties_panel.transform_panel.h")))}function pF(e){let{widthRef:t,heightRef:n,onWidthInputKeyDown:r,onHeightInputKeyDown:a,...i}=e;return l.createElement(pD,{...i,property:"width",forwardedRef:t,onKeyDown:r})}function pK(e){let{widthRef:t,heightRef:n,onWidthInputKeyDown:r,onHeightInputKeyDown:a,...i}=e;return l.createElement(pD,{...i,property:"height",forwardedRef:n,onKeyDown:a})}function pV(e){return l.createElement(eE.fI,{className:pR},l.createElement(pF,{...e}),l.createElement(pK,{...e}))}function pU(e){let t=l.createElement(pF,{...e}),n=l.createElement(pK,{...e});return l.createElement(eg.fn,{leftLabel:(0,T.t)("fullscreen.properties_panel.transform_panel.width"),leftInput:t,rightLabel:(0,T.t)("fullscreen.properties_panel.transform_panel.height"),rightInput:n,icon:null})}var pB=n(889012),pH=n.n(pB);let pG="scale_panel--scalePanelRow--Cbovd",pY="scale_panel--scalePanel--EfJhl";var p$=n(630834);let pW=()=>{V.Y5.triggerAction("set-tool-default")};function pz(e){let t=(0,q.d4)(e=>e.mirror.sceneGraphSelection),n=(0,lk.kl)("selectionRegions"),r=(0,G.E7)(n),a=(0,tf.ZC)(r),i=l.useRef(0),[o,c]=(0,l.useState)(void 0),d=(0,tf.ZC)(o),m=l.useRef(null),h=(0,lk.kl)("selectionResizable"),_=(0,G._W)(h,!1),E=(0,tC.p8)("activeUserAction"),y=(0,tf.ZC)(E),g=(0,nH.J2)(U.Ez5.propertiesPanelState().shownPropertiesPanels),v=(0,tf.ZC)(g),[b,f]=(0,l.useState)(!1),S=l.useRef(null),P=l.useRef(null),w=l.useRef(null),I=(0,tC.p8)("currentTool"),N=(0,tf.ZC)(I),k=I!==U.NLJ.SCALE,C=!_||k,A=(0,tk.GS)(),[O,x]=(0,l.useState)(pv),R=(0,nH.J2)(U.Ez5.canvasViewState().scaleToolLastCanvasAnchorPoint),L=u.qP(e.recordingKey??"","anchorPointChange",x),[M,D]=(0,l.useState)(void 0),F=(0,l.useCallback)(e=>{void 0===M?D(e):M!==e&&D(null)},[M]),{trackScaleChangeEvent:K,trackScaleToolDismissed:B,trackAnchorPointChange:H}=function(){let e=(0,sz.am)(),t=(0,l.useCallback)(t=>{e("scale_tool_panel_set_value",{key:"height",...t})},[e]),n=(0,l.useMemo)(()=>pH()(t,3e3),[t]),r=(0,l.useCallback)((e,l)=>l?n(e):t(e),[n,t]),a=(0,l.useCallback)(t=>e("scale_tool_panel_set_value",{key:"width",...t}),[e]),i=(0,l.useMemo)(()=>pH()(a,3e3),[a]),o=(0,l.useCallback)((e,t)=>t?i(e):a(e),[i,a]),s=(0,l.useCallback)(t=>e("scale_tool_panel_set_value",{key:"scale",...t}),[e]),c=(0,l.useMemo)(()=>pH()(s,3e3),[s]),p=(0,l.useCallback)((e,t)=>t?c(e):s(e),[c,s]),d=(0,l.useCallback)(t=>e("scale_tool_panel_dismissed",{...t}),[e]);return{trackScaleChangeEvent:p,trackWidthChangeEvent:o,trackHeightChangeEvent:r,trackAnchorPointChange:(0,l.useCallback)(t=>e("scale_tool_set_anchor_point",{...t}),[e]),trackScaleToolDismissed:d}}();(0,l.useEffect)(()=>{E===U.QOV.RESIZING&&O!==R&&(F(R),L(R))},[E,O,L,F,R]);let[Y,$]=(0,l.useState)(1),[W,z]=(0,l.useState)(!1),[X,Q]=(0,l.useState)(!1),[Z,J]=(0,l.useState)(!0),ee=(0,l.useCallback)((e,t)=>{o&&o.length&&(U.glU.setScale(e,t,o.map(e=>({origin:{x:e.x,y:e.y},size:{x:e.width,y:e.height}})),null!==M),Q(!0),F(t))},[o,M,F]);(0,l.useEffect)(()=>{z(!0)},[t]),(0,l.useEffect)(()=>{!v?.[U.ibQ.SCALE_ITEM]&&g?.[U.ibQ.SCALE_ITEM]&&z(!0)},[g,v]);let et=(0,l.useCallback)(()=>X?(Q(!1),!0):E===U.QOV.RESIZING||E===U.QOV.DEFAULT&&y===U.QOV.RESIZING,[E,X,y]);(0,l.useLayoutEffect)(()=>{if(a&&a.length&&r&&r.length&&a.length===r.length)for(let e=0;e<r.length;e++){let{x:t,y:n,width:l,height:i}=r[e].bounds,{x:o,y:s,width:c,height:d}=a[e].bounds;if(c!==l||d!==i){if(!et()&&!W){z((0,p.xN)(c,l)!==(0,p.xN)(d,i));break}}else if(o!==t||s!==n){F(null);break}}},[a,r,et,F,W]),(0,l.useLayoutEffect)(()=>{let e=!1;if((0,s.kc)().ce_scale_tool_skew&&r){let t=m.current??r.map(e=>(e.bounds.width||1)/(e.bounds.height||1)),n=U.glU.getSelectionAngleSum();if(r.length===t.length){m.current=[];for(let l=0;l<r.length;++l){let a=(r[l].bounds.width||1)/(r[l].bounds.height||1);(e||(0,pm.o)(a,t[l],1e-4))&&(0,pm.o)(n,i.current,1e-4)||(e=!0),m.current.push(a),i.current=n}}}(e||W)&&($(1),L(pv),U.Ez5.canvasViewState().scaleToolLastCanvasAnchorPoint.set(pv),D(void 0),c(U.glU.getSelectionRegionsBounds().map(({origin:e,size:t})=>({x:e.x,y:e.y,width:t.x,height:t.y}))),f(!1),z(!1))},[W,r,L,R]),(0,l.useLayoutEffect)(()=>{r&&r.length&&o&&o.length&&(r!==a||(0,s.kc)().ce_scale_tool_skew&&o!==d)&&(Z?$(pS(o[0].width,r[0].bounds.width)):J(!0))},[d,r,o,a,Z]),(0,l.useEffect)(()=>{let e=I===U.NLJ.SCALE&&N!==U.NLJ.SCALE;e&&Object.keys(t).length>0&&e&&[U.QOV.DEFAULT,U.QOV.SELECTING_TEXT].includes(E)&&S.current&&(S.current.focus(),S.current.select())},[E,I,N,t]),(0,l.useEffect)(()=>{let e=()=>{S.current&&(f(!1),S.current.focus(),S.current.select())};return pu.h.subscribeScaleToolActivated(e),()=>{pu.h.unsubscribeScaleToolActivated(e)}},[]),(0,l.useEffect)(()=>{let e=e=>{e.target!==S.current&&e.target!==P.current&&e.target!==w.current&&f(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let en=(0,l.useCallback)(e=>{let t="Escape"===e.key,n="Enter"===e.key;!b&&(n||t)&&pW()},[b]),el=l.createElement(eE.$4,null,l.createElement(ev.K,{onClick:()=>{pW(),B({selectionCount:Object.keys(t).length})},"aria-label":(0,T.t)("fullscreen.scale_panel.close")},l.createElement(ea.U,{svg:p$.default,fallbackSvg:p$.default},l.createElement(pd.A,null)))),er=l.createElement(px,{scale:Y,onInputKeyDown:en,onScaleChange:ew.nc.user("change-scale",(e,t,n,l)=>{$(e),J(!1),void 0!==l&&(0,s.kc)().ee_scale_tool_ap_input?(K({value:e,source:t,anchorPoint:l,anchorPointSource:pb.TextInput}),ee(e,l),L(l)):(t===pf.Select?K({value:e,source:t,anchorPoint:O,anchorPointSource:pb.Selector}):K({value:e,source:t,anchorPoint:O,anchorPointSource:pb.Selector},!0),(0,j.flushSync)(()=>{ee(e,O),n&&r&&r.length>1&&U.glU.logMultiEditActionForSelection("scale_panel_finish",null)}))}),disabled:C,recordingKey:e.recordingKey,ref:S}),ei=l.createElement(pg,{restoreFocusElements:[S.current,P.current,w.current].filter(Boolean),anchorPoint:O,onAnchorPointChange:ew.nc.user("change-anchor-point",e=>{e!==O&&(1!==Y&&(ee(1,O),ee(Y,e)),L(e)),H({anchorPoint:e})}),disabled:C}),eo=l.createElement(A?pU:pV,{scale:Y,selectionRegionsBounds:r.map(e=>e.bounds),selectionRegionsOriginalBounds:o,onScaleChange:ew.nc.user("change-scale",(e,t,n)=>{K({value:e,source:t,anchorPoint:O,anchorPointSource:pb.Selector},!0),$(e),J(!1),ee(e,O),n&&(r&&r.length>1&&U.glU.logMultiEditActionForSelection("scale_panel_finish",null),V.Y5.commit())}),widthRef:P,heightRef:w,onHeightInputKeyDown:en,onWidthInputKeyDown:en,disabled:C,recordingKey:e.recordingKey});return A?l.createElement(eE.Zk,{"data-testid":`scale_panel.state.${k?"hidden":C?"disabled":"enabled"}`,className:pY},l.createElement(nj.r,{titleTx:(0,T.tx)("fullscreen.scale_panel.scale"),icon:el}),eo,l.createElement(eg.sY,{leftLabel:(0,T.t)("fullscreen.scale_panel.scale"),rightLabel:(0,T.t)("fullscreen.scale_panel.anchor_point"),topLeftInput:er,bottomLeftInput:null,rightInput:ei,topIcon:null,bottomIcon:null})):l.createElement(eE.Zk,{"data-testid":`scale_panel.state.${k?"hidden":C?"disabled":"enabled"}`},l.createElement(eE.fI,{className:pG},l.createElement(eE.xw,null,(0,T.tx)("fullscreen.scale_panel.scale")),el,ei),l.createElement(eE.fI,null,er),eo)}let pX={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};function pQ({disabled:e,widthOrHeight:t,scale:n,property:r,onScaleChange:a,onWidthOrHeightChange:i,recordingKey:o,forwardedRef:s,onKeyDown:c}){let p="width"===r?pf.Width:pf.Height,d=(0,q.wA)(),m=(0,lq.Xs)(),h=(0,G.gl)(t)?pX:{},_=u.c1(o),E=(0,tk.GS)();return l.createElement(nG.$j,{noBorderOnHover:!0,dispatch:d,forwardedRef:s,className:pL,inputClassName:pI.hF,disabled:e,floatingPointFormat:E?void 0:{maxNumDigits:4},onKeyDown:c,dataTestId:`scale_panel.${r}`,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":"width"===r?(0,T.t)("fullscreen.properties_panel.transform_panel.width"):(0,T.t)("fullscreen.properties_panel.transform_panel.height"),tooltipForScreenReadersOnly:!0,recordingKey:_(`${r}Input.input`),min:(0,G.gl)(t)?.01:1,value:t||0,mixedMathHandler:{getValue:()=>n,onChange:(e,t,n)=>{let l=t(e);Number.isNaN(l)||a(l,p,n)}},onValueChange:(e,n)=>{!Number.isNaN(e)&&t&&t!==G.oV&&i(e,n)},...m,...h},l.createElement("span",{className:`${pI.QK} svg`},"width"===r?(0,T.tx)("fullscreen.properties_panel.transform_panel.w"):(0,T.tx)("fullscreen.properties_panel.transform_panel.h")))}function pZ(e){let{widthInputRef:t,onWidthInputKeyDown:n,width:r,onWidthChange:a,...i}=e;return l.createElement(pQ,{...i,property:"width",widthOrHeight:r,onWidthOrHeightChange:a,onKeyDown:n,forwardedRef:t})}function pJ(e){let{heightInputRef:t,onHeightInputKeyDown:n,height:r,onHeightChange:a,...i}=e;return l.createElement(pQ,{...i,property:"height",widthOrHeight:r,onWidthOrHeightChange:a,onKeyDown:n,forwardedRef:t})}function pj(e){return l.createElement(eE.fI,{className:pR},l.createElement(pZ,{...e}),l.createElement(pJ,{...e}))}function pq(e){return l.createElement(eg.fn,{leftLabel:(0,T.t)("fullscreen.properties_panel.transform_panel.width"),leftInput:l.createElement(pZ,{...e}),rightLabel:(0,T.t)("fullscreen.properties_panel.transform_panel.height"),rightInput:l.createElement(pJ,{...e}),icon:null})}let p0=n(630834);function p1(){V.Y5.triggerAction("set-tool-default")}function p5({recordingKey:e}){let t=(0,tk.GS)(),n=(0,nH.J2)(U.yFm.state().scale),r=(0,nH.J2)(U.yFm.state().disabled),a=ew.nc.user("change-scale",e=>{U.yFm.setScale(e)}),i=(0,nH.J2)(U.yFm.state().width);i="number"==typeof i?i:G.oV;let o=ew.nc.user("change-scale-width",e=>{U.yFm.setWidth(e)}),s=(0,nH.J2)(U.yFm.state().height);s="number"==typeof s?s:G.oV;let c=ew.nc.user("change-scale-height",e=>{U.yFm.setHeight(e)}),p=(0,nH.J2)(U.yFm.state().anchorPoint),d=ew.nc.user("change-anchor-point",e=>{U.yFm.setAnchorPoint(e)}),{handleKeyDown:u,heightInputRef:m,scaleInputRef:h,widthInputRef:_}=function(){let e=(0,q.d4)(e=>e.mirror.sceneGraphSelection),[t,n]=l.useState(!1),r=l.useRef(null),a=l.useRef(null),i=l.useRef(null),o=(0,tC.p8)("currentTool"),s=(0,tf.ZC)(o),c=(0,tC.p8)("activeUserAction"),[p,d]=l.useState(!1);l.useEffect(()=>{let t=o===U.NLJ.SCALE&&s!==U.NLJ.SCALE;Object.keys(e).length>0&&t&&[U.QOV.DEFAULT,U.QOV.SELECTING_TEXT].includes(c)&&r.current&&(r.current.focus(),r.current.select())},[c,o,s,e]),l.useEffect(()=>{let e=()=>{r.current&&(n(!1),d(!1),r.current.focus(),r.current.select())};return pu.h.subscribeScaleToolActivated(e),()=>{pu.h.unsubscribeScaleToolActivated(e)}},[]),l.useEffect(()=>{let e=e=>{e.target!==r.current&&e.target!==a.current&&e.target!==i.current&&n(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let u=l.useCallback(e=>{let n="Escape"===e.key,l="Enter"===e.key;!t&&(l||n)&&d(!0)},[t]);return l.useEffect(()=>{p&&p1()}),{handleKeyDown:u,scaleInputRef:r,widthInputRef:a,heightInputRef:i}}(),E=l.createElement(eE.$4,null,l.createElement(ev.K,{onClick:()=>{p1()},"aria-label":(0,T.t)("fullscreen.scale_panel.close")},l.createElement(ea.U,{svg:p0,fallbackSvg:p0},l.createElement(pd.A,null)))),y=l.createElement(pg,{restoreFocusElements:[h.current,_.current,m.current].filter(Boolean),anchorPoint:p,onAnchorPointChange:d,disabled:r}),g=l.createElement(t?pq:pj,{scale:n,width:i,height:s,onWidthChange:o,onHeightChange:c,onScaleChange:a,onKeyDown:u,widthInputRef:_,heightInputRef:m,disabled:r,recordingKey:e}),v=l.createElement(px,{scale:n,onScaleChange:a,disabled:r,onInputKeyDown:u,recordingKey:e,ref:h});return t?l.createElement(eE.Zk,{"data-testid":`scale_panel.state.${r?"disabled":"enabled"}`,className:pY},l.createElement(nj.r,{titleTx:(0,T.tx)("fullscreen.scale_panel.scale"),icon:E}),g,l.createElement(eg.sY,{leftLabel:(0,T.t)("fullscreen.scale_panel.scale"),rightLabel:(0,T.t)("fullscreen.scale_panel.anchor_point"),topLeftInput:v,bottomLeftInput:null,rightInput:y,topIcon:null,bottomIcon:null})):l.createElement(eE.Zk,{"data-testid":`scale_panel.state.${r?"disabled":"enabled"}`},l.createElement(eE.fI,{className:pG},l.createElement(eE.xw,null,(0,T.tx)("fullscreen.scale_panel.scale")),E,y),l.createElement(eE.fI,null,v),g)}function p4(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 9.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5Zm9 0a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5Zm-8-2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Zm.5 8.5a.5.5 0 0 0 0 1h5a.5.5 0 0 0 0-1h-5Z",clipRule:"evenodd"}))}var p3=n(933466),p2=n(700829),p6=n(467213),p7=n(416082),p8=n(423324),p9=n(460528);let de=(0,ca.ex)("autolayout_v3_migration_info",function(e){let{tooltipText:t}=e,n=(0,c.Gc)(e=>{e.stopPropagation(),l8.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360040451373#Updates_to_Auto_Layout","_blank")});return l.createElement("div",{className:"autolayout_v3_migration_info_tooltip--autolayoutMigration--OQ8zC"},t,l.createElement("a",{onMouseDown:n,rel:"noopener"},(0,T.tx)("fullscreen.properties_panel.migration_tooltip_learn_more")))},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var dt=n(221537);let dn="alignment_view_v4--indicator--VmKfE",dl="alignment_view_v4--indicatorBaseline--4kxfb",dr="alignment_view_v4--counterCenter--MlF9q";function da({onClick:e,onDoubleClick:t,onHover:n,...r}){let a=(0,dt.rO)(r.stackPrimaryAlignItems),o="BASELINE"===r.stackCounterAlignItems,s="HORIZONTAL"===r.stackMode?"HORIZONTAL":"VERTICAL",c="WRAP"===r.stackWrap,p="HORIZONTAL"===s?"alignment_view_v4--horizontal--UiniT":"alignment_view_v4--vertical--JVrRJ",d=a?"alignment_view_v4--spaceBetween--RZOdp":"alignment_view_v4--packed--MZMpk",u=(0,G.hS)(r.stackPrimaryAlignItems)&&(0,G.hS)(r.stackCounterAlignItems),m=r.primaryHover&&r.counterHover,h=(0,l.useCallback)(e=>{let[n,l]=dh(e.target);if(a){let t=e.target.getBoundingClientRect();"HORIZONTAL"===s?n=Math.floor((e.clientX-t.x)/t.width*3):l=Math.floor((e.clientY-t.y)/t.height*3)}t(n,l)},[t,a,s]),_=(0,l.useCallback)(e=>n(...dh(e.target)),[n]),E=(0,l.useCallback)(e=>n(null,null),[n]);return l.createElement("div",{className:i()(r.className,"alignment_view_v4--mainContainer--zUBsm",p,d,{"alignment_view_v4--baselineAlign--xLTR2":o}),tabIndex:0,onKeyDown:r.onKeyDown},l.createElement(dm,{baseline:o}),l.createElement(dd,{stackMode:s,spaceBetween:a,baselineAlign:o,onMouseMove:_,onMouseOut:E,onClick:e,onDoubleClick:h}),m&&l.createElement(di,{hover:!0,primaryAlign:r.primaryHover,counterAlign:r.counterHover,isStackWrap:c}),u&&l.createElement(di,{primaryAlign:r.stackPrimaryAlignItems,counterAlign:r.stackCounterAlignItems,isStackWrap:c}),o&&l.createElement(dp,{onClick:r.onRemoveBaseline}))}function di({hover:e,primaryAlign:t,counterAlign:n,isStackWrap:r}){return l.createElement("div",{className:i()("alignment_view_v4--indicatorContainer--ewQnB alignment_view_v4--_centered--S6qQk",t?dc[t]:void 0,n?ds[n]:void 0,{"alignment_view_v4--hover---ncmo":e})},l.createElement("div",{className:i()("alignment_view_v4--indicatorGroup--vlMlW",{"alignment_view_v4--wrap--nsYBR":r})},"BASELINE"===n?(0,dt.rO)(t)?l.createElement(l.Fragment,null,l.createElement("div",{className:dn}),l.createElement("span",{className:dl},"A"),l.createElement("div",{className:dn})):l.createElement("span",{className:dl},"A"):r?l.createElement(l.Fragment,null,l.createElement("div",{className:dn}),l.createElement("div",{className:dn}),l.createElement("div",{className:dn}),l.createElement("div",{className:dn}),l.createElement("div",{className:dn})):l.createElement(l.Fragment,null,l.createElement("div",{className:dn}),l.createElement("div",{className:dn}),l.createElement("div",{className:dn}))))}let ds={MIN:"alignment_view_v4--counterMin--1LPg6",CENTER:dr,MAX:"alignment_view_v4--counterMax--HzBqX",BASELINE:dr},dc={MIN:"alignment_view_v4--primaryMin--DHsQj",CENTER:"alignment_view_v4--primaryCenter--ci9Aj",MAX:"alignment_view_v4--primaryMax--i8kqd",SPACE_EVENLY:"",SPACE_BETWEEN:""};function dp({onClick:e}){let t=dE(),n=dy(),r=2*t/3+2,a=t-9,i=t-5.5;return l.createElement("svg",{className:"alignment_view_v4--baselineControls--cwzcf alignment_view_v4--_centered--S6qQk",width:t,height:t,viewBox:n,fill:"none"},l.createElement("g",{className:"alignment_view_v4--baselineHovered--uY49E","data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.stack_panel.remove_baseline_align"),onClick:e},l.createElement("rect",{x:"4.5",y:`${r}`,width:`${a}`,height:"14",rx:"2",fill:"var(--color-bg-selected-tertiary, #EDF5FA)"}),l.createElement("line",{x1:"5.5",y1:`${r}`,x2:`${i}`,y2:`${r}`,stroke:"var(--color-bg-brand-hover, #0D99FF)",strokeWidth:"2",strokeLinecap:"round",strokeDasharray:"1 5"}),l.createElement("line",{x1:"5.5",y1:`${r}`,x2:`${i}`,y2:`${r}`,stroke:"var(--color-bg-tertiary, rgba(0, 0, 0, 0.3))",strokeWidth:"2",strokeLinecap:"round"})))}function dd({spaceBetween:e,stackMode:t,baselineAlign:n,onMouseMove:r,onMouseOut:a,onClick:i,onDoubleClick:o}){let s=d_({stackMode:t,baselineAlign:n,spaceBetween:e});return l.createElement("div",{className:"alignment_view_v4--tooltipGrid--1PH8Z alignment_view_v4--_centered--S6qQk",onMouseMove:r,onMouseOut:a,onClick:i,onDoubleClick:o},s.map((n,r)=>{let a=r%3,i=Math.floor(r/3);return"HORIZONTAL"===t&&e&&(i=a,a=0),l.createElement(du,{key:r,x:a,y:i,..."string"==typeof n?{tooltip:n}:n})}))}function du({x:e,y:t,tooltip:n,below:r}){return l.createElement("div",{"data-x":e,"data-y":t,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":n,"data-tooltip-show-above":!r||void 0})}function dm({baseline:e}){let t=dy(),n=dE(),r=n/3,a=`${r}`,i=`${r/2}`,o=e?r:0,s=e?r:n,c=(0,l.useId)();return l.createElement("svg",{width:n,height:n,viewBox:t,fill:"currentColor"},l.createElement("defs",null,l.createElement("pattern",{id:c,width:a,height:a,patternUnits:"userSpaceOnUse"},l.createElement("circle",{cx:i,cy:i,r:"1"}))),l.createElement("rect",{width:"79",height:s,y:o,fill:`url(#${c})`}))}function dh(e){let{x:t,y:n}=e.dataset;return[parseInt(t),parseInt(n)]}function d_({baselineAlign:e,spaceBetween:t,stackMode:n,isUi3:l}){return e&&t?l?[{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_text_baseline"),below:!0}]:[(0,T.t)("fullscreen.properties_panel.stack_panel.align_baseline")]:e?[{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_left_baseline"),below:l},{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_center_baseline"),below:l},{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_right_baseline"),below:l}]:t?"HORIZONTAL"===n?l?[(0,T.t)("fullscreen.properties_panel.stack_panel.align_top"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_center"),{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_bottom"),below:!0}]:[(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_top_gap"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_center_gap"),{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_bottom_gap"),below:!0}]:l?[(0,T.t)("fullscreen.properties_panel.stack_panel.align_left"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_center"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_right")]:[(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_left_gap"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_center_gap"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_auto_right_gap")]:[(0,T.t)("fullscreen.properties_panel.stack_panel.align_top_left"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_top_center"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_top_right"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_left"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_center"),(0,T.t)("fullscreen.properties_panel.stack_panel.align_right"),{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_bottom_left"),below:!0},{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_bottom_center"),below:!0},{tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.align_bottom_right"),below:!0}]}let dE=()=>(0,o.jz)("60px"),dy=()=>{let e=dE();return`0 0 ${e} ${e}`},dg="alignment_view_v4_ui3--indicatorBaseline--NUe6M",dv="alignment_view_v4_ui3--counterCenter--QC-B7";function db({onClick:e,onDoubleClick:t,onHover:n,...r}){let a=(0,dt.rO)(r.stackPrimaryAlignItems),o="BASELINE"===r.stackCounterAlignItems,s="HORIZONTAL"===r.stackMode?"HORIZONTAL":"VERTICAL",c="WRAP"===r.stackWrap,p="HORIZONTAL"===s?"alignment_view_v4_ui3--horizontal--2Shqc":"alignment_view_v4_ui3--vertical--zGQMJ",d=a?"alignment_view_v4_ui3--spaceBetween--o3EAq":"alignment_view_v4_ui3--packed--EvdQi",u=(0,G.hS)(r.stackPrimaryAlignItems)&&(0,G.hS)(r.stackCounterAlignItems),m=r.primaryHover&&r.counterHover,h=(0,l.useCallback)(e=>{let[n,l]=dA(e.target);if(a){let t=e.target.getBoundingClientRect();"HORIZONTAL"===s?n=Math.floor((e.clientX-t.x)/t.width*3):l=Math.floor((e.clientY-t.y)/t.height*3)}t(n,l)},[t,a,s]),_=(0,l.useCallback)(e=>n(...dA(e.target)),[n]),E=(0,l.useCallback)(e=>n(null,null),[n]);return l.createElement("div",{className:i()(r.className,"alignment_view_v4_ui3--mainContainer---0NcS",p,d,{"alignment_view_v4_ui3--baselineAlign--OxyzT":o}),tabIndex:0,onKeyDown:r.onKeyDown},l.createElement(dC,null),l.createElement(dI,{stackMode:s,spaceBetween:a,baselineAlign:o,onMouseMove:_,onMouseOut:E,onClick:e,onDoubleClick:h}),m&&l.createElement(df,{hover:!0,primaryAlign:r.primaryHover,counterAlign:r.counterHover,isStackWrap:c}),u&&l.createElement(df,{primaryAlign:r.stackPrimaryAlignItems,counterAlign:r.stackCounterAlignItems,isStackWrap:c}),o&&l.createElement("div",{className:"alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if"},l.createElement(dw,{onClick:r.onRemoveBaseline})))}function df({hover:e,primaryAlign:t,counterAlign:n,isStackWrap:r}){function a(){let e=(0,dt.rO)(t);if("BASELINE"===n)return e?l.createElement(l.Fragment,null,l.createElement("span",{className:dg},"A"),l.createElement("span",{className:dg},"A"),l.createElement("span",{className:dg},"A")):l.createElement("span",{className:dg},"A");let a=r&&!e?5:3;return l.createElement(dS,{n:a})}return l.createElement("div",{className:i()("alignment_view_v4_ui3--indicatorContainer--napq- alignment_view_v4_ui3--tooltipGrid--HBKLD alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if",t?dT[t]:void 0,n?dP[n]:void 0,{"alignment_view_v4_ui3--hover--ypG6x":e})},"BASELINE"===n?a():l.createElement("div",{className:"alignment_view_v4_ui3--indicatorGridCell--lp1lH"},l.createElement("div",{className:i()("alignment_view_v4_ui3--indicatorGroup--urXG2",{"alignment_view_v4_ui3--wrap--JWwtI":r})},a())))}function dS({n:e}){return l.createElement(l.Fragment,null,Array.from({length:e},(e,t)=>l.createElement("div",{key:t,className:"alignment_view_v4_ui3--indicator--82j5F"})))}let dP={MIN:"alignment_view_v4_ui3--counterMin--aOx1R",CENTER:dv,MAX:"alignment_view_v4_ui3--counterMax--cCtqr",BASELINE:dv},dT={MIN:"alignment_view_v4_ui3--primaryMin--Q8O6a",CENTER:"alignment_view_v4_ui3--primaryCenter--RzFRC",MAX:"alignment_view_v4_ui3--primaryMax--eMvqL",SPACE_EVENLY:"",SPACE_BETWEEN:""};function dw({onClick:e}){return l.createElement("button",{className:"alignment_view_v4_ui3--baselineControls--xazGW alignment_view_v4_ui3--_centered--MV2if","data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("fullscreen.properties_panel.stack_panel.remove_baseline_align"),onClick:e},l.createElement("div",{className:"alignment_view_v4_ui3--baselineControlLine--6BBmA"}))}function dI({spaceBetween:e,stackMode:t,baselineAlign:n,onMouseMove:r,onMouseOut:a,onClick:i,onDoubleClick:o}){let s=d_({stackMode:t,baselineAlign:n,spaceBetween:e,isUi3:(0,eC.R)()});return l.createElement("div",{className:"alignment_view_v4_ui3--tooltipGrid--HBKLD alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if",onMouseMove:r,onMouseOut:a,onClick:void 0,onMouseUp:i,onDoubleClick:o},"HORIZONTAL"===t&&n&&e?l.createElement(dN,{tooltips:s}):s.map((n,r)=>{let a=r%3,i=Math.floor(r/3);return"HORIZONTAL"===t&&e&&(i=a,a=0),l.createElement(dk,{key:r,x:a,y:i,..."string"==typeof n?{tooltip:n}:n})}))}function dN({tooltips:e}){let t=(0,l.useId)(),n=e[0];return null==n?null:l.createElement(l.Fragment,null,l.createElement("div",{"data-tooltip-proxy-element-id":t}),l.createElement(dk,{id:t,x:1,y:1,..."string"==typeof n?{tooltip:n}:n}),l.createElement("div",{"data-tooltip-proxy-element-id":t}))}function dk({id:e,x:t,y:n,tooltip:r,below:a}){return l.createElement("div",{id:e,"data-x":t,"data-y":n,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-above":!a||void 0})}function dC(){return l.createElement("div",{className:"alignment_view_v4_ui3--dotGrid--N6RPe alignment_view_v4_ui3--grid3x3--306xj alignment_view_v4_ui3--_centered--MV2if"},Array.from({length:9},(e,t)=>l.createElement("div",{className:"alignment_view_v4_ui3--dotGridCell--r7m5y",key:t},l.createElement("div",{key:t,className:"alignment_view_v4_ui3--dot--d5NQx"}))))}function dA(e){let{x:t,y:n}=e.dataset;return[parseInt(t),parseInt(n)]}var dO=n(232531),dx=n(876618);let dR=["MIN","CENTER","MAX"];function dL({className:e,recordingKey:t}){let n=(0,lk.kl)("stackMode"),r=(0,lk.kl)("stackWrap"),[a,i]=(0,lk.lJ)("stackPrimaryAlignItems"),[o,s]=(0,lk.lJ)("stackCounterAlignItems"),[d,m]=(0,l.useState)(void 0),[h,_]=(0,l.useState)(void 0),E=(0,dx.sR)(),y=(0,dx.uV)(),g=(0,sz.am)(),v=(0,eC.R)(),b=(0,q.d4)(rz.qd),f=(0,dt.rO)(a),S="BASELINE"===o,P=(0,l.useCallback)((e,t)=>{if(null==e||null==t){m(void 0),_(void 0);return}let l=dM(e,t,n,f),r=dD(e,t,n,S);m(l),_(r)},[n,S,f,m,_]),T=u.rf(t,"click",(0,l.useCallback)(e=>{let t=d,n=h;e&&e.__interactionTest&&(t=e.primaryAlignItems,n=e.counterAlignItems),t&&n&&(f||i(t,rp.zk.NO),s(n),g("Autolayout alignment grid used",{nodeIds:b}))},[d,h,f,s,g,i,b]),{recordMetadata:()=>({primaryAlignItems:d,counterAlignItems:h}),playbackMetadata:e=>({...e,__interactionTest:!0})}),{clearVariableConsumption:w}=(0,dO.O)("STACK_SPACING",U.rXF.FLOAT),I=(0,l.useCallback)((e,t)=>{y(void 0===t||t,e,rp.zk.NO),w()},[y,w]),N=(0,l.useCallback)((e,t)=>{if(f){y(!1,"alignment double click",rp.zk.NO);let l=dM(e,t,n,!1),r=dD(e,t,n,S);m(l),_(r),i(l,rp.zk.NO),s(r),g("Autolayout spacing mode changed",{mode:l,doubleClick:!0})}else I("alignment double click"),s(dD(e,t,n,S))},[I,S,f,s,i,y,n,g]),k=(0,l.useCallback)(()=>{s("CENTER"),g("Disable baseline alignment",{source:"alignment grid"})},[s,g]),C=u.v_(t,"keydown",(0,l.useCallback)(e=>{function t(e){"HORIZONTAL"===n?i(e):s(e)}function l(e){"VERTICAL"===n?i(e):s(e)}function r(e,t){if((0,G.gl)(e))return"CENTER";let n=dR.indexOf(e);if(-1===n)return null;let l=(0,p.qE)(n+t,0,dR.length-1);return dR[l]}let d="HORIZONTAL"===n?a:o,u="VERTICAL"===n?a:o;switch(e.keyCode){case c.Uz.ESCAPE:case c.Uz.ENTER:e.currentTarget.blur();break;case c.Uz.UP_ARROW:{let e=r(u,-1);e&&l(e);break}case c.Uz.DOWN_ARROW:{let e=r(u,1);e&&l(e);break}case c.Uz.LEFT_ARROW:{let e=r(d,-1);e&&t(e);break}case c.Uz.RIGHT_ARROW:{let e=r(d,1);e&&t(e);break}case c.Uz.B:"HORIZONTAL"===n&&E("BASELINE"!==o,"alignment keyboard");break;case c.Uz.X:I("alignment keyboard",!(0,dt.rO)(a));break;case c.Uz.W:l("MIN");break;case c.Uz.A:t("MIN");break;case c.Uz.S:l("MAX");break;case c.Uz.D:t("MAX");break;case c.Uz.V:l("CENTER");break;case c.Uz.H:t("CENTER");break;default:(0,sc.jr)(e,sc.W0.YES,sc.VA.YES);return}e.preventDefault()},[I,o,a,E,s,i,n])),A=v?l.createElement(db,{className:e,stackMode:n,stackWrap:r,stackPrimaryAlignItems:a,stackCounterAlignItems:o,onHover:P,onClick:T,onDoubleClick:N,onKeyDown:C,onRemoveBaseline:k,counterHover:h,primaryHover:d}):l.createElement(da,{className:e,stackMode:n,stackWrap:r,stackPrimaryAlignItems:a,stackCounterAlignItems:o,onHover:P,onClick:T,onDoubleClick:N,onKeyDown:C,onRemoveBaseline:k,counterHover:h,primaryHover:d});return l.createElement(nP.E,{name:"alignment_view"},A)}function dM(e,t,n,l){return l?(0,s.kc)().ce_stack_justify_space_between?"SPACE_BETWEEN":"SPACE_EVENLY":dR["VERTICAL"===n?t:e]}function dD(e,t,n,l){return l?"BASELINE":dR["VERTICAL"===n?e:t]}var dF=n(630978),dK=n(178466),dV=n(791489),dU=n(931828),dB=n(309798),dH=n(579623),dG=n(280106),dY=n(801161);function d$({onClick:e,onOpen:t,modalKey:n,...r}){let a=(0,q.wA)(),i=(0,i6.Xo)(),o=(0,l.useRef)(null),s=(0,eC.R)(),c=i?.id===n,p=(0,tf.ZC)(c),d=c?new y.Mi(i.initialX,i.initialY):null,m=(0,l.useRef)(r.onClose);m.current=r.onClose,(0,l.useEffect)(()=>{p&&!c&&m.current?.()},[c,p]),(0,l.useEffect)(()=>()=>m.current?.(),[]);let h=(0,l.useCallback)(()=>{c&&(a(I.XE()),V.Y5.deselectProperty())},[a,c]),_=(0,l.useCallback)(()=>{if(c)return;e||t?.();let{top:l}=j.findDOMNode(o.current).getBoundingClientRect();a(I.u1({id:n,initialX:ep.qo,initialY:l}))},[a,c,n,e,t]);(0,l.useEffect)(()=>{null!=r.open&&(r.open?_():h())},[h,_,r.open]);let E=l.createElement(ek.YW,{ref:o,svg:r.svg,fallbackSvg:r.fallbackSvg,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":r.tooltip,onMouseMove:()=>{c&&a(dY.jD())},onMouseDown:e??(e=>{e.stopPropagation(),c?h():_()}),recordingKey:u.Pt(r,"trigger"),selected:c,className:r.buttonClassName},s?r.ui3Icon:void 0),g=r.buttonInteractableName?l.createElement(nP.E,{name:r.buttonInteractableName},E):E,v=c?l.createElement(ez.vx,{title:r.title,initialPosition:d,initialConstraints:{x:"right",y:"top"},headerSize:"small",onClose:h,recordingKey:u.Pt(r,"modal")},r.children):null,b=v&&r.modalTrackableName?l.createElement(tw.p,{name:"stack_layout_details_modal"},v):v;return l.createElement(l.Fragment,null,g,b)}var dW=n(63666),dz=n(70964);let dX="stack_layout_details_preview--stroke--tWkNh",dQ="stack_layout_details_preview--strokeLight--RsPk7",dZ="stack_layout_details_preview--fill--V74cf",dJ="stack_layout_details_preview--fillWhite--uTjlG",dj="stack_layout_details_preview--fillTertiary--xuwqQ",dq={reverseStackingOrder:function({enabled:e}){let t=[l.createElement("g",{key:"1",filter:"url(#reverse-stacking-order-filter)"},l.createElement("rect",{className:dJ,x:"67",y:"40",width:"40",height:"40",rx:"20"}),l.createElement("path",{className:dZ,d:"M88.4893 53.9091V67H87.294V55.1619H87.2173L84.1491 57.201V55.9609L87.2429 53.9091H88.4893Z"}),l.createElement("rect",{className:dX,x:"66.5",y:"39.5",width:"41",height:"41",rx:"20.5"})),l.createElement("g",{key:"2",filter:"url(#reverse-stacking-order-filter)"},l.createElement("rect",{className:dJ,x:"99",y:"40",width:"40",height:"40",rx:"20"}),l.createElement("path",{className:dZ,d:"M114.964 67V66.1243L119.241 61.3175C119.799 60.6868 120.248 60.1477 120.589 59.7003C120.93 59.2528 121.177 58.8395 121.331 58.4602C121.488 58.081 121.567 57.6868 121.567 57.2777C121.567 56.7791 121.45 56.3445 121.216 55.9737C120.986 55.5987 120.668 55.3068 120.263 55.098C119.858 54.8892 119.402 54.7848 118.895 54.7848C118.358 54.7848 117.888 54.8999 117.483 55.13C117.082 55.3601 116.771 55.6754 116.549 56.076C116.328 56.4766 116.217 56.9368 116.217 57.4567H115.073C115.073 56.7322 115.239 56.0909 115.571 55.5327C115.908 54.9702 116.366 54.5291 116.946 54.2095C117.53 53.8899 118.19 53.7301 118.927 53.7301C119.656 53.7301 120.304 53.8878 120.87 54.2031C121.437 54.5142 121.883 54.9382 122.206 55.4751C122.53 56.0121 122.692 56.6129 122.692 57.2777C122.692 57.7592 122.607 58.2259 122.437 58.6776C122.27 59.1293 121.983 59.6321 121.574 60.1861C121.165 60.7401 120.598 61.4176 119.873 62.2188L116.626 65.843V65.9261H123.101V67H114.964Z"}),l.createElement("rect",{className:dX,x:"98.5",y:"39.5",width:"41",height:"41",rx:"20.5"})),l.createElement("g",{key:"3",filter:"url(#reverse-stacking-order-filter)"},l.createElement("rect",{className:dJ,x:"131",y:"40",width:"40",height:"40",rx:"20"}),l.createElement("path",{className:dZ,d:"M151.048 67.179C150.243 67.179 149.522 67.0341 148.887 66.7443C148.252 66.4503 147.75 66.0433 147.379 65.5234C147.008 65.0036 146.812 64.4048 146.791 63.7273H147.999C148.02 64.2045 148.167 64.6222 148.44 64.9801C148.713 65.3338 149.075 65.6108 149.527 65.8111C149.978 66.0071 150.481 66.1051 151.035 66.1051C151.64 66.1051 152.173 65.9922 152.633 65.7663C153.098 65.5405 153.46 65.2315 153.72 64.8395C153.984 64.4432 154.116 63.9957 154.116 63.4972C154.116 62.9687 153.982 62.5021 153.713 62.0973C153.445 61.6925 153.059 61.3771 152.556 61.1513C152.058 60.9254 151.461 60.8125 150.767 60.8125H150V59.7386H150.767C151.333 59.7386 151.834 59.6364 152.269 59.4318C152.708 59.223 153.053 58.9311 153.304 58.5561C153.556 58.1811 153.681 57.7401 153.681 57.233C153.681 56.7514 153.573 56.3274 153.355 55.9609C153.138 55.5945 152.831 55.3068 152.435 55.098C152.043 54.8892 151.585 54.7848 151.061 54.7848C150.554 54.7848 150.089 54.8828 149.667 55.0788C149.245 55.2749 148.904 55.5518 148.645 55.9098C148.389 56.2678 148.252 56.6918 148.235 57.1818H147.078C147.096 56.5 147.283 55.9013 147.641 55.3857C148.003 54.8658 148.483 54.4609 149.079 54.1712C149.68 53.8771 150.345 53.7301 151.074 53.7301C151.845 53.7301 152.512 53.8878 153.074 54.2031C153.637 54.5185 154.071 54.9382 154.378 55.4624C154.689 55.9822 154.845 56.5554 154.845 57.1818C154.845 57.9276 154.642 58.5668 154.238 59.0994C153.833 59.6278 153.287 59.9943 152.601 60.1989V60.282C153.436 60.4482 154.093 60.8189 154.57 61.3942C155.051 61.9652 155.292 62.6662 155.292 63.4972C155.292 64.196 155.109 64.8246 154.743 65.3828C154.376 65.9368 153.873 66.3757 153.234 66.6996C152.599 67.0192 151.87 67.179 151.048 67.179Z"}),l.createElement("rect",{className:dX,x:"130.5",y:"39.5",width:"41",height:"41",rx:"20.5"}))];return e&&t.reverse(),l.createElement("svg",{width:"240",height:"120",fill:"none"},t,l.createElement("rect",{className:dQ,x:"58.5",y:"28.5",width:"123",height:"63",rx:"3.5",strokeDasharray:"4 2"}),l.createElement("defs",null,l.createElement("filter",{id:"reverse-stacking-order-filter",x:"-1px",y:"-1px",width:"44",height:"42",filterUnits:"objectBoundingBox",colorInterpolationFilters:"sRGB"},l.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),l.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),l.createElement("feOffset",{dx:"2"}),l.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),l.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),l.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_1112_23748"}),l.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_1112_23748",result:"shape"}))))},alignToBaseline:function(){return l.createElement("svg",{width:240,height:120,fill:"none"},l.createElement("path",{className:i()("stack_layout_details_preview--alignToBaselineLine--Erw5t","stack_layout_details_preview--strokeAssistive--GgFOd"),d:"M38 60.5h164"}),l.createElement("g",{className:"stack_layout_details_preview--alignToBaselineA--kQYyh"},l.createElement("path",{className:dZ,d:"M63.8516 67L65.2514 63.0561H70.7486L72.1484 67H73.4013L68.6392 53.9091H67.3608L62.5987 67H63.8516ZM65.6349 61.9822L67.9553 55.4624H68.0447L70.3651 61.9822H65.6349Z"}),l.createElement("rect",{className:dX,x:46.5,y:38.5,width:43,height:43,rx:1.5})),l.createElement("rect",{className:i()("stack_layout_details_preview--alignToBaselineEmpty--Z-l7O",dX),x:98.5,y:38.5,width:43,height:43,rx:1.5}),l.createElement("g",{className:"stack_layout_details_preview--alignToBaselineG--YayQ-"},l.createElement("path",{className:dZ,d:"M171.843 68.8864C174.169 68.8864 175.895 67.7486 175.895 65.2557V55.1818H174.783V57.0547H174.668C174.265 56.1726 173.453 55.0476 171.651 55.0476C169.222 55.0476 167.592 57.0803 167.592 60.0653C167.592 63.076 169.279 64.8977 171.632 64.8977C173.396 64.8977 174.259 63.875 174.649 62.9737H174.751V65.1854C174.751 67.0135 173.581 67.8636 171.843 67.8636C170.161 67.8636 169.356 67.0518 168.941 66.304L168.007 66.9176C168.583 68.0426 169.835 68.8864 171.843 68.8864ZM171.766 63.8558C169.816 63.8558 168.736 62.2962 168.736 60.0462C168.736 57.8345 169.797 56.0831 171.766 56.0831C173.69 56.0831 174.77 57.745 174.77 60.0462C174.77 62.4176 173.658 63.8558 171.766 63.8558Z"}),l.createElement("rect",{className:dX,x:150.5,y:38.5,width:43,height:43,rx:1.5})),l.createElement("rect",{className:i()("stack_layout_details_preview--alignToBaselineOutline--YlRIY",dQ),x:38.5,y:30.5,width:163,height:59,rx:3.5,strokeDasharray:"4 2",vectorEffect:"non-scaling-stroke"}))},bordersTakeSpace:function(){return l.createElement("svg",{width:240,height:120,fill:"none"},l.createElement("g",{className:"stack_layout_details_preview--bordersTakeSpaceLeft--WTfPZ"},l.createElement("rect",{className:dj,x:"43",y:"37",width:"48",height:"48",rx:"2"}),l.createElement("rect",{className:dJ,x:"49",y:"43",width:"36",height:"36",rx:"2"})),l.createElement("g",{className:"stack_layout_details_preview--bordersTakeSpaceRight--QCBF1"},l.createElement("rect",{className:dj,x:"98",y:"37",width:"99",height:"48",rx:"2"}),l.createElement("rect",{className:dJ,x:"104",y:"43",width:"87",height:"36",rx:"2"})),l.createElement("rect",{className:i()("stack_layout_details_preview--bordersTakeSpaceOutline--Xq42w",dQ),x:"48.5",y:"42.5",width:"143",height:"37",rx:"1.5",strokeDasharray:"4 2",vectorEffect:"non-scaling-stroke"}))}};function d0({setting:e,enabled:t}){let n=e?dq[e]:null;return l.createElement("div",{className:i()("stack_layout_details_preview--preview---r9k-",{"stack_layout_details_preview--active--yCMB3":t}),"data-non-interactive":!0},n?l.createElement(n,{enabled:t}):l.createElement("div",{className:"stack_layout_details_preview--previewText--0NBYb"},(0,T.tx)("fullscreen.properties_panel.stack_panel.preview")))}let d1="stack_layout_details_modal--dropdownControl--PRPD5",d5="stack_layout_details_modal--onboardingBody--SQp9T",d4="stack_layout_details_modal--input--h2Yc7",d3="stack_layout_details_modal--chevron--tW9wo";var d2=n(769502);let d6="seen_stack_spacing_auto_onboarding";function d7(e){let[t,n]=(0,l.useState)(!1),[r,a]=(0,l.useState)({enabled:!1}),i=(0,eC.R)()?(0,T.t)("fullscreen.properties_panel.section_autoLayout.settings"):(0,T.t)("fullscreen.properties_panel.stack_panel.advanced_layout");return l.createElement(l.Fragment,null,l.createElement(d$,{title:i,tooltip:i,modalKey:"LAYOUT_DETAILS_PICKER",buttonInteractableName:"open_stack_layout_details_modal_button",modalTrackableName:"stack_layout_details_modal",svg:se.A,ui3Icon:l.createElement(tj.A,null),buttonClassName:d2.Sj,recordingKey:e.recordingKey,onClose:()=>{setTimeout(()=>{n(!0)},250)}},l.createElement(d0,{setting:r.setting,enabled:r.enabled}),l.createElement("div",{className:"stack_layout_details_modal--controls--SFjhS"},l.createElement(ue,{updatePreview:a,recordingKey:e.recordingKey}),l.createElement(d8,{updatePreview:a,recordingKey:e.recordingKey}),l.createElement(d9,{updatePreview:a,recordingKey:e.recordingKey}))),t&&l.createElement(ul,{onDismiss:()=>n(!1)}))}function d8({updatePreview:e,recordingKey:t}){let n=(0,q.wA)(),r=(0,t6.Um)(),[a,i]=(0,lk.lJ)("stackReverseZIndex"),o=(0,sz.am)(),s=(0,q.d4)(rz.qd),c=(0,tk.GS)(),p=dK.Gq()?.getPrimaryLocale(!0)===dV.Xn?120:180,d=!0===a;return l.createElement(nP.E,{name:"stacking_order_control"},l.createElement(dH.L,{label:(0,T.t)("fullscreen.properties_panel.stack_panel.canvas_stacking_order"),onMouseEnter:()=>e({setting:"reverseStackingOrder",enabled:d}),onMouseLeave:()=>e({enabled:!1})},l.createElement(nX.l6,{id:"reverse-stacking-order-select",dispatch:n,className:d1,inputClassName:d4,chevronClassName:d3,textAlign:c?void 0:"right",property:a,formatter:ut,onChange:e=>{i(e),o(e?"Enable reverse zIndex":"Disable reverse zIndex",{nodeIds:s})},recordingKey:u.Pt(t,"reverseStackingOrder"),dropdownShown:r,dropdownAlignment:"right",dropdownWidth:p,onOptionFocus:t=>e({setting:null!=t?"reverseStackingOrder":void 0,enabled:!!t})},l.createElement(nX.c$,{value:!0}),l.createElement(nX.c$,{value:!1}))))}function d9({updatePreview:e,recordingKey:t}){let n=(0,lk.kl)("stackMode"),r="BASELINE"===(0,lk.kl)("stackCounterAlignItems"),a="HORIZONTAL"!==n,i=(0,dx.sR)();return l.createElement(nP.E,{name:"baseline_alignment_control"},l.createElement(dG.k,{label:(0,T.t)("fullscreen.properties_panel.stack_panel.align_text_baseline"),recordingKey:u.Pt(t,"alignToBaseline"),property:r,disabled:a,onChange:t=>{i(t,"modal"),e({setting:"alignToBaseline",enabled:t})},onFocus:t=>{e({setting:"alignToBaseline",enabled:r})},onHover:(t,n)=>{e({setting:"ENTER"===n?"alignToBaseline":void 0,enabled:t})},"data-tooltip":a?(0,T.t)("fullscreen.properties_panel.stack_panel.only_applicable_for_horizontal_layout"):void 0,"data-tooltip-type":ec.Ib.TEXT}))}function ue({updatePreview:e,recordingKey:t}){let n=(0,q.wA)(),r=(0,t6.Um)(),[a,i]=(0,lk.lJ)("bordersTakeSpace"),o=(0,sz.am)(),s=(0,q.d4)(rz.qd),c=(0,tk.GS)(),p=!0===a;return l.createElement(nP.E,{name:"borders_take_space_control"},l.createElement(dH.L,{label:(0,T.t)("fullscreen.properties_panel.stack_panel.borders_take_space"),onMouseEnter:()=>e({setting:"bordersTakeSpace",enabled:p}),onMouseLeave:()=>e({enabled:!1})},l.createElement(nX.l6,{id:"borders-take-space-select",dispatch:n,className:d1,inputClassName:d4,chevronClassName:d3,dropdownWidth:168,textAlign:c?void 0:"right",property:p,formatter:un,onChange:e=>{i(e),o("change_borders_take_space",{enabled:e,source:"modal",nodeIds:s})},recordingKey:u.Pt(t,"bordersTakeSpace"),dropdownShown:r,onOptionFocus:t=>e({setting:null!=t?"bordersTakeSpace":void 0,enabled:!!t})},l.createElement(nX.c$,{value:!0}),l.createElement(nX.c$,{value:!1}))))}let ut={format:e=>e?(0,T.t)("fullscreen.properties_panel.stack_panel.first_on_top"):(0,T.t)("fullscreen.properties_panel.stack_panel.last_on_top")},un={format:e=>e?(0,T.t)("fullscreen.properties_panel.stack_panel.included"):(0,T.t)("fullscreen.properties_panel.stack_panel.excluded"),formatExtended:e=>({text:e?(0,T.t)("fullscreen.properties_panel.stack_panel.included_in_layout"):(0,T.t)("fullscreen.properties_panel.stack_panel.excluded_from_layout")})};function ul({onDismiss:e}){let t=(0,q.wA)();return(0,dB.f)(d6)?null:l.createElement(dW.OA,{targetKey:"stack-spacing-input",shouldNotWrapInParagraphTag:!0,dismissModal:()=>{t(dU.b({[d6]:!0})),e()},background:"light",width:268,title:(0,T.tx)("fullscreen.properties_panel.stack_panel.gap_onboarding_title"),secondaryCtaText:l.createElement("a",{href:"https://help.figma.com/hc/articles/360040451373-Explore-auto-layout-properties#spacing-between",target:"_blank",style:{textDecoration:"none"}},(0,T.tx)("general.learn_more")),onClickSecondaryCta:aS.lQ,ctaText:(0,T.tx)("general.got_it"),onClickPrimaryCta:e,arrowPosition:ez.F_.RIGHT_TITLE},l.createElement(dz.Gv,{containerClassName:"stack_layout_details_modal--onboardingImg--4Uak-",src:"https://static.figma.com/uploads/94241d15e9d47a0c73734ae71850674f78cd4ab0"}),l.createElement("p",{className:d5},(0,T.tx)("fullscreen.properties_panel.stack_panel.gap_onboarding_body1",{gapBetweenItems:l.createElement("strong",null,(0,T.tx)("fullscreen.properties_panel.stack_panel.gap_items"))})),l.createElement("p",{className:d5},(0,T.tx)("fullscreen.properties_panel.stack_panel.gap_onboarding_body2",{auto:l.createElement("strong",null,(0,T.tx)("fullscreen.properties_panel.stack_panel.auto"))})))}var ur=n(695342),ua=n(729943),ui=n(253781);function uo(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 7h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5ZM6 7.5A1.5 1.5 0 0 1 7.5 6h2A1.5 1.5 0 0 1 11 7.5v2A1.5 1.5 0 0 1 9.5 11h-2A1.5 1.5 0 0 1 6 9.5v-2Zm8.5-.5h2a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2a.5.5 0 0 1 .5-.5Zm-1.5.5A1.5 1.5 0 0 1 14.5 6h2A1.5 1.5 0 0 1 18 7.5v2a1.5 1.5 0 0 1-1.5 1.5h-2A1.5 1.5 0 0 1 13 9.5v-2ZM9.5 14h-2a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Zm-2-1A1.5 1.5 0 0 0 6 14.5v2A1.5 1.5 0 0 0 7.5 18h2a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 13h-2Zm10.384 1.32a.5.5 0 0 0-.768-.64l-2.15 2.58-1.112-1.114a.5.5 0 0 0-.708.708l1.5 1.5a.5.5 0 0 0 .738-.034l2.5-3Z",clipRule:"evenodd"}))}function us(e){return l.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},l.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M16.5 7h-9a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Zm-9-1A1.5 1.5 0 0 0 6 7.5v2A1.5 1.5 0 0 0 7.5 11h9A1.5 1.5 0 0 0 18 9.5v-2A1.5 1.5 0 0 0 16.5 6h-9Zm2 8h-2a.5.5 0 0 0-.5.5v2a.5.5 0 0 0 .5.5h2a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 0-.5-.5Zm-2-1A1.5 1.5 0 0 0 6 14.5v2A1.5 1.5 0 0 0 7.5 18h2a1.5 1.5 0 0 0 1.5-1.5v-2A1.5 1.5 0 0 0 9.5 13h-2Zm10.384 1.32a.5.5 0 0 0-.768-.64l-2.15 2.58-1.112-1.114a.5.5 0 0 0-.708.708l1.5 1.5a.5.5 0 0 0 .738-.034l2.5-3Z",clipRule:"evenodd"}))}function uc(e){let{propertiesPanelShouldShowRemoveAutoLayout:t}=uf(),n=t?(0,T.t)("fullscreen.properties_panel.stack_panel.remove_auto_layout"):(0,T.t)("fullscreen.properties_panel.stack_panel.use_auto_layout"),{actionEnabledStackSelection:r,actionEnabledUnstackSelection:a}=uf(),i=t?a:r,o=t?"unstack-selection":"stack-selection",s=(0,l.useCallback)(()=>{V.Y5.triggerActionInUserEditScope(o,{source:"panel"})},[o]);return l.createElement(ek.YW,{"aria-label":n,"data-tooltip":n,"data-tooltip-type":ec.Ib.TEXT,"data-tooltip-shortcut-key":o,selected:t,showTooltipWhenSelectedIsTrue:!0,disabled:!i,onClick:s,recordingKey:u.Pt(e.recordingKey,t?"removeButton":"addButton")},l.createElement(up,null))}function up(){let e=(0,lk.kl)("stackMode"),t=(0,lk.kl)("stackWrap"),{propertiesPanelShouldShowRemoveAutoLayout:n}=uf();if(!n)return l.createElement(ua.Q,null);if((0,G.gl)(e)||null==e||(0,G.gl)(t))return l.createElement(ui.v,null);if("WRAP"===t)return l.createElement(uo,null);switch(e){case"NONE":case"HORIZONTAL":return l.createElement(ui.v,null);case"VERTICAL":return l.createElement(us,null)}}var ud=n(258890),uu=n(996620),um=n(689606),uh=n(957069),u_=n(733982);function uE(e){return l.createElement(tw.p,{name:"stack_panel"},l.createElement(uy,{...e}))}let uy=l.memo(e=>{let{version:t}=(0,el.DP)();return"ui3"===t?l.createElement(uv,{...e}):l.createElement(ug,{...e})});function ug(e){let{showMigrationUi:t,actionEnabledStackSelection:n,actionEnabledUnstackSelection:r,propertiesPanelShouldShowRemoveAutoLayout:a,wrappingEnabled:i}=uf();return l.createElement(eE.Zk,null,l.createElement(o5,{title:(0,T.tx)("fullscreen.properties_panel.stack_panel.auto_layout"),addProperty:()=>{V.Y5.triggerActionInUserEditScope("stack-selection",{source:"panel"})},removeProperty:()=>{V.Y5.triggerActionInUserEditScope("unstack-selection",{source:"panel"})},contentsVisibleOrMixed:e.onlyStacksSelected,showButton:a?"-":"+",minusDisabled:!r,plusDisabled:!n,recordingKey:e.recordingKey,dataTestId:"open-stack-panel"},t?l.createElement(uP,null):l.createElement(l.Fragment,null,l.createElement(eE.fI,{className:i?d2.TE:d2.mm},l.createElement(uT,{recordingKey:e.recordingKey}),l.createElement("div",{className:d2.T$},l.createElement(dL,{recordingKey:u.Pt(e,"alignment")})),l.createElement(d7,{recordingKey:u.Pt(e,"stackLayoutDetails")}),l.createElement(uw,{recordingKey:e.recordingKey}),i&&l.createElement(uI,{recordingKey:e.recordingKey})),l.createElement(uN,{recordingKey:e.recordingKey}))))}function uv(e){let t=e.onlyStacksSelected?(0,T.tx)("fullscreen.properties_panel.stack_panel.auto_layout"):(0,T.tx)("fullscreen.properties_panel.stack_panel.layout"),n=(0,nH.J2)(U.Ez5.propertiesPanelState().shownPropertiesPanels),r=(0,q.d4)(e=>e.mirror.selectionProperties),a=(0,si.aW)(n,void 0,r,void 0),i=(0,q.d4)(e=>!((0,iS.P)(e.selectedView)&&!(0,Z.Yh)(e.mirror.appModel,"resize-to-fit")));return l.createElement(eE.Zk,{"data-onboarding-key":p9.W},l.createElement(nj.Wv,{titleTx:t},i&&l.createElement(i1.hw,{recordingKey:u.Pt(e,"frameFitButton")}),a?l.createElement(uc,{recordingKey:e.recordingKey}):void 0),l.createElement(ub,{...e}))}function ub({onlyStacksSelected:e,onlyShowResizingRow:t,recordingKey:n}){let{showMigrationUi:r,wrappingEnabled:a,textAutoResize:i,missingFont:o}=uf(),s=(0,lq.Df)(),c=(0,iT.o3)(iT.nt.ui3ClipContentControl),p=(0,l.useRef)(null),d=(0,lk.kl)("nodesAreAllInsideStacks"),m=(0,nH.J2)(U.Ez5.propertiesPanelState().enabledTypePanelControls),h=!!V.Y5?.isFontListLoaded(),_=(0,lk.kl)("numSelectedByType"),E=(0,L.vx)(_,"TEXT"),y="transformPanel",g=l.createElement(l.Fragment,null,l.createElement(oi.Ws,{recordingKey:y,forwardedRef:p}),l.createElement(p6.J,{visible:!!(e||d),widthHeightRowRef:p})),v=s.fixedFrameOptions&&l.createElement(p3.u,{recordingKey:n}),b=E&&l.createElement("div",{className:d2.Z2},l.createElement(p7.f,{disabled:!h||!!o,enabledTypePanelControls:m,textAutoResize:i,recordingKey:n})),f=l.createElement(p2.e,{recordingKey:y});return!e||t?l.createElement(l.Fragment,null,g,b,!c&&v,f,c&&v):l.createElement(l.Fragment,null,r?l.createElement(uP,null):l.createElement(l.Fragment,null,g,l.createElement(eg.sY,{topLeftInput:l.createElement(uT,{recordingKey:n}),rightInput:l.createElement(dL,{recordingKey:u.Pt(n,"alignment")}),leftLabel:a?(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_direction"):(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_direction_and_gap"),rightLabel:(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_alignment"),bottomLeftInput:a?null:l.createElement(uw,{recordingKey:n}),topIcon:l.createElement(d7,{recordingKey:u.Pt(n,"stackLayoutDetails")}),bottomIcon:null}),a?l.createElement(eg.fn,{leftInput:l.createElement(uw,{recordingKey:n}),rightInput:l.createElement(uI,{recordingKey:n}),icon:null,leftLabel:(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_gap"),rightLabel:null}):null,l.createElement(uN,{recordingKey:n}),!c&&l.createElement(p3.u,{recordingKey:n}),f,c&&l.createElement(p3.u,{recordingKey:n})))}function uf(){return(0,af.R)(e=>{let{mirror:{appModel:t,selectionProperties:{propertiesPanelShouldShowRemoveAutoLayout:n,containsStacksNeedingAlignmentMigration:l,stackMode:r,stackWrap:a,textAutoResize:i,missingFont:o}}}=e;return{showMigrationUi:l,actionEnabledStackSelection:(0,Z.Yh)(t,"stack-selection"),actionEnabledMultiStackSelection:(0,Z.Yh)(t,"run-multi-stack-auto-layout"),actionEnabledUnstackSelection:(0,Z.Yh)(t,"unstack-selection"),propertiesPanelShouldShowRemoveAutoLayout:n,wrappingEnabled:("HORIZONTAL"===r||(0,G.gl)(r))&&("WRAP"===a||(0,G.gl)(a)),textAutoResize:i,missingFont:o}})}let uS=!1;function uP(){let e;let t=(0,sz.am)(),[n,r]=(0,l.useState)(!1),{isOrInInstance:a,containsComponents:i}=(0,af.R)(e=>{let{isInstanceSelected:t,isInstanceSublayerSelected:n,numSelectedByType:l}=e.mirror.selectionProperties;return{isOrInInstance:!!(t||n),containsComponents:!!l&&!!l.SYMBOL}});(0,l.useEffect)(()=>{uS||(t("stack_v2_migration_info_shown"),uS=!0)},[t]),(0,tC.f4)(()=>{r(!1)});let o=(0,l.useCallback)(()=>{let e=U.AlE.getActiveCanvas();ew.l7.user("update-stack-to-alv3",()=>{U.Qa7.updateStackToAutoLayoutV3(e,U.Ez5.bigNudgeAmount())}),V.Y5.triggerAction("commit"),r(!0),t("stack_v2_migration_updated")},[t]),s=(0,l.useCallback)(e=>{V.Y5.triggerActionInUserEditScope("undo"),r(!1)},[]);if(n)return l.createElement(eE.fI,{className:d2.A5},l.createElement("span",{className:d2.Yv},(0,T.tx)("fullscreen.properties_panel.stack_panel.auto_layout_updated")),l.createElement("a",{className:d2._V,onClick:s},(0,T.tx)("fullscreen.properties_panel.stack_panel.undo")));let c=U.AlE.getActiveCanvas(),p=U.Qa7.isOrInInstanceWithDeprecatedAlignmentOverride(c);return e=a?p?(0,T.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_instance_overrides"):(0,T.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_instance"):i?(0,T.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version_components"):(0,T.t)("fullscreen.properties_panel.stack_panel.tooltip_old_version"),l.createElement(eE.fI,{className:d2.A5},l.createElement("div",{className:d2.Yv},(0,T.tx)("fullscreen.properties_panel.stack_panel.new_auto_layout_version_available"),l.createElement(eP.B,{className:d2.zp,svg:u_.A,"data-tooltip-type":ec.Ib.SPECIAL,"data-tooltip":de,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-text":e})),l.createElement(tt.nR,{onClick:o,className:d2.RM,type:"button",disabled:a&&!p},(0,T.tx)("fullscreen.properties_panel.stack_panel.update")))}function uT(e){let t=(0,rR.Zr)("unstack-selection"),n=(0,lk.kl)("stackMode"),r=(0,lk.kl)("stackWrap"),{version:a}=(0,el.DP)(),i=(0,sz.am)(),o=(0,q.d4)(rz.qd),s="ui2"===a?d2.N:d2.O_;return l.createElement(nP.E,{name:"stack_mode_control"},l.createElement("div",{className:s,"data-onboarding-key":"stack-mode-control"},l.createElement(sw.I,{property:"HORIZONTAL"===n&&"WRAP"===r?"WRAP":n,onChange:e=>{i("Stack Mode Changed",{stackMode:e,nodeIds:o}),ew.l7.user("set-stack-mode",()=>U.Qa7.setStackModeAndFlipPrimaryAndCounterAxisValues(e))},recordingKey:u.Pt(e,"stackMode"),disabled:!t},l.createElement(sw.Y,{svg:uu.A,value:"VERTICAL",tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.vertical_direction")}),l.createElement(sw.Y,{svg:ud.A,value:"HORIZONTAL",tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.horizontal_direction")}),l.createElement(sw.Y,{svg:uh.A,value:"WRAP",tooltip:(0,T.t)("fullscreen.properties_panel.stack_panel.wrap")}))))}function uw(e){let t=(0,dt.Wx)(),n=(0,dt.Y9)(),{version:r}=(0,el.DP)(),a="ui2"===r?d2.Kz:void 0;return l.createElement(nP.E,{name:"stack_spacing_control"},l.createElement(nQ.KI,{outerClassName:a,onFocus:()=>t(U.RN9.SPACING,!0),onBlur:()=>t(U.RN9.SPACING,!1),onScrubBegin:()=>t(U.RN9.SPACING,!0),onScrubEnd:()=>t(U.RN9.SPACING,!1),onMouseEnter:()=>n(U.RN9.SPACING,!0),onMouseLeave:()=>n(U.RN9.SPACING,!1),onNudge:()=>U.glU.temporarilyHideOverlay(U.hJs.SELECTION),recordingKey:u.Pt(e,"stackSpacing"),source:"panel",onboardingKey:"stack-spacing-input"}))}function uI(e){let t=(0,dt.Wx)(),n=(0,dt.Y9)(),{version:r}=(0,el.DP)(),a="ui3"===r?void 0:d2.UN;return l.createElement(nP.E,{name:"stack_counter_spacing_input"},l.createElement(dF.q,{outerClassName:a,onFocus:()=>t(U.RN9.COUNTER_SPACING,!0),onBlur:()=>t(U.RN9.COUNTER_SPACING,!1),onScrubBegin:()=>t(U.RN9.COUNTER_SPACING,!0),onScrubEnd:()=>t(U.RN9.COUNTER_SPACING,!1),onMouseEnter:()=>n(U.RN9.COUNTER_SPACING,!0),onMouseLeave:()=>n(U.RN9.COUNTER_SPACING,!1),onNudge:()=>U.glU.temporarilyHideOverlay(U.hJs.SELECTION),recordingKey:u.Pt(e,"stackCounterSpacing"),inputTestId:"stack-counter-spacing",source:"panel"}))}function uN({recordingKey:e}){let[t,n]=(0,l.useState)(!1),[r,a]=(0,l.useState)(!1),i=(0,ur.U)(),{version:o}=(0,el.DP)();(0,tC.f4)(e=>{let{stackHorizontalPadding:t,stackPaddingRight:l,stackVerticalPadding:r,stackPaddingBottom:a}=e.mirror.selectionProperties,o=(0,G.q)(t,l),s=(0,G.q)(r,a);n((0,G.gl)(o)||(0,G.gl)(s)||i)});let s=(0,sz.am)(),p=(0,q.d4)(rz.qd),d=(0,eC.R)(),m=()=>{n(!t),U.Qa7.setFocusStackPanelInput(U.RN9.PADDING_ALL,!1),s(t?"Disable autolayout independent padding":"Enable autolayout independent padding",{nodeIds:p})},h=d?l.createElement(nS.d,{onClick:m,toggled:t,actionOnPointerDown:!0,"aria-label":(0,T.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),recordingKey:u.Pt(e,"showAllPaddingControls"),htmlAttributes:{"data-tooltip":(0,T.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),"data-tooltip-type":ec.Ib.TEXT,"data-test-id":"stack-padding-toggle"}},l.createElement(p4,null)):l.createElement(cM.m,{"data-tooltip-type":ec.Ib.TEXT,"aria-label":(0,T.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),"data-tooltip":(0,T.t)("fullscreen.properties_panel.stack_panel.independent_paddings"),recordingKey:u.Pt(e,"showAllPaddingControls"),"data-test-id":"stack-padding-toggle",onMouseDown:m,svg:um.A,toggled:t,className:d2.NC});return l.createElement(nP.E,{name:"stack_padding_controls"},l.createElement("ui3"===o?uC:uk,{showAllPaddingControls:t,showSinglePaddingControl:r,setShowSinglePaddingControl:a,recordingKey:e,handleClick:function(e){(0,c.Fo)(e)&&a(!0)},showAllPaddingControlsToggle:h}))}function uk({showAllPaddingControls:e,showSinglePaddingControl:t,setShowSinglePaddingControl:n,recordingKey:r,handleClick:a,showAllPaddingControlsToggle:o}){return l.createElement(eE.fI,{heightMultiplier:e&&!t?2:void 0},t?l.createElement(uA,{className:d2.mR,paddingSelection:dt.mx.ALL,setShowSinglePaddingControl:n,focusOnMount:!0,recordingKey:r}):e?l.createElement(l.Fragment,null,l.createElement(uA,{className:i()(d2.oH,d2.aO),paddingSelection:dt.mx.LEFT,onClick:a,recordingKey:r,inputTestId:"padding-left"}),l.createElement(uA,{className:i()(d2.oH,d2.uH),paddingSelection:dt.mx.RIGHT,onClick:a,recordingKey:r,inputTestId:"padding-right"}),l.createElement(uA,{className:i()(d2.T1,d2.aO),paddingSelection:dt.mx.TOP,onClick:a,recordingKey:r,inputTestId:"padding-top"}),l.createElement(uA,{className:i()(d2.T1,d2.uH),paddingSelection:dt.mx.BOTTOM,onClick:a,recordingKey:r,inputTestId:"padding-bottom"})):l.createElement(l.Fragment,null,l.createElement(uA,{className:d2.oH,paddingSelection:dt.mx.HORIZONTAL,onClick:a,recordingKey:r,inputTestId:"padding-horizontal"}),l.createElement(uA,{className:d2.T1,paddingSelection:dt.mx.VERTICAL,onClick:a,recordingKey:r,inputTestId:"padding-vertical"})),o)}function uC({showAllPaddingControls:e,showSinglePaddingControl:t,setShowSinglePaddingControl:n,recordingKey:r,handleClick:a,showAllPaddingControlsToggle:i}){return l.createElement(p8.W,{showAllPaddingControls:e,showSinglePaddingControl:t,singleInput:l.createElement(uA,{paddingSelection:dt.mx.ALL,focusOnMount:!0,recordingKey:r,setShowSinglePaddingControl:n}),collapsedLeftInput:l.createElement(uA,{paddingSelection:dt.mx.HORIZONTAL,onClick:a,recordingKey:r,inputTestId:"padding-horizontal"}),collapsedRightInput:l.createElement(uA,{paddingSelection:dt.mx.VERTICAL,onClick:a,recordingKey:r,inputTestId:"padding-vertical"}),expandedTopLeftInput:l.createElement(uA,{paddingSelection:dt.mx.LEFT,onClick:a,recordingKey:r}),expandedBottomLeftInput:l.createElement(uA,{paddingSelection:dt.mx.RIGHT,onClick:a,recordingKey:r}),expandedTopRightInput:l.createElement(uA,{paddingSelection:dt.mx.TOP,onClick:a,recordingKey:r}),expandedBottomRightInput:l.createElement(uA,{paddingSelection:dt.mx.BOTTOM,onClick:a,recordingKey:r}),topIcon:i,leftLabel:(0,T.tx)("fullscreen.properties_panel.section_autoLayout.label_padding"),rightLabel:null,bottomIcon:null})}function uA({className:e,paddingSelection:t,recordingKey:n,inputTestId:r,onClick:a,onBlur:i,focusOnMount:o,setShowSinglePaddingControl:s}){let c=(0,dt.Wx)(),p=(0,dt.Y9)();return l.createElement(ur.s,{outerClassName:e,paddingSelection:t,focusOnMount:o,onFocus:()=>U.Qa7.setFocusStackPanelInput(t,!0),onBlur:e=>{U.Qa7.setFocusStackPanelInput(t,!1),i?.(e)},onMouseEnter:()=>p(t,!0),onMouseLeave:()=>p(t,!1),onClick:a,onScrubBegin:()=>c(t,!0),onScrubEnd:()=>c(t,!1),onNudge:()=>U.glU.temporarilyHideOverlay(U.hJs.SELECTION),setShowSinglePaddingControl:s,recordingKey:u.Pt(n,"stackPadding",dt.mx[t]),inputTestId:r,source:"panel"})}var uO=n(7723);let ux="template-controls-picker";var uR=n(929077);function uL(){let{sceneNodesToEdit:e,description:t}=(0,af.R)(e=>({sceneNodesToEdit:(0,rz.F4)(e),description:e.mirror.selectionProperties.description})),n="string"==typeof t?t:"",r=l.useCallback(t=>{ew.l7.user("set-description",()=>{for(let n of e)n.setDescriptionRich(t)})},[e]),a=l.useCallback(()=>{V.Y5.commit()},[]);return l.createElement("div",{className:"template_controls_menu--descriptionContainer--pRK0M"},l.createElement(uR.A,{description:n,isViewOnly:!1,placeholder:(0,T.t)("design_systems.template_panel.template_placeholder"),onBlur:a,onSubmit:r}))}function uM(){let e=(0,q.wA)(),t=(0,q.d4)(e=>e.pickerShown),n=new y.Mi(t?.initialX,t?.initialY);return t?.id!==ux?null:l.createElement(ez.vx,{autoflowHeight:!0,headerSize:"small",initialPosition:n,initialWidth:320,onClose:()=>{e(I.XE())},scrollOverflow:!1,title:(0,T.t)("design_systems.template_panel.template_controls")},l.createElement(uL,null))}var uD=n(400439),uF=n(832039),uK=n(691151),uV=n(999918);let uU=l.memo(function(){let{containingTemplate:e,pickerShown:t,templateDescription:n}=(0,af.R)(e=>({containingTemplate:(0,eJ._k)(e),pickerShown:e.pickerShown,templateDescription:e.mirror.selectionProperties.description??""})),r=(0,q.d4)(es.Dr),a=(0,q.d4)(es.cB),i=l.useRef(null),o=(0,q.wA)(),s=l.useCallback((e,t,n=ep.qo)=>{if(!i)return;let l=j.findDOMNode(i.current),r=(0,ep.cn)(l,n);o(I.u1({id:t,initialX:r.x,initialY:r.y})),o(k.sw()),o(I.Uv())},[o]),c=l.useCallback(e=>{t?.id===ux?o(I.XE()):s(e,ux,320)},[t,o,s]);return e&&e.isAlive()?l.createElement(eE.Zk,{ref:i},l.createElement(eE.fI,{className:oN.LO},l.createElement(uO.R,{guid:e.guid,value:e.name,canEdit:!0,icon:l.createElement(eP.B,{svg:uK.A,className:uF.Kk}),editAction:"rename-template"}),l.createElement("span",{className:uD.MC},l.createElement(ek.YW,{className:uD.UW,selected:t?.id===ux,onClick:c,onMouseDown:e=>e.stopPropagation(),"data-tooltip-type":ec.Ib.TEXT,"data-tooltip":(0,T.t)("design_systems.template_panel.template_controls"),svg:uV.A,recordingKey:"templateControls"}))),l.createElement(eh.n,{description:n}),r&&a&&l.createElement(e_.x,null),l.createElement(uM,null)):null});var uB=n(333483);function uH({onExpand:e}){return l.createElement(eE.Zk,{"data-testid":"toggle-simplified-panels",className:uB.aW},l.createElement(c$.z,{onClick:e,recordingKey:"toggleSimplifiedPanels"},(0,T.tx)("design_systems.component_properties.show_more_properties")))}var uG=n(527793),uY=n(96225);let u$=(0,o.jz)(tU.uj0);class uW extends u.o6{constructor(){super(...arguments),this.state={panelState:ts.GR.DEFAULT_EXPANDED},this.onMouseDown=u.cZ(this,"mousedown",()=>{V.Y5.deselectProperty(),this.props.dispatch(I.XE()),this.props.dispatch((0,N.vq)()),this.props.dispatch(k.sw()),this.props.dispatch(I.Uv())}),this.onContextMenu=e=>{let t=e.target;if(t){let n=t.tagName,l=t.type;n&&"INPUT"===n.toUpperCase()&&l&&"TEXT"===l.toUpperCase()||t.isContentEditable||e.preventDefault()}},this.showCreateStyleModal=({styleType:e,inheritStyleKeyField:t,nodeId:n,rowLeft:l,rowTop:r})=>{this.props.dispatch(k.sw()),this.props.dispatch(k.Zs({rowLeft:l,rowTop:r,styleType:e,inheritStyleKeyField:t,nodeId:n}))},this._stylePreviewThumbnail=new X.H4(()=>{var e;let t=(0,W.IW)(this.props.stylePreviewShown),n=null==(e=this.props.openFile)?void 0:e.canEdit,r=!!t||!n||this.props.appModel.isReadOnly;return l.createElement(th,{key:"style-preview-panel",selectedStyleProperties:this.props.selectedStyleProperties,isInspectPanel:this.props.propertiesPanelTab===U.FAf.INSPECT,stylePreviewShown:this.props.stylePreviewShown,externalStyle:t,isRenaming:this.props.library.isRenamingSelectedStyle,viewOnly:r,dispatch:this.props.dispatch,recordingKey:u.Pt(this.props,"stylePreviewPanel")})}),this.onCloseStylePreviewModal=()=>{U.glU.selectStyle(g.n3.INVALID,g.IA.INVALID),this.props.dispatch(k.sw()),this.props.dispatch((0,C.B)())},this.renderStylePreviewModal=()=>{var e;if(!this.props.stylePreviewShown.isShown||![U.FAf.DESIGN,U.FAf.SITE,U.FAf.INSPECT].includes(this.props.propertiesPanelTab))return;let t=this.props.selectedStyleProperties,n=new y.Mi(this.props.stylePreviewShown.rowLeft-ts.tA,this.props.stylePreviewShown.rowTop);if(this.props.stylePreviewShown.isCreating){let{styleType:e,inheritStyleKeyField:t,styleNameInputPrefix:r}=this.props.stylePreviewShown;return l.createElement(tp,{recordingKey:"createStyleModal",initialPosition:n,styleNameInputPrefix:r,styleType:e,inheritStyleKeyField:t})}{let r=!(0,D.eE)(this.props.stylePreviewShown.style,this.props.openFile),a=r||!(null==(e=this.props.openFile)?void 0:e.canEdit)||this.props.appModel.topLevelMode===$.lyf.BRANCHING,i=(0,P.dI)(t.guid);if(!(i&&this.props.library.local.styles[i]&&!this.props.library.local.styles[i].is_soft_deleted)&&!r||!this.props.selectedStyleProperties.guid)return;return l.createElement(to.zK.Provider,{value:to.zM.EDIT_STYLE},l.createElement(ez.vx,{title:this.getStylePreviewThumbnailTitle(t.styleType,a),key:(0,W.Gj)(this.props.stylePreviewShown.style),headerSize:"small",initialWidth:ts.tA,initialPosition:n,onClose:this.onCloseStylePreviewModal,recordingKey:u.Pt(this.props,"modal"),dragHeaderOnly:!0},l.createElement("div",{className:tc.FY},this._stylePreviewThumbnail.render({isVisible:!0}),this._externalStyleLink.render({isVisible:r}))))}},this._externalStyleLink=new X.H4(()=>l.createElement(i0,{stylePreviewShown:this.props.stylePreviewShown,user:this.props.user})),this._framePresetPanel=new X.H4(()=>l.createElement(i1.nl,{key:"frame-presets",dispatch:this.props.dispatch,expandedFramePresetType:this.props.expandedFramePresetType,recordingKey:"framePresetPanel"})),this._pencilToolPanel=new X.H4(()=>l.createElement(sr,{key:"pencilToolPanel",id:"pencilToolPanel",openFile:this.props.openFile,recordingKey:"pencilToolPanel"})),this._canvasBackgroundPanel=new X.H4(()=>{let e=this.props.selectionProperties;return l.createElement(iV,{key:"canvas-background",backgroundColor:e.backgroundColor,backgroundEnabled:e.backgroundEnabled,backgroundOpacity:e.backgroundOpacity,exportBackgroundDisabled:e.exportBackgroundDisabled,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,modalShown:this.props.modalShown,editModeType:this.props.appModel.activeCanvasEditModeType,pickerShown:this.props.pickerShown,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,library:this.props.library,openFile:this.props.openFile,recordingKey:"canvasBackgroundPanel",currentSelectedProperty:this.props.appModel.currentSelectedProperty,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,defaultColor:Y.rC,sceneGraphSelection:this.props.sceneGraphSelection,selectedStyleProperties:this.props.selectedStyleProperties,hasExports:!!e.exportSettings&&(0,G._W)(e.exportSettings,[]).length>0})}),this._viewOnlyFlowsPanel=new X.H4(()=>l.createElement(nb.A,{viewOnly:!0})),this._localStylesPanel=new X.H4(e=>l.createElement(nE,{key:e,scrollContainer:this.scrollContainer,recordingKey:e})),this._transformPanel=new X.H4(()=>{var e;return l.createElement(oi.zq,{key:"transform",propertiesPanelState:this.state.panelState,recordingKey:"transformPanel",pickerShown:this.props.pickerShown,openFileKey:(null==(e=this.props.openFile)?void 0:e.key)||null,canEditConstraints:this.props.isUI3&&this.shouldShowConstraintsResizingPanel(),onlyShowXYInputsRow:this.props.isUI3&&(this.state.panelState===ts.GR.DEFAULT_SIMPLIFIED||(this.selectionProperties().areOnlyResponsiveSetsSelected??!1))})}),this._vectorPanel=new X.H4(()=>{let e=this.selectionProperties(),t=this.props.isUI3;return l.createElement(oi.Ss,{key:"vector-transform",x:e.x,y:e.y,cornerRadius:e.cornerRadius,handleMirroring:e.handleMirroring,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:"vectorTransformPanel",isUI3:t})}),this._liveObjectPanel=new X.H4(()=>l.createElement(oX.cI,{key:"live-object",recordingKey:"liveObjectPanel",pasteSources:this.props.selectionProperties.pasteSources})),this._instancePanel=new X.H4(()=>{let e=this.props.selectionProperties;return l.createElement(i5._,{key:"instance",symbolGUIDsBackingSelection:e.symbolGUIDsBackingSelection,resettableInstanceOverridesMap:e.resettableInstanceOverrides,stateGroupSelectionInfo:e.stateGroupSelectionInfo,recordingKey:"instancePanel"})}),this._constraintsResizingPanel=new X.H4(()=>{var e;return l.createElement(iY,{key:"constraints",openFileKey:(null==(e=this.props.openFile)?void 0:e.key)||null,dropdownShown:this.props.dropdownShown,recordingKey:"constraintsPanel"})}),this._stackPanel=new X.H4(()=>l.createElement(uE,{key:"stack",onlyShowResizingRow:this.props.isUI3&&this.state.panelState===ts.GR.DEFAULT_SIMPLIFIED,onlyStacksSelected:this.props.shownPanels[U.ibQ.STACK_ITEM],recordingKey:"stackPanel"})),this._removeGroupFillAndStrokePanel=new X.H4(()=>l.createElement(o4,{key:"remove-group-fill-stroke"})),this._maskPanel=new X.H4(()=>{let e=this.selectionProperties();return l.createElement(oj,{key:"mask",maskType:e.maskType,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:"maskPanel"})}),this._componentPropertiesPanel=new X.H4(()=>l.createElement(e7,{key:"componentProperties",recordingKey:"propsPanel"})),this._componentPanel=new X.H4(()=>l.createElement(em.cu,{key:"component",recordingKey:"componentPanel"})),this._templatePropertiesPanel=new X.H4(()=>l.createElement(nC,{key:"templateProperties",recordingKey:"templatePropsPanel"})),this._templatePanel=new X.H4(()=>l.createElement(uU,{key:"template"})),this._gridsPanel=new X.H4(()=>l.createElement(ts.tC,{key:"grids",selectionProperties:this.props.selectionProperties})),this._layerPanel=new X.H4(()=>{let e=this.props.selectionProperties;return this.props.isUI3?l.createElement(oW,{recordingKey:"appearancePanel"}):l.createElement(ox,{key:"layer",blendMode:e.blendMode,opacity:e.opacity,visible:e.visible,variableConsumptionInfo:e.variableConsumptionInfo,recordingKey:"layerPanel"})}),this._localVariablesPanel=new X.H4(()=>l.createElement(nN,{key:"local-variables"})),this._typePanel=new X.H4(()=>l.createElement(ts.gc,{key:"type",selectionProperties:this.props.selectionProperties})),this._selectionPaints=new X.H4(()=>l.createElement(iN.UA,{key:"selection-paints",selectionPaints:this.props.selectionPaints,recordingKey:"selectionPaintsPanel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,sceneGraphSelection:this.props.sceneGraphSelection,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,pickerShown:this.props.pickerShown,stylePickerListLayout:this.props.stylePickerListLayout,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:Y.rC,library:this.props.library,openFile:this.props.openFile,isUI3:this.props.isUI3})),this._fillPanel=new X.H4(()=>{let e;return this.props.selectionProperties.numSelectedByType&&(e=(0,nf.aZ)(U.rrT.FILL,this.props.selectionProperties.numSelectedByType)),l.createElement(ts.B8,{key:"fill",selectionProperties:this.props.selectionProperties,variableScopes:e})}),this._strokePanel=new X.H4(()=>{let e=this.props.selectionProperties;return l.createElement(iN.$p,{key:"stroke",stylePickerShown:this.props.stylePickerShown,strokePanelMode:this.props.strokePanelMode,strokePanelTerminalPointCount:this.props.strokePanelTerminalPointCount,strokePaints:e.strokePaints,borderSharedWeight:e.borderSharedWeight,strokeWeight:e.strokeWeight,strokeAlign:e.strokeAlign,strokeCap:e.strokeCap,strokeJoin:e.strokeJoin,miterLimitAngle:e.miterLimitAngle,connectorLineStyle:e.connectorLineStyle,leftEndCap:e.leftEndCap,rightEndCap:e.rightEndCap,maxStrokeWeight:e.maxStrokeWeight,dashPattern:e.dashPattern,dashCap:e.dashCap,terminalCap:e.terminalCap,arcRadius:e.arcRadius,arcSweep:e.arcSweep,numSelectedByType:e.numSelectedByType,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,modalShown:this.props.modalShown,pickerShown:this.props.pickerShown,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,stylePickerListLayout:this.props.stylePickerListLayout,currentSelectedProperty:this.props.appModel.currentSelectedProperty,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:Y.Em,inheritStyleKey:e.inheritFillStyleKeyForStroke||null,inheritStyleID:e.styleIdForStrokeFill||null,library:this.props.library,sceneGraphSelection:this.props.sceneGraphSelection,selectedStyleProperties:this.props.selectedStyleProperties,openFile:this.props.openFile,recordingKey:"strokePanel",isPanelBodyCollapsedAtom:null})}),this._effectsPanel=new X.H4(()=>l.createElement(ts.w5,{key:"effects",selectionProperties:this.props.selectionProperties})),this._slidesShadowPanel=new X.H4(()=>l.createElement(ap,{recordingKey:"slidesShadowPanel"})),this._exportPanelInspectTab=new X.H4(()=>{let e=this.selectionProperties(),t=this.props.openFile,n=(0,Z.Nf)(this.props.appModel);return l.createElement(iW.LI,{key:"export",title:this.isReadOnlyNonInspect()?(0,T.t)("fullscreen.properties_panel.export"):(0,T.t)("fullscreen.properties_panel.presets"),standalone:!0,openFile:t,singleNodeName:iW.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:n,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:si.iP})}),this._exportPanel=new X.H4(()=>{let e=this.props.selectionProperties,t=(0,Z.Nf)(this.props.appModel);return l.createElement(iW.LI,{key:"export",openFile:this.props.openFile,singleNodeName:iW.LI.singleNodeNameFrom(e),numSelected:e.numSelected,exportSettings:e.exportSettings,sceneGraphSelection:this.props.sceneGraphSelection,currentPage:t,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,currentSelectedProperty:this.props.appModel.currentSelectedProperty,pickerShown:this.props.pickerShown,recordingKey:"exportsPanel",saveAsState:this.props.saveAsState,panelWidth:si.iP})}),this._pluginPanel=new X.H4(()=>{var e,t;let n=this.selectionProperties();return l.createElement(sa.Q,{key:"plugin",pluginRelaunchData:n.pluginRelaunchData,localPlugins:this.props.localPlugins,publishedPlugins:this.props.publishedPlugins,allSavedPlugins:this.props.allSavedPlugins.plugins,orgEntity:(0,F.Jl)(this.props),dispatch:this.props.dispatch,openFileKey:(null==(e=this.props.openFile)?void 0:e.key)||null,editorType:(null==(t=this.props.openFile)?void 0:t.editorType)?(0,Q.wN)(this.props.openFile.editorType):null,numSelected:n.numSelected??0,recordingKey:"pluginPanel"})}),this._prototypePanel=new X.H4(()=>l.createElement(ps,{key:"prototype",dispatch:this.props.dispatch,selectionProperties:this.selectionProperties(),appModel:this.props.appModel,pickerShown:this.props.pickerShown,dropdownShown:this.props.dropdownShown,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,sceneGraphSelection:this.props.sceneGraphSelection,editModeType:this.props.appModel.activeCanvasEditModeType,library:this.props.library,openFile:this.props.openFile,userFlags:this.props.userFlags,recordingKey:"prototypePanel"})),this._scalePanel=new X.H4(()=>(0,s.kc)().ce_scale_tool_v2?l.createElement(p5,{key:"scale",recordingKey:"scalePanel"}):l.createElement(pz,{key:"scale",recordingKey:"scalePanel"})),this._slidesAlignPanel=new X.H4(()=>l.createElement(nM,{recordingKey:"slidesAlignPanel"})),this._slidesThemePanel=new X.H4(()=>l.createElement(aE,{recordingKey:"slidesThemePanel"})),this._slidesInstancePanel=new X.H4(()=>l.createElement(rj,{recordingKey:"slidesInstancePanel"})),this._slidesFillPanel=new X.H4(()=>l.createElement(rW,{recordingKey:"slidesFillPanel"})),this._slidesOpacityPanel=new X.H4(()=>l.createElement(aa,{recordingKey:"slidesOpacityPanel"})),this._slidesTypePanel=new X.H4(()=>l.createElement(i_,{recordingKey:"slidesTypePanel"})),this._slidesLinkPanel=new X.H4(()=>l.createElement(ae,{recordingKey:"slidesLinkPanel"})),this._slidesBorderPanel=new X.H4(()=>l.createElement(lJ,{recordingKey:"slidesBorderPanel"})),this._slidesCornerPanel=new X.H4(()=>l.createElement(l3,{recordingKey:"slidesCornerPanel"})),this._slidesAnimationPanel=new X.H4(()=>l.createElement(lf,null)),this._slidesEmbeddablePrototypePanel=new X.H4(()=>l.createElement(rl,{selection:this.props.sceneGraphSelection})),this._slidesInteractiveWidgetPanel=new X.H4(()=>l.createElement(r1,{selection:this.props.sceneGraphSelection})),this._slidesSelectionPaints=new X.H4(()=>l.createElement(iN.UA,{key:"selection-paints",selectionPaints:this.props.selectionPaints,recordingKey:"selectionPaintsPanel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,sceneGraphSelection:this.props.sceneGraphSelection,currentSelectedGradientStop:this.props.appModel.currentSelectedGradientStop,pickerShown:this.props.pickerShown,stylePickerListLayout:this.props.stylePickerListLayout,currentTool:this.props.appModel.currentTool,colorFormat:this.props.colorFormat,editModeType:this.props.appModel.activeCanvasEditModeType,defaultColor:Y.rC,library:this.props.library,openFile:this.props.openFile,isUI3:this.props.isUI3,customColorPicker:nx.GY,hideCustomColorPickerFillTypeToggle:!1})),this._sitesPositionPanel=new X.H4(()=>l.createElement(nA.Qc,{recordingKey:"positionPanel"})),this._sitesLinkPanel=new X.H4(()=>l.createElement(nA.rC,{recordingKey:"linkPanel"})),this._sitesPageMetadataPanel=new X.H4(()=>l.createElement(nA.li,{recordingKey:"pageMetadataPanel"})),this._sitesCanvasOverlayPanel=new X.H4(()=>l.createElement(nA.rf,null)),this._sitesAccessibilityPanel=new X.H4(()=>l.createElement(nA.l,{recordingKey:"accessibilityPanel"})),this._sitesResponsivenessPanel=new X.H4(()=>l.createElement(nA.eg,{key:"responsiveness"})),this._sitesHTMLWidgetPanel=new X.H4(()=>l.createElement(nA.Mr,null)),this._sitesInteractionsPanel=new X.H4(()=>l.createElement(nA.GO,{recordingKey:"interactionsPanel"})),this._cooperConstrainedEditPanel=new X.H4(()=>l.createElement(w,{recordingKey:"constrainedEditPanel"})),this._cooperFreeformEditPanel=new X.H4(()=>l.createElement(w,{recordingKey:"freeformEditPanel"})),this.shouldShowCooperConstrainedEditPanel=()=>this.props.appModel.activeCanvasEditModeType===U.m1T.COOPER_CONSTRAINED,this.shouldShowCooperFreeformEditPanel=()=>this.props.appModel.activeCanvasEditModeType===U.m1T.COOPER_LAYOUT,this.isStyleSelected=()=>this.props.selectedStyleProperties&&!!this.props.selectedStyleProperties.guid,this.isLiveObjectSelected=()=>(this.props.selectionProperties.pasteSources||[]).length>0,this.selectionProperties=()=>this.isStyleSelected()?this.props.selectedStyleProperties:this.props.selectionProperties,this.shouldShowAlignControls=()=>(0,si.d6)(this.props.shownPanels),this.shouldRenderUI3ToolbarItems=()=>this.props.isUI3,this.shouldShowConstraintsResizingPanel=()=>{let e=this.props.shownPanels;return!this.scaleShouldHideOtherPanels()&&e[U.ibQ.CONSTRAINTS_ITEM]},this.shouldShowInteractionsPanel=()=>!!this.props.selectionProperties.isValidPrototypingSourceSelected,this.isStateSelected=()=>{var e;return(null==(e=this.props.selectionProperties.stateGroupSelectionInfo)?void 0:e.mode)===U.iCO.STATE},this.shouldShowLocalVariablesPanel=()=>{let e=(0,iS.P)(this.props.selectedView),t=this.props.shownPanels;return!this.scaleShouldHideOtherPanels()&&!this.props.appModel.isReadOnly&&0===Object.keys(this.props.sceneGraphSelection).length&&!t[U.ibQ.FRAME_PRESETS]&&!e},this.shouldShowSelectionPaintsPanel=()=>{let e=this.props.shownPanels;return(0,si.fI)(e,this.scaleShouldHideOtherPanels(),this.props.selectionPaints)},this.shouldShowSlidesLinkPanel=()=>{let{numSelectedByType:e}=this.props.selectionProperties;return!!e&&(e.TEXT??0)>0&&(0,L.OU)(e,["TEXT"])},this.shouldShowSlidesAlignPanel=()=>{let{numSelectedByType:e}=this.props.selectionProperties,t=e&&(0,L.vx)(e,"SLIDE");return this.shouldShowAlignControls()&&!t},this.doesNotHaveAnySelectedText=()=>{let{numSelectedByType:e}=this.props.selectionProperties;return!((null==e?void 0:e.TEXT)&&e.TEXT>0)},this.shouldShowStackPanel=e=>{let t=this.props.shownPanels;return(0,si.IY)(t,this.scaleShouldHideOtherPanels(),this.props.selectionProperties,this.isStyleSelected()?this.props.selectedStyleProperties:void 0,e)},this.scaleShouldHideOtherPanels=()=>this.props.shownPanels[U.ibQ.SCALE_ITEM]&&!(0,s.kc)().ee_scale_tool_show_all_panels,this.shouldShowExportPanel=()=>this.props.openFile&&!(0,z.Pe)(this.props.openFile)&&!(0,H.MP)(),this.shouldShowLocalStylesPanel=()=>{let e=(0,iS.P)(this.props.selectedView);return!this.scaleShouldHideOtherPanels()&&0===Object.keys(this.props.sceneGraphSelection).length&&!this.props.shownPanels[U.ibQ.FRAME_PRESETS]&&!e},this.renderSimplifiedDesignPanels=()=>{let e=this.props.shownPanels;if((0,d.Im)(e)||Object.keys(e).every(t=>!e[parseInt(t)])){let e=Error("Rendering simplified design tab with no shownPropertiesPanels");(0,m.$D)(h.e.FIGJAM,e)}return l.createElement(f.i,{displayAs:f.C.Block},0===Object.keys(this.props.sceneGraphSelection).length&&l.createElement(iP.Mw,{panelName:iP.ON.DESIGN}),!this.props.isUI3&&this.shouldShowAlignControls()&&l.createElement(nR.AV,{recordingKey:"alignPanel"}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uG._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this.props.isUI3&&this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&!this.isLiveObjectSelected()}),this._transformPanel.render({isVisible:!0}),this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[U.ibQ.SCALE_ITEM]}),!this.props.isUI3&&this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&!this.isLiveObjectSelected()}),this._constraintsResizingPanel.render({isVisible:!this.props.isUI3&&this.shouldShowConstraintsResizingPanel()}),!this.props.isUI3&&this._layerPanel.render({isVisible:e[U.ibQ.LAYER_ITEM]}),this.state.panelState===ts.GR.DEFAULT_SIMPLIFIED&&l.createElement(uH,{onExpand:()=>{this.setState({panelState:ts.GR.OVERRIDDEN_EXPANDED})}}),this.state.panelState===ts.GR.OVERRIDDEN_EXPANDED&&l.createElement(l.Fragment,null,this.props.isUI3&&this._layerPanel.render({isVisible:e[U.ibQ.LAYER_ITEM]}),l.createElement(i$.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[U.ibQ.TEMPLATE_ITEM]}),this._componentPanel.render({isVisible:e[U.ibQ.COMPONENT_ITEM]}),this._vectorPanel.render({isVisible:e[U.ibQ.VECTOR_ITEM]}),!this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._maskPanel.render({isVisible:e[U.ibQ.MASK_ITEM]}),!this.props.isUI3&&this._gridsPanel.render({isVisible:e[U.ibQ.GRIDS_ITEM]}),this._typePanel.render({isVisible:e[U.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[U.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[U.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._fillPanel.render({isVisible:e[U.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[U.ibQ.STROKE_ITEM]}),!this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._effectsPanel.render({isVisible:e[U.ibQ.EFFECTS_ITEM]}),this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this.props.isUI3&&this._gridsPanel.render({isVisible:e[U.ibQ.GRIDS_ITEM]}),this.props.isUI3&&this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[U.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()})),!this.props.isUI3&&this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[U.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderDesignPanels=()=>{let e=this.props.shownPanels;return(((0,d.Im)(e)||Object.keys(e).every(t=>!e[parseInt(t)]))&&!window.figmaPerfTesting&&!(0,_.Lg)()&&!(0,_.nl)()&&(0,m.x1)("PropertiesPanel","Rendering design tab with no shownPropertiesPanels",{isEmpty:(0,d.Im)(e),shouldRenderInspectTab:this.shouldRenderInspectTab()}),e[U.ibQ.FRAME_PRESETS])?l.createElement(f.i,{displayAs:f.C.Block},this._framePresetPanel.render({isVisible:!0})):e[U.ibQ.PENCIL_TOOL]?l.createElement(f.i,{displayAs:f.C.Block},this._pencilToolPanel.render({isVisible:!0})):l.createElement(f.i,{displayAs:f.C.Block},0===Object.keys(this.props.sceneGraphSelection).length&&l.createElement(iP.Mw,{panelName:iP.ON.DESIGN}),!this.props.isUI3&&this.shouldShowAlignControls()&&l.createElement(nR.AV,{recordingKey:"alignPanel"}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uG._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this.props.isUI3&&this._componentPropertiesPanel.render({isVisible:this.shouldShowComponentPropertiesPanel()}),this.props.isUI3&&this._componentPanel.render({isVisible:e[U.ibQ.COMPONENT_ITEM]}),this.props.isUI3&&this._instancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._transformPanel.render({isVisible:this.props.isUI3&&this.shouldShowAlignControls()||e[U.ibQ.TRANSFORM_ITEM]}),this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[U.ibQ.SCALE_ITEM]}),l.createElement(i$.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[U.ibQ.TEMPLATE_ITEM]}),this._templatePropertiesPanel.render({isVisible:e[U.ibQ.TEMPLATE_ITEM]}),!this.props.isUI3&&this._componentPanel.render({isVisible:e[U.ibQ.COMPONENT_ITEM]}),!this.props.isUI3&&this._componentPropertiesPanel.render({isVisible:e[U.ibQ.COMPONENT_ITEM]&&!this.isStateSelected()}),this._liveObjectPanel.render({isVisible:this.isLiveObjectSelected()}),!this.props.isUI3&&this._instancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._vectorPanel.render({isVisible:e[U.ibQ.VECTOR_ITEM]}),!this.props.isUI3&&this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._constraintsResizingPanel.render({isVisible:!this.props.isUI3&&this.shouldShowConstraintsResizingPanel()}),this._maskPanel.render({isVisible:e[U.ibQ.MASK_ITEM]}),!this.props.isUI3&&this._gridsPanel.render({isVisible:e[U.ibQ.GRIDS_ITEM]}),this._layerPanel.render({isVisible:e[U.ibQ.LAYER_ITEM]}),this._typePanel.render({isVisible:e[U.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[U.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[U.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._fillPanel.render({isVisible:e[U.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[U.ibQ.STROKE_ITEM]}),!this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._effectsPanel.render({isVisible:e[U.ibQ.EFFECTS_ITEM]}),this.props.isUI3&&this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._localVariablesPanel.render({isVisible:this.shouldShowLocalVariablesPanel()}),this._localStylesPanel.render({isVisible:this.shouldShowLocalStylesPanel(),valueArgs:["local-styles"]}),this.props.isUI3&&this._gridsPanel.render({isVisible:e[U.ibQ.GRIDS_ITEM]}),this.shouldShowExportPanel()&&this._exportPanel.render({isVisible:e[U.ibQ.EXPORT_ITEM]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderSlidesPanels=()=>{let e=this.props.shownPanels,t=this.props.selectionProperties.numSelectedByType;if(e[U.ibQ.PENCIL_TOOL])return l.createElement(f.i,{displayAs:f.C.Block},this._pencilToolPanel.render({isVisible:!0}));let n=!!t&&(t.SLIDE??0)>0&&(0,L.OU)(t,["SLIDE"]);return l.createElement(f.i,{displayAs:f.C.Block},this._slidesAlignPanel.render({isVisible:this.shouldShowSlidesAlignPanel()}),this.shouldRenderUI3ToolbarItems()&&l.createElement(uG._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel(),shouldShowSlidesTypePanel:e[U.ibQ.TYPE_ITEM]}),this._slidesThemePanel.render({isVisible:n}),this._slidesInstancePanel.render({isVisible:this.shouldShowInstancePanel()}),this._slidesTypePanel.render({isVisible:e[U.ibQ.TYPE_ITEM]}),this._slidesFillPanel.render({isVisible:e[U.ibQ.FILL_ITEM]}),this._slidesOpacityPanel.render({isVisible:e[U.ibQ.FILL_ITEM]&&!n}),this._slidesCornerPanel.render({isVisible:e[U.ibQ.STROKE_ITEM]}),this._slidesBorderPanel.render({isVisible:e[U.ibQ.STROKE_ITEM]&&this.doesNotHaveAnySelectedText()}),this._slidesShadowPanel.render({isVisible:e[U.ibQ.EFFECTS_ITEM]}),this._slidesLinkPanel.render({isVisible:e[U.ibQ.TYPE_ITEM]&&this.shouldShowSlidesLinkPanel()}),this._slidesSelectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._slidesEmbeddablePrototypePanel.render({isVisible:e[U.ibQ.SLIDES_EMBED]}),this._slidesInteractiveWidgetPanel.render({isVisible:e[U.ibQ.SLIDES_INTERACTIVE_WIDGET]}))},this.renderSlidesAnimationPanels=()=>{let e=this.props.shownPanels;return l.createElement(f.i,{displayAs:f.C.Block},this._slidesAnimationPanel.render({isVisible:e[U.ibQ.SLIDES_ANIMATION]}))},this.renderSitesPanels=()=>{let e=this.props.shownPanels;return l.createElement(f.i,{displayAs:f.C.Block},this.shouldRenderUI3ToolbarItems()&&l.createElement(uG._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:this.shouldShowComponentPropertiesPanel(),shouldShowInstancePanel:this.shouldShowInstancePanel()}),this._sitesCanvasOverlayPanel.render({isVisible:this.shouldShowSitesCanvasOverlayPanel()}),this._componentPropertiesPanel.render({isVisible:this.shouldShowComponentPropertiesPanel()}),this._componentPanel.render({isVisible:e[U.ibQ.COMPONENT_ITEM]}),this._instancePanel.render({isVisible:!this.scaleShouldHideOtherPanels()&&this.shouldShowInstancePanel()}),this._sitesPositionPanel.render({isVisible:this.shouldShowSitesPositionPanel()}),this._transformPanel.render({isVisible:e[U.ibQ.TRANSFORM_ITEM]}),this._stackPanel.render({isVisible:this.shouldShowStackPanel(this.props.hasMergedDimensionsAndAutolayout)}),this._scalePanel.render({isVisible:e[U.ibQ.SCALE_ITEM]}),this._sitesPageMetadataPanel.render({isVisible:this.shouldShowSitesPageMetadataPanel()}),l.createElement(i$.Q,{selection:this.props.sceneGraphSelection,shownPanels:this.props.shownPanels,scaleShouldHideOtherPanels:this.scaleShouldHideOtherPanels()}),this._templatePanel.render({isVisible:e[U.ibQ.TEMPLATE_ITEM]}),this._vectorPanel.render({isVisible:e[U.ibQ.VECTOR_ITEM]}),this._maskPanel.render({isVisible:e[U.ibQ.MASK_ITEM]}),this._layerPanel.render({isVisible:e[U.ibQ.LAYER_ITEM]}),this._typePanel.render({isVisible:e[U.ibQ.TYPE_ITEM]}),this._canvasBackgroundPanel.render({isVisible:e[U.ibQ.CANVAS_ITEM]}),this._removeGroupFillAndStrokePanel.render({isVisible:e[U.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]}),this._selectionPaints.render({isVisible:this.shouldShowSelectionPaintsPanel()}),this._fillPanel.render({isVisible:e[U.ibQ.FILL_ITEM]}),this._strokePanel.render({isVisible:e[U.ibQ.STROKE_ITEM]}),this._effectsPanel.render({isVisible:e[U.ibQ.EFFECTS_ITEM]}),this._gridsPanel.render({isVisible:e[U.ibQ.GRIDS_ITEM]}),this._sitesHTMLWidgetPanel.render({isVisible:this.shouldShowSitesHTMLWidgetPanel()}),this._sitesAccessibilityPanel.render({isVisible:this.shouldShowSitesAccessibilityPanel()}),this._sitesResponsivenessPanel.render({isVisible:this.shouldShowSitesResponsivenessPanel()}),this._localVariablesPanel.render({isVisible:this.shouldShowLocalVariablesPanel()}),this._localStylesPanel.render({isVisible:this.shouldShowLocalStylesPanel(),valueArgs:["local-styles"]}),this._pluginPanel.render({isVisible:!this.scaleShouldHideOtherPanels()}))},this.renderCooperPanels=()=>l.createElement(f.i,{displayAs:f.C.Block},this._cooperConstrainedEditPanel.render({isVisible:this.shouldShowCooperConstrainedEditPanel()}),this._cooperFreeformEditPanel.render({isVisible:this.shouldShowCooperFreeformEditPanel()})),this.renderInspectionPanels=()=>{var e,t;let n=null==(e=this.props.openFile)?void 0:e.canEdit,r=this.props.selectionProperties,a=!r.prototypeStartingPointsInfo||(null==(t=r.prototypeStartingPointsInfo)?void 0:t.length)>0,i=0===Object.keys(this.props.sceneGraphSelection).length,o=i&&!n&&a;return l.createElement(x.fu,{name:J.e0.CODE_PANEL},l.createElement(f.i,{displayAs:f.C.Block},l.createElement(iP.Mw,{panelName:iP.ON.INSPECT}),l.createElement(aW.U,{key:"inspection-properties-panel",recordingKey:"inspectionPanel",flowPanel:this._viewOnlyFlowsPanel.render({isVisible:o}),localStylesPanel:this._localStylesPanel.render({isVisible:i,valueArgs:["code-local-styles"]})})))},this.renderPrototypePanels=()=>{let e=this.props.shownPanels;return l.createElement(f.i,{displayAs:f.C.Block},this._sitesLinkPanel.render({isVisible:this.shouldShowSitesLinkPanel()}),this._sitesInteractionsPanel.render({isVisible:this.shouldShowSitesInteractionsPanel()}),this._framePresetPanel.render({isVisible:e[U.ibQ.FRAME_PRESETS]}),this._pencilToolPanel.render({isVisible:e[U.ibQ.PENCIL_TOOL]}),this._prototypePanel.render({isVisible:!e[U.ibQ.FRAME_PRESETS]&&!e[U.ibQ.PENCIL_TOOL]&&!this.selectionProperties().containsResponsiveSets}))},this.shouldRenderInspectTab=()=>this.props.appModel.showUi&&!!this.props.user&&this.props.appModel.isReadOnly,this.onKeyDown=e=>{this.props.selectedStyleProperties&&(0,P.fn)(this.props.selectedStyleProperties.guid)&&(e.event.keyCode===c.Uz.ESCAPE?(e.accept(),U.glU.selectStyle(g.n3.INVALID,g.IA.INVALID)):e.event.keyCode===c.Uz.F&&U.glU.selectStyle(g.n3.INVALID,g.IA.INVALID))},this.scrollContainer=null,this.refMainScrollContainer=e=>{this.scrollContainer=e},this.isReadOnlyNonInspect=()=>this.props.appModel.isReadOnly&&!(0,td.$A)(this.props.selectedView),this.renderPanelContent=()=>{let e=this.props.appModel.topLevelMode,t=this.props.propertiesPanelTab,n=this.props.appModel.isReadOnly,r=e!==$.lyf.PREVIEW&&(e!==$.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==$.lyf.DEV_HANDOFF&&t===U.FAf.DESIGN,a=e!==$.lyf.PREVIEW&&(e!==$.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==$.lyf.DEV_HANDOFF&&t===U.FAf.SLIDE,i=e!==$.lyf.PREVIEW&&(e!==$.lyf.BRANCHING||!this.shouldRenderInspectTab())&&e!==$.lyf.DEV_HANDOFF&&t===U.FAf.SLIDE_ANIMATION,o=e===$.lyf.LAYOUT&&!n&&t===U.FAf.SITE,s=e!==$.lyf.PREVIEW&&e!==$.lyf.BRANCHING&&t===U.FAf.PROTOTYPE,c=e===$.lyf.PREVIEW&&!this.props.userStateLoaded||t===U.FAf.INSPECT,p=e===$.lyf.LAYOUT&&!n&&t===U.FAf.COOPER;return r||a||i||o||p||s||c||t===U.FAf.EXPORT||t===U.FAf.COMMENT||(0,m.x1)("PropertiesPanel","Rendering empty properties panels",{topLevelMode:$.lyf[e],tab:U.FAf[t],shouldRenderInspectTab:this.shouldRenderInspectTab()}),l.createElement(l.Fragment,null,r&&(this.state.panelState===ts.GR.DEFAULT_EXPANDED?this.renderDesignPanels():this.renderSimplifiedDesignPanels()),a&&this.renderSlidesPanels(),i&&this.renderSlidesAnimationPanels(),o&&this.renderSitesPanels(),s&&this.renderPrototypePanels(),c&&this.renderInspectionPanels(),p&&this.renderCooperPanels(),t===U.FAf.EXPORT&&this._exportPanelInspectTab.render({isVisible:!0}),t===U.FAf.COMMENT&&l.createElement(this.props.commentsPanel,null))},this.onResize=e=>{e=(0,p.qE)(e,u$+1,500),(0,B.UK)().propertiesPanelSplitPosition.set(e)},this.getRightPanelAnimation=(e,t)=>{if(this.props.isUI3)return;let n={ease:"easeInOut",duration:.2,delay:this.props.isCollapsed?void 0:.05};return this.props.isCollapsed?{initial:{left:`calc(${e}px + ${t})`},animate:{left:`calc(${e}px + ${t})`,display:"block",transitionEnd:{display:"none"}},transition:n}:{initial:{left:0},transition:n}}}componentDidUpdate(e,t){super.componentDidUpdate(e,t);let n=e.selectionProperties.productComponentGUIDBackingInstances,l=this.props.selectionProperties.productComponentGUIDBackingInstances;if(n!==l){let e=ts.GR.DEFAULT_EXPANDED;if(l){let t=this.props.sceneGraph.get(l);(null==t?void 0:t.simplifyInstancePanels)&&(e=ts.GR.DEFAULT_SIMPLIFIED)}this.setState({panelState:e})}}getStylePreviewThumbnailTitle(e,t){if(t)switch(e){case"FILL":return(0,T.t)("design_systems.styles.view_color_style");case"TEXT":return(0,T.t)("design_systems.styles.view_text_style");case"EFFECT":return(0,T.t)("design_systems.styles.view_effect_style");case"GRID":return(0,T.t)("design_systems.styles.view_grid_style");default:return(0,T.t)("design_systems.styles.view_style")}else switch(e){case"FILL":return(0,T.t)("design_systems.styles.edit_color_style");case"TEXT":return(0,T.t)("design_systems.styles.edit_text_style");case"EFFECT":return(0,T.t)("design_systems.styles.edit_effect_style");case"GRID":return(0,T.t)("design_systems.styles.edit_grid_style");default:return(0,T.t)("design_systems.styles.edit_style")}}shouldShowSitesPositionPanel(){return(0,nO.Vj)(this.props.selectedView)&&this.props.shownPanels[U.ibQ.SITES_POSITION_ITEM]}shouldShowSitesLinkPanel(){return(0,nO.Vj)(this.props.selectedView)&&this.props.shownPanels[U.ibQ.SITES_LINK_ITEM]}shouldShowSitesPageMetadataPanel(){return(0,nO.Vj)(this.props.selectedView)&&this.props.shownPanels[U.ibQ.SITES_PAGE_METADATA_ITEM]}shouldShowSitesCanvasOverlayPanel(){return(0,nO.Vj)(this.props.selectedView)&&(0,s.kc)().internal_only_debug_tools}shouldShowSitesAccessibilityPanel(){return(0,nO.Vj)(this.props.selectedView)&&this.props.shownPanels[U.ibQ.SITES_ACCESSIBILITY_ITEM]}shouldShowSitesResponsivenessPanel(){return(0,nO.Vj)(this.props.selectedView)&&this.props.shownPanels[U.ibQ.SITES_RESPONSIVENESS_ITEM]}shouldShowSitesHTMLWidgetPanel(){return(0,nO.Vj)(this.props.selectedView)&&this.props.shownPanels[U.ibQ.SITES_HTML_WIDGET_ITEM]}shouldShowSitesInteractionsPanel(){return(0,nO.Vj)(this.props.selectedView)&&this.props.shownPanels[U.ibQ.SITES_INTERACTIONS_ITEM]}shouldShowInstancePanel(){return this.props.shownPanels[U.ibQ.INSTANCE_ITEM]&&!this.isLiveObjectSelected()}shouldShowComponentPropertiesPanel(){return this.props.shownPanels[U.ibQ.COMPONENT_ITEM]&&!this.isStateSelected()}renderLoading(e){return l.createElement(ty.vL,{name:"propertiesPanel",focusOnMount:!0,handleKeyDown:this.onKeyDown},l.createElement(v.V,{className:i()(tc.Lp,{[tc.Ph]:this.props.isInsetEditorEnabled})},l.createElement(b.P,{ref:this.refMainScrollContainer,className:i()(tc.ux,tc.KE,O.Dm,{[tc.eu]:e,[tc.Ph]:this.props.isInsetEditorEnabled}),width:si.iP,hideScrollbar:!0,scrollingDisabled:!0},l.createElement("div",{className:tc.eh,"data-non-interactive":!0},l.createElement(t_.B,null))),this.props.stylePreviewShown.isShown&&this.renderStylePreviewModal()))}render(){var e;if(this.props.isLoading)return this.renderLoading(this.props.shouldAnimateLoadingState);let t=this.props.selectedStyleProperties&&(0,P.fn)(this.props.selectedStyleProperties.guid),n=!!(this.props.dropdownShown||(null==(e=this.props.pickerShown)?void 0:e.modal)),r=this.props.propertiesPanelTab,a=r===U.FAf.COMMENT,c=!this.isReadOnlyNonInspect(),p=(0,iS.P)(this.props.selectedView),d=!t||!n,u=!a&&d,m=(0,R.ft)(),h=l.createElement("div",{className:a&&c&&!p?tc.By:tc.eh,onMouseDown:m?void 0:this.onMouseDown,onPointerDown:m?this.onMouseDown:void 0,"data-non-interactive":!0},l.createElement(A.j9.Consumer,null,()=>this.renderPanelContent())),_=this.props.isUI3,y=(0,B.UK)().propertiesPanelSplitPosition.getCopy(),g=_?"number"==typeof y&&y>u$+1?y:u$+1:si.iP+1,f=_?`${(0,o.jz)(tU.M$q)}px`:"var(--spacer-2)",T=this.props.appModel.topLevelMode===$.lyf.HISTORY,w=_&&this.props.isCollapsed;return l.createElement(E.k,{name:"properties_panel",trackingEnabled:(0,s.kc)().trackable_properties||p,alsoTrack:()=>{let e=r===U.FAf.DESIGN?"design_view":"slide_view";return{pageId:(0,Z.Nf)(this.props.appModel),selectedNodeIds:Object.keys(this.props.sceneGraphSelection),panelMode:p?e:void 0}}},l.createElement(ty.vL,{name:"propertiesPanel",focusOnMount:!a,handleKeyDown:this.onKeyDown},l.createElement(to.lk.Provider,{value:this.showCreateStyleModal},l.createElement(v.V,{className:i()(tc.Lp,{[tc.R]:!this.props.appModel.showUi,[tc.dn]:w,[tc.Ph]:this.props.isInsetEditorEnabled,[tc.Fo]:"side_panel"===this.props.inProductHelpViewType}),style:{width:g,"--inProductHelpSidePanelWidth":`${this.props.inProductHelpSidePanelWidth}px`}},this.props.shouldShowBackgroundGradient&&!this.props.isInsetEditorEnabled&&l.createElement(S.T,{side:"right"}),l.createElement(uY.X,null,l.createElement(pc.l,{className:i()(tc.ux,O.Dm,{[tc.ew]:this.props.rulersVisible,[tc.Ph]:this.props.isInsetEditorEnabled}),onContextMenu:this.onContextMenu,"data-onboarding-key":"properties-panel",size:g,onResize:this.onResize,side:"left",animation:this.getRightPanelAnimation(g,f),"data-cancel-insertable-resource-drag-and-drop":!0},l.createElement(uz,{showRightSidebarPill:w},this.props.isUI3&&l.createElement(pp.qW,{openFile:this.props.openFile,dropdownShown:this.props.dropdownShown,multiplayer:this.props.multiplayer,user:this.props.user,isIntegration:(0,H.ck)(),selectedView:this.props.selectedView,recordingKey:this.props.recordingKey}),T&&l.createElement(tE.yU,{recordingKey:"versionHistoryView",isUI3:_}),!w&&!T&&l.createElement(s_,{activeTab:r,shouldRenderInspectTab:this.shouldRenderInspectTab(),shouldShowAlignControls:this.shouldShowAlignControls(),isUI3:this.props.isUI3,recordingKey:this.props.recordingKey}),!w&&!T&&(a?h:l.createElement("div",{className:tc.gq},l.createElement(b.P,{enableOverscroll:!0,key:this.props.propertiesPanelTab,ref:this.refMainScrollContainer,className:tc.jG,containerId:ts.rp,hideScrollbar:!u,onContextMenu:this.onContextMenu,scrollingDisabled:a||(t?n:!!this.props.dropdownShown)},h))),this.props.stylePreviewShown.isShown&&this.renderStylePreviewModal())))))))}}function uz({children:e,showRightSidebarPill:t}){let n=l.useRef(null);(0,K.C_)(n);let a=(0,r.U1)(n),o=(0,M.b)();return l.createElement("div",{ref:a,className:i()(tc.KE,{[tc.tM]:t,[tc.Ph]:o})},e)}function uX(e){return l.createElement(uW,{...e})}uW.displayName="PropertiesPanel"},841983:(e,t,n)=>{"use strict";n.d(t,{D:()=>u,N:()=>d});var l=n(411855),r=n(188507),a=n(356390),i=n(498606),o=n(677859),s=n(88220),c=n(426906);let p=["semi-bold","semi bold","bold","extra-bold","extra bold","black"];function d(e){return p.some(t=>e.toLowerCase().startsWith(t))}function u(){let e=(0,r.d4)(e=>d(e.mirror.selectionProperties.fontStyle?.toString()||"")),t=(0,r.d4)(e=>"STRIKETHROUGH"===e.mirror.selectionProperties.whiteboardTextDecoration);return l.createElement(l.Fragment,null,l.createElement(o.K0,{svg:s.A,tooltip:"toggle-bold",tooltipType:i.Ib.LOOKUP,active:e?"LOUD":void 0,onClick:()=>a.Y5.triggerActionInUserEditScope("toggle-bold"),recordingKey:"bold",role:"switch",blurOnClick:!0}),l.createElement(o.K0,{svg:c.A,tooltip:"text-toggle-strikethrough",tooltipType:i.Ib.LOOKUP,active:t?"LOUD":void 0,onClick:()=>a.Y5.triggerActionInUserEditScope("text-toggle-strikethrough"),recordingKey:"strikethrough",role:"switch",blurOnClick:!0}))}},927658:(e,t,n)=>{var l=n(33132)(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()});e.exports=l},727928:()=>{!function(e){var t=[/\b(?:async|sync|yield)\*/,/\b(?:abstract|assert|async|await|break|case|catch|class|const|continue|covariant|default|deferred|do|dynamic|else|enum|export|extends|extension|external|factory|final|finally|for|get|hide|if|implements|import|in|interface|library|mixin|new|null|on|operator|part|rethrow|return|set|show|static|super|switch|sync|this|throw|try|typedef|var|void|while|with|yield)\b/],n=/(^|[^\w.])(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,l={pattern:RegExp(n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}}}};e.languages.dart=e.languages.extend("clike",{"class-name":[l,{pattern:RegExp(n+/[A-Z]\w*(?=\s+\w+\s*[;,=()])/.source),lookbehind:!0,inside:l.inside}],keyword:t,operator:/\bis!|\b(?:as|is)\b|\+\+|--|&&|\|\||<<=?|>>=?|~(?:\/=?)?|[+\-*\/%&^|=!<>]=?|\?/}),e.languages.insertBefore("dart","string",{"string-literal":{pattern:/r?(?:("""|''')[\s\S]*?\1|(["'])(?:\\.|(?!\2)[^\\\r\n])*\2(?!\2))/,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$(?:\w+|\{(?:[^{}]|\{[^{}]*\})*\})/,lookbehind:!0,inside:{punctuation:/^\$\{?|\}$/,expression:{pattern:/[\s\S]+/,inside:e.languages.dart}}},string:/[\s\S]+/}},string:void 0}),e.languages.insertBefore("dart","class-name",{metadata:{pattern:/@\w+/,alias:"function"}}),e.languages.insertBefore("dart","class-name",{generics:{pattern:/<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<(?:[\w\s,.&?]|<[\w\s,.&?]*>)*>)*>)*>/,inside:{"class-name":l,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}}})}(Prism)}}]);

//# debugId=b14ea9c7-febc-5b74-9310-d7e379def8e0

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/75072bc10287ab000d90a3d087cbecca8aca5b64/properties_panel-2cd33b23528f0b88.min.js.map